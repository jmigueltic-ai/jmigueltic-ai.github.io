<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Protegido</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #app-frame { border: none; width: 100%; height: 100%; display: none; }
    </style>
</head>
<body class="bg-slate-900 flex items-center justify-center">

    <!-- Pantalla de Bloqueo -->
    <div id="login-screen" class="w-full max-w-md p-8 bg-white rounded-3xl shadow-2xl text-center mx-4 transition-all">
        <div class="mb-6">
            <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </div>
            <h2 class="text-2xl font-bold text-slate-800">Contenedor Seguro</h2>
            <p class="text-slate-500 text-sm mt-1">Introduce la contraseña para abrir tu aplicación</p>
        </div>

        <input type="password" id="entry-pass" autofocus
            class="w-full px-5 py-3 rounded-xl border-2 border-slate-100 focus:border-blue-500 outline-none text-center text-xl tracking-widest transition-all mb-4"
            placeholder="••••••••">

        <button onclick="checkAccess()" 
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all active:scale-95">
            DESBLOQUEAR
        </button>
        
        <p id="error-msg" class="text-red-500 text-sm mt-4 hidden">Contraseña incorrecta. Inténtalo de nuevo.</p>
    </div>

    <!-- El iFrame donde se cargará el contenido -->
    <iframe id="app-frame"></iframe>

    <script>
        const apps = {"1":{"p":"costes","c":"PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5Db250cm9sIGRlIENvc3RlcyBwb3IgT1Q8L3RpdGxlPg0KICAgIDwhLS0gTG9nbyBlIEljb25vcyAtLT4NCiAgICA8bGluayByZWw9Imljb24iIGhyZWY9Imh0dHBzOi8vbWVkaWEuZ2xhc3Nkb29yLmNvbS9zcWwvOTcwNTM0L2dydXBvLWNvYnJhLXNxdWFyZWxvZ28tMTU2NzU4MjUyMjkzOS5wbmciIHR5cGU9ImltYWdlL3BuZyI+DQogICAgPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uIiBocmVmPSJodHRwczovL21lZGlhLmdsYXNzZG9vci5jb20vc3FsLzk3MDUzNC9ncnVwby1jb2JyYS1zcXVhcmVsb2dvLTE1Njc1ODI1MjI5MzkucG5nIj4NCiAgICA8IS0tIFRhaWx3aW5kIENTUyAtLT4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tIj48L3NjcmlwdD4NCiAgICA8IS0tIExpYnJlcsOtYXMgcGFyYSBnZW5lcmFyIFBERiB5IFhMUyAoWExTWCBlcyBsYSBxdWUgdXNhcmVtb3MpIC0tPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qc3BkZi8yLjUuMS9qc3BkZi51bWQubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYtYXV0b3RhYmxlLzMuNS4yMy9qc3BkZi5wbHVnaW4uYXV0b3RhYmxlLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3hsc3gvMC4xOC41L3hsc3guZnVsbC5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDwhLS0gRnVlbnRlIEludGVyIC0tPg0KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+DQogICAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tIiBjcm9zc29yaWdpbj4NCiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRANDAwOzUwMDs2MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCiAgICA8c3R5bGU+DQogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsgfQ0KICAgICAgICAubW9kYWwtZW50ZXIgeyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2Utb3V0OyB9DQogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsNCiAgICAgICAgICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOyB9DQogICAgICAgICAgICB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0NCiAgICAgICAgfQ0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6IDhweDsgaGVpZ2h0OiA4cHg7IH0NCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7IGJhY2tncm91bmQ6ICNmMWYxZjE7IGJvcmRlci1yYWRpdXM6IDEwcHg7IH0NCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7IGJhY2tncm91bmQ6ICNhOGE4YTg7IGJvcmRlci1yYWRpdXM6IDEwcHg7IH0NCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7IGJhY2tncm91bmQ6ICM4ODg7IH0NCiAgICAgICAgLyogRXN0aWxvcyBwYXJhIGVsIGNhbXBvIGRlIG11bHRpLWNvbmNlcHRvICovDQogICAgICAgIC5jb25jZXB0by1pdGVtIHsgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4zcyBlYXNlLW91dDsgfQ0KICAgICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7DQogICAgICAgICAgICBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfQ0KICAgICAgICAgICAgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0NCiAgICAgICAgfQ0KICAgICAgICAvKiBPY3VsdGFyIGZsZWNoYXMgZW4gaW5wdXRbdHlwZT1udW1iZXJdICovDQogICAgICAgIGlucHV0W3R5cGU9bnVtYmVyXTo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiwNCiAgICAgICAgaW5wdXRbdHlwZT1udW1iZXJdOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uIHsNCiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsNCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgfQ0KICAgICAgICBpbnB1dFt0eXBlPW51bWJlcl0gew0KICAgICAgICAgICAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7DQogICAgICAgIH0NCiAgICANCiAgICAvKiBFc3RpbG9zIElBIEdlbWluaSB2Mi41ICovDQogICAgI2FpLWNoYXQtcGFuZWwgeyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC40cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwJSk7IHZpc2liaWxpdHk6IGhpZGRlbjsgfQ0KICAgICNhaS1jaGF0LXBhbmVsLm9wZW4geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IHZpc2liaWxpdHk6IHZpc2libGU7IH0NCiAgICAubWVzc2FnZS1haSB7IGJhY2tncm91bmQtY29sb3I6ICNmM2Y0ZjY7IGJvcmRlci1yYWRpdXM6IDAuOHJlbSAwLjhyZW0gMC44cmVtIDA7IGNvbG9yOiAjMWYyOTM3OyBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0OyBtYXgtd2lkdGg6IDg1JTsgYm9yZGVyOiAxcHggc29saWQgI2U1ZTdlYjsgfQ0KICAgIC5tZXNzYWdlLXVzZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjM2I4MmY2OyBjb2xvcjogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDAuOHJlbSAwLjhyZW0gMCAwLjhyZW07IGFsaWduLXNlbGY6IGZsZXgtZW5kOyBtYXgtd2lkdGg6IDg1JTsgfQ0KICAgICNhaS1tZXNzYWdlczo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDogNHB4OyB9DQogICAgI2FpLW1lc3NhZ2VzOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7IGJhY2tncm91bmQ6ICNjYmQ1ZTE7IGJvcmRlci1yYWRpdXM6IDEwcHg7IH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHkgY2xhc3M9ImJnLWdyYXktMTAwIHRleHQtZ3JheS04MDAiPg0KDQogICAgPGRpdiBpZD0iYWktY2hhdC1wYW5lbCIgY2xhc3M9ImZpeGVkIHJpZ2h0LTAgdG9wLTAgaC1mdWxsIHctOTYgYmctd2hpdGUgc2hhZG93LTJ4bCB6LVs5OTldIGJvcmRlci1sIGJvcmRlci1ncmF5LTIwMCBmbGV4IGZsZXgtY29sIGZvbnQtc2FucyI+DQogICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJnLWluZGlnby05MDAgdGV4dC13aGl0ZSI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctaW5kaWdvLTUwMCBwLTEuNSByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciI+DQogICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC01IHctNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMyAxMFYzTDQgMTRoN3Y3bDktMTFoLTd6IiAvPjwvc3ZnPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQgYmxvY2sgdGV4dC1zbSBpdGFsaWMiPkFzaXN0ZW50ZSBJQSBJbmR1c3RyaWFsPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1bOXB4XSB0ZXh0LWluZGlnby0yMDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBmb250LWJvbGQiPlByb2Nlc2FtaWVudG8gSW50ZWxpZ2VudGU8L3NwYW4+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImNsb3NlLWFpLWJ0biIgY2xhc3M9ImhvdmVyOmJnLWluZGlnby04MDAgcC0yIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWNvbG9ycyI+DQogICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJoLTUgdy01IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYgMThMMTggNk02IDZsMTIgMTIiIC8+PC9zdmc+DQogICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9ImFpLW1lc3NhZ2VzIiBjbGFzcz0iZmxleC1ncm93IHAtNCBvdmVyZmxvdy15LWF1dG8gZmxleCBmbGV4LWNvbCBnYXAtNCBiZy1zbGF0ZS01MCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtZXNzYWdlLWFpIHAtMyB0ZXh0LXhzIHNoYWRvdy1zbSI+DQogICAgICAgICAgICAgICAgSG9sYS4gQWhvcmEgdGVuZ28gYWNjZXNvIGEgdG9kb3MgbG9zIGRhdG9zIGRlIGhvcmFzIHByb2R1Y3RpdmFzLCBpbXByb2R1Y3RpdmFzIHkgZ2FzdG9zIHBvciBjYXRlZ29yw61hIGRlIGNhZGEgT1QuIMK/UXXDqSBxdWllcmVzIGFuYWxpemFyPw0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIGJnLXdoaXRlIHNoYWRvdy1pbm5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi0zIj4NCiAgICAgICAgICAgICAgICA8IS0tIENvbmZpZ3VyYWNpw7NuIEFQSSBLZXkgT2N1bHRhIEludGVybmFtZW50ZSAtLT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiI+DQogICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJhaS1pbnB1dCIgcm93cz0iMiIgcGxhY2Vob2xkZXI9IlByZWfDum50YW1lIHNvYnJlIGxhcyBob3JhcyBvIGNvc3Rlcy4uLiIgY2xhc3M9ImZsZXgtZ3JvdyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQteGwgcC0zIHRleHQtc20gdGV4dC1ncmF5LTgwMCByZXNpemUtbm9uZSBvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCBiZy1ncmF5LTUwIHNoYWRvdy1pbm5lciI+PC90ZXh0YXJlYT4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZW5kLWFpLWJ0biIgY2xhc3M9ImJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBwLTMgcm91bmRlZC14bCBob3ZlcjpiZy1pbmRpZ28tNzAwIHNoYWRvdy1tZCB0cmFuc2l0aW9uLWFsbCBzZWxmLWVuZCI+DQogICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC01IHctNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMiAxOWw5IDItOS0xOC05IDE4IDktMnptMCAwdi04IiAvPjwvc3ZnPg0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0iYXBwIiBjbGFzcz0iZmxleCBoLXNjcmVlbiI+DQogICAgICAgIDwhLS0gUGFuZWwgTGF0ZXJhbCAtLT4NCiAgICAgICAgPGFzaWRlIGNsYXNzPSJ3LTY0IGJnLXdoaXRlLzgwIGJhY2tkcm9wLWJsdXItc20gYm9yZGVyLXIgYm9yZGVyLWdyYXktMjAwLzUwIHAtNiBmbGV4IGZsZXgtY29sIGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWNlbnRlciBtYi00Ij4NCiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9hcmVwbGEuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzA1L2xvZ29zLW1vbmNvYnJhLmpwZyIgYWx0PSJMb2dvIENvYnJhIiBjbGFzcz0iaC0yNiB3LWF1dG8iPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxoMSBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtYmx1ZS05MDAgbWItNiI+Q29udHJvbCBkZSBDb3N0ZXM8L2gxPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8ZGl2IGlkPSJxdWljay1hY3Rpb25zIiBjbGFzcz0iYm9yZGVyLXQgcHQtNCBtdC00IHNwYWNlLXktMiI+DQogICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LWdyYXktODAwIG1iLTIiPlJlZ2lzdHJvcyBNYWVzdHJvczwvaDI+DQogICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImFkZC1vdC1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2t5LTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbSBweS0yIHB4LTMgcm91bmRlZC1sZyBob3ZlcjpiZy1za3ktNzAwIHRyYW5zaXRpb24tY29sb3JzIHRleHQtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgQcOxYWRpciBPVA0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KDQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ib3Blbi1haS1idG4iIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InctZnVsbCBiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHRleHQtc20gcHktMyBweC0zIHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTcwMCB0cmFuc2l0aW9uLWFsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiBtdC00IHNoYWRvdy1tZCI+DQogICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC01IHctNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMyAxMFYzTDQgMTRoN3Y3bDktMTFoLTd6IiAvPjwvc3ZnPg0KICAgICAgICAgICAgICAgICAgICBBU0lTVEVOVEUgSUENCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC1hdXRvIGJvcmRlci10IHB0LTQgc3BhY2UteS0yIj4NCiAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iaW1wb3J0LWJ0biIgY2xhc3M9InctZnVsbCBiZy1zbGF0ZS03MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNsYXRlLTgwMCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctc20gdGV4dC1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICBJbXBvcnRhciBkZXNkZSBKU09ODQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ic2F2ZS1jaGFuZ2VzLWJ0biIgY2xhc3M9InctZnVsbCBiZy1zbGF0ZS03MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNsYXRlLTgwMCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctc20gdGV4dC1jZW50ZXIgaGlkZGVuIj4NCiAgICAgICAgICAgICAgICAgICAgR3VhcmRhciBDYW1iaW9zDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnQtZmlsZS1pbnB1dCIgY2xhc3M9ImhpZGRlbiIgYWNjZXB0PSIuanNvbiI+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9hc2lkZT4NCg0KICAgICAgICA8IS0tIMOBcmVhIFByaW5jaXBhbCAtLT4NCiAgICAgICAgPG1haW4gaWQ9Im1haW4tY29udGVudCIgY2xhc3M9ImZsZXgtZ3JvdyBwLTggZmxleCBmbGV4LWNvbCBiZy1ncmF5LTUwLzUwIG92ZXJmbG93LXktYXV0byI+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDwhLS0gVmlzdGEgZGUgw5NyZGVuZXMgZGUgVHJhYmFqbyAoT1RzKSAtLT4NCiAgICAgICAgICAgIDxkaXYgaWQ9Im90LXZpZXciIGNsYXNzPSJoLWZ1bGwgZmxleCBmbGV4LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTYiPg0KICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIj7Dk3JkZW5lcyBkZSBUcmFiYWpvPC9oMj4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InNlYXJjaCIgaWQ9InNlYXJjaC1vdC1pbnB1dCIgcGxhY2Vob2xkZXI9IkJ1c2NhciBPVC4uLiIgY2xhc3M9InctMS8zIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im90LWxpc3QtY29udGFpbmVyIiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyB4bDpncmlkLWNvbHMtNCBnYXAtNiI+DQogICAgICAgICAgICAgICAgICAgIDwhLS0gTGFzIHRhcmpldGFzIGRlIE9UIHNlIGdlbmVyYXLDoW4gYXF1w60gLS0+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPCEtLSBWaXN0YSBkZSBSZWdpc3Ryb3MgZGUgdW5hIE9UIC0tPg0KICAgICAgICAgICAgPGRpdiBpZD0icmVnaXN0cm8tdmlldyIgY2xhc3M9ImgtZnVsbCBmbGV4IGZsZXgtY29sIGhpZGRlbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTYgZmxleC13cmFwIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYmFjay10by1vdHMtYnRuIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbGFycjsgVm9sdmVyIGEgT1RzDQogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBpZD0icmVnaXN0cm8tdmlldy10aXRsZSIgY2xhc3M9InRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIj48L2gyPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJpbXBvcnQtZ2FzdG8tY3Vyc28tYnRuIiBjbGFzcz0iYmctb3JhbmdlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6Ymctb3JhbmdlLTcwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1wb3J0YXIgZ2FzdG8gZW4gY3Vyc28NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iaW1wb3J0LWhvcmFzLWJ0biIgY2xhc3M9ImJnLXRlYWwtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy10ZWFsLTcwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1wb3J0YXIgSG9yYXMgKEpTT04pDQogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gKioqKiBCT1TDk04gQcORQURJRE8gKioqKiAtLT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImV4cG9ydC1leGNlbC1idG4iIGNsYXNzPSJiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyZWVuLTcwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhwb3J0YXIgRXhjZWwNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYWRkLXJlZ2lzdHJvLWJ0biIgY2xhc3M9ImJnLXNreS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNreS03MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgQcOxYWRpciBSZWdpc3Rybw0KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnQtaG9yYXMtanNvbi1pbnB1dCIgY2xhc3M9ImhpZGRlbiIgYWNjZXB0PSIuanNvbiI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC1ncm93IGJnLXdoaXRlLzgwIGJhY2tkcm9wLWJsdXItc20gcm91bmRlZC1sZyBzaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icmVnaXN0cm8tdGFibGUtY29udGFpbmVyIiBjbGFzcz0ib3ZlcmZsb3ctYXV0byBoLWZ1bGwiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBMYSB0YWJsYSBkZSByZWdpc3Ryb3Mgc2UgZ2VuZXJhcsOhIGFxdcOtIC0tPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L21haW4+DQogICAgPC9kaXY+DQoNCiAgICA8IS0tIE1PREFMRVMgLS0+DQoNCiAgICA8IS0tIE1vZGFsIHBhcmEgQcOxYWRpci9FZGl0YXIgT1QgLS0+DQogICAgPGRpdiBpZD0ib3QtbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctbWQgbW9kYWwtZW50ZXIiPg0KICAgICAgICAgICAgPGgzIGlkPSJvdC1tb2RhbC10aXRsZSIgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi02IHRleHQtYmx1ZS05MDAiPjwvaDM+DQogICAgICAgICAgICA8Zm9ybSBpZD0ib3QtZm9ybSIgY2xhc3M9InNwYWNlLXktNCI+DQogICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ib3Qtbm9tYnJlIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Ob21icmUgZGUgbGEgT1Q8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im90LW5vbWJyZSIgcmVxdWlyZWQgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCIgcGxhY2Vob2xkZXI9IkVqOiAwMDEuNSI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Zvcm0+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktZW5kIHNwYWNlLXgtNCBtdC04Ij4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNhbmNlbC1vdC1idG4iIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMiPkNhbmNlbGFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJzYXZlLW90LWJ0biIgY2xhc3M9ImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyI+R3VhcmRhcjwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPCEtLSBNb2RhbCBwYXJhIEHDsWFkaXIvRWRpdGFyIFJlZ2lzdHJvIGRlIENvc3RlIC0tPg0KICAgIDxkaXYgaWQ9InJlZ2lzdHJvLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotNTAiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LTR4bCBtb2RhbC1lbnRlciBmbGV4IGZsZXgtY29sIG1heC1oLVs5NXZoXSI+DQogICAgICAgICAgICA8aDMgaWQ9InJlZ2lzdHJvLW1vZGFsLXRpdGxlIiBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC1ibHVlLTkwMCBmbGV4LXNocmluay0wIj48L2gzPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8Zm9ybSBpZD0icmVnaXN0cm8tZm9ybSIgY2xhc3M9InNwYWNlLXktNiBmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHByLTQiPg0KICAgICAgICAgICAgICAgIDwhLS0gRmlsYSAxOiBGZWNoYSB5IEhvcmFzIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTQgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icmVnaXN0cm8tZmVjaGEiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkZlY2hhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0icmVnaXN0cm8tZmVjaGEiIHJlcXVpcmVkIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InJlZ2lzdHJvLWhvcmFzIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Ib3JhcyBUcmFiYWphZG9yZXM8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InJlZ2lzdHJvLWhvcmFzIiBzdGVwPSIwLjUiIG1pbj0iMCIgcmVxdWlyZWQgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCIgcGxhY2Vob2xkZXI9IjAuMCI+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icmVnaXN0cm8tcHJlY2lvLWhvcmFzIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5QcmVjaW8gSG9yYXM8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJyZWdpc3Ryby1wcmVjaW8taG9yYXMiIHJlYWRvbmx5IGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gYmctZ3JheS0yMDAgY3Vyc29yLW5vdC1hbGxvd2VkIiBwbGFjZWhvbGRlcj0iMC4wMCDigqwiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InJlZ2lzdHJvLWNvbWlkYSIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+Q29taWRhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icmVnaXN0cm8tY29taWRhIiByZWFkb25seSBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCIgcGxhY2Vob2xkZXI9IjAuMDAg4oKsIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8IS0tIENhbXBvcyBkZSBNdWx0aS1Db25jZXB0byAtLT4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJtdWx0aS1jb25jZXB0LWdyaWQiIGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC02IHB0LTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICA8IS0tIFNlIGdlbmVyYXLDoW4gZGluw6FtaWNhbWVudGUgLS0+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgPCEtLSBTZWNjacOzbiBwYXJhIEFscXVpbGVyZXMgKE1hbnVhbC9BdXRvKSAtLT4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwdC00IGJvcmRlci10Ij4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZ3J1cG9zLXNvbC10b3RhbC1pbnB1dCIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS04MDAiPkdydXBvcyBzb2wuIENvbXByZXNvciBHYXNvbGluYSBWZWhpY3Vsb3M8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIGlkPSJncnVwb3Mtc29sLXRvdGFsLWlucHV0IiBjbGFzcz0iZmxleC1ncm93IGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiIHBsYWNlaG9sZGVyPSIwLjAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iZ2VzdGlvbmFyLWFscXVpbGVyLWJ0biIgY2xhc3M9ImJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWluZGlnby03MDAgZmxleC1zaHJpbmstMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VzdGlvbmFyIChBdXRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgPCEtLSAqKioqIE5VRVZBIFNFQ0NJw5NOOiBHcsO6YSBvIENhbWnDs24gKE1hbnVhbC9BdXRvKSAqKioqIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InB0LTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJncnVhLWNhbWlvbi10b3RhbC1pbnB1dCIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS04MDAiPkdyw7phIG8gQ2FtacOzbjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9ImdydWEtY2FtaW9uLXRvdGFsLWlucHV0IiBjbGFzcz0iZmxleC1ncm93IGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiIHBsYWNlaG9sZGVyPSIwLjAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iZ2VzdGlvbmFyLWdydWEtYnRuIiBjbGFzcz0iYmctaW5kaWdvLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTcwMCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHZXN0aW9uYXIgKEF1dG8pDQogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPCEtLSAqKioqIEZJTiBERSBMQSBOVUVWQSBTRUNDScOTTiAqKioqIC0tPg0KDQogICAgICAgICAgICA8L2Zvcm0+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTggZmxleC1zaHJpbmstMCI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjYW5jZWwtcmVnaXN0cm8tYnRuIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIj5DYW5jZWxhcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0ic2F2ZS1yZWdpc3Ryby1idG4iIGNsYXNzPSJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiPkd1YXJkYXI8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICANCiAgICA8IS0tIE1vZGFsIHBhcmEgdmVyIERldGFsbGVzIGRlIENvbmNlcHRvcyAtLT4NCiAgICA8ZGl2IGlkPSJ2aWV3LWRldGFsbGVzLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotNTAiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LWxnIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzcwdmhdIj4NCiAgICAgICAgICAgIDxoMyBpZD0iZGV0YWxsZXMtbW9kYWwtdGl0bGUiIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWJsdWUtOTAwIGZsZXgtc2hyaW5rLTAiPjwvaDM+DQogICAgICAgICAgICA8ZGl2IGlkPSJkZXRhbGxlcy1tb2RhbC1jb250ZW50IiBjbGFzcz0iZmxleC1ncm93IG92ZXJmbG93LXktYXV0byBzcGFjZS15LTIiPg0KICAgICAgICAgICAgICAgIDwhLS0gRGV0YWxsZXMgc2UgY2FyZ2Fyw6FuIGFxdcOtIC0tPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktZW5kIHNwYWNlLXgtNCBtdC02IGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY2xvc2UtZGV0YWxsZXMtbW9kYWwiIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAiPkNlcnJhcjwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPCEtLSBNb2RhbCBkZSBHZXN0acOzbiBkZSBBbHF1aWxlcmVzIC0tPg0KICAgIDxkaXYgaWQ9ImFscXVpbGVyLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzYwXSI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctM3hsIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzk1dmhdIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAiPkdlc3Rpb25hciBBbHF1aWxlcmVzPC9oMz4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InVwZGF0ZS1wcmVjaW9zLWJ0biIgY2xhc3M9InRleHQtc20gYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtMyByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj4NCiAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphciBkYXRvcyBwYXJhIG51ZXZvIGHDsW8NCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8Zm9ybSBpZD0iYWxxdWlsZXItZm9ybSIgY2xhc3M9InNwYWNlLXktNCBmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHByLTIgbXQtNiI+DQogICAgICAgICAgICAgICAgPCEtLSBGaWxhIDE6IFNlbGVjY2nDs24gZGUgRW1wcmVzYSB5IEHDsW8gLS0+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJhbHF1aWxlci1lbXByZXNhIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5FbXByZXNhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFscXVpbGVyLWVtcHJlc2EiIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1pbmRpZ28tNTAwIGZvY3VzOmJvcmRlci1pbmRpZ28tNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIE9wY2lvbmVzIGRlIGVtcHJlc2Egc2UgY2FyZ2Fyw6FuIGFxdcOtIC0tPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iYWxxdWlsZXItYW5vIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Bw7FvIGRlIFByZWNpb3M8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWxxdWlsZXItYW5vIiBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctaW5kaWdvLTUwMCBmb2N1czpib3JkZXItaW5kaWdvLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBPcGNpb25lcyBkZSBhw7FvIHNlIGNhcmdhcsOhbiBhcXXDrSAtLT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LWdyYXktNjAwIHRleHQtY2VudGVyIHB5LTIiPlByZWNpb3MgZGVsIGHDsW8gPHNwYW4gaWQ9ImFscXVpbGVyLWFuby1kaXNwbGF5IiBjbGFzcz0iZm9udC1ib2xkIj4yMDI1PC9zcGFuPjwvcD4NCg0KICAgICAgICAgICAgICAgIDwhLS0gRmlsYSAyOiBNYXF1aW5hcmlhIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InB0LTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwIG1iLTIiPk1hcXVpbmFyaWE8L2g0Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iYWxxdWlsZXItaXRlbS1kZXNjcmlwY2lvbiIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+RGVzY3JpcGNpw7NuPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJhbHF1aWxlci1pdGVtLWRlc2NyaXBjaW9uIiBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctaW5kaWdvLTUwMCBmb2N1czpib3JkZXItaW5kaWdvLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gT3BjaW9uZXMgZGUgaXRlbXMgc2UgY2FyZ2Fyw6FuIGFxdcOtIC0tPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImFscXVpbGVyLWl0ZW0tcHJlY2lvLWRpYSIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+UHJlY2lvL2TDrWEgbGFib3JhYmxlPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImFscXVpbGVyLWl0ZW0tcHJlY2lvLWRpYSIgcmVhZG9ubHkgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBiZy1ncmF5LTIwMCBjdXJzb3Itbm90LWFsbG93ZWQiIHBsYWNlaG9sZGVyPSIwLjAwIOKCrCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImFscXVpbGVyLWl0ZW0tZGlhcyIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+RMOtYXMgZGUgdXNvPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iYWxxdWlsZXItaXRlbS1kaWFzIiBtaW49IjAiIHN0ZXA9IjAuNSIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiIHBsYWNlaG9sZGVyPSIwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1yaWdodCBtdC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPlN1YnRvdGFsIE1hcXVpbmFyaWE6PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImFscXVpbGVyLXN1YnRvdGFsLW1hcXVpbmFyaWEiIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1sLTIiPjAuMDAg4oKsPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICA8IS0tIEZpbGEgMzogQ29tYnVzdGlibGUgLS0+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icHQtNCBib3JkZXItdCI+DQogICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWItMiI+Q29tYnVzdGlibGU8L2g0Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iYWxxdWlsZXItY29tYnVzdGlibGUtcHJlY2lvLWxpdHJvIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5QcmVjaW8gTGl0cm8gQ29tYnVzdGlibGU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYWxxdWlsZXItY29tYnVzdGlibGUtcHJlY2lvLWxpdHJvIiByZWFkb25seSBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCIgcGxhY2Vob2xkZXI9IjAuMDAg4oKsIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJhbHF1aWxlci1jb21idXN0aWJsZS1saXRyb3MiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkxpdHJvczwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImFscXVpbGVyLWNvbWJ1c3RpYmxlLWxpdHJvcyIgbWluPSIwIiBzdGVwPSIwLjAxIiBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctaW5kaWdvLTUwMCBmb2N1czpib3JkZXItaW5kaWdvLTUwMCIgcGxhY2Vob2xkZXI9IjAuMCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtcmlnaHQgbXQtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5TdWJ0b3RhbCBDb21idXN0aWJsZTo8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iYWxxdWlsZXItc3VidG90YWwtY29tYnVzdGlibGUiIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1sLTIiPjAuMDAg4oKsPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPC9mb3JtPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8IS0tICoqKiogTlVFVkEgU0VDQ0nDk046IFJlc3VtZW4gZGUgSXRlbXMgQcOxYWRpZG9zICoqKiogLS0+DQogICAgICAgICAgICA8ZGl2IGlkPSJhbHF1aWxlci1zdW1tYXJ5LWxpc3QtY29udGFpbmVyIiBjbGFzcz0ibXQtNiBib3JkZXItdCBwdC00IG1heC1oLTQwIG92ZXJmbG93LXktYXV0byBwci0yIHNwYWNlLXktMiI+DQogICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCBtYi0yIj5JdGVtcyBBw7FhZGlkb3M8L2g0Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFscXVpbGVyLXN1bW1hcnktbGlzdCI+DQogICAgICAgICAgICAgICAgICAgIDwhLS0gSXRlbXMgc2UgZ2VuZXJhcsOhbiBhcXXDrSAtLT4NCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTUwMCBpdGFsaWMiPk5vIHNlIGhhbiBhw7FhZGlkbyBpdGVtcy48L3A+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwhLS0gKioqKiBGSU4gREUgTEEgTlVFVkEgU0VDQ0nDk04gKioqKiAtLT4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPCEtLSBGb290ZXI6IFRvdGFsIHkgQm90b25lcyAtLT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtdC04IGZsZXgtc2hyaW5rLTAgcHQtNCBib3JkZXItdCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1sZWZ0Ij4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+VE9UQUw6PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iYWxxdWlsZXItdG90YWwiIGNsYXNzPSJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1pbmRpZ28tOTAwIG1sLTIiPjAuMDAg4oKsPC9zcGFuPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggc3BhY2UteC00Ij4NCiAgICAgICAgICAgICAgICAgICAgPCEtLSAqKioqIE1PRElGSUNBRE8gKioqKiAtLT4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjbG9zZS1hbHF1aWxlci1tb2RhbC1idG4iIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAiPkhlY2hvPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iYWRkLWFscXVpbGVyLWl0ZW0tYnRuIiBjbGFzcz0iYmctaW5kaWdvLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTcwMCI+QcOxYWRpciBJdGVtPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgDQogICAgPCEtLSBNb2RhbCBkZSBBY3R1YWxpemFjacOzbiBkZSBQcmVjaW9zIChBbHF1aWxlcmVzKSAtLT4NCiAgICA8ZGl2IGlkPSJ1cGRhdGUtcHJlY2lvcy1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS02MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LVs3MF0iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LTR4bCBtb2RhbC1lbnRlciBmbGV4IGZsZXgtY29sIG1heC1oLVs5NXZoXSI+DQogICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi00IHRleHQtZ3JheS05MDAgZmxleC1zaHJpbmstMCI+QWN0dWFsaXphciBQcmVjaW9zIGRlIEFscXVpbGVyPC9oMz4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMyBnYXAtNCBtYi00IGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJ1cGRhdGUtcHJlY2lvcy1lbXByZXNhIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5FbXByZXNhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ1cGRhdGUtcHJlY2lvcy1lbXByZXNhIiByZWFkb25seSBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0idXBkYXRlLXByZWNpb3MtYW5vLWJhc2UiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPlByZWNpb3MgYmFzZSBkZWwgYcOxbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idXBkYXRlLXByZWNpb3MtYW5vLWJhc2UiIHJlYWRvbmx5IGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gYmctZ3JheS0yMDAgY3Vyc29yLW5vdC1hbGxvd2VkIj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0idXBkYXRlLXByZWNpb3MtbnVldm8tYW5vIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Bw7FvIGRlIFByZWNpb3MgKE51ZXZvIG8gYSBFZGl0YXIpPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InVwZGF0ZS1wcmVjaW9zLW51ZXZvLWFubyIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCIgcGxhY2Vob2xkZXI9IkVqOiAyMDI1Ij4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8Zm9ybSBpZD0idXBkYXRlLXByZWNpb3MtZm9ybSIgY2xhc3M9InNwYWNlLXktMyBmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHByLTIgYm9yZGVyLXQgcHQtNCI+DQogICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCI+UHJlY2lvcyBkZSBNYXF1aW5hcmlhPC9oND4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ1cGRhdGUtcHJlY2lvcy1pdGVtcy1saXN0IiBjbGFzcz0ic3BhY2UteS0yIj4NCiAgICAgICAgICAgICAgICAgICAgPCEtLSBMaXN0YSBkZSBpbnB1dHMgZGUgcHJlY2lvcyBzZSBjYXJnYXLDoSBhcXXDrSAtLT4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwIHB0LTQgYm9yZGVyLXQgbXQtNCI+UHJlY2lvIGRlIENvbWJ1c3RpYmxlPC9oND4NCiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNCI+DQogICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJ1cGRhdGUtcHJlY2lvcy1jb21idXN0aWJsZS1saXRybyIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+UHJlY2lvIExpdHJvIENvbWJ1c3RpYmxlICjigqwvbGl0cm8pPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0idXBkYXRlLXByZWNpb3MtY29tYnVzdGlibGUtbGl0cm8iIG1pbj0iMCIgc3RlcD0iMC4wMSIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCIgcGxhY2Vob2xkZXI9IjAuMDAiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Zvcm0+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTggZmxleC1zaHJpbmstMCI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjYW5jZWwtdXBkYXRlLXByZWNpb3MtYnRuIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5DYW5jZWxhcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0ic2F2ZS11cGRhdGUtcHJlY2lvcy1idG4iIGNsYXNzPSJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAiPkd1YXJkYXIgTnVldm9zIFByZWNpb3M8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICANCiAgICA8IS0tIE1vZGFsIGRlIEdlc3Rpw7NuIGRlIEdyw7phL0NhbWnDs24gKEV1cm9ncnVhcykgLS0+DQogICAgPGRpdiBpZD0iZ3J1YS1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LVs2MF0iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LTN4bCBtb2RhbC1lbnRlciBmbGV4IGZsZXgtY29sIG1heC1oLVs5NXZoXSI+DQogICAgICAgICAgICA8IS0tICoqKiogTU9ESUZJQ0FETzogQcOxYWRpZG8gYm90w7NuIGRlIGFjdHVhbGl6YXIgKioqKiAtLT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAiPkdlc3Rpb25hciBHcsO6YS9DYW1pw7NuPC9oMz4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InVwZGF0ZS1wcmVjaW9zLWdydWEtYnRuIiBjbGFzcz0idGV4dC1zbSBiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC0zIHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAiPg0KICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyIGRhdG9zIHBhcmEgbnVldm8gYcOxbw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxmb3JtIGlkPSJncnVhLWZvcm0iIGNsYXNzPSJzcGFjZS15LTQgZmxleC1ncm93IG92ZXJmbG93LXktYXV0byBwci0yIG10LTYiPg0KICAgICAgICAgICAgICAgIDwhLS0gKioqKiBNT0RJRklDQURPOiBBw7FhZGlkb3Mgc2VsZWN0b3JlcyBkZSBFbXByZXNhIHkgQcOxbyAqKioqIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZ3J1YS1lbXByZXNhIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5FbXByZXNhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImdydWEtZW1wcmVzYSIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gT3BjaW9uZXMgc2UgY2FyZ2Fyw6FuIGNvbiBKUyAtLT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImdydWEtYW5vIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Bw7FvIGRlIFByZWNpb3M8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZ3J1YS1hbm8iIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1pbmRpZ28tNTAwIGZvY3VzOmJvcmRlci1pbmRpZ28tNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIE9wY2lvbmVzIHNlIGNhcmdhcsOhbiBjb24gSlMgLS0+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8IS0tIEZpbGEgMTogU2VsZWNjacOzbiBkZSBJdGVtIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InB0LTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJncnVhLWl0ZW0tZGVzY3JpcGNpb24iIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkRlc2NyaXBjacOzbjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImdydWEtaXRlbS1kZXNjcmlwY2lvbiIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBPcGNpb25lcyBzZSBjYXJnYXLDoW4gY29uIEpTIC0tPg0KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICA8IS0tIEZpbGEgMjogSW5wdXRzIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZ3J1YS1pdGVtLWhvcmFzIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Ib3JhcyBkZSBzZXJ2aWNpbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ3J1YS1pdGVtLWhvcmFzIiBtaW49IjAiIHN0ZXA9IjAuNSIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiIHBsYWNlaG9sZGVyPSIwIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtZW5kIHBiLTIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdydWEtaXRlbS1yZWNhcmdvIiBjbGFzcz0iaC00IHctNCB0ZXh0LWluZGlnby02MDAgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgZm9jdXM6cmluZy1pbmRpZ28tNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJncnVhLWl0ZW0tcmVjYXJnbyIgY2xhc3M9Im1sLTIgYmxvY2sgdGV4dC1zbSB0ZXh0LWdyYXktOTAwIj5BcGxpY2FyIFJlY2FyZ28gcG9yIEhvcmEgKE3DrW4uIDhoKTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIDwhLS0gRmlsYSAzOiBEZXRhbGxlcyAoUmVhZG9ubHkpIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTQgZ2FwLTQgcHQtNCBib3JkZXItdCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCI+UHJlY2lvL0hvcmE8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJncnVhLWRpc3BsYXktcHJlY2lvIiByZWFkb25seSBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCIgcGxhY2Vob2xkZXI9IjAuMDAg4oKsIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAiPkNvc3RlIFNhbGlkYTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImdydWEtZGlzcGxheS1zYWxpZGEiIHJlYWRvbmx5IGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gYmctZ3JheS0yMDAgY3Vyc29yLW5vdC1hbGxvd2VkIiBwbGFjZWhvbGRlcj0iMC4wMCDigqwiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIj5TZXJ2LiBNw61uaW1vIChIb3Jhcyk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJncnVhLWRpc3BsYXktbWluaW1vIiByZWFkb25seSBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCIgcGxhY2Vob2xkZXI9IjBoIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCI+SG9yYXMgYSBDb2JyYXI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJncnVhLWRpc3BsYXktaG9yYXMtY29icmFyIiByZWFkb25seSBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCIgcGxhY2Vob2xkZXI9IjBoIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Zvcm0+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDwhLS0gKioqKiBOVUVWQSBTRUNDScOTTjogUmVzdW1lbiBkZSBJdGVtcyBBw7FhZGlkb3MgKioqKiAtLT4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImdydWEtc3VtbWFyeS1saXN0LWNvbnRhaW5lciIgY2xhc3M9Im10LTYgYm9yZGVyLXQgcHQtNCBtYXgtaC00MCBvdmVyZmxvdy15LWF1dG8gcHItMiBzcGFjZS15LTIiPg0KICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWItMiI+SXRlbXMgQcOxYWRpZG9zPC9oND4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJncnVhLXN1bW1hcnktbGlzdCI+DQogICAgICAgICAgICAgICAgICAgIDwhLS0gSXRlbXMgc2UgZ2VuZXJhcsOhbiBhcXXDrSAtLT4NCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTUwMCBpdGFsaWMiPk5vIHNlIGhhbiBhw7FhZGlkbyBpdGVtcy48L3A+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwhLS0gKioqKiBGSU4gREUgTEEgTlVFVkEgU0VDQ0nDk04gKioqKiAtLT4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPCEtLSBGb290ZXI6IFRvdGFsIHkgQm90b25lcyAtLT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtdC04IGZsZXgtc2hyaW5rLTAgcHQtNCBib3JkZXItdCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1sZWZ0Ij4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+VE9UQUw6PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iZ3J1YS10b3RhbCIgY2xhc3M9InRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAgbWwtMiI+MC4wMCDigqw8L3NwYW4+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBzcGFjZS14LTQiPg0KICAgICAgICAgICAgICAgICAgICA8IS0tICoqKiogTU9ESUZJQ0FETyAqKioqIC0tPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNsb3NlLWdydWEtbW9kYWwtYnRuIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5IZWNobzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImFkZC1ncnVhLWl0ZW0tYnRuIiBjbGFzcz0iYmctaW5kaWdvLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTcwMCI+QcOxYWRpciBJdGVtPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgDQogICAgPCEtLSAqKioqIE5VRVZPIE1PREFMOiBBY3R1YWxpemFjacOzbiBkZSBQcmVjaW9zIGRlIEdyw7phL0NhbWnDs24gKioqKiAtLT4NCiAgICA8ZGl2IGlkPSJ1cGRhdGUtcHJlY2lvcy1ncnVhLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTYwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzcwXSI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctNXhsIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzk1dmhdIj4NCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ncmF5LTkwMCBmbGV4LXNocmluay0wIj5BY3R1YWxpemFyIFByZWNpb3MgZGUgR3LDumEvQ2FtacOzbjwvaDM+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTQgbWItNCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0idXBkYXRlLXByZWNpb3MtZ3J1YS1lbXByZXNhIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5FbXByZXNhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ1cGRhdGUtcHJlY2lvcy1ncnVhLWVtcHJlc2EiIHJlYWRvbmx5IGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gYmctZ3JheS0yMDAgY3Vyc29yLW5vdC1hbGxvd2VkIj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJ1cGRhdGUtcHJlY2lvcy1ncnVhLWFuby1iYXNlIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5QcmVjaW9zIGJhc2UgZGVsIGHDsW88L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InVwZGF0ZS1wcmVjaW9zLWdydWEtYW5vLWJhc2UiIHJlYWRvbmx5IGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gYmctZ3JheS0yMDAgY3Vyc29yLW5vdC1hbGxvd2VkIj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0idXBkYXRlLXByZWNpb3MtZ3J1YS1udWV2by1hbm8iIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkHDsW8gZGUgUHJlY2lvcyAoTnVldm8gbyBhIEVkaXRhcik8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0idXBkYXRlLXByZWNpb3MtZ3J1YS1udWV2by1hbm8iIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiIHBsYWNlaG9sZGVyPSJFajogMjAyNSI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPGZvcm0gaWQ9InVwZGF0ZS1wcmVjaW9zLWdydWEtZm9ybSIgY2xhc3M9InNwYWNlLXktMyBmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHByLTIgYm9yZGVyLXQgcHQtNCI+DQogICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCI+UHJlY2lvcyBkZSBJdGVtczwvaDQ+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0idXBkYXRlLXByZWNpb3MtZ3J1YS1pdGVtcy1saXN0IiBjbGFzcz0ic3BhY2UteS0zIj4NCiAgICAgICAgICAgICAgICAgICAgPCEtLSBMaXN0YSBkZSBpbnB1dHMgZGUgcHJlY2lvcyBzZSBjYXJnYXLDoSBhcXXDrSAtLT4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZm9ybT4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTQgbXQtOCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNhbmNlbC11cGRhdGUtcHJlY2lvcy1ncnVhLWJ0biIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCI+Q2FuY2VsYXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InNhdmUtdXBkYXRlLXByZWNpb3MtZ3J1YS1idG4iIGNsYXNzPSJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAiPkd1YXJkYXIgTnVldm9zIFByZWNpb3M8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICA8IS0tICoqKiogRklOIERFTCBOVUVWTyBNT0RBTCAqKioqIC0tPg0KICAgIA0KICAgIDwhLS0gTW9kYWwgZGUgQWxlcnRhIFBlcnNvbmFsaXphZGEgLS0+DQogICAgPGRpdiBpZD0iY3VzdG9tLWFsZXJ0LW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzEwMF0iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LW1kIG1vZGFsLWVudGVyIj4NCiAgICAgICAgICAgIDxoMyBpZD0iY3VzdG9tLWFsZXJ0LXRpdGxlIiBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItNCB0ZXh0LWdyYXktOTAwIj48L2gzPg0KICAgICAgICAgICAgPHAgaWQ9ImN1c3RvbS1hbGVydC1tZXNzYWdlIiBjbGFzcz0idGV4dC1ncmF5LTcwMCBtYi02IHdoaXRlc3BhY2UtcHJlLXdyYXAiPjwvcD4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY3VzdG9tLWFsZXJ0LW9rLWJ0biIgY2xhc3M9ImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ibHVlLTcwMCI+QWNlcHRhcjwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICAgIA0KICAgIDwhLS0gTW9kYWwgZGUgQ29uZmlybWFjacOzbiBQZXJzb25hbGl6YWRhIC0tPg0KICAgIDxkaXYgaWQ9ImN1c3RvbS1jb25maXJtLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzEwMF0iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LW1kIG1vZGFsLWVudGVyIj4NCiAgICAgICAgICAgIDxoMyBpZD0iY3VzdG9tLWNvbmZpcm0tdGl0bGUiIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi00IHRleHQtZ3JheS05MDAiPjwvaDM+DQogICAgICAgICAgICA8cCBpZD0iY3VzdG9tLWNvbmZpcm0tbWVzc2FnZSIgY2xhc3M9InRleHQtZ3JheS03MDAgbWItNiB3aGl0ZXNwYWNlLXByZS13cmFwIj48L3A+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktZW5kIHNwYWNlLXgtNCI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjdXN0b20tY29uZmlybS1jYW5jZWwtYnRuIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5DYW5jZWxhcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY3VzdG9tLWNvbmZpcm0tb2stYnRuIiBjbGFzcz0iYmctcmVkLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctcmVkLTcwMCI+Q29uZmlybWFyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgDQogICAgPCEtLSBNb2RhbCBkZSBQcm9tcHQgUGVyc29uYWxpemFkbyAocGFyYSBwZWRpciBmZWNoYSkgLS0+DQogICAgPGRpdiBpZD0iY3VzdG9tLXByb21wdC1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LVsxMDBdIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy1tZCBtb2RhbC1lbnRlciI+DQogICAgICAgICAgICA8aDMgaWQ9ImN1c3RvbS1wcm9tcHQtdGl0bGUiIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi00IHRleHQtZ3JheS05MDAiPjwvaDM+DQogICAgICAgICAgICA8cCBpZD0iY3VzdG9tLXByb21wdC1tZXNzYWdlIiBjbGFzcz0idGV4dC1ncmF5LTcwMCBtYi00IHdoaXRlc3BhY2UtcHJlLXdyYXAiPjwvcD4NCiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY3VzdG9tLXByb21wdC1pbnB1dCIgY2xhc3M9InctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTQgbXQtNiI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjdXN0b20tcHJvbXB0LWNhbmNlbC1idG4iIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAiPkNhbmNlbGFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjdXN0b20tcHJvbXB0LW9rLWJ0biIgY2xhc3M9ImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ibHVlLTcwMCI+QWNlcHRhcjwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICAgIA0KDQogICAgPCEtLSBNb2RhbCBwYXJhIEltcG9ydGFyIEdhc3RvIGVuIEN1cnNvIC0tPg0KICAgIDxkaXYgaWQ9Imdhc3RvLWN1cnNvLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotWzEwMF0iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LTR4bCBtb2RhbC1lbnRlciBmbGV4IGZsZXgtY29sIG1heC1oLVs5MHZoXSI+DQogICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi00IHRleHQtb3JhbmdlLTkwMCI+SW1wb3J0YXIgR2FzdG8gZW4gQ3Vyc288L2gzPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC00IG1iLTYgcC00IGJnLW9yYW5nZS01MCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItb3JhbmdlLTEwMCI+DQogICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPk1lczwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImdjLW1lcyIgY2xhc3M9Im10LTEgYmxvY2sgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBmb2N1czpyaW5nLW9yYW5nZS01MDAgZm9jdXM6Ym9yZGVyLW9yYW5nZS01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMDEiPkVuZXJvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iMDIiPkZlYnJlcm88L29wdGlvbj48b3B0aW9uIHZhbHVlPSIwMyI+TWFyem88L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjA0Ij5BYnJpbDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IjA1Ij5NYXlvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iMDYiPkp1bmlvPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwNyI+SnVsaW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSIwOCI+QWdvc3RvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iMDkiPlNlcHRpZW1icmU8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEwIj5PY3R1YnJlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iMTEiPk5vdmllbWJyZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IjEyIj5EaWNpZW1icmU8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkHDsW88L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ2MtYW5vIiBjbGFzcz0ibXQtMSBibG9jayB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGZvY3VzOnJpbmctb3JhbmdlLTUwMCBmb2N1czpib3JkZXItb3JhbmdlLTUwMCI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1lbmQiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJjYWxjLWdjLWJ0biIgY2xhc3M9ImJnLW9yYW5nZS02MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZC1tZCBob3ZlcjpiZy1vcmFuZ2UtNzAwIj5SZWNhbGN1bGFyIFN1bWF0b3Jpb3M8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIj4NCiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9Im1pbi13LWZ1bGwgZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwIj4NCiAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzPSJiZy1ncmF5LTUwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9InB4LTQgcHktMiB0ZXh0LWxlZnQgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPkNvbHVtbmE8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0icHgtNCBweS0yIHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSI+U3VtYXRvcmlvIE1lczwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJweC00IHB5LTIgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIj5BanVzdGUgTWFudWFsICgrLy0pPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9InB4LTQgcHktMiB0ZXh0LWxlZnQgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPlJlc3VsdGFkbzwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9ImdjLXRhYmxlLWJvZHkiIGNsYXNzPSJkaXZpZGUteSBkaXZpZGUtZ3JheS0yMDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBTZSBnZW5lcmEgZGluw6FtaWNhbWVudGUgLS0+DQogICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+DQogICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC02IHB0LTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMTAwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1sZyBmb250LWJvbGQiPg0KICAgICAgICAgICAgICAgICAgICBOdWV2byBHYXN0byBlbiBDdXJzbzogPHNwYW4gaWQ9ImdjLWZpbmFsLXRvdGFsIiBjbGFzcz0idGV4dC1vcmFuZ2UtNjAwIj4wLDAwIOKCrDwvc3Bhbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iY2xvc2UtZ2MtbW9kYWwiIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIHB4LTYgcHktMiByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5DYW5jZWxhcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJjb25maXJtLWdjLWJ0biIgY2xhc3M9ImJnLW9yYW5nZS02MDAgdGV4dC13aGl0ZSBweC04IHB5LTIgcm91bmRlZC1sZyBmb250LWJvbGQgaG92ZXI6Ymctb3JhbmdlLTcwMCBzaGFkb3ctbWQiPkNPTkZJUk1BUiBFIElNUE9SVEFSPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgPHNjcmlwdD4NCiAgICBjb25zdCBBcHAgPSAoKCkgPT4gew0KICAgICAgICAvLyAtLS0gQ09OU1RBTlRFUyBZIEVTVEFETyAtLS0NCiAgICAgICAgDQogICAgICAgIC8vIERlZmluaWNpw7NuIGRlIGxvcyBjYW1wb3MgZGUgY29zdGUgY29uIG11bHRpLWNvbmNlcHRvDQogICAgICAgIGNvbnN0IENPU1RfRklFTERTID0gWw0KICAgICAgICAgICAgeyBpZDogJ2NvbnN1bWlibGVzJywgbGFiZWw6ICdDb25zdW1pYmxlcycgfSwNCiAgICAgICAgICAgIHsgaWQ6ICdjb25zdW1pYmxlc19lbGVjdHJpY29zJywgbGFiZWw6ICdDb25zdW1pYmxlcyBFbMOpY3RyaWNvcycgfSwNCiAgICAgICAgICAgIHsgaWQ6ICdhbmRhbWlvcycsIGxhYmVsOiAnQW5kYW1pb3MnIH0sDQogICAgICAgICAgICB7IGlkOiAndGV4YXNfY29udHJvbHMnLCBsYWJlbDogJ1RleGFzIENvbnRyb2xzJyB9LA0KICAgICAgICAgICAgeyBpZDogJ29icmFfY2l2aWwnLCBsYWJlbDogJ09icmEgQ2l2aWwnIH0sDQogICAgICAgICAgICB7IGlkOiAnb2NhJywgbGFiZWw6ICdPQ0EnIH0sDQogICAgICAgICAgICAvLyB7IGlkOiAnZ3J1YV9jYW1pb24nLCBsYWJlbDogJ0dyw7phIG8gQ2FtacOzbicgfSwgLy8gPC0tIE1PRElGSUNBRE86IEVsaW1pbmFkbyBkZSBhcXXDrQ0KICAgICAgICAgICAgeyBpZDogJ3BpbnR1cmEnLCBsYWJlbDogJ1BpbnR1cmEnIH0sDQogICAgICAgICAgICAvLyB7IGlkOiAnZ3J1cG9zX3NvbF9ldGMnLCBsYWJlbDogJ0dydXBvcyBzb2wuIENvbXByZXNvciBHYXNvbGluYSBWZWhpY3Vsb3MnIH0sIC8vIEVsaW1pbmFkbw0KICAgICAgICAgICAgeyBpZDogJ2NhcnJldGlsbGFfcGxhdGFmJywgbGFiZWw6ICdDYXJyZXRpbGxhLCBQbGF0YWYuIEVsZXZhZCcgfQ0KICAgICAgICBdOw0KICAgICAgICANCiAgICAgICAgLy8gQ29sdW1uYXMgYSBtb3N0cmFyIGVuIGxhIHRhYmxhIGRlIHJlZ2lzdHJvcw0KICAgICAgICBjb25zdCBSRUdJU1RST19UQUJMRV9DT0xVTU5TID0gWw0KICAgICAgICAgICAgeyBpZDogJ2ZlY2hhJywgbGFiZWw6ICdGZWNoYScgfSwNCiAgICAgICAgICAgIHsgaWQ6ICdob3Jhc190cmFiYWphZG9yZXMnLCBsYWJlbDogJ0hvcmFzIFByb2QuJyB9LA0KICAgICAgICAgICAgeyBpZDogJ2hvcmFzX2ltcHJvZHVjdGl2YXMnLCBsYWJlbDogJ0hvcmFzIEltcHJvZC4nIH0sDQogICAgICAgICAgICB7IGlkOiAncHJlY2lvX2hvcmFzJywgbGFiZWw6ICdQcmVjaW8gSG9yYXMnIH0sDQogICAgICAgICAgICAuLi5DT1NUX0ZJRUxEUy5tYXAoZiA9PiAoeyBpZDogYCR7Zi5pZH1fdG90YWxgLCBsYWJlbDogZi5sYWJlbCB9KSksDQogICAgICAgICAgICB7IGlkOiAnZ3J1YV9jYW1pb25fdG90YWwnLCBsYWJlbDogJ0dyw7phIG8gQ2FtacOzbicgfSwgLy8gPC0tIE1PRElGSUNBRE86IEHDsWFkaWRvIGFxdcOtDQogICAgICAgICAgICB7IGlkOiAnZ3J1cG9zX3NvbF90b3RhbCcsIGxhYmVsOiAnR3J1cG9zIHNvbC4gZXRjJyB9LCAvLyBJRCBtb2RpZmljYWRvDQogICAgICAgICAgICB7IGlkOiAnY29taWRhJywgbGFiZWw6ICdDb21pZGEnIH0sDQogICAgICAgICAgICB7IGlkOiAnY29zdGVfdG90YWxfcmVnaXN0cm8nLCBsYWJlbDogJ1RvdGFsIFJlZ2lzdHJvJyB9DQogICAgICAgIF07DQogICAgICAgIA0KICAgICAgICAvLyBCYXNlIGRlIGRhdG9zIGRlIHByZWNpb3MgZGUgYWxxdWlsZXIgcG9yIGRlZmVjdG8NCiAgICAgICAgY29uc3QgREVGQVVMVF9BTFFVSUxFUl9EQVRBID0gew0KICAgICAgICAgICAgIjIwMjUiOiB7DQogICAgICAgICAgICAgICAgIk0uIEdhcmPDrWEgQmFycm9zbyI6IHsNCiAgICAgICAgICAgICAgICAgICAgInByZWNpb0xpdHJvQ29tYnVzdGlibGUiOiAxLjkwLA0KICAgICAgICAgICAgICAgICAgICAiaXRlbXMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiR3J1cG8gZWxlY3Ryb2dlbm8gZGllc2VsIGluc29ub3JpemFkbyAxMCwgMjAsIDMwIHkgNDAga3dhcyIsIHByZWNpbzogMjAuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHcnVwbyBlbGVjdHJvZ2VubyBkaWVzZWwgaW5zb25vcml6YWRvIDYwIGt3YXMiLCBwcmVjaW86IDI5LjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiR3J1cG8gZWxlY3Ryb2dlbm8gZGllc2VsIGluc29ub3JpemFkbyAxMDAga3dhcyIsIHByZWNpbzogMzguMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHcnVwbyBlbGVjdHJvZ2VubyBkaWVzZWwgaW5zb25vcml6YWRvIDE1MCBrd2FzIiwgcHJlY2lvOiA1OC4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdydXBvIGVsZWN0cm9nZW5vIGRpZXNlbCBpbnNvbm9yaXphZG8gMjAwIGt3YXMiLCBwcmVjaW86IDcwLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiR3J1cG8gZWxlY3Ryb2dlbm8gZGllc2VsIGluc29ub3JpemFkbyAyNTAga3dhcyIsIHByZWNpbzogODQuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHcnVwbyBlbGVjdHJvZ2VubyBkaWVzZWwgaW5zb25vcml6YWRvIDMwMCBrd2FzIiwgcHJlY2lvOiAxMDQuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJNb3Rvc29sZGFkb3JhIDQwMCBBbXAiLCBwcmVjaW86IDI2LjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiQ29tcHJlc29yIDQgbTMvbSIsIHByZWNpbzogMTkuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJDb21wcmVzb3IgN20zL20iLCBwcmVjaW86IDM4LjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiVG9ycmUgZGUgaWx1bWluYWNpw7NuIGRpZXNlbCA2IHggMTAwMCB3IiwgcHJlY2lvOiAyOS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkNhcnJldGlsbGEgZWxldmFkb3JhIDR4NCBkaWVzZWwgMjAwMCBrZyIsIHByZWNpbzogNDIuMDAgfQ0KICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAiTWFxdWluYXJpYXMgZGVsIE9kaWVsIjogew0KICAgICAgICAgICAgICAgICAgICAicHJlY2lvTGl0cm9Db21idXN0aWJsZSI6IDEuODAsDQogICAgICAgICAgICAgICAgICAgICJpdGVtcyI6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHUlVQTyBFTEVDVFJPR0VOTyBESUVTRUwgMjBLVkFTIiwgcHJlY2lvOiAxNS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdSVVBPIEVMRUNUUk9HRU5PIERJRVNFTCAzMCBLVkFTIiwgcHJlY2lvOiAxNS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdSVVBPIEVMRUNUUk9HRU5PIERJRVNFTCA0MCBLVkFTIiwgcHJlY2lvOiAxOC4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdSVVBPIEVMRUNUUk9HRU5PIERJRVNFTCA2MCBLVkFTIiwgcHJlY2lvOiAyMi4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdSVVBPIEVMRUNUUk9HRU5PIERJRVNFTCAxMDAgS1ZBUyIsIHByZWNpbzogMjkuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHUlVQTyBFTEVDVFJPR0VOTyBESUVTRUwgMTMwIEtWQVMiLCBwcmVjaW86IDMwLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiR1JVUE8gRUxFQ1RST0dFTk8gRElFU0VMIDE1MCBLVkFTIiwgcHJlY2lvOiAzNS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdSVVBPIEVMRUNUUk9HRU5PIERJRVNFTCAyMDAgS1ZBUyIsIHByZWNpbzogNDYuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHUlVQTyBFTEVDVFJPR0VOTyBESUVTRUwgMjUwIEtWQVMiLCBwcmVjaW86IDYyLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiR1JVUE8gRUxFQ1RST0dFTk8gRElFU0VMIDMwMCBLVkFTIiwgcHJlY2lvOiA4NS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkdSVVBPIEVMRUNUUk9HRU5PIERJRVNFTCAzNTAgS1ZBUyIsIHByZWNpbzogOTAuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJHUlVQTyBFTEVDVFJPR0VOTyBESUVTRUwgNDAwIEtWQVMiLCBwcmVjaW86IDk4LjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiTU9UT1NPTERBRE9SQSBESUVTRUwgNDAwQUgiLCBwcmVjaW86IDIwLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiQ09NUFJFU09SIEFJUkUgRElFU0VMIDRNMyIsIHByZWNpbzogMjIuNTAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJDT01QUkVTT1IgQUlSRSBESUVTRUwgOE0zIiwgcHJlY2lvOiA0OC4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkNPTVBSRVNPUiBBSVJFIERJRVNFTCAxME0zIiwgcHJlY2lvOiA3NS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIlRPUlJFIElMVU1JTkFDSU9OIERJRVNFTCBMRUQiLCBwcmVjaW86IDMyLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiUExBVEFGT1JNQSBBUlRJQ1VMQURBIDEyIE1FVFJPUyIsIHByZWNpbzogNTguMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJQTEFUQUZPUk1BIEFSVElDVUxBREEgMTYgTUVUUk9TIiwgcHJlY2lvOiA2Mi4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIlBMQVRBRk9STUEgQVJUSUNVTEFEQSAxOCBNRVRST1MiLCBwcmVjaW86IDc0LjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiUExBVEFGT1JNQSBBUlRJQ1VMQURBIDIwIE1FVFJPUyIsIHByZWNpbzogODUuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJQTEFUQUZPUk1BIFRJSkVSQSBESUVTRUwgMTQgTUVUUk9TIiwgcHJlY2lvOiA3Mi4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIlBMQVRBRk9STUEgVElKRVJBIEVMRUNUUklDQSA4IE1FVFJPUyIsIHByZWNpbzogMzAuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJQTEFUQUZPUk1BIFRJSkVSQSBFTEVDVFJJQ0EgMTAgTUVUUk9TIiwgcHJlY2lvOiAzNS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkNBUlJFVElMTEEgRUxFVkFET1JBIDI1MDAgS0cgRElFU0VMIiwgcHJlY2lvOiAzNS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkNBUlJFVElMTEEgRUxFVkFET1JBIDM1MDAgS0cgRElFU0VMIiwgcHJlY2lvOiA0NS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkNBUlJFVElMTEEgRUxFVkFET1JBIDQ1MDAgS0cgRElFU0VMIiwgcHJlY2lvOiA3NS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIkNBUlJFVElMTEEgRUxFVkFET1JBIDRYNCAyNTAwIEtHIDRYNCIsIHByZWNpbzogNDUuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJNQU5JUFVMQURPUiBURUxFU0NPUElDTyA2IE1FVFJPUyIsIHByZWNpbzogNzUuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJNQU5JUFVMQURPUiBURUxFU0NPUElDTyA3IE1FVFJPUyIsIHByZWNpbzogMTMwLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiTUFOSVBVTEFET1IgVEVMRVNDT1BJQ08gMTEgTUVUUk9TIiwgcHJlY2lvOiAxMjAuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJNQU5JUFVMQURPUiBURUxFU0NPUElDTyAxMyBNRVRST1MiLCBwcmVjaW86IDEzNS4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIk1BTklQVUxBRE9SIFRFTEVTQ09QSUNPIDE0IE1FVFJPUyIsIHByZWNpbzogMTQwLjAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXBjaW9uOiAiUElTVE9MQSBJTVBBQ1RPIDMvNCBCQVRFUklBIiwgcHJlY2lvOiAxNi4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIlNFUlZJQ0lPIERFIEVOVFJFR0EgQ0FNSU9OIFBPTE8gUVVJTUlDTyIsIHByZWNpbzogNzAuMDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcGNpb246ICJTRVJWSUNJTyBERSBSRUNPR0lEQSBDQU1JT04gUE9MTyBRVUlNSUNPIiwgcHJlY2lvOiA3MC4wMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwY2lvbjogIlNFUlZJQ0lPIEZJTiBERSBTRU1BTkEvRkVTVElWTy9OT0NUVVJOTyIsIHByZWNpbzogODAuMDAgfQ0KICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIC8vICoqKiogTU9ESUZJQ0FDScOTTjogQcOxYWRpZGEgIkF1dG8gR3LDumFzIiBhIGxhIGJhc2UgZGUgZGF0b3MgKioqKg0KICAgICAgICAvLyBVc2Ftb3MgMjAyNCBjb21vIGHDsW8gYmFzZSwgc2UgcHVlZGUgYWN0dWFsaXphciBzaSBlcyBuZWNlc2FyaW8NCiAgICAgICAgY29uc3QgREVGQVVMVF9FVVJPR1JVQVNfREFUQSA9IHsNCiAgICAgICAgICAgICIyMDI0IjogeyANCiAgICAgICAgICAgICAgICAiRXVyb2dydWFzIjogew0KICAgICAgICAgICAgICAgICAgICAiaXRlbXMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiR3LDumEgaGFzdGEgNDAgVE4iLCBzYWxpZGE6IDAsIGhvcmE6IDYyLCBzZXJ2TWluaW1vOiA2LCByZWNhcmdvSG9yYTogMjIsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJHcsO6YSBoYXN0YSA2MCBUTiIsIHNhbGlkYTogMCwgaG9yYTogODAsIHNlcnZNaW5pbW86IDYsIHJlY2FyZ29Ib3JhOiAyMiwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkdyw7phIGhhc3RhIDgwIFROIiwgc2FsaWRhOiAwLCBob3JhOiAxMDEsIHNlcnZNaW5pbW86IDYsIHJlY2FyZ29Ib3JhOiAyMiwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkdyw7phIGhhc3RhIDEwMCBUTiIsIHNhbGlkYTogMCwgaG9yYTogMTMzLCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogMjIsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJHcsO6YSBoYXN0YSAxMzAgVE4iLCBzYWxpZGE6IDgxOCwgaG9yYTogMTY0LCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogMjIsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJHcsO6YSBoYXN0YSAxNjAgVE4iLCBzYWxpZGE6IDEyMDAsIGhvcmE6IDE3NSwgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDIyLCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiR3LDumEgaGFzdGEgMjIwIFROIiwgc2FsaWRhOiAxNjAwLCBob3JhOiAyMTgsIHNlcnZNaW5pbW86IDgsIHJlY2FyZ29Ib3JhOiAyMiwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkdyw7phIGhhc3RhIDI1MCBUTiIsIHNhbGlkYTogMjUxOSwgaG9yYTogMjczLCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogMjIsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJHcsO6YSBoYXN0YSAzMDAgVE4iLCBzYWxpZGE6IDM0MDIsIGhvcmE6IDMwMCwgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDIyLCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiR3LDumEgaGFzdGEgNDAwIFROIiwgc2FsaWRhOiA0ODU1LCBob3JhOiAzODIsIHNlcnZNaW5pbW86IDgsIHJlY2FyZ29Ib3JhOiAyMiwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkdyw7phIGhhc3RhIDUwMCBUTiIsIHNhbGlkYTogNjExMCwgaG9yYTogNDM2LCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogMjIsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJHcsO6YSBoYXN0YSA3MDAgVE4iLCBzYWxpZGE6IDkwMTYsIGhvcmE6IDQ2NCwgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDIyLCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQ2FtacOzbiBncsO6YSBoYXN0YSA0MCBUTSIsIHNhbGlkYTogMCwgaG9yYTogNTMsIHNlcnZNaW5pbW86IDYsIHJlY2FyZ29Ib3JhOiAyMiwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkNhbWnDs24gZ3LDumEgaGFzdGEgNTAgVE0iLCBzYWxpZGE6IDAsIGhvcmE6IDU1LCBzZXJ2TWluaW1vOiA2LCByZWNhcmdvSG9yYTogMjIsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJDYW1pw7NuIGdyw7phIGhhc3RhIDcwIFRNIiwgc2FsaWRhOiAwLCBob3JhOiA1OCwgc2Vydk1pbmltbzogNiwgcmVjYXJnb0hvcmE6IDIyLCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiVHJhY3RvcmEgY29uIEdyw7phIGhhc3RhIDMwIiwgc2FsaWRhOiAwLCBob3JhOiA2Mywgc2Vydk1pbmltbzogNiwgcmVjYXJnb0hvcmE6IDIyLCByZWNNaW5Ib3JhOiA4IH0NCiAgICAgICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgIkdyw7phcyBFdWdlbmlvIjogew0KICAgICAgICAgICAgICAgICAgICAiaXRlbXMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvIEdyw7phcw0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkF1dG8gR3LDumEgZGUgNDAgVG0iLCBzYWxpZGE6IDAsIGhvcmE6IDcwLCBzZXJ2TWluaW1vOiA2LCByZWNhcmdvSG9yYTogMzUsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJBdXRvIEdyw7phIGRlIDYwIFRtIiwgc2FsaWRhOiAwLCBob3JhOiA5MCwgc2Vydk1pbmltbzogNywgcmVjYXJnb0hvcmE6IDQ1LCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQXV0byBHcsO6YSBkZSA4MCBUbSIsIHNhbGlkYTogMCwgaG9yYTogMTEwLCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogNTUsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJBdXRvIEdyw7phIGRlIDEwMCBUbSIsIHNhbGlkYTogMCwgaG9yYTogMTM1LCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogNjcuNSwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkF1dG8gR3LDumEgZGUgMTMwIFRtIiwgc2FsaWRhOiA3NTAsIGhvcmE6IDE1MCwgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDc1LCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQXV0byBHcsO6YSBkZSAxNjAgVG0iLCBzYWxpZGE6IDkzMywgaG9yYTogMTgwLCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogOTAsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJBdXRvIEdyw7phIGRlIDIyMCBUbSIsIHNhbGlkYTogMTUwMCwgaG9yYTogMjIwLCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogMTEwLCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQXV0byBHcsO6YSBkZSAyNTAgVG0iLCBzYWxpZGE6IDI1MDAsIGhvcmE6IDI2MCwgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDEzMCwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkF1dG8gR3LDumEgZGUgMzAwIFRtIiwgc2FsaWRhOiAzNTAwLCBob3JhOiAzMDAsIHNlcnZNaW5pbW86IDEwLCByZWNhcmdvSG9yYTogMTUwLCByZWNNaW5Ib3JhOiAxMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkF1dG8gR3LDumEgZGUgMzAwIFRtICsgUGx1bWluIiwgc2FsaWRhOiA5OTAwLCBob3JhOiAzNTAsIHNlcnZNaW5pbW86IDEwLCByZWNhcmdvSG9yYTogMTc1LCByZWNNaW5Ib3JhOiAxMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkF1dG8gR3LDumEgZGUgNDAwIFRtIiwgc2FsaWRhOiA1MDAwLCBob3JhOiA0MDAsIHNlcnZNaW5pbW86IDEwLCByZWNhcmdvSG9yYTogMjAwLCByZWNNaW5Ib3JhOiAxMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkF1dG8gR3LDumEgZGUgNDAwIFRtICsgUGx1bWluIiwgc2FsaWRhOiAxMTIwMCwgaG9yYTogNDUwLCBzZXJ2TWluaW1vOiAxMCwgcmVjYXJnb0hvcmE6IDIyNSwgcmVjTWluSG9yYTogMTAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJBdXRvIEdyw7phIGRlIDUwMCBUbSIsIHNhbGlkYTogOTAwMCwgaG9yYTogNTAwLCBzZXJ2TWluaW1vOiAxMCwgcmVjYXJnb0hvcmE6IDI1MCwgcmVjTWluSG9yYTogMTAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJBdXRvIEdyw7phIGRlIDUwMCBUbSArIFBsdW1pbiIsIHNhbGlkYTogMTM1MDAsIGhvcmE6IDU1MCwgc2Vydk1pbmltbzogMTAsIHJlY2FyZ29Ib3JhOiAyNzUsIHJlY01pbkhvcmE6IDEwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQXV0byBHcsO6YSBkZSA3MDAgVG0iLCBzYWxpZGE6IDE4MDAwLCBob3JhOiA3MDAsIHNlcnZNaW5pbW86IDEwLCByZWNhcmdvSG9yYTogMzUwLCByZWNNaW5Ib3JhOiAxMCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FtaW9uZXMgR3LDumENCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb246ICJDYW1pw7NuIEdyw7phIGhhc3RhIFBLIDI5MDAwICg0eDIpIiwgc2FsaWRhOiAwLCBob3JhOiA1MCwgc2Vydk1pbmltbzogNiwgcmVjYXJnb0hvcmE6IDI1LCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQ2FtacOzbiBHcsO6YSBoYXN0YSBQSyAyOTAwMCAoNng2KSAoQSBDT05WRU5JUikiLCBzYWxpZGE6IDAsIGhvcmE6IDAsIHNlcnZNaW5pbW86IDAsIHJlY2FyZ29Ib3JhOiAwLCByZWNNaW5Ib3JhOiAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQ2FtacOzbiBHcsO6YSBoYXN0YSBQSyA0NDAwMCAoNng0KSIsIHNhbGlkYTogMCwgaG9yYTogNzAsIHNlcnZNaW5pbW86IDYsIHJlY2FyZ29Ib3JhOiAzNSwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkNhbWnDs24gR3LDumEgaGFzdGEgUEsgNzIwMDAgY29uIEpJQiAoOHg0KSIsIHNhbGlkYTogMCwgaG9yYTogODgsIHNlcnZNaW5pbW86IDgsIHJlY2FyZ29Ib3JhOiA0NCwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkNhbWnDs24gR3LDumEgaGFzdGEgUEsgODUwMDAgY29uIEpJQiAoOHg0KSIsIHNhbGlkYTogMCwgaG9yYTogMTIzLCBzZXJ2TWluaW1vOiA4LCByZWNhcmdvSG9yYTogNjEuNSwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkNhbWnDs24gUGx1bWEgZGUgMzAgVG4gY29uIEJhdGVhIGRlIDEyIE0iLCBzYWxpZGE6IDAsIGhvcmE6IDc1LCBzZXJ2TWluaW1vOiA2LCByZWNhcmdvSG9yYTogMzcuNSwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNwb3J0ZSAoR8OzbmRvbGFzIHkgQmF0ZWFzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkJhdGVhIGhhc3RhIDEyIE10cyIsIHNhbGlkYTogMCwgaG9yYTogNTgsIHNlcnZNaW5pbW86IDYsIHJlY2FyZ29Ib3JhOiAyOSwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkfDs25kb2xhIDIwLzI0IFRtIiwgc2FsaWRhOiAwLCBob3JhOiA2OCwgc2Vydk1pbmltbzogNiwgcmVjYXJnb0hvcmE6IDM0LCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiR8OzbmRvbGEgRXNwZWNpYWwgNTAgVG0gKFNpbiBDb2NoZSBQaWxvdG8pIiwgc2FsaWRhOiAwLCBob3JhOiA4OCwgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDQ0LCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiR8OzbmRvbGEgRXNwZWNpYWwgNzAgVG0gKFNpbiBDb2NoZSBQaWxvdG8pIiwgc2FsaWRhOiAwLCBob3JhOiAxMzgsIHNlcnZNaW5pbW86IDgsIHJlY2FyZ29Ib3JhOiA2OSwgcmVjTWluSG9yYTogOCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIkfDs25kb2xhIEV4dGVuc2libGUgNDIgTSAoU2luIENvY2hlIFBpbG90bykiLCBzYWxpZGE6IDAsIGhvcmE6IDE0Mywgc2Vydk1pbmltbzogOCwgcmVjYXJnb0hvcmE6IDcxLjUsIHJlY01pbkhvcmE6IDggfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90cm9zIFNlcnZpY2lvcw0KICAgICAgICAgICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbjogIlNlw7FhbGlzdGEgLyBBeXVkYW50ZSIsIHNhbGlkYTogMCwgaG9yYTogNTMsIHNlcnZNaW5pbW86IDYsIHJlY2FyZ29Ib3JhOiAyNi41LCByZWNNaW5Ib3JhOiA4IH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiQWNjZXNvcmlvIEJhbGFuY8OtbiAoQSBDT05WRU5JUikiLCBzYWxpZGE6IDAsIGhvcmE6IDAsIHNlcnZNaW5pbW86IDAsIHJlY2FyZ29Ib3JhOiAwLCByZWNNaW5Ib3JhOiAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uOiAiUGxhbiBkZSBJemFkbyIsIHNhbGlkYTogMjAwLCBob3JhOiAwLCBzZXJ2TWluaW1vOiAwLCByZWNhcmdvSG9yYTogMCwgcmVjTWluSG9yYTogMCB9DQogICAgICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IFBsYW50aWxsYSBwYXJhIFVOIGl0ZW0gZGUgYWxxdWlsZXIgKioqKg0KICAgICAgICBjb25zdCBERUZBVUxUX0FMUVVJTEVSX0lURU0gPSB7DQogICAgICAgICAgICBlbXByZXNhOiBudWxsLA0KICAgICAgICAgICAgYW5vOiBudWxsLA0KICAgICAgICAgICAgaXRlbURlc2NyaXBjaW9uOiBudWxsLA0KICAgICAgICAgICAgaXRlbVByZWNpb0RpYTogMCwNCiAgICAgICAgICAgIGl0ZW1EaWFzOiAwLA0KICAgICAgICAgICAgbGl0cm9zQ29tYnVzdGlibGU6IDAsDQogICAgICAgICAgICBwcmVjaW9MaXRyb0NvbWJ1c3RpYmxlOiAwLA0KICAgICAgICAgICAgdG90YWw6IDANCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vICoqKiogTU9ESUZJQ0FETzogUGxhbnRpbGxhIHBhcmEgVU4gaXRlbSBkZSBncsO6YSAqKioqDQogICAgICAgIGNvbnN0IERFRkFVTFRfR1JVQUNBTUlPTl9JVEVNID0gew0KICAgICAgICAgICAgZW1wcmVzYTogIkV1cm9ncnVhcyIsIC8vIFZhbG9yIGZpam8gcG9yIGFob3JhDQogICAgICAgICAgICBhbm86ICIyMDI0IiwgLy8gVmFsb3IgZmlqbyBwb3IgYWhvcmENCiAgICAgICAgICAgIGl0ZW1EZXNjcmlwY2lvbjogbnVsbCwNCiAgICAgICAgICAgIGl0ZW1Ib3JhczogMCwNCiAgICAgICAgICAgIGNvblJlY2FyZ286IGZhbHNlLA0KICAgICAgICAgICAgLy8gVmFsb3JlcyBjYWxjdWxhZG9zIHBhcmEgZ3VhcmRhcmxvcyB5IHZlcmxvcyBlbiBkZXRhbGxlcw0KICAgICAgICAgICAgY29zdGVTYWxpZGE6IDAsDQogICAgICAgICAgICBwcmVjaW9Ib3JhVXNhZG86IDAsDQogICAgICAgICAgICBob3Jhc0FDb2JyYXI6IDAsDQogICAgICAgICAgICBzZXJ2aWNpb01pbmltb1VzYWRvOiAwLA0KICAgICAgICAgICAgdG90YWw6IDANCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBnZXRJbml0aWFsU3RhdGUgPSAoKSA9PiAoew0KICAgICAgICAgICAgb3RzOiBbXSwgLy8gQXJyYXkgZGUgeyBpZDogc3RyaW5nLCBub21icmU6IHN0cmluZywgZ2FzdG9FbkN1cnNvOiBudW1iZXIgfQ0KICAgICAgICAgICAgcmVnaXN0cm9zOiB7fSwgLy8gT2JqZXRvIG1hcDogeyBvdElkOiBbIHsgcmVjb3JkSWQ6IHN0cmluZywgZmVjaGE6IHN0cmluZywgLi4uIH0gXSB9DQogICAgICAgICAgICBhbHF1aWxlckRhdGE6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9BTFFVSUxFUl9EQVRBKSksIC8vIEVzdGFkbyBwYXJhIHByZWNpb3MgYWxxdWlsZXINCiAgICAgICAgICAgIGdydWFEYXRhOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfRVVST0dSVUFTX0RBVEEpKSwgLy8gKioqKiBOVUVWTzogRXN0YWRvIHBhcmEgcHJlY2lvcyBncsO6YSAqKioqDQogICAgICAgICAgICBhY3RpdmVWaWV3OiAnb3RzJywgLy8gJ290cycgb3IgJ3JlZ2lzdHJvcycNCiAgICAgICAgICAgIGFjdGl2ZU9USWQ6IG51bGwsIC8vIEVsIE9UIElEIHF1ZSBlc3RhbW9zIHZpZW5kbw0KICAgICAgICAgICAgaXNEaXJ0eTogZmFsc2UsDQogICAgICAgICAgICBkYXRhTG9hZGVkOiBmYWxzZSwNCiAgICAgICAgICAgIGFwaUtleTogJ3AtNzAxMjM5ODQ1LWFpLWFjY2VzcycNCiAgICAgICAgfSk7DQoNCiAgICAgICAgbGV0IHN0YXRlID0gZ2V0SW5pdGlhbFN0YXRlKCk7DQogICAgICAgIGxldCBjdXJyZW50RWRpdE9USWQgPSBudWxsOyAvLyBQYXJhIGVsIG1vZGFsIGRlIE9UDQogICAgICAgIGxldCBjdXJyZW50RWRpdFJlY29yZElkID0gbnVsbDsgLy8gUGFyYSBlbCBtb2RhbCBkZSByZWdpc3Rybw0KICAgICAgICBsZXQgaW1wb3J0SG9yYXNUYXJnZXREYXRlID0gbnVsbDsgLy8gUGFyYSBsYSBudWV2YSBpbXBvcnRhY2nDs24gZGUgaG9yYXMgKEFIT1JBIEVTIEZFQ0hBIERFIElOSUNJTykNCiAgICAgICAgDQogICAgICAgIC8vICoqKiogTU9ESUZJQ0FETzogRXN0YWRvIHRlbXBvcmFsIHBhcmEgZWwgbW9kYWwgZGUgYWxxdWlsZXIgKMKhQUhPUkEgRVMgVU4gQVJSQVkhKSAqKioqDQogICAgICAgIGxldCBjdXJyZW50QWxxdWlsZXJEZXRhbGxlcyA9IFtdOw0KICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IEVzdGFkbyB0ZW1wb3JhbCBwYXJhIGVsIG1vZGFsIGRlIGdyw7phICjCoUFIT1JBIEVTIFVOIEFSUkFZISkgKioqKg0KICAgICAgICBsZXQgY3VycmVudEdydWFDYW1pb25EZXRhbGxlcyA9IFtdOw0KDQoNCiAgICAgICAgLy8gLS0tIERPTSBDQUNIRSAtLS0NCiAgICAgICAgY29uc3QgZG9tID0gew0KICAgICAgICAgICAgYWlDaGF0UGFuZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaS1jaGF0LXBhbmVsJyksDQogICAgICAgICAgICBhaU1lc3NhZ2VzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWktbWVzc2FnZXMnKSwNCiAgICAgICAgICAgIGFpSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaS1pbnB1dCcpLA0KICAgICAgICAgICAgc2VuZEFpQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZC1haS1idG4nKSwNCiAgICAgICAgICAgIG9wZW5BaUJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW4tYWktYnRuJyksDQogICAgICAgICAgICBjbG9zZUFpQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtYWktYnRuJyksDQogICAgICAgICAgICBzYXZlS2V5QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1rZXktYnRuJyksDQogICAgICAgICAgICBhcGlLZXlJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbWluaS1hcGkta2V5JyksDQogICAgICAgICAgICBhcHA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKSwNCiAgICAgICAgICAgIG1haW5Db250ZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbi1jb250ZW50JyksDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFZpc3Rhcw0KICAgICAgICAgICAgb3RWaWV3OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3QtdmlldycpLA0KICAgICAgICAgICAgb3RMaXN0Q29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3QtbGlzdC1jb250YWluZXInKSwNCiAgICAgICAgICAgIHJlZ2lzdHJvVmlldzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdHJvLXZpZXcnKSwNCiAgICAgICAgICAgIHJlZ2lzdHJvVGFibGVDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3Ryby10YWJsZS1jb250YWluZXInKSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQm90b25lcyBwcmluY2lwYWxlcw0KICAgICAgICAgICAgYWRkT3RCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtb3QtYnRuJyksDQogICAgICAgICAgICBpbXBvcnRCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtYnRuJyksDQogICAgICAgICAgICBzYXZlQ2hhbmdlc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtY2hhbmdlcy1idG4nKSwNCiAgICAgICAgICAgIGltcG9ydEZpbGVJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1maWxlLWlucHV0JyksDQogICAgICAgICAgICBzZWFyY2hPdElucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLW90LWlucHV0JyksDQogICAgICAgICAgICBiYWNrVG9PdHNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrLXRvLW90cy1idG4nKSwNCiAgICAgICAgICAgIGFkZFJlZ2lzdHJvQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXJlZ2lzdHJvLWJ0bicpLA0KICAgICAgICAgICAgcmVnaXN0cm9WaWV3VGl0bGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3Ryby12aWV3LXRpdGxlJyksDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEJvdG9uZXMgZGUgaW1wb3J0YWNpw7NuIGRlIGhvcmFzDQogICAgICAgICAgICBpbXBvcnRIb3Jhc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1ob3Jhcy1idG4nKSwNCiAgICAgICAgICAgIGltcG9ydEhvcmFzSnNvbklucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWhvcmFzLWpzb24taW5wdXQnKSwNCiAgICAgICAgICAgIC8vICoqKiogRE9NIEHDkUFESURPICoqKioNCiAgICAgICAgICAgIGV4cG9ydEV4Y2VsQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0LWV4Y2VsLWJ0bicpLA0KDQogICAgICAgICAgICAvLyBNb2RhbCBPVA0KICAgICAgICAgICAgb3RNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ290LW1vZGFsJyksDQogICAgICAgICAgICBvdE1vZGFsVGl0bGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdC1tb2RhbC10aXRsZScpLA0KICAgICAgICAgICAgb3RGb3JtOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3QtZm9ybScpLA0KICAgICAgICAgICAgb3ROb21icmU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdC1ub21icmUnKSwNCiAgICAgICAgICAgIGNhbmNlbE90QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLW90LWJ0bicpLA0KICAgICAgICAgICAgc2F2ZU90QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1vdC1idG4nKSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTW9kYWwgUmVnaXN0cm8NCiAgICAgICAgICAgIHJlZ2lzdHJvTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3Ryby1tb2RhbCcpLA0KICAgICAgICAgICAgcmVnaXN0cm9Nb2RhbFRpdGxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnaXN0cm8tbW9kYWwtdGl0bGUnKSwNCiAgICAgICAgICAgIHJlZ2lzdHJvRm9ybTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdHJvLWZvcm0nKSwNCiAgICAgICAgICAgIHJlZ2lzdHJvRmVjaGE6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3Ryby1mZWNoYScpLA0KICAgICAgICAgICAgcmVnaXN0cm9Ib3JhczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdHJvLWhvcmFzJyksDQogICAgICAgICAgICByZWdpc3Ryb1ByZWNpb0hvcmFzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnaXN0cm8tcHJlY2lvLWhvcmFzJyksDQogICAgICAgICAgICByZWdpc3Ryb0NvbWlkYTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdHJvLWNvbWlkYScpLA0KICAgICAgICAgICAgY2FuY2VsUmVnaXN0cm9CdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwtcmVnaXN0cm8tYnRuJyksDQogICAgICAgICAgICBzYXZlUmVnaXN0cm9CdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLXJlZ2lzdHJvLWJ0bicpLA0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBNb2RhbCBEZXRhbGxlcw0KICAgICAgICAgICAgZGV0YWxsZXNNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXctZGV0YWxsZXMtbW9kYWwnKSwNCiAgICAgICAgICAgIGRldGFsbGVzTW9kYWxUaXRsZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFsbGVzLW1vZGFsLXRpdGxlJyksDQogICAgICAgICAgICBkZXRhbGxlc01vZGFsQ29udGVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFsbGVzLW1vZGFsLWNvbnRlbnQnKSwNCiAgICAgICAgICAgIGNsb3NlRGV0YWxsZXNNb2RhbEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWRldGFsbGVzLW1vZGFsJyksDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIE1vZGFsZXMgcGVyc29uYWxpemFkb3MNCiAgICAgICAgICAgIGN1c3RvbUFsZXJ0TW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tYWxlcnQtbW9kYWwnKSwNCiAgICAgICAgICAgIGN1c3RvbUFsZXJ0VGl0bGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tYWxlcnQtdGl0bGUnKSwNCiAgICAgICAgICAgIGN1c3RvbUFsZXJ0TWVzc2FnZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbS1hbGVydC1tZXNzYWdlJyksDQogICAgICAgICAgICBjdXN0b21BbGVydE9rQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tLWFsZXJ0LW9rLWJ0bicpLA0KICAgICAgICAgICAgDQogICAgICAgICAgICBjdXN0b21Db25maXJtTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tY29uZmlybS1tb2RhbCcpLA0KICAgICAgICAgICAgY3VzdG9tQ29uZmlybVRpdGxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tLWNvbmZpcm0tdGl0bGUnKSwNCiAgICAgICAgICAgIGN1c3RvbUNvbmZpcm1NZXNzYWdlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tLWNvbmZpcm0tbWVzc2FnZScpLA0KICAgICAgICAgICAgY3VzdG9tQ29uZmlybUNhbmNlbEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbS1jb25maXJtLWNhbmNlbC1idG4nKSwNCiAgICAgICAgICAgIGN1c3RvbUNvbmZpcm1Pa0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbS1jb25maXJtLW9rLWJ0bicpLA0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBNb2RhbCBQcm9tcHQgUGVyc29uYWxpemFkbw0KICAgICAgICAgICAgY3VzdG9tUHJvbXB0TW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tcHJvbXB0LW1vZGFsJyksDQogICAgICAgICAgICBjdXN0b21Qcm9tcHRUaXRsZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbS1wcm9tcHQtdGl0bGUnKSwNCiAgICAgICAgICAgIGN1c3RvbVByb21wdE1lc3NhZ2U6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tcHJvbXB0LW1lc3NhZ2UnKSwNCiAgICAgICAgICAgIGN1c3RvbVByb21wdElucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tLXByb21wdC1pbnB1dCcpLA0KICAgICAgICAgICAgY3VzdG9tUHJvbXB0Q2FuY2VsQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tLXByb21wdC1jYW5jZWwtYnRuJyksDQogICAgICAgICAgICBjdXN0b21Qcm9tcHRPa0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbS1wcm9tcHQtb2stYnRuJyksDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIERPTSBDYWNoZSBwYXJhIEFscXVpbGVyIChNYW51YWwvQXV0bykNCiAgICAgICAgICAgIGdydXBvc1NvbFRvdGFsSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncnVwb3Mtc29sLXRvdGFsLWlucHV0JyksDQogICAgICAgICAgICBnZXN0aW9uYXJBbHF1aWxlckJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlc3Rpb25hci1hbHF1aWxlci1idG4nKSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYWxxdWlsZXJNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscXVpbGVyLW1vZGFsJyksDQogICAgICAgICAgICB1cGRhdGVQcmVjaW9zQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlLXByZWNpb3MtYnRuJyksDQogICAgICAgICAgICBhbHF1aWxlckZvcm06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbHF1aWxlci1mb3JtJyksDQogICAgICAgICAgICBhbHF1aWxlckVtcHJlc2E6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbHF1aWxlci1lbXByZXNhJyksDQogICAgICAgICAgICBhbHF1aWxlckFubzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscXVpbGVyLWFubycpLA0KICAgICAgICAgICAgYWxxdWlsZXJBbm9EaXNwbGF5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxxdWlsZXItYW5vLWRpc3BsYXknKSwNCiAgICAgICAgICAgIGFscXVpbGVySXRlbURlc2NyaXBjaW9uOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxxdWlsZXItaXRlbS1kZXNjcmlwY2lvbicpLA0KICAgICAgICAgICAgYWxxdWlsZXJJdGVtUHJlY2lvRGlhOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxxdWlsZXItaXRlbS1wcmVjaW8tZGlhJyksDQogICAgICAgICAgICBhbHF1aWxlckl0ZW1EaWFzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxxdWlsZXItaXRlbS1kaWFzJyksDQogICAgICAgICAgICBhbHF1aWxlclN1YnRvdGFsTWFxdWluYXJpYTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscXVpbGVyLXN1YnRvdGFsLW1hcXVpbmFyaWEnKSwNCiAgICAgICAgICAgIGFscXVpbGVyQ29tYnVzdGlibGVQcmVjaW9MaXRybzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscXVpbGVyLWNvbWJ1c3RpYmxlLXByZWNpby1saXRybycpLA0KICAgICAgICAgICAgYWxxdWlsZXJDb21idXN0aWJsZUxpdHJvczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscXVpbGVyLWNvbWJ1c3RpYmxlLWxpdHJvcycpLA0KICAgICAgICAgICAgYWxxdWlsZXJTdWJ0b3RhbENvbWJ1c3RpYmxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxxdWlsZXItc3VidG90YWwtY29tYnVzdGlibGUnKSwNCiAgICAgICAgICAgIGFscXVpbGVyVG90YWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbHF1aWxlci10b3RhbCcpLA0KICAgICAgICAgICAgYWxxdWlsZXJTdW1tYXJ5TGlzdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscXVpbGVyLXN1bW1hcnktbGlzdCcpLCAvLyAqKioqIE5VRVZPICoqKioNCiAgICAgICAgICAgIGNsb3NlQWxxdWlsZXJNb2RhbEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWFscXVpbGVyLW1vZGFsLWJ0bicpLCAvLyAqKioqIE1PRElGSUNBRE8gKioqKg0KICAgICAgICAgICAgYWRkQWxxdWlsZXJJdGVtQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWFscXVpbGVyLWl0ZW0tYnRuJyksIC8vICoqKiogTU9ESUZJQ0FETyAqKioqDQogICAgICAgICAgICANCiAgICAgICAgICAgIHVwZGF0ZVByZWNpb3NNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZS1wcmVjaW9zLW1vZGFsJyksDQogICAgICAgICAgICB1cGRhdGVQcmVjaW9zRW1wcmVzYTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZS1wcmVjaW9zLWVtcHJlc2EnKSwNCiAgICAgICAgICAgIHVwZGF0ZVByZWNpb3NBbm9CYXNlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlLXByZWNpb3MtYW5vLWJhc2UnKSwNCiAgICAgICAgICAgIHVwZGF0ZVByZWNpb3NOdWV2b0FubzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZS1wcmVjaW9zLW51ZXZvLWFubycpLA0KICAgICAgICAgICAgdXBkYXRlUHJlY2lvc0Zvcm06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJlY2lvcy1mb3JtJyksDQogICAgICAgICAgICB1cGRhdGVQcmVjaW9zSXRlbXNMaXN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlLXByZWNpb3MtaXRlbXMtbGlzdCcpLA0KICAgICAgICAgICAgdXBkYXRlUHJlY2lvc0NvbWJ1c3RpYmxlTGl0cm86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJlY2lvcy1jb21idXN0aWJsZS1saXRybycpLA0KICAgICAgICAgICAgY2FuY2VsVXBkYXRlUHJlY2lvc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbC11cGRhdGUtcHJlY2lvcy1idG4nKSwNCiAgICAgICAgICAgIHNhdmVVcGRhdGVQcmVjaW9zQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS11cGRhdGUtcHJlY2lvcy1idG4nKSwNCg0KICAgICAgICAgICAgLy8gKioqKiBOVUVWTzogRE9NIENhY2hlIHBhcmEgR3LDumEvQ2FtacOzbiAqKioqDQogICAgICAgICAgICBncnVhQ2FtaW9uVG90YWxJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dydWEtY2FtaW9uLXRvdGFsLWlucHV0JyksDQogICAgICAgICAgICBnZXN0aW9uYXJHcnVhQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VzdGlvbmFyLWdydWEtYnRuJyksDQogICAgICAgICAgICBncnVhTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncnVhLW1vZGFsJyksDQogICAgICAgICAgICB1cGRhdGVQcmVjaW9zR3J1YUJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZS1wcmVjaW9zLWdydWEtYnRuJyksIC8vIEJvdMOzbiBkZSBhY3R1YWxpemFyDQogICAgICAgICAgICBncnVhRm9ybTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dydWEtZm9ybScpLA0KICAgICAgICAgICAgZ3J1YUVtcHJlc2E6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncnVhLWVtcHJlc2EnKSwgLy8gU2VsZWN0b3IgZW1wcmVzYQ0KICAgICAgICAgICAgZ3J1YUFubzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dydWEtYW5vJyksIC8vIFNlbGVjdG9yIGHDsW8NCiAgICAgICAgICAgIGdydWFJdGVtRGVzY3JpcGNpb246IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncnVhLWl0ZW0tZGVzY3JpcGNpb24nKSwNCiAgICAgICAgICAgIGdydWFJdGVtSG9yYXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncnVhLWl0ZW0taG9yYXMnKSwNCiAgICAgICAgICAgIGdydWFJdGVtUmVjYXJnbzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dydWEtaXRlbS1yZWNhcmdvJyksDQogICAgICAgICAgICBncnVhRGlzcGxheVByZWNpbzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dydWEtZGlzcGxheS1wcmVjaW8nKSwNCiAgICAgICAgICAgIGdydWFEaXNwbGF5U2FsaWRhOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3J1YS1kaXNwbGF5LXNhbGlkYScpLA0KICAgICAgICAgICAgZ3J1YURpc3BsYXlNaW5pbW86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncnVhLWRpc3BsYXktbWluaW1vJyksDQogICAgICAgICAgICBncnVhRGlzcGxheUhvcmFzQ29icmFyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3J1YS1kaXNwbGF5LWhvcmFzLWNvYnJhcicpLA0KICAgICAgICAgICAgZ3J1YVRvdGFsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3J1YS10b3RhbCcpLA0KICAgICAgICAgICAgZ3J1YVN1bW1hcnlMaXN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3J1YS1zdW1tYXJ5LWxpc3QnKSwgLy8gKioqKiBOVUVWTyAqKioqDQogICAgICAgICAgICBjbG9zZUdydWFNb2RhbEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWdydWEtbW9kYWwtYnRuJyksIC8vICoqKiogTU9ESUZJQ0FETyAqKioqDQogICAgICAgICAgICBhZGRHcnVhSXRlbUJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1ncnVhLWl0ZW0tYnRuJyksIC8vICoqKiogTU9ESUZJQ0FETyAqKioqDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICoqKiogTlVFVk86IERPTSBDYWNoZSBwYXJhIE1vZGFsIGRlIEFjdHVhbGl6YWNpw7NuIGRlIEdyw7phICoqKioNCiAgICAgICAgICAgIHVwZGF0ZVByZWNpb3NHcnVhTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJlY2lvcy1ncnVhLW1vZGFsJyksDQogICAgICAgICAgICB1cGRhdGVQcmVjaW9zR3J1YUVtcHJlc2E6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJlY2lvcy1ncnVhLWVtcHJlc2EnKSwNCiAgICAgICAgICAgIHVwZGF0ZVByZWNpb3NHcnVhQW5vQmFzZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZS1wcmVjaW9zLWdydWEtYW5vLWJhc2UnKSwNCiAgICAgICAgICAgIHVwZGF0ZVByZWNpb3NHcnVhTnVldm9Bbm86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJlY2lvcy1ncnVhLW51ZXZvLWFubycpLA0KICAgICAgICAgICAgdXBkYXRlUHJlY2lvc0dydWFGb3JtOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlLXByZWNpb3MtZ3J1YS1mb3JtJyksDQogICAgICAgICAgICB1cGRhdGVQcmVjaW9zR3J1YUl0ZW1zTGlzdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZS1wcmVjaW9zLWdydWEtaXRlbXMtbGlzdCcpLA0KICAgICAgICAgICAgY2FuY2VsVXBkYXRlUHJlY2lvc0dydWFCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwtdXBkYXRlLXByZWNpb3MtZ3J1YS1idG4nKSwNCiAgICAgICAgICAgIHNhdmVVcGRhdGVQcmVjaW9zR3J1YUJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtdXBkYXRlLXByZWNpb3MtZ3J1YS1idG4nKSwNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vIC0tLSBVVElMSURBREVTIC0tLQ0KICAgICAgICANCiAgICAgICAgY29uc3QgbWFya0RpcnR5ID0gKCkgPT4gew0KICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc0RpcnR5KSB7DQogICAgICAgICAgICAgICAgc3RhdGUuaXNEaXJ0eSA9IHRydWU7DQogICAgICAgICAgICAgICAgcmVuZGVyU2lkZWJhcigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGZvcm1hdEN1cnJlbmN5ID0gKHZhbHVlKSA9PiB7DQogICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgcmV0dXJuIG51bS50b0xvY2FsZVN0cmluZygnZXMtRVMnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUicgfSk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBmb3JtYXREYXRlVG9ZTUQgPSAoZGF0ZSkgPT4gew0KICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKGRhdGUpOw0KICAgICAgICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBnZXRUb2RheURhdGVTdHJpbmcgPSAoKSA9PiBmb3JtYXREYXRlVG9ZTUQobmV3IERhdGUoKSk7DQogICAgICAgIA0KICAgICAgICBjb25zdCBlc2NhcGVIdG1sID0gKHVuc2FmZSkgPT4gdHlwZW9mIHVuc2FmZSA9PT0gJ3N0cmluZycgPyB1bnNhZmUucmVwbGFjZSgvJi9nLCAiJmFtcDsiKS5yZXBsYWNlKC88L2csICImbHQ7IikucmVwbGFjZSgvPi9nLCAiJmd0OyIpLnJlcGxhY2UoLyIvZywgIiZxdW90OyIpLnJlcGxhY2UoLycvZywgIiYjMDM5OyIpIDogdW5zYWZlOw0KDQogICAgICAgIGNvbnN0IHNob3dDdXN0b21BbGVydCA9ICh0aXRsZSwgbWVzc2FnZSkgPT4gew0KICAgICAgICAgICAgZG9tLmN1c3RvbUFsZXJ0VGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTsNCiAgICAgICAgICAgIGRvbS5jdXN0b21BbGVydE1lc3NhZ2UudGV4dENvbnRlbnQgPSBtZXNzYWdlOw0KICAgICAgICAgICAgZG9tLmN1c3RvbUFsZXJ0TW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHNob3dDdXN0b21Db25maXJtID0gKHRpdGxlLCBtZXNzYWdlKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsNCiAgICAgICAgICAgICAgICBkb20uY3VzdG9tQ29uZmlybVRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7DQogICAgICAgICAgICAgICAgZG9tLmN1c3RvbUNvbmZpcm1NZXNzYWdlLnRleHRDb250ZW50ID0gbWVzc2FnZTsNCiAgICAgICAgICAgICAgICBkb20uY3VzdG9tQ29uZmlybU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZG9tLmN1c3RvbUNvbmZpcm1Pa0J0bi5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkb20uY3VzdG9tQ29uZmlybU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICBkb20uY3VzdG9tQ29uZmlybUNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkb20uY3VzdG9tQ29uZmlybU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vIFByb21wdCBQZXJzb25hbGl6YWRvDQogICAgICAgIGNvbnN0IHNob3dDdXN0b21Qcm9tcHQgPSAodGl0bGUsIG1lc3NhZ2UsIGRlZmF1bHRWYWx1ZSA9ICcnKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsNCiAgICAgICAgICAgICAgICBkb20uY3VzdG9tUHJvbXB0VGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTsNCiAgICAgICAgICAgICAgICBkb20uY3VzdG9tUHJvbXB0TWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7DQogICAgICAgICAgICAgICAgZG9tLmN1c3RvbVByb21wdElucHV0LnZhbHVlID0gZGVmYXVsdFZhbHVlOw0KICAgICAgICAgICAgICAgIGRvbS5jdXN0b21Qcm9tcHRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICAgICAgICAgIGRvbS5jdXN0b21Qcm9tcHRJbnB1dC5mb2N1cygpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGRvbS5jdXN0b21Qcm9tcHRPa0J0bi5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkb20uY3VzdG9tUHJvbXB0TW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkb20uY3VzdG9tUHJvbXB0SW5wdXQudmFsdWUpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgZG9tLmN1c3RvbVByb21wdENhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkb20uY3VzdG9tUHJvbXB0TW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTsgLy8gUmVzdWVsdmUgY29tbyBudWxsIHNpIHNlIGNhbmNlbGENCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgY2xvc2VNb2RhbCA9IChtb2RhbCkgPT4gew0KICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAtLS0gQ8OBTENVTE9TIC0tLQ0KICAgICAgICANCiAgICAgICAgY29uc3QgY2FsY3VsYXRlUHJlY2lvSG9yYXMgPSAoaG9yYXMpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGggPSBwYXJzZUZsb2F0KGhvcmFzKSB8fCAwOw0KICAgICAgICAgICAgcmV0dXJuIGggKiAzMDsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBjYWxjdWxhdGVDb21pZGEgPSAoaG9yYXMpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGggPSBwYXJzZUZsb2F0KGhvcmFzKSB8fCAwOw0KICAgICAgICAgICAgaWYgKGggPT09IDApIHJldHVybiAwOw0KICAgICAgICAgICAgcmV0dXJuIChoIC8gMTEpICogMTI7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyBFc3RhIGZ1bmNpw7NuIGNhbGN1bGEgZWwgdG90YWwgU09MTyBkZSBsb3MgcmVnaXN0cm9zDQogICAgICAgIGNvbnN0IGNhbGN1bGF0ZVRvdGFsQ29zdGVzRGV0YWxsZSA9IChvdElkLCBmZWNoYUNvcnRlID0gJycpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvc09UID0gc3RhdGUucmVnaXN0cm9zW290SWRdIHx8IFtdOw0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsNCiAgICAgICAgICAgIGNvbnN0IGlzQ3V0b2ZmQWN0aXZlID0gZmVjaGFDb3J0ZSAmJiB0b2RheSA+PSBmZWNoYUNvcnRlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBsZXQgdG90YWwgPSAwOw0KICAgICAgICAgICAgcmVnaXN0cm9zT1QuZm9yRWFjaChyZWcgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpc0N1dG9mZkFjdGl2ZSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBTaSBlbCBjb3J0ZSBlc3TDoSBhY3Rpdm8sIHNvbG8gc3VtYW1vcyByZWdpc3Ryb3MgZGVzZGUgbGEgZmVjaGEgZGUgY29ydGUNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZy5mZWNoYSA+PSBmZWNoYUNvcnRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSAocGFyc2VGbG9hdChyZWcuY29zdGVfdG90YWxfcmVnaXN0cm8pIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gaGF5IGNvcnRlIG8gZXMgZnV0dXJvLCBzdW1hbW9zIHRvZG8NCiAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gKHBhcnNlRmxvYXQocmVnLmNvc3RlX3RvdGFsX3JlZ2lzdHJvKSB8fCAwKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiB0b3RhbDsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAtLS0gTMOTR0lDQSBERSBSRU5ERVJJWkFETyAtLS0NCg0KICAgICAgICANCiAgICAgICAgLy8gLS0tIExPR0lDQSBJQSBBU0lTVEVOVEUgKERBVE9TIFRPVEFMSVpBRE9TKSAtLS0NCiAgICAgICAgY29uc3QgYWRkQ2hhdE1lc3NhZ2UgPSAocm9sZSwgdGV4dCkgPT4gew0KICAgICAgICAgICAgaWYgKCFkb20uYWlNZXNzYWdlcykgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gcm9sZSA9PT0gJ2FpJyA/ICdtZXNzYWdlLWFpIHAtMyB0ZXh0LXhzIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLWdyYXktMTAwJyA6ICdtZXNzYWdlLXVzZXIgcC0zIHRleHQteHMgc2hhZG93LXNtJzsNCiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSB0ZXh0LnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7DQogICAgICAgICAgICBkb20uYWlNZXNzYWdlcy5hcHBlbmRDaGlsZChkaXYpOw0KICAgICAgICAgICAgZG9tLmFpTWVzc2FnZXMuc2Nyb2xsVG9wID0gZG9tLmFpTWVzc2FnZXMuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGdldEdsb2JhbERhdGFDb250ZXh0ID0gKCkgPT4gew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gc3RhdGUub3RzLm1hcChvdCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ3MgPSBzdGF0ZS5yZWdpc3Ryb3Nbb3QuaWRdIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYW1vcyBtw6l0cmljYXMgZ2xvYmFsZXMgcGFyYSBlc3RhIE9UDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXNQcm9kOiAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXNJbXBybzogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvc3RlTU86IDAsDQogICAgICAgICAgICAgICAgICAgICAgICBjb3N0ZUNvbWlkYTogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Rlc0NhdGVnb3JpYXM6IHt9LA0KICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxSZWdzOiAwDQogICAgICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAgICAgcmVncy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuaG9yYXNQcm9kICs9IChwYXJzZUZsb2F0KHIuaG9yYXNfdHJhYmFqYWRvcmVzKSB8fCAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmhvcmFzSW1wcm8gKz0gKHBhcnNlRmxvYXQoci5ob3Jhc19pbXByb2R1Y3RpdmFzKSB8fCAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmNvc3RlTU8gKz0gKHBhcnNlRmxvYXQoci5wcmVjaW9faG9yYXMpIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuY29zdGVDb21pZGEgKz0gKHBhcnNlRmxvYXQoci5jb21pZGEpIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMudG90YWxSZWdzICs9IChwYXJzZUZsb2F0KHIuY29zdGVfdG90YWxfcmVnaXN0cm8pIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdW1hciBwb3IgY2F0ZWdvcsOtYSBkaW7DoW1pY2EgKENvbnN1bWlibGVzLCBPYnJhIENpdmlsLCBldGMuKQ0KICAgICAgICAgICAgICAgICAgICAgICAgQ09TVF9GSUVMRFMuZm9yRWFjaChmID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBwYXJzZUZsb2F0KHJbZi5pZCArICdfdG90YWwnXSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5jb3N0ZXNDYXRlZ29yaWFzW2YubGFiZWxdID0gKHN0YXRzLmNvc3Rlc0NhdGVnb3JpYXNbZi5sYWJlbF0gfHwgMCkgKyB2YWw7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxxdWlsZXJlcyB5IEdyw7phcyAoc29uIGNhbXBvcyBlc3BlY2lhbGVzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuY29zdGVzQ2F0ZWdvcmlhc1siQWxxdWlsZXJlcy9Db21wcmVzb3JlcyJdID0gKHN0YXRzLmNvc3Rlc0NhdGVnb3JpYXNbIkFscXVpbGVyZXMvQ29tcHJlc29yZXMiXSB8fCAwKSArIChwYXJzZUZsb2F0KHIuZ3J1cG9zX3NvbF90b3RhbCkgfHwgMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5jb3N0ZXNDYXRlZ29yaWFzWyJHcnVhcy9DYW1pb25lcyJdID0gKHN0YXRzLmNvc3Rlc0NhdGVnb3JpYXNbIkdydWFzL0NhbWlvbmVzIl0gfHwgMCkgKyAocGFyc2VGbG9hdChyLmdydWFfY2FtaW9uX3RvdGFsKSB8fCAwKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG90OiBvdC5ub21icmUsDQogICAgICAgICAgICAgICAgICAgICAgICBpZDogb3QuaWQsDQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bWVuX21hbm9fb2JyYTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX2hvcmFzX3Byb2R1Y3RpdmFzOiBzdGF0cy5ob3Jhc1Byb2QudG9GaXhlZCgyKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9ob3Jhc19pbXByb2R1Y3RpdmFzOiBzdGF0cy5ob3Jhc0ltcHJvLnRvRml4ZWQoMiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9yY2VudGFqZV9pbXByb2R1Y3RpdmlkYWQ6IHN0YXRzLmhvcmFzUHJvZCA+IDAgPyAoKHN0YXRzLmhvcmFzSW1wcm8gLyAoc3RhdHMuaG9yYXNQcm9kICsgc3RhdHMuaG9yYXNJbXBybykpICogMTAwKS50b0ZpeGVkKDEpICsgIiUiIDogIjAlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3N0ZV9tYW5vX29icmFfdG90YWw6IHN0YXRzLmNvc3RlTU8udG9GaXhlZCgyKSArICLigqwiDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FzdG9zX290cm9zOiBzdGF0cy5jb3N0ZXNDYXRlZ29yaWFzLA0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FzdG9fZW5fY3Vyc29fZmlqbzogKG90Lmdhc3RvRW5DdXJzbyB8fCAwKSArICLigqwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxfZmluYWxfb3Q6IChzdGF0cy50b3RhbFJlZ3MgKyAob3QuZ2FzdG9FbkN1cnNvIHx8IDApKS50b0ZpeGVkKDIpICsgIuKCrCIsDQogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9yZWdpc3Ryb3NfZGlhcmlvczogcmVncy5sZW5ndGgNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3VtbWFyeSk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IHJldHVybiAiW10iOyB9DQogICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjYWxsR2VtaW5pQVBJID0gYXN5bmMgKHByb21wdCkgPT4gew0KICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IGdldEdsb2JhbERhdGFDb250ZXh0KCk7DQogICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gew0KICAgICAgICAgICAgICAgIG1vZGVsOiAib3BlbmFpIiwNCiAgICAgICAgICAgICAgICBtZXNzYWdlczogWw0KICAgICAgICAgICAgICAgICAgICB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogInN5c3RlbSIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogIkVyZXMgdW4gZXhwZXJ0byBhbmFsaXN0YSBkZSBjb3N0ZXMgaW5kdXN0cmlhbGVzLiBSZXNwb25kZSBkZSBmb3JtYSB0w6ljbmljYSB5IHByb2Zlc2lvbmFsLiBEYXRvcyBhY3R1YWxlczogIiArIGNvbnRleHQgDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsgcm9sZTogInVzZXIiLCBjb250ZW50OiBwcm9tcHQgfQ0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCJodHRwczovL3RleHQucG9sbGluYXRpb25zLmFpL29wZW5haS92MS9jaGF0L2NvbXBsZXRpb25zIiwgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyANCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsDQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJHtpbnRlcm5hbEtleX0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hvaWNlcyAmJiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZSkgew0KICAgICAgICAgICAgICAgICAgICBhZGRDaGF0TWVzc2FnZSgnYWknLCBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhZGRDaGF0TWVzc2FnZSgnYWknLCAnRWwgbW90b3IgZGUgYW7DoWxpc2lzIG5vIGhhIHJlc3BvbmRpZG8gY29ycmVjdGFtZW50ZS4nKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IA0KICAgICAgICAgICAgICAgIGFkZENoYXRNZXNzYWdlKCdhaScsICdFcnJvciBkZSBjb25leGnDs24gY29uIGVsIG1vdG9yIGludGVsaWdlbnRlLicpOyANCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KY29uc3QgcmVuZGVyID0gKCkgPT4gew0KICAgICAgICAgICAgcmVuZGVyU2lkZWJhcigpOw0KICAgICAgICAgICAgaWYgKHN0YXRlLmFjdGl2ZVZpZXcgPT09ICdvdHMnKSB7DQogICAgICAgICAgICAgICAgZG9tLm90Vmlldy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsNCiAgICAgICAgICAgICAgICBkb20ucmVnaXN0cm9WaWV3LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOw0KICAgICAgICAgICAgICAgIHJlbmRlck9UTGlzdFZpZXcoKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuYWN0aXZlVmlldyA9PT0gJ3JlZ2lzdHJvcycpIHsNCiAgICAgICAgICAgICAgICBkb20ub3RWaWV3LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOw0KICAgICAgICAgICAgICAgIGRvbS5yZWdpc3Ryb1ZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7DQogICAgICAgICAgICAgICAgcmVuZGVyUmVnaXN0cm9UYWJsZVZpZXcoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW5kZXJTaWRlYmFyID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgaGFzRGF0YSA9IHN0YXRlLm90cy5sZW5ndGggPiAwIHx8IHN0YXRlLmRhdGFMb2FkZWQ7DQogICAgICAgICAgICBkb20uaW1wb3J0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsIGhhc0RhdGEpOw0KICAgICAgICAgICAgZG9tLnNhdmVDaGFuZ2VzQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFoYXNEYXRhKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gSW5kaWNhZG9yIGRlIGNhbWJpb3MNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG5UZXh0ID0gIkd1YXJkYXIgQ2FtYmlvcyIgKyAoc3RhdGUuaXNEaXJ0eSA/ICIgKiIgOiAiIik7DQogICAgICAgICAgICBkb20uc2F2ZUNoYW5nZXNCdG4udGV4dENvbnRlbnQgPSBzYXZlQnRuVGV4dDsNCiAgICAgICAgICAgIGRvbS5zYXZlQ2hhbmdlc0J0bi5jbGFzc0xpc3QudG9nZ2xlKCdhbmltYXRlLXB1bHNlJywgc3RhdGUuaXNEaXJ0eSk7DQogICAgICAgICAgICBkb20uc2F2ZUNoYW5nZXNCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnYmctcmVkLTYwMCcsIHN0YXRlLmlzRGlydHkpOw0KICAgICAgICAgICAgZG9tLnNhdmVDaGFuZ2VzQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hvdmVyOmJnLXJlZC03MDAnLCBzdGF0ZS5pc0RpcnR5KTsNCiAgICAgICAgICAgIGRvbS5zYXZlQ2hhbmdlc0J0bi5jbGFzc0xpc3QudG9nZ2xlKCdiZy1zbGF0ZS03MDAnLCAhc3RhdGUuaXNEaXJ0eSk7DQogICAgICAgICAgICBkb20uc2F2ZUNoYW5nZXNCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaG92ZXI6Ymctc2xhdGUtODAwJywgIXN0YXRlLmlzRGlydHkpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgcmVuZGVyT1RMaXN0VmlldyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBkb20uc2VhcmNoT3RJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRPVHMgPSBzdGF0ZS5vdHMuZmlsdGVyKG90ID0+IG90Lm5vbWJyZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGZpbHRlcmVkT1RzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGRvbS5vdExpc3RDb250YWluZXIuaW5uZXJIVE1MID0gYDxwIGNsYXNzPSJ0ZXh0LWdyYXktNTAwIGNvbC1zcGFuLWZ1bGwgdGV4dC1jZW50ZXIiPk5vIHNlIGhhbiBlbmNvbnRyYWRvIE9Ucy4gJHtzdGF0ZS5vdHMubGVuZ3RoID09PSAwID8gJ0HDsWFkZSB1bmEgbnVldmEgcGFyYSBlbXBlemFyLicgOiAnSW50ZW50YSBjb24gb3RyYSBiw7pzcXVlZGEuJ308L3A+YDsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvbS5vdExpc3RDb250YWluZXIuaW5uZXJIVE1MID0gZmlsdGVyZWRPVHMubWFwKG90ID0+IHsNCiAgICAgICAgICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IEPDoWxjdWxvIGRlIHRvdGFsIGRlc2dsb3NhZG8gKioqKg0KICAgICAgICAgICAgICAgIGNvbnN0IGFqdXN0ZSA9IHBhcnNlRmxvYXQob3QuYWp1c3RlSW5mb3JtYXRpdm8pIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgZmVjaGFDb3J0ZSA9IG90LmZlY2hhQ29ydGUgfHwgJyc7DQogICAgICAgICAgICAgICAgY29uc3QgdG9kYXlTdHIgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsNCiAgICAgICAgICAgICAgICBjb25zdCBpc0N1dG9mZkFjdGl2ZSA9IGZlY2hhQ29ydGUgJiYgdG9kYXlTdHIgPj0gZmVjaGFDb3J0ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbENvc3RlUmVnaXN0cm9zID0gY2FsY3VsYXRlVG90YWxDb3N0ZXNEZXRhbGxlKG90LmlkLCBmZWNoYUNvcnRlKTsNCiAgICAgICAgICAgICAgICBjb25zdCBnYXN0b0VuQ3Vyc28gPSBvdC5nYXN0b0VuQ3Vyc28gfHwgMDsNCiAgICAgICAgICAgICAgICAvLyBFbCBhanVzdGUgc29sbyBzZSBzdW1hIHNpIGxhIGZlY2hhIGRlIGNvcnRlIHlhIGhhIHBhc2FkbyBvIGVzIGhveQ0KICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsQ29zdGVGaW5hbCA9IChpc0N1dG9mZkFjdGl2ZSA/IGFqdXN0ZSA6IDApICsgdG90YWxDb3N0ZVJlZ2lzdHJvcyArIGdhc3RvRW5DdXJzbzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwLzgwIHAtNiBmbGV4IGZsZXgtY29sIHRyYW5zaXRpb24tYWxsIGhvdmVyOnNoYWRvdy14bCBob3ZlcjotdHJhbnNsYXRlLXktMSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgbWItMiB0cnVuY2F0ZSIgdGl0bGU9IiR7ZXNjYXBlSHRtbChvdC5ub21icmUpfSI+JHtlc2NhcGVIdG1sKG90Lm5vbWJyZSl9PC9oMz4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LWdyYXktNTAwIHRleHQtc20gbWItNCI+SUQ6ICR7b3QuaWR9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC1hdXRvIHNwYWNlLXktMyI+DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tICoqKiogTU9ESUZJQ0FETzogU2VjY2nDs24gZGUgdG90YWwgZGVzZ2xvc2FkbyAqKioqIC0tPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktMiB0ZXh0LXNtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWdyYXktNTAwIj5Ub3RhbCBSZWdpc3Ryb3M6PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTcwMCI+JHtmb3JtYXRDdXJyZW5jeSh0b3RhbENvc3RlUmVnaXN0cm9zKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZ2FzdG8tZW4tY3Vyc28tJHtvdC5pZH0iIGNsYXNzPSJ0ZXh0LWdyYXktNTAwIj5HYXN0byBlbiBjdXJzbzo8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9Imdhc3RvLWVuLWN1cnNvLSR7b3QuaWR9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJnYXN0by1lbi1jdXJzby1pbnB1dCB3LTI4IHRleHQtcmlnaHQgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNzAwIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBwLTEgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9IiR7Z2FzdG9FbkN1cnNvLnRvRml4ZWQoMil9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtb3QtaWQ9IiR7b3QuaWR9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBiZy1ibHVlLTUwLzUwIHAtMSByb3VuZGVkIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idGV4dC1ncmF5LTUwMCB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdXBwZXJjYXNlIj5BanVzdGUgYWwgbGlzdGFkbzo8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImFqdXN0ZS1pbmZvcm1hdGl2by1pbnB1dCB3LTI0IHRleHQtcmlnaHQgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgYm9yZGVyLWJsdWUtMjAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIHAtMSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iJHsob3QuYWp1c3RlSW5mb3JtYXRpdm8gfHwgMCkudG9GaXhlZCgyKX0iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1vdC1pZD0iJHtvdC5pZH0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idGV4dC1ncmF5LTUwMCB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdXBwZXJjYXNlIj5GZWNoYSBDb3J0ZTo8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJmZWNoYS1jb3J0ZS1pbnB1dCB3LTI4IHRleHQtcmlnaHQgdGV4dC14cyBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcC0xIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSIke290LmZlY2hhQ29ydGUgfHwgJyd9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtb3QtaWQ9IiR7b3QuaWR9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIgYm9yZGVyLXQgcHQtMyBtdC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPkNvc3RlIFRvdGFsIE9UPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC0yeGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwIj4ke2Zvcm1hdEN1cnJlbmN5KHRvdGFsQ29zdGVGaW5hbCl9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gKioqKiBGSU4gREUgU0VDQ0nDk04gTU9ESUZJQ0FEQSAqKioqIC0tPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idmlldy1yZWdpc3Ryb3MtYnRuIHctZnVsbCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiIGRhdGEtb3QtaWQ9IiR7b3QuaWR9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyIFJlZ2lzdHJvcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFkZC1yZWdpc3Ryby10by1vdC1idG4gdy1mdWxsIGJnLXNreS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNreS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiIGRhdGEtb3QtaWQ9IiR7b3QuaWR9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBBw7FhZGlyIFJlZ2lzdHJvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiBwdC0yIGJvcmRlci10IG10LTMiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJlZGl0LW90LWJ0biB3LTEvMiB0ZXh0LXNtIHRleHQtY2VudGVyIHRleHQtZ3JheS02MDAgZm9udC1tZWRpdW0gcHktMSBweC0yIHJvdW5kZWQtbWQgaG92ZXI6YmctZ3JheS0yMDAiIGRhdGEtb3QtaWQ9IiR7b3QuaWR9Ij5FZGl0YXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGVsZXRlLW90LWJ0biB3LTEvMiB0ZXh0LXNtIHRleHQtY2VudGVyIHRleHQtcmVkLTYwMCBmb250LW1lZGl1bSBweS0xIHB4LTIgcm91bmRlZC1tZCBob3ZlcjpiZy1yZWQtMTAwIiBkYXRhLW90LWlkPSIke290LmlkfSI+RWxpbWluYXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgfSkuam9pbignJyk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCByZW5kZXJSZWdpc3Ryb1RhYmxlVmlldyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG90ID0gc3RhdGUub3RzLmZpbmQobyA9PiBvLmlkID09PSBzdGF0ZS5hY3RpdmVPVElkKTsNCiAgICAgICAgICAgIGlmICghb3QpIHsNCiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkVycm9yIiwgIk5vIHNlIHB1ZG8gZW5jb250cmFyIGxhIE9UIHNlbGVjY2lvbmFkYS4iKTsNCiAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVWaWV3ID0gJ290cyc7DQogICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlT1RJZCA9IG51bGw7DQogICAgICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20ucmVnaXN0cm9WaWV3VGl0bGUudGV4dENvbnRlbnQgPSBgUmVnaXN0cm9zIGRlOiAke290Lm5vbWJyZX1gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCByZWdpc3Ryb3MgPSBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0gfHwgW107DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEPDoWxjdWxvcyBwYXJhIGVsIFBhbmVsIGRlIFJlc3VtZW4gU3VwZXJpb3INCiAgICAgICAgICAgIGNvbnN0IHN1bVAgPSByZWdpc3Ryb3MucmVkdWNlKChzLCByKSA9PiBzICsgKHBhcnNlRmxvYXQoci5ob3Jhc190cmFiYWphZG9yZXMpIHx8IDApLCAwKTsNCiAgICAgICAgICAgIGNvbnN0IHN1bUkgPSByZWdpc3Ryb3MucmVkdWNlKChzLCByKSA9PiBzICsgKHBhcnNlRmxvYXQoci5ob3Jhc19pbXByb2R1Y3RpdmFzKSB8fCAwKSwgMCk7DQogICAgICAgICAgICBjb25zdCBjb3N0UCA9IGNhbGN1bGF0ZVByZWNpb0hvcmFzKHN1bVApOw0KICAgICAgICAgICAgY29uc3QgY29zdEkgPSBjYWxjdWxhdGVQcmVjaW9Ib3JhcyhzdW1JKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUh0bWwgPSBgDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMyBnYXAtNCBtYi02Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC00IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBzaGFkb3ctc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIj5NYW5vIGRlIE9icmEgUHJvZHVjdGl2YTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWVuZCBtdC0xIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIj4ke3N1bVAudG9GaXhlZCgyKX1oPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1pbmRpZ28tNjAwIj4ke2Zvcm1hdEN1cnJlbmN5KGNvc3RQKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtNCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItcmVkLTEwMCBzaGFkb3ctc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHRleHQtcmVkLTQwMCB1cHBlcmNhc2UiPk1hbm8gZGUgT2JyYSBJbXByb2R1Y3RpdmE8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQgbXQtMSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXJlZC02MDAiPiR7c3VtSS50b0ZpeGVkKDIpfWg8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXJlZC02MDAiPiR7Zm9ybWF0Q3VycmVuY3koY29zdEkpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctaW5kaWdvLTYwMCBwLTQgcm91bmRlZC14bCBzaGFkb3ctbWQgdGV4dC13aGl0ZSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1pbmRpZ28tMTAwIHVwcGVyY2FzZSI+VG90YWwgTWFubyBkZSBPYnJhIChNTyk8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQgbXQtMSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCI+JHsoc3VtUCArIHN1bUkpLnRvRml4ZWQoMil9aDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC14bCBmb250LWJsYWNrIj4ke2Zvcm1hdEN1cnJlbmN5KGNvc3RQICsgY29zdEkpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChyZWdpc3Ryb3MubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgZG9tLnJlZ2lzdHJvVGFibGVDb250YWluZXIuaW5uZXJIVE1MID0gc3VtbWFyeUh0bWwgKyBgPHAgY2xhc3M9InRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXIgcC04Ij5ObyBoYXkgcmVnaXN0cm9zIHBhcmEgZXN0YSBPVC4gQcOxYWRlIHVubyBwYXJhIGVtcGV6YXIuPC9wPmA7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBPcmRlbmFyIHJlZ2lzdHJvcyBwb3IgZmVjaGEsIGRlbCBtw6FzIHJlY2llbnRlIGFsIG3DoXMgYW50aWd1bw0KICAgICAgICAgICAgY29uc3Qgc29ydGVkUmVnaXN0cm9zID0gWy4uLnJlZ2lzdHJvc10uc29ydCgoYSwgYikgPT4gYi5mZWNoYS5sb2NhbGVDb21wYXJlKGEuZmVjaGEpKTsNCg0KICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gYDx0cj4NCiAgICAgICAgICAgICAgICAke1JFR0lTVFJPX1RBQkxFX0NPTFVNTlMubWFwKGNvbCA9PiBgPHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJweC00IHB5LTMgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIiPiR7Y29sLmxhYmVsfTwvdGg+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgPHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZWxhdGl2ZSBweC00IHB5LTMiPjxzcGFuIGNsYXNzPSJzci1vbmx5Ij5BY2Npb25lczwvc3Bhbj48L3RoPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBib2R5Um93cyA9IHNvcnRlZFJlZ2lzdHJvcy5tYXAocmVnID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBjZWxscyA9IFJFR0lTVFJPX1RBQkxFX0NPTFVNTlMubWFwKGNvbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHJlZ1tjb2wuaWRdIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gJyc7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZy5pc0ltcG9ydExvZyAmJiBjb2wuaWQgPT09ICdmZWNoYScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYDxzcGFuIGNsYXNzPSJmb250LWJvbGQgdGV4dC1ibHVlLTcwMCI+SU1QT1JUQUNJw5NOPC9zcGFuPmA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnLmlzSW1wb3J0TG9nICYmIGNvbC5pZCA9PT0gJ2hvcmFzX3RyYWJhamFkb3JlcycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYDxzcGFuIGNsYXNzPSJ0ZXh0LVsxMHB4XSI+JHtyZWcuaW1wb3J0TXNnfTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlZy5pc0FqdXN0ZUdhc3RvICYmIGNvbC5pZCA9PT0gJ2ZlY2hhJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LW9yYW5nZS03MDAiPkFKVVNURSBHQzwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlZy5pc0FqdXN0ZUdhc3RvICYmIGNvbC5pZCA9PT0gJ2hvcmFzX3RyYWJhamFkb3JlcycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYDxzcGFuIGNsYXNzPSJ0ZXh0LVsxMHB4XSI+JHtyZWcuYWp1c3RlTXNnfTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbC5pZCA9PT0gJ2ZlY2hhJykgew0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEHDsWFkaXIgVDAwOjAwOjAwIHBhcmEgYXNlZ3VyYXIgcXVlIHNlIGludGVycHJldGEgY29tbyBmZWNoYSBsb2NhbCB5IG5vIFVUQw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBuZXcgRGF0ZShyZWcuZmVjaGEgKyAnVDAwOjAwOjAwJykudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHsgZGF5OiAnMi1kaWdpdCcsIG1vbnRoOiAnMi1kaWdpdCcsIHllYXI6ICdudW1lcmljJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gcmVnLmZlY2hhOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbC5pZCA9PT0gJ2hvcmFzX3RyYWJhamFkb3JlcycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2wuaWQgPT09ICdob3Jhc19pbXByb2R1Y3RpdmFzJyAmJiBwYXJzZUZsb2F0KHZhbHVlKSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBgPHNwYW4gY2xhc3M9InRleHQtcmVkLTYwMCBmb250LWJvbGQiPiR7cGFyc2VGbG9hdCh2YWx1ZSkudG9GaXhlZCgyKX08L3NwYW4+YDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBwYXJzZUZsb2F0KHZhbHVlKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sLmlkLmVuZHNXaXRoKCdfdG90YWwnKSB8fCBjb2wuaWQgPT09ICdwcmVjaW9faG9yYXMnIHx8IGNvbC5pZCA9PT0gJ2NvbWlkYScgfHwgY29sLmlkID09PSAnY29zdGVfdG90YWxfcmVnaXN0cm8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBjYW1wbyBkZSBjb3N0ZSwgbW9zdHJhcmxvIGNvbW8gbW9uZWRhIHkgYcOxYWRpciBib3TDs24gZGUgZGV0YWxsZXMgc2kgdGllbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc0RldGFsbGUgPSByZWdbY29sLmlkLnJlcGxhY2UoJ190b3RhbCcsICdfZGV0YWxsZScpXT8ubGVuZ3RoID4gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTMOzZ2ljYSBwYXJhICdncnVwb3Nfc29sX3RvdGFsJw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRldGFsbGVBbHF1aWxlciA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBDb21wcm9iYXIgc2kgZXMgdW4gYXJyYXkgY29uIGl0ZW1zIG8gdW4gb2JqZXRvIGNvbiB0b3RhbCAoY29tcGF0aWJpbGlkYWQpICoqKioNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2wuaWQgPT09ICdncnVwb3Nfc29sX3RvdGFsJyAmJiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkocmVnLmdydXBvc19zb2xfZGV0YWxsZSkgJiYgcmVnLmdydXBvc19zb2xfZGV0YWxsZS5sZW5ndGggPiAwKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVnLmdydXBvc19zb2xfZGV0YWxsZSA9PT0gJ29iamVjdCcgJiYgcmVnLmdydXBvc19zb2xfZGV0YWxsZSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShyZWcuZ3J1cG9zX3NvbF9kZXRhbGxlKSAmJiByZWcuZ3J1cG9zX3NvbF90b3RhbCA+IDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICApKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFsbGVBbHF1aWxlciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICoqKiogTU9ESUZJQ0FETzogTMOzZ2ljYSBwYXJhICdncnVhX2NhbWlvbl90b3RhbCcgKGNvbiBhcnJheSkgKioqKg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRldGFsbGVHcnVhID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmlkID09PSAnZ3J1YV9jYW1pb25fdG90YWwnICYmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShyZWcuZ3J1YV9jYW1pb25fZGV0YWxsZSkgJiYgcmVnLmdydWFfY2FtaW9uX2RldGFsbGUubGVuZ3RoID4gMCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIHJlZy5ncnVhX2NhbWlvbl9kZXRhbGxlID09PSAnb2JqZWN0JyAmJiByZWcuZ3J1YV9jYW1pb25fZGV0YWxsZSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShyZWcuZ3J1YV9jYW1pb25fZGV0YWxsZSkgJiYgcmVnLmdydWFfY2FtaW9uX3RvdGFsID4gMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWxsZUdydWEgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7Zm9ybWF0Q3VycmVuY3kodmFsdWUpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtoYXNEZXRhbGxlIHx8IGRldGFsbGVBbHF1aWxlciB8fCBkZXRhbGxlR3J1YSA/IGA8YnV0dG9uIGNsYXNzPSJ2aWV3LWRldGFsbGVzLWJ0biBtbC0yIHRleHQtYmx1ZS02MDAgaG92ZXI6dGV4dC1ibHVlLTgwMCIgZGF0YS1yZWNvcmQtaWQ9IiR7cmVnLnJlY29yZElkfSIgZGF0YS1maWVsZC1pZD0iJHtjb2wuaWQucmVwbGFjZSgnX3RvdGFsJywgJycpfSIgZGF0YS1maWVsZC1sYWJlbD0iJHtjb2wubGFiZWx9IiB0aXRsZT0iVmVyIGRldGFsbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC00IHctNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNSAxMmEzIDMgMCAxMS02IDAgMyAzIDAgMDE2IDB6IiAvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIuNDU4IDEyQzMuNzMyIDcuOTQzIDcuNTIzIDUgMTIgNWM0LjQ3OCAwIDguMjY4IDIuOTQzIDkuNTQyIDctMS4yNzQgNC4wNTctNS4wNjQgNy05LjU0MiA3LTQuNDc3IDAtOC4yNjgtMi45NDMtOS41NDItN3oiIC8+PC9zdmc+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPmAgOiAnJ30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gZXNjYXBlSHRtbCh2YWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8dGQgY2xhc3M9InB4LTQgcHktNCB3aGl0ZXNwYWNlLW5vd3JhcCB0ZXh0LXNtIHRleHQtZ3JheS03MDAiPiR7Y29udGVudH08L3RkPmA7DQogICAgICAgICAgICAgICAgfSkuam9pbignJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICAgICAgPHRyIGRhdGEtcmVjb3JkLWlkPSIke3JlZy5yZWNvcmRJZH0iIGNsYXNzPSIke3JlZy5pc0FqdXN0ZUdhc3RvID8gJ2JnLW9yYW5nZS0xMDAnIDogKHJlZy5pc0ltcG9ydExvZyA/ICdiZy1ibHVlLTUwJyA6ICcnKX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgJHtjZWxsc30NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1yaWdodCB0ZXh0LXNtIGZvbnQtbWVkaXVtIHNwYWNlLXgtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZWRpdC1yZWdpc3Ryby1idG4gdGV4dC1ibHVlLTYwMCBob3Zlcjp0ZXh0LWJsdWUtOTAwIiBkYXRhLXJlY29yZC1pZD0iJHtyZWcucmVjb3JkSWR9Ij5FZGl0YXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZWxldGUtcmVnaXN0cm8tYnRuIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC05MDAiIGRhdGEtcmVjb3JkLWlkPSIke3JlZy5yZWNvcmRJZH0iPkVsaW1pbmFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICB9KS5qb2luKCcnKTsNCg0KICAgICAgICAgICAgZG9tLnJlZ2lzdHJvVGFibGVDb250YWluZXIuaW5uZXJIVE1MID0gc3VtbWFyeUh0bWwgKyBgDQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJtaW4tdy1mdWxsIGRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMC81MCI+DQogICAgICAgICAgICAgICAgICAgIDx0aGVhZCBjbGFzcz0iYmctZ3JheS01MC85MCBiYWNrZHJvcC1ibHVyLXNtIHN0aWNreSB0b3AtMCB6LTEwIj4ke2hlYWRlclJvd308L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICA8dGJvZHkgY2xhc3M9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMC81MCI+JHtib2R5Um93c308L3Rib2R5Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICBgOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgLy8gLS0tIE1BTkVKTyBERSBNT0RBTEVTIC0tLQ0KDQogICAgICAgIGNvbnN0IG9wZW5PVE1vZGFsID0gKG90SWQgPSBudWxsKSA9PiB7DQogICAgICAgICAgICBjdXJyZW50RWRpdE9USWQgPSBvdElkOw0KICAgICAgICAgICAgaWYgKG90SWQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBvdCA9IHN0YXRlLm90cy5maW5kKG8gPT4gby5pZCA9PT0gb3RJZCk7DQogICAgICAgICAgICAgICAgaWYgKCFvdCkgew0KICAgICAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkVycm9yIiwgIk5vIHNlIHB1ZG8gZW5jb250cmFyIGxhIE9UIHBhcmEgZWRpdGFyLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvbS5vdE1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSAiRWRpdGFyIE9UIjsNCiAgICAgICAgICAgICAgICBkb20ub3ROb21icmUudmFsdWUgPSBvdC5ub21icmU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGRvbS5vdE1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSAiQcOxYWRpciBOdWV2YSBPVCI7DQogICAgICAgICAgICAgICAgZG9tLm90Rm9ybS5yZXNldCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZG9tLm90TW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgICAgIGRvbS5vdE5vbWJyZS5mb2N1cygpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZVNhdmVPVCA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG5vbWJyZSA9IGRvbS5vdE5vbWJyZS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBpZiAoIW5vbWJyZSkgew0KICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXJyb3IiLCAiRWwgbm9tYnJlIGRlIGxhIE9UIG5vIHB1ZWRlIGVzdGFyIHZhY8Otby4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjdXJyZW50RWRpdE9USWQpIHsNCiAgICAgICAgICAgICAgICAvLyBFZGl0YW5kbw0KICAgICAgICAgICAgICAgIGNvbnN0IG90ID0gc3RhdGUub3RzLmZpbmQobyA9PiBvLmlkID09PSBjdXJyZW50RWRpdE9USWQpOw0KICAgICAgICAgICAgICAgIGlmIChvdCkgb3Qubm9tYnJlID0gbm9tYnJlOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBDcmVhbmRvDQogICAgICAgICAgICAgICAgaWYgKHN0YXRlLm90cy5zb21lKG8gPT4gby5ub21icmUudG9Mb3dlckNhc2UoKSA9PT0gbm9tYnJlLnRvTG93ZXJDYXNlKCkpKSB7DQogICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXJyb3IiLCAiWWEgZXhpc3RlIHVuYSBPVCBjb24gZXNlIG5vbWJyZS4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCBuZXdPVCA9IHsNCiAgICAgICAgICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksDQogICAgICAgICAgICAgICAgICAgIG5vbWJyZTogbm9tYnJlLA0KICAgICAgICAgICAgICAgICAgICBnYXN0b0VuQ3Vyc286IDAsDQogICAgICAgICAgICAgICAgICAgIGFqdXN0ZUluZm9ybWF0aXZvOiAwLA0KICAgICAgICAgICAgICAgICAgICBmZWNoYUNvcnRlOiAnJw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgc3RhdGUub3RzLnB1c2gobmV3T1QpOw0KICAgICAgICAgICAgICAgIHN0YXRlLnJlZ2lzdHJvc1tuZXdPVC5pZF0gPSBbXTsgLy8gSW5pY2lhbGl6YXIgc3UgYXJyYXkgZGUgcmVnaXN0cm9zDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgY2xvc2VNb2RhbChkb20ub3RNb2RhbCk7DQogICAgICAgICAgICByZW5kZXIoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVEZWxldGVPVCA9IGFzeW5jIChvdElkKSA9PiB7DQogICAgICAgICAgICBjb25zdCBvdCA9IHN0YXRlLm90cy5maW5kKG8gPT4gby5pZCA9PT0gb3RJZCk7DQogICAgICAgICAgICBpZiAoIW90KSByZXR1cm47DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvc0NvdW50ID0gc3RhdGUucmVnaXN0cm9zW290SWRdPy5sZW5ndGggfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dDdXN0b21Db25maXJtKA0KICAgICAgICAgICAgICAgICJFbGltaW5hciBPVCIsIA0KICAgICAgICAgICAgICAgIGDCv0VzdMOhcyBzZWd1cm8gZGUgcXVlIHF1aWVyZXMgZWxpbWluYXIgbGEgT1QgIiR7b3Qubm9tYnJlfSI/IFxuXG5TZSBlbGltaW5hcsOhbiB0YW1iacOpbiBzdXMgJHtyZWdpc3Ryb3NDb3VudH0gcmVnaXN0cm9zIGRlIGNvc3RlcyBhc29jaWFkb3MuYA0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkgew0KICAgICAgICAgICAgICAgIHN0YXRlLm90cyA9IHN0YXRlLm90cy5maWx0ZXIobyA9PiBvLmlkICE9PSBvdElkKTsNCiAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGUucmVnaXN0cm9zW290SWRdOw0KICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3Qgb3BlblJlZ2lzdHJvTW9kYWwgPSAocmVjb3JkSWQgPSBudWxsKSA9PiB7DQogICAgICAgICAgICBjdXJyZW50RWRpdFJlY29yZElkID0gcmVjb3JkSWQ7DQogICAgICAgICAgICBjb25zdCBmb3JtID0gZG9tLnJlZ2lzdHJvRm9ybTsNCiAgICAgICAgICAgIGZvcm0ucmVzZXQoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTGltcGlhciBjYW1wb3MgZGUgbXVsdGktY29uY2VwdG8gYW50ZXJpb3Jlcw0KICAgICAgICAgICAgY29uc3QgbXVsdGlDb25jZXB0R3JpZCA9IGZvcm0ucXVlcnlTZWxlY3RvcignI211bHRpLWNvbmNlcHQtZ3JpZCcpOw0KICAgICAgICAgICAgbXVsdGlDb25jZXB0R3JpZC5pbm5lckhUTUwgPSAnJzsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR2VuZXJhciBsb3MgY2FtcG9zIGRlIG11bHRpLWNvbmNlcHRvIChBSE9SQSBGSUxUUkFET1MpDQogICAgICAgICAgICBDT1NUX0ZJRUxEUy5mb3JFYWNoKGZpZWxkID0+IHsNCiAgICAgICAgICAgICAgICBtdWx0aUNvbmNlcHRHcmlkLmFwcGVuZENoaWxkKGNyZWF0ZU11bHRpQ29uY2VwdEZpZWxkKGZpZWxkLmlkLCBmaWVsZC5sYWJlbCkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICoqKiogTU9ESUZJQ0FETzogUmVzZXRlYXIgZXN0YWRvcyBkZSBhcnJheXMgKioqKg0KICAgICAgICAgICAgZG9tLmdydXBvc1NvbFRvdGFsSW5wdXQudmFsdWUgPSAnJzsgDQogICAgICAgICAgICBjdXJyZW50QWxxdWlsZXJEZXRhbGxlcyA9IFtdOyANCiAgICAgICAgICAgIGRvbS5ncnVhQ2FtaW9uVG90YWxJbnB1dC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgY3VycmVudEdydWFDYW1pb25EZXRhbGxlcyA9IFtdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAocmVjb3JkSWQpIHsNCiAgICAgICAgICAgICAgICAvLyBFZGl0YW5kbw0KICAgICAgICAgICAgICAgIGRvbS5yZWdpc3Ryb01vZGFsVGl0bGUudGV4dENvbnRlbnQgPSAiRWRpdGFyIFJlZ2lzdHJvIGRlIENvc3RlIjsNCiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RybyA9IHN0YXRlLnJlZ2lzdHJvc1tzdGF0ZS5hY3RpdmVPVElkXT8uZmluZChyID0+IHIucmVjb3JkSWQgPT09IHJlY29yZElkKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJvKSB7DQogICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXJyb3IiLCAiTm8gc2UgcHVkbyBlbmNvbnRyYXIgZWwgcmVnaXN0cm8gcGFyYSBlZGl0YXIuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZG9tLnJlZ2lzdHJvRmVjaGEudmFsdWUgPSByZWdpc3Ryby5mZWNoYTsNCiAgICAgICAgICAgICAgICBkb20ucmVnaXN0cm9Ib3Jhcy52YWx1ZSA9IHJlZ2lzdHJvLmhvcmFzX3RyYWJhamFkb3JlczsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBSZWxsZW5hciBjYW1wb3MgZGUgbXVsdGktY29uY2VwdG8NCiAgICAgICAgICAgICAgICBDT1NUX0ZJRUxEUy5mb3JFYWNoKGZpZWxkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV0YWxsZXMgPSByZWdpc3Ryb1tgJHtmaWVsZC5pZH1fZGV0YWxsZWBdIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2ZpZWxkLmlkfS1jb25jZXB0b3MtbGlzdGApOw0KICAgICAgICAgICAgICAgICAgICBpZihjb250YWluZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFsbGVzLmZvckVhY2goZGV0YWxsZSA9PiBhZGRDb25jZXB0b1Jvdyhjb250YWluZXIsIGZpZWxkLmlkLCBkZXRhbGxlLmNvbmNlcHRvLCBkZXRhbGxlLnZhbG9yKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbEZpZWxkKGZpZWxkLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vICoqKiogTU9ESUZJQ0FETzogUmVsbGVuYXIgY2FtcG8gZGUgYWxxdWlsZXIgKGNvbiBsw7NnaWNhIGRlIGNvbnZlcnNpw7NuKSAqKioqDQogICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJvLmdydXBvc19zb2xfZGV0YWxsZSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWdpc3Ryby5ncnVwb3Nfc29sX2RldGFsbGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBOdWV2byBmb3JtYXRvIChhcnJheSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBbHF1aWxlckRldGFsbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZWdpc3Ryby5ncnVwb3Nfc29sX2RldGFsbGUpKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVnaXN0cm8uZ3J1cG9zX3NvbF9kZXRhbGxlID09PSAnb2JqZWN0JyAmJiByZWdpc3Ryby5ncnVwb3Nfc29sX2RldGFsbGUgIT09IG51bGwgJiYgcmVnaXN0cm8uZ3J1cG9zX3NvbF90b3RhbCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdG8gYW50aWd1byAob2JqZXRvKSBvIG1hbnVhbA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkRGV0YWxsZSA9IHJlZ2lzdHJvLmdydXBvc19zb2xfZGV0YWxsZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBbHF1aWxlckRldGFsbGVzID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXByZXNhOiBvbGREZXRhbGxlLmVtcHJlc2EgfHwgbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbm86IG9sZERldGFsbGUuYW5vIHx8IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbURlc2NyaXBjaW9uOiBvbGREZXRhbGxlLml0ZW1EZXNjcmlwY2lvbiB8fCAiVmFsb3IgTWFudWFsL0FudGlndW8iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1QcmVjaW9EaWE6IG9sZERldGFsbGUuaXRlbVByZWNpb0RpYSB8fCAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1EaWFzOiBvbGREZXRhbGxlLml0ZW1EaWFzIHx8IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl0cm9zQ29tYnVzdGlibGU6IG9sZERldGFsbGUubGl0cm9zQ29tYnVzdGlibGUgfHwgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaW9MaXRyb0NvbWJ1c3RpYmxlOiBvbGREZXRhbGxlLnByZWNpb0xpdHJvQ29tYnVzdGlibGUgfHwgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogcmVnaXN0cm8uZ3J1cG9zX3NvbF90b3RhbCAvLyBVc2FyIGVsIHRvdGFsIGd1YXJkYWRvDQogICAgICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb20uZ3J1cG9zU29sVG90YWxJbnB1dC52YWx1ZSA9IHJlZ2lzdHJvLmdydXBvc19zb2xfdG90YWwgPyByZWdpc3Ryby5ncnVwb3Nfc29sX3RvdGFsLnRvRml4ZWQoMikgOiAnJzsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IFJlbGxlbmFyIGNhbXBvIGRlIEdyw7phL0NhbWnDs24gKGNvbiBsw7NnaWNhIGRlIGNvbnZlcnNpw7NuKSAqKioqDQogICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJvLmdydWFfY2FtaW9uX2RldGFsbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlZ2lzdHJvLmdydWFfY2FtaW9uX2RldGFsbGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBOdWV2byBmb3JtYXRvIChhcnJheSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRHcnVhQ2FtaW9uRGV0YWxsZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlZ2lzdHJvLmdydWFfY2FtaW9uX2RldGFsbGUpKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVnaXN0cm8uZ3J1YV9jYW1pb25fZGV0YWxsZSA9PT0gJ29iamVjdCcgJiYgcmVnaXN0cm8uZ3J1YV9jYW1pb25fZGV0YWxsZSAhPT0gbnVsbCAmJiByZWdpc3Ryby5ncnVhX2NhbWlvbl90b3RhbCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdG8gYW50aWd1byAob2JqZXRvKSBvIG1hbnVhbA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkRGV0YWxsZSA9IHJlZ2lzdHJvLmdydWFfY2FtaW9uX2RldGFsbGU7DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3J1YUNhbWlvbkRldGFsbGVzID0gW3sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfR1JVQUNBTUlPTl9JVEVNKSksIC8vIEVtcGV6YXIgY29uIGRlZmF1bHQgcG9yIHNpIGZhbHRhbiBjYW1wb3MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5vbGREZXRhbGxlLCAvLyBTb2JyZXNjcmliaXIgY29uIGxvIHF1ZSBoYXlhDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbURlc2NyaXBjaW9uOiBvbGREZXRhbGxlLml0ZW1EZXNjcmlwY2lvbiB8fCAiVmFsb3IgTWFudWFsL0FudGlndW8iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiByZWdpc3Ryby5ncnVhX2NhbWlvbl90b3RhbCAvLyBVc2FyIGVsIHRvdGFsIGd1YXJkYWRvDQogICAgICAgICAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb20uZ3J1YUNhbWlvblRvdGFsSW5wdXQudmFsdWUgPSByZWdpc3Ryby5ncnVhX2NhbWlvbl90b3RhbCA/IHJlZ2lzdHJvLmdydWFfY2FtaW9uX3RvdGFsLnRvRml4ZWQoMikgOiAnJzsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gQ3JlYW5kbw0KICAgICAgICAgICAgICAgIGRvbS5yZWdpc3Ryb01vZGFsVGl0bGUudGV4dENvbnRlbnQgPSAiQcOxYWRpciBSZWdpc3RybyBkZSBDb3N0ZSI7DQogICAgICAgICAgICAgICAgZG9tLnJlZ2lzdHJvRmVjaGEudmFsdWUgPSAiIjsgLy8gVkFDSUFSIGxhIGZlY2hhIHBvciBkZWZlY3RvDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENhbGN1bGFyIHZhbG9yZXMgaW5pY2lhbGVzDQogICAgICAgICAgICB1cGRhdGVDYWxjdWxhdGVkRmllbGRzKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5yZWdpc3Ryb01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBoYW5kbGVTYXZlUmVnaXN0cm8gPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBmb3JtID0gZG9tLnJlZ2lzdHJvRm9ybTsNCiAgICAgICAgICAgIGNvbnN0IGZlY2hhID0gZG9tLnJlZ2lzdHJvRmVjaGEudmFsdWU7DQogICAgICAgICAgICBjb25zdCBob3JhcyA9IHBhcnNlRmxvYXQoZG9tLnJlZ2lzdHJvSG9yYXMudmFsdWUpIHx8IDA7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghZmVjaGEpIHsNCiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkVycm9yIiwgIkxhIGZlY2hhIGVzIG9ibGlnYXRvcmlhLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgbmV3UmVnaXN0cm8gPSB7DQogICAgICAgICAgICAgICAgcmVjb3JkSWQ6IGN1cnJlbnRFZGl0UmVjb3JkSWQgfHwgY3J5cHRvLnJhbmRvbVVVSUQoKSwNCiAgICAgICAgICAgICAgICBmZWNoYTogZmVjaGEsDQogICAgICAgICAgICAgICAgaG9yYXNfdHJhYmFqYWRvcmVzOiBob3JhcywNCiAgICAgICAgICAgICAgICBwcmVjaW9faG9yYXM6IGNhbGN1bGF0ZVByZWNpb0hvcmFzKGhvcmFzKSwNCiAgICAgICAgICAgICAgICBjb21pZGE6IGNhbGN1bGF0ZUNvbWlkYShob3JhcykNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGxldCBjb3N0ZVRvdGFsUmVnaXN0cm8gPSBuZXdSZWdpc3Ryby5wcmVjaW9faG9yYXMgKyBuZXdSZWdpc3Ryby5jb21pZGE7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFJlY29nZXIgZGF0b3MgZGUgY2FtcG9zIG11bHRpLWNvbmNlcHRvDQogICAgICAgICAgICBDT1NUX0ZJRUxEUy5mb3JFYWNoKGZpZWxkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBsaXN0Q29udGFpbmVyID0gZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtmaWVsZC5pZH0tY29uY2VwdG9zLWxpc3RgKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkZXRhbGxlcyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY29uY2VwdG8taXRlbScpLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG8gPSByb3cucXVlcnlTZWxlY3RvcignaW5wdXRbZGF0YS10aXBvPSJjb25jZXB0byJdJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxvciA9IHBhcnNlRmxvYXQocm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2RhdGEtdGlwbz0idmFsb3IiXScpLnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbG9yID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWxsZXMucHVzaCh7IGNvbmNlcHRvOiBjb25jZXB0byB8fCAnU2luIGNvbmNlcHRvJywgdmFsb3I6IHZhbG9yIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gdmFsb3I7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBuZXdSZWdpc3Ryb1tgJHtmaWVsZC5pZH1fZGV0YWxsZWBdID0gZGV0YWxsZXM7DQogICAgICAgICAgICAgICAgbmV3UmVnaXN0cm9bYCR7ZmllbGQuaWR9X3RvdGFsYF0gPSB0b3RhbDsNCiAgICAgICAgICAgICAgICBjb3N0ZVRvdGFsUmVnaXN0cm8gKz0gdG90YWw7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBBw7FhZGlyIGRhdG9zIGRlIGFscXVpbGVyIChhcnJheSB5IHRvdGFsKSAqKioqDQogICAgICAgICAgICBuZXdSZWdpc3Ryby5ncnVwb3Nfc29sX2RldGFsbGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBbHF1aWxlckRldGFsbGVzKSk7IA0KICAgICAgICAgICAgbmV3UmVnaXN0cm8uZ3J1cG9zX3NvbF90b3RhbCA9IGN1cnJlbnRBbHF1aWxlckRldGFsbGVzLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS50b3RhbCB8fCAwKSwgMCk7DQogICAgICAgICAgICBjb3N0ZVRvdGFsUmVnaXN0cm8gKz0gbmV3UmVnaXN0cm8uZ3J1cG9zX3NvbF90b3RhbDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBBw7FhZGlyIGRhdG9zIGRlIEdyw7phL0NhbWnDs24gKGFycmF5IHkgdG90YWwpICoqKioNCiAgICAgICAgICAgIG5ld1JlZ2lzdHJvLmdydWFfY2FtaW9uX2RldGFsbGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRHcnVhQ2FtaW9uRGV0YWxsZXMpKTsgDQogICAgICAgICAgICBuZXdSZWdpc3Ryby5ncnVhX2NhbWlvbl90b3RhbCA9IGN1cnJlbnRHcnVhQ2FtaW9uRGV0YWxsZXMucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIChpdGVtLnRvdGFsIHx8IDApLCAwKTsNCiAgICAgICAgICAgIGNvc3RlVG90YWxSZWdpc3RybyArPSBuZXdSZWdpc3Ryby5ncnVhX2NhbWlvbl90b3RhbDsNCg0KICAgICAgICAgICAgbmV3UmVnaXN0cm8uY29zdGVfdG90YWxfcmVnaXN0cm8gPSBjb3N0ZVRvdGFsUmVnaXN0cm87DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjdXJyZW50RWRpdFJlY29yZElkKSB7DQogICAgICAgICAgICAgICAgLy8gRWRpdGFuZG8NCiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHN0YXRlLnJlZ2lzdHJvc1tzdGF0ZS5hY3RpdmVPVElkXS5maW5kSW5kZXgociA9PiByLnJlY29yZElkID09PSBjdXJyZW50RWRpdFJlY29yZElkKTsNCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgew0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF1baW5kZXhdID0gbmV3UmVnaXN0cm87DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBDcmVhbmRvDQogICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0pIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUucmVnaXN0cm9zW3N0YXRlLmFjdGl2ZU9USWRdID0gW107DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHN0YXRlLnJlZ2lzdHJvc1tzdGF0ZS5hY3RpdmVPVElkXS5wdXNoKG5ld1JlZ2lzdHJvKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICBjbG9zZU1vZGFsKGRvbS5yZWdpc3Ryb01vZGFsKTsNCiAgICAgICAgICAgIC8vIFJlbmRlcml6YXIgYW1iYXMgdmlzdGFzIHBhcmEgYWN0dWFsaXphciB0b3RhbGVzIGVuIE9UIHkgdGFibGEgZGUgcmVnaXN0cm9zDQogICAgICAgICAgICByZW5kZXJPVExpc3RWaWV3KCk7IA0KICAgICAgICAgICAgcmVuZGVyUmVnaXN0cm9UYWJsZVZpZXcoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVEZWxldGVSZWdpc3RybyA9IGFzeW5jIChyZWNvcmRJZCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0/LmZpbmQociA9PiByLnJlY29yZElkID09PSByZWNvcmRJZCk7DQogICAgICAgICAgICBpZiAoIXJlZ2lzdHJvKSByZXR1cm47DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dDdXN0b21Db25maXJtKA0KICAgICAgICAgICAgICAgICJFbGltaW5hciBSZWdpc3RybyIsIA0KICAgICAgICAgICAgICAgIGDCv0VzdMOhcyBzZWd1cm8gZGUgcXVlIHF1aWVyZXMgZWxpbWluYXIgZWwgcmVnaXN0cm8gZGVsICR7cmVnaXN0cm8uZmVjaGF9P2ANCiAgICAgICAgICAgICk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjb25maXJtZWQpIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0gPSBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0uZmlsdGVyKHIgPT4gci5yZWNvcmRJZCAhPT0gcmVjb3JkSWQpOw0KICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IG9wZW5EZXRhbGxlc01vZGFsID0gKHJlY29yZElkLCBmaWVsZElkLCBmaWVsZExhYmVsKSA9PiB7DQogICAgICAgICAgICBjb25zdCByZWdpc3RybyA9IHN0YXRlLnJlZ2lzdHJvc1tzdGF0ZS5hY3RpdmVPVElkXT8uZmluZChyID0+IHIucmVjb3JkSWQgPT09IHJlY29yZElkKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBMw7NnaWNhIHBhcmEgbW9zdHJhciBkZXRhbGxlcyBkZSBhbHF1aWxlciAoYXJyYXkpICoqKioNCiAgICAgICAgICAgIGlmIChmaWVsZElkID09PSAnZ3J1cG9zX3NvbCcpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkZXRhbGxlID0gcmVnaXN0cm8/LmdydXBvc19zb2xfZGV0YWxsZTsgLy8gUHVlZGUgc2VyIGFycmF5IHUgb2JqZXRvDQogICAgICAgICAgICAgICAgY29uc3QgdG90YWwgPSByZWdpc3Rybz8uZ3J1cG9zX3NvbF90b3RhbCB8fCAwOw0KDQogICAgICAgICAgICAgICAgaWYgKCFkZXRhbGxlIHx8IHRvdGFsID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiU2luIERldGFsbGVzIiwgIk5vIGhheSBkZXRhbGxlcyBkZSBhbHF1aWxlciBwYXJhIGVzdGUgY2FtcG8uIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZG9tLmRldGFsbGVzTW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IGBEZXRhbGxlcyBkZTogJHtmaWVsZExhYmVsfWA7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbGV0IGNvbnRlbnRIdG1sID0gJyc7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGV0YWxsZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gTlVFVk8gRk9STUFUTyAoQVJSQVkpDQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRIdG1sID0gJzx1bCByb2xlPSJsaXN0IiBjbGFzcz0iZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwIj4nOw0KICAgICAgICAgICAgICAgICAgICBkZXRhbGxlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50SHRtbCArPSBgPGxpIGNsYXNzPSJweS0zIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTgwMCBtYi0yIj5JdGVtICR7aW5kZXggKyAxfTogJHtlc2NhcGVIdG1sKGl0ZW0uaXRlbURlc2NyaXBjaW9uIHx8ICdOL0EnKX08L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIHJvbGU9Imxpc3QiIGNsYXNzPSJkaXZpZGUteSBkaXZpZGUtZ3JheS0xMDAgdGV4dC1zbSBwbC00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLml0ZW1EZXNjcmlwY2lvbiA9PT0gJ1ZhbG9yIE1hbnVhbC9BbnRpZ3VvJyB8fCBpdGVtLml0ZW1EZXNjcmlwY2lvbiA9PT0gJ1ZhbG9yIE1hbnVhbCcgfHwgIWl0ZW0uaXRlbURlc2NyaXBjaW9uID8gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTEgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPkNvbmNlcHRvOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7ZXNjYXBlSHRtbChpdGVtLml0ZW1EZXNjcmlwY2lvbikgfHwgIlZhbG9yIE1hbnVhbCJ9PC9zcGFuPjwvbGk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgOiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMSBmbGV4IGp1c3RpZnktYmV0d2VlbiI+PHNwYW4+RW1wcmVzYTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2VzY2FwZUh0bWwoaXRlbS5lbXByZXNhKX0gKCR7aXRlbS5hbm99KTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTEgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPlByZWNpby9kw61hOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7Zm9ybWF0Q3VycmVuY3koaXRlbS5pdGVtUHJlY2lvRGlhKX08L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Ew61hcyBkZSB1c286PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtpdGVtLml0ZW1EaWFzfTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTEgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPlByZWNpbyBMaXRybzo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2Zvcm1hdEN1cnJlbmN5KGl0ZW0ucHJlY2lvTGl0cm9Db21idXN0aWJsZSl9PC9zcGFuPjwvbGk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMSBmbGV4IGp1c3RpZnktYmV0d2VlbiI+PHNwYW4+TGl0cm9zOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7aXRlbS5saXRyb3NDb21idXN0aWJsZX08L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIG10LTEgYm9yZGVyLXQgZmxleCBqdXN0aWZ5LWJldHdlZW4iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPlN1YnRvdGFsIEl0ZW06PC9zcGFuPiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtYmx1ZS04MDAiPiR7Zm9ybWF0Q3VycmVuY3koaXRlbS50b3RhbCl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmA7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb250ZW50SHRtbCArPSAnPC91bD4nOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRldGFsbGUgPT09ICdvYmplY3QnICYmIGRldGFsbGUgIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gRk9STUFUTyBBTlRJR1VPIChPQkpFVE8pDQogICAgICAgICAgICAgICAgICAgIGlmICghZGV0YWxsZS5pdGVtRGVzY3JpcGNpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRIdG1sID0gYDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS03MDAiPlNlIGludHJvZHVqbyB1biB2YWxvciBtYW51YWwuPC9wPmA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50SHRtbCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbG93LXJvb3QiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgcm9sZT0ibGlzdCIgY2xhc3M9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMCB0ZXh0LXNtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMiBmbGV4IGp1c3RpZnktYmV0d2VlbiI+PHNwYW4+RW1wcmVzYTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2VzY2FwZUh0bWwoZGV0YWxsZS5lbXByZXNhKX0gKFByZWNpb3MgJHtkZXRhbGxlLmFub30pPC9zcGFuPjwvbGk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTIgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPkl0ZW06PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtlc2NhcGVIdG1sKGRldGFsbGUuaXRlbURlc2NyaXBjaW9uIHx8ICdOL0EnKX08L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMiBmbGV4IGp1c3RpZnktYmV0d2VlbiI+PHNwYW4+UHJlY2lvL2TDrWE6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtmb3JtYXRDdXJyZW5jeShkZXRhbGxlLml0ZW1QcmVjaW9EaWEpfTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Ew61hcyBkZSB1c286PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtkZXRhbGxlLml0ZW1EaWFzfTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5QcmVjaW8gTGl0cm86PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtmb3JtYXRDdXJyZW5jeShkZXRhbGxlLnByZWNpb0xpdHJvQ29tYnVzdGlibGUpfTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5MaXRyb3M6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtkZXRhbGxlLmxpdHJvc0NvbWJ1c3RpYmxlfTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBBw7FhZGlyIGVsIHRvdGFsIGFsIGZpbmFsDQogICAgICAgICAgICAgICAgZG9tLmRldGFsbGVzTW9kYWxDb250ZW50LmlubmVySFRNTCA9IGNvbnRlbnRIdG1sICsgYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC00IHB0LTQgYm9yZGVyLXQgZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC1iYXNlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQiPlRvdGFsICR7ZmllbGRMYWJlbH06PC9zcGFuPiANCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LWJsdWUtODAwIj4ke2Zvcm1hdEN1cnJlbmN5KHRvdGFsKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgZG9tLmRldGFsbGVzTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgICAgICAgICByZXR1cm47IA0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IEzDs2dpY2EgcGFyYSBtb3N0cmFyIGRldGFsbGVzIGRlIEdyw7phL0NhbWnDs24gKGNvbiBhcnJheSkgKioqKg0KICAgICAgICAgICAgaWYgKGZpZWxkSWQgPT09ICdncnVhX2NhbWlvbicpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkZXRhbGxlID0gcmVnaXN0cm8/LmdydWFfY2FtaW9uX2RldGFsbGU7IC8vIFB1ZWRlIHNlciBhcnJheSB1IG9iamV0bw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gcmVnaXN0cm8/LmdydWFfY2FtaW9uX3RvdGFsIHx8IDA7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWRldGFsbGUgfHwgdG90YWwgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJTaW4gRGV0YWxsZXMiLCAiTm8gaGF5IGRldGFsbGVzIGRlIGdyw7phL2NhbWnDs24gcGFyYSBlc3RlIGNhbXBvLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGRvbS5kZXRhbGxlc01vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBgRGV0YWxsZXMgZGU6ICR7ZmllbGRMYWJlbH1gOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGxldCBjb250ZW50SHRtbCA9ICcnOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRldGFsbGUpKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIE5VRVZPIEZPUk1BVE8gKEFSUkFZKQ0KICAgICAgICAgICAgICAgICAgICBjb250ZW50SHRtbCA9ICc8dWwgcm9sZT0ibGlzdCIgY2xhc3M9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMCI+JzsNCiAgICAgICAgICAgICAgICAgICAgZGV0YWxsZS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEh0bWwgKz0gYDxsaSBjbGFzcz0icHktMyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS04MDAgbWItMiI+SXRlbSAke2luZGV4ICsgMX06ICR7ZXNjYXBlSHRtbChpdGVtLml0ZW1EZXNjcmlwY2lvbiB8fCAnTi9BJyl9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCByb2xlPSJsaXN0IiBjbGFzcz0iZGl2aWRlLXkgZGl2aWRlLWdyYXktMTAwIHRleHQtc20gcGwtNCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS5pdGVtRGVzY3JpcGNpb24gPT09ICdWYWxvciBNYW51YWwvQW50aWd1bycgfHwgaXRlbS5pdGVtRGVzY3JpcGNpb24gPT09ICdWYWxvciBNYW51YWwnIHx8ICFpdGVtLml0ZW1EZXNjcmlwY2lvbiA/IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Db25jZXB0bzo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2VzY2FwZUh0bWwoaXRlbS5pdGVtRGVzY3JpcGNpb24pIHx8ICJWYWxvciBNYW51YWwifTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgIDogYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTEgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPkVtcHJlc2E6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtlc2NhcGVIdG1sKGl0ZW0uZW1wcmVzYSl9ICgke2l0ZW0uYW5vfSk8L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Ib3JhcyBzZXJ2aWNpbzo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2l0ZW0uaXRlbUhvcmFzfWg8L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Db24gUmVjYXJnbzo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2l0ZW0uY29uUmVjYXJnbyA/ICdTw60nIDogJ05vJ308L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Db3N0ZSBTYWxpZGE6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtmb3JtYXRDdXJyZW5jeShpdGVtLmNvc3RlU2FsaWRhKX08L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5QcmVjaW8vSG9yYTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2Zvcm1hdEN1cnJlbmN5KGl0ZW0ucHJlY2lvSG9yYVVzYWRvKX08L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5TZXJ2LiBNw61uaW1vOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7aXRlbS5zZXJ2aWNpb01pbmltb1VzYWRvfWg8L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Ib3JhcyBhIENvYnJhcjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2l0ZW0uaG9yYXNBQ29icmFyfWg8L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIG10LTEgYm9yZGVyLXQgZmxleCBqdXN0aWZ5LWJldHdlZW4iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPlN1YnRvdGFsIEl0ZW06PC9zcGFuPiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtYmx1ZS04MDAiPiR7Zm9ybWF0Q3VycmVuY3koaXRlbS50b3RhbCl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmA7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb250ZW50SHRtbCArPSAnPC91bD4nOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRldGFsbGUgPT09ICdvYmplY3QnICYmIGRldGFsbGUgIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gRk9STUFUTyBBTlRJR1VPIChPQkpFVE8pDQogICAgICAgICAgICAgICAgICAgIGlmICghZGV0YWxsZS5pdGVtRGVzY3JpcGNpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRIdG1sID0gYDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS03MDAiPlNlIGludHJvZHVqbyB1biB2YWxvciBtYW51YWwuPC9wPmA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEh0bWwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxvdy1yb290Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIHJvbGU9Imxpc3QiIGNsYXNzPSJkaXZpZGUteSBkaXZpZGUtZ3JheS0yMDAgdGV4dC1zbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTIgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPkVtcHJlc2E6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtlc2NhcGVIdG1sKGRldGFsbGUuZW1wcmVzYSl9IChQcmVjaW9zICR7ZGV0YWxsZS5hbm99KTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5JdGVtOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7ZXNjYXBlSHRtbChkZXRhbGxlLml0ZW1EZXNjcmlwY2lvbil9PC9zcGFuPjwvbGk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTIgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPkhvcmFzIHNlcnZpY2lvOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7ZGV0YWxsZS5pdGVtSG9yYXN9aDwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5Db24gUmVjYXJnbzo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2RldGFsbGUuY29uUmVjYXJnbyA/ICdTw60nIDogJ05vJ308L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMiBmbGV4IGp1c3RpZnktYmV0d2VlbiI+PHNwYW4+Q29zdGUgU2FsaWRhOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7Zm9ybWF0Q3VycmVuY3koZGV0YWxsZS5jb3N0ZVNhbGlkYSl9PC9zcGFuPjwvbGk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9InB5LTIgZmxleCBqdXN0aWZ5LWJldHdlZW4iPjxzcGFuPlByZWNpby9Ib3JhIEFwbGljYWRvOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7Zm9ybWF0Q3VycmVuY3koZGV0YWxsZS5wcmVjaW9Ib3JhVXNhZG8pfTwvc3Bhbj48L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJweS0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIj48c3Bhbj5TZXJ2LiBNw61uaW1vOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7ZGV0YWxsZS5zZXJ2aWNpb01pbmltb1VzYWRvfWg8L3NwYW4+PC9saT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMiBmbGV4IGp1c3RpZnktYmV0d2VlbiI+PHNwYW4+SG9yYXMgYSBDb2JyYXI6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtkZXRhbGxlLmhvcmFzQUNvYnJhcn1oPC9zcGFuPjwvbGk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIEHDsWFkaXIgZWwgdG90YWwgYWwgZmluYWwNCiAgICAgICAgICAgICAgICBkb20uZGV0YWxsZXNNb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gY29udGVudEh0bWwgKyBgDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTQgcHQtNCBib3JkZXItdCBmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LWJhc2UiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCI+VG90YWwgJHtmaWVsZExhYmVsfTo8L3NwYW4+IA0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtYmx1ZS04MDAiPiR7Zm9ybWF0Q3VycmVuY3kodG90YWwpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICBkb20uZGV0YWxsZXNNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICAgICAgICAgIHJldHVybjsgDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEzDs2dpY2EgYW50ZXJpb3IgcGFyYSBvdHJvcyBjYW1wb3MNCiAgICAgICAgICAgIGNvbnN0IGRldGFsbGVzID0gcmVnaXN0cm8gPyByZWdpc3Ryb1tgJHtmaWVsZElkfV9kZXRhbGxlYF0gOiBbXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFkZXRhbGxlcyB8fCBkZXRhbGxlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIlNpbiBEZXRhbGxlcyIsICJObyBoYXkgZGV0YWxsZXMgZGUgY29uY2VwdG9zIHBhcmEgZXN0ZSBjYW1wby4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5kZXRhbGxlc01vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBgRGV0YWxsZXMgZGU6ICR7ZmllbGRMYWJlbH1gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uZGV0YWxsZXNNb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsb3ctcm9vdCI+DQogICAgICAgICAgICAgICAgICAgIDx1bCByb2xlPSJsaXN0IiBjbGFzcz0iZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGV0YWxsZXMubWFwKGQgPT4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHktMyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktODAwIHRydW5jYXRlIj4ke2VzY2FwZUh0bWwoZC5jb25jZXB0byl9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1sLTQiPiR7Zm9ybWF0Q3VycmVuY3koZC52YWxvcil9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPg0KICAgICAgICAgICAgICAgICAgICAgICAgYCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgIDwvdWw+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICBgOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uZGV0YWxsZXNNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIC0tLSBMw5NHSUNBIERFIEZPUk1VTEFSSU8gREUgUkVHSVNUUk8gKE11bHRpLUNvbmNlcHRvKSAtLS0NCiAgICAgICAgDQogICAgICAgIGNvbnN0IHVwZGF0ZUNhbGN1bGF0ZWRGaWVsZHMgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBob3JhcyA9IGRvbS5yZWdpc3Ryb0hvcmFzLnZhbHVlOw0KICAgICAgICAgICAgZG9tLnJlZ2lzdHJvUHJlY2lvSG9yYXMudmFsdWUgPSBmb3JtYXRDdXJyZW5jeShjYWxjdWxhdGVQcmVjaW9Ib3Jhcyhob3JhcykpOw0KICAgICAgICAgICAgZG9tLnJlZ2lzdHJvQ29taWRhLnZhbHVlID0gZm9ybWF0Q3VycmVuY3koY2FsY3VsYXRlQ29taWRhKGhvcmFzKSk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBjcmVhdGVNdWx0aUNvbmNlcHRGaWVsZCA9IChpZCwgbGFiZWwpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGZpZWxkV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgZmllbGRXcmFwcGVyLmNsYXNzTmFtZSA9ICdiZy1ncmF5LTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBzcGFjZS15LTMnOw0KICAgICAgICAgICAgZmllbGRXcmFwcGVyLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS04MDAiPiR7bGFiZWx9PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSIke2lkfS10b3RhbCIgY2xhc3M9InctMS8yIHRleHQtcmlnaHQgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJnLWdyYXktMjAwIGN1cnNvci1ub3QtYWxsb3dlZCIgcmVhZG9ubHkgcGxhY2Vob2xkZXI9IjAuMDAg4oKsIj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSIke2lkfS1jb25jZXB0b3MtbGlzdCIgY2xhc3M9InNwYWNlLXktMiBtYXgtaC0zMiBvdmVyZmxvdy15LWF1dG8gcHItMiI+DQogICAgICAgICAgICAgICAgICAgIDwhLS0gRmlsYXMgZGUgY29uY2VwdG9zIHNlIGHDsWFkaXLDoW4gYXF1w60gLS0+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJhZGQtY29uY2VwdG8tYnRuIHctZnVsbCB0ZXh0LXNtIGJnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAgZm9udC1zZW1pYm9sZCBweS0xIHB4LTMgcm91bmRlZC1sZyBob3ZlcjpiZy1ibHVlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyIgZGF0YS1maWVsZC1pZD0iJHtpZH0iPg0KICAgICAgICAgICAgICAgICAgICArIEHDsWFkaXIgQ29uY2VwdG8NCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICByZXR1cm4gZmllbGRXcmFwcGVyOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgYWRkQ29uY2VwdG9Sb3cgPSAoY29udGFpbmVyLCBmaWVsZElkLCBjb25jZXB0byA9ICcnLCB2YWxvciA9ICcnKSA9PiB7DQogICAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSAnZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY29uY2VwdG8taXRlbSc7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHZhbG9yQXR0ciA9ICh2YWxvciAhPT0gJycgJiYgdmFsb3IgIT09IG51bGwgJiYgIWlzTmFOKHBhcnNlRmxvYXQodmFsb3IpKSkgPyBgdmFsdWU9IiR7cGFyc2VGbG9hdCh2YWxvcil9ImAgOiAnJzsNCg0KICAgICAgICAgICAgcm93LmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS10aXBvPSJjb25jZXB0byIgdmFsdWU9IiR7ZXNjYXBlSHRtbChjb25jZXB0byl9IiBjbGFzcz0iZmxleC1ncm93IGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSB0ZXh0LXNtIiBwbGFjZWhvbGRlcj0iQ29uY2VwdG8iPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGRhdGEtdGlwbz0idmFsb3IiICR7dmFsb3JBdHRyfSBzdGVwPSIwLjAxIiBtaW49IjAiIGNsYXNzPSJ3LTI4IGZsZXgtc2hyaW5rLTAgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHRleHQtc20iIHBsYWNlaG9sZGVyPSJWYWxvciDigqwiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0icmVtb3ZlLWNvbmNlcHRvLWJ0biB0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtNzAwIHAtMSByb3VuZGVkLWZ1bGwgZmxleC1zaHJpbmstMCIgdGl0bGU9IkVsaW1pbmFyIGNvbmNlcHRvIj4NCiAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJoLTUgdy01IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE1IDEySDltMTIgMGE5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHoiIC8+PC9zdmc+DQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICBgOw0KICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWNvbmNlcHRvLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIHJvdy5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbEZpZWxkKGZpZWxkSWQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtkYXRhLXRpcG89InZhbG9yIl0nKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsNCiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbEZpZWxkKGZpZWxkSWQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCB1cGRhdGVUb3RhbEZpZWxkID0gKGZpZWxkSWQpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGxpc3RDb250YWluZXIgPSBkb20ucmVnaXN0cm9Gb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2ZpZWxkSWR9LWNvbmNlcHRvcy1saXN0YCk7DQogICAgICAgICAgICBpZiAoIWxpc3RDb250YWluZXIpIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbGV0IHRvdGFsID0gMDsNCiAgICAgICAgICAgIGxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbZGF0YS10aXBvPSJ2YWxvciJdJykuZm9yRWFjaChpbnB1dCA9PiB7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VGbG9hdChpbnB1dC52YWx1ZSkgfHwgMDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCB0b3RhbElucHV0ID0gZG9tLnJlZ2lzdHJvRm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtmaWVsZElkfS10b3RhbGApOw0KICAgICAgICAgICAgaWYgKHRvdGFsSW5wdXQpIHsNCiAgICAgICAgICAgICAgICB0b3RhbElucHV0LnZhbHVlID0gZm9ybWF0Q3VycmVuY3kodG90YWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIC0tLSBJTVBPUlRBUiAvIEVYUE9SVEFSIC0tLQ0KDQogICAgICAgIGNvbnN0IGhhbmRsZVNhdmVDaGFuZ2VzID0gKCkgPT4gew0KICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gYGNvbnRyb2xfY29zdGVzX09UXyR7Z2V0VG9kYXlEYXRlU3RyaW5nKCl9Lmpzb25gOw0KICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVkRmlsZU5hbWUgPSBwcm9tcHQoIlBvciBmYXZvciwgaW50cm9kdWNlIHVuIG5vbWJyZSBwYXJhIGVsIGFyY2hpdm8gZGUgZ3VhcmRhZG86IiwgZmlsZU5hbWUpOw0KICAgICAgICAgICAgaWYgKHN1Z2dlc3RlZEZpbGVOYW1lID09PSBudWxsKSByZXR1cm47IC8vIENhbmNlbGFkbw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmaWxlTmFtZSA9IHN1Z2dlc3RlZEZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5qc29uJykgPyBzdWdnZXN0ZWRGaWxlTmFtZSA6IGAke3N1Z2dlc3RlZEZpbGVOYW1lfS5qc29uYDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgZXhwb3J0U3RhdGUgPSB7IA0KICAgICAgICAgICAgICAgIG90czogc3RhdGUub3RzLA0KICAgICAgICAgICAgICAgIHJlZ2lzdHJvczogc3RhdGUucmVnaXN0cm9zLA0KICAgICAgICAgICAgICAgIGFscXVpbGVyRGF0YTogc3RhdGUuYWxxdWlsZXJEYXRhLCAvLyBHdWFyZGFyIHByZWNpb3MgYWxxdWlsZXINCiAgICAgICAgICAgICAgICBncnVhRGF0YTogc3RhdGUuZ3J1YURhdGEgLy8gKioqKiBOVUVWTzogR3VhcmRhciBwcmVjaW9zIGdyw7phICoqKioNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShleHBvcnRTdGF0ZSwgbnVsbCwgMik7DQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFTdHJdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWYgPSB1cmw7IGEuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7IGEuY2xpY2soKTsgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsNCiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc3RhdGUuaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgcmVuZGVyU2lkZWJhcigpOw0KICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJHdWFyZGFkbyIsIGBDYW1iaW9zIGd1YXJkYWRvcyBlbiAnJHtmaWxlTmFtZX0nLmApOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZUltcG9ydCA9IChldmVudCkgPT4gew0KICAgICAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBwcm9jZWVkID0gYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pc0RpcnR5KSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dDdXN0b21Db25maXJtKA0KICAgICAgICAgICAgICAgICAgICAgICAgIkltcG9ydGFyIEFyY2hpdm8iLCANCiAgICAgICAgICAgICAgICAgICAgICAgICLCv0ltcG9ydGFyIGFyY2hpdm8/IExvcyBjYW1iaW9zIG5vIGd1YXJkYWRvcyBzZSBwZXJkZXLDoW4uIg0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7IC8vIFJlc2V0IGlucHV0DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltcG9ydGVkRGF0YSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1wb3J0ZWREYXRhLm90cyB8fCB0eXBlb2YgaW1wb3J0ZWREYXRhLnJlZ2lzdHJvcyAhPT0gJ29iamVjdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1hdG8gZGUgYXJjaGl2byBpbnbDoWxpZG8uIEZhbHRhbiBsYXMgY2xhdmVzICJvdHMiIG8gInJlZ2lzdHJvcyIuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuU3RhdGUgPSBnZXRJbml0aWFsU3RhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICoqKiogTU9ESUZJQ0FETzogQXNlZ3VyYXIgcXVlICdnYXN0b0VuQ3Vyc28nIGV4aXN0ZSBlbiBsYSBpbXBvcnRhY2nDs24gKioqKg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUub3RzID0gKGltcG9ydGVkRGF0YS5vdHMgfHwgW10pLm1hcChvdCA9PiAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm90LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc3RvRW5DdXJzbzogcGFyc2VGbG9hdChvdC5nYXN0b0VuQ3Vyc28pIHx8IDANCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnJlZ2lzdHJvcyA9IGltcG9ydGVkRGF0YS5yZWdpc3Ryb3MgfHwge307DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXJnYXIgcHJlY2lvcyBhbHF1aWxlciAobyB1c2FyIGRlZmF1bHQpDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hbHF1aWxlckRhdGEgPSBpbXBvcnRlZERhdGEuYWxxdWlsZXJEYXRhIHx8IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9BTFFVSUxFUl9EQVRBKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyAqKioqIE5VRVZPOiBDYXJnYXIgcHJlY2lvcyBncsO6YSAobyB1c2FyIGRlZmF1bHQpICoqKioNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmdydWFEYXRhID0gaW1wb3J0ZWREYXRhLmdydWFEYXRhIHx8IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9FVVJPR1JVQVNfREFUQSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlVmlldyA9ICdvdHMnOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlT1RJZCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmRhdGFMb2FkZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgnSW1wb3J0YWNpw7NuIENvbXBsZXRhJywgJ0RhdG9zIGltcG9ydGFkb3MgY29ycmVjdGFtZW50ZS4nKTsNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgDQogICAgICAgICAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoJ0Vycm9yIGFsIEltcG9ydGFyJywgYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7IA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsNCiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAnJzsgLy8gUmVzZXQgaW5wdXQgcGFyYSBwZXJtaXRpciByZS1pbXBvcnRhciBlbCBtaXNtbyBhcmNoaXZvDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcm9jZWVkKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgSU1QT1JUQUNJw5NOIERFIEhPUkFTIChNT0RJRklDQURBIFBBUkEgU0VSIEdMT0JBTCkgLS0tDQogICAgICAgIA0KICAgICAgICBjb25zdCBub3JtYWxpemVPVCA9IChvdFN0cmluZykgPT4gew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBvdFN0cmluZyAhPT0gJ3N0cmluZycpIHJldHVybiAnJzsNCiAgICAgICAgICAgIC8vIENvbnNlcnZhIG7Dum1lcm9zIHkgcHVudG9zLCBpZ25vcmEgIk9UIiB5IG90cm9zIGNhcmFjdGVyZXMNCiAgICAgICAgICAgIHJldHVybiBvdFN0cmluZw0KICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpDQogICAgICAgICAgICAgICAgLnJlcGxhY2UoL15vdC9pLCAnJykgLy8gUXVpdGEgIk9UIiBkZWwgcHJpbmNpcGlvDQogICAgICAgICAgICAgICAgLnJlcGxhY2UoL1teMC05Ll0vZywgJycpIC8vIERlamEgc29sbyBuw7ptZXJvcyB5IHB1bnRvcw0KICAgICAgICAgICAgICAgIC50cmltKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gKioqKiBGVU5DScOTTiBNT0RJRklDQURBOiBRdWl0YSBsYSByZXN0cmljY2nDs24gZGUgT1QgYWN0aXZhIHkgYWNsYXJhIGVsIG1lbnNhamUgKioqKg0KICAgICAgICBjb25zdCBoYW5kbGVJbXBvcnRIb3Jhc0NsaWNrID0gYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgLy8gUHJvbXB0IGFza3MgZm9yIHRoZSBTVEFSVCBkYXRlDQogICAgICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gYXdhaXQgc2hvd0N1c3RvbVByb21wdCgNCiAgICAgICAgICAgICAgICAiSW1wb3J0YXIgSG9yYXMgKEpTT04pIiwgDQogICAgICAgICAgICAgICAgIlBvciBmYXZvciwgaW50cm9kdWNlIGxhIEZFQ0hBIERFIElOSUNJTyAoWVlZWS1NTS1ERCkgZGVzZGUgbGEgY3VhbCBkZXNlYXMgaW1wb3J0YXIgbGFzIGhvcmFzLlxuXG5TZSBjcmVhcsOhbi9hY3R1YWxpemFyw6FuIGxhcyBPVHMgeSByZWdpc3Ryb3MgZGUgaG9yYXMgcGFyYSB0b2RvcyBsb3MgZGF0b3MgYSBwYXJ0aXIgZGUgZXN0YSBmZWNoYS4iLCAvLyBDbGFyaWZpZWQgbWVzc2FnZQ0KICAgICAgICAgICAgICAgIGdldFRvZGF5RGF0ZVN0cmluZygpDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoIXRhcmdldERhdGUpIHJldHVybjsgLy8gQ2FuY2VsYWRvDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghL15cZHs0fS1cZHsyfS1cZHsyfSQvLnRlc3QodGFyZ2V0RGF0ZSkpIHsNCiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkVycm9yIGRlIEZvcm1hdG8iLCAiTGEgZmVjaGEgZGViZSBlc3RhciBlbiBmb3JtYXRvIFlZWVktTU0tREQuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpbXBvcnRIb3Jhc1RhcmdldERhdGUgPSB0YXJnZXREYXRlOyANCiAgICAgICAgICAgIGRvbS5pbXBvcnRIb3Jhc0pzb25JbnB1dC5jbGljaygpOw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vICoqKiogRlVOQ0nDk04gTU9ESUZJQ0FEQTogQWhvcmEgZ2VzdGlvbmEgbGEgY3JlYWNpw7NuIGRlIE9UcyB5IFJlZ2lzdHJvcyAoR0xPQkFMKSAqKioqDQogICAgICAgIGNvbnN0IGhhbmRsZUltcG9ydEhvcmFzRmlsZSA9IChldmVudCkgPT4gew0KICAgICAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGltcG9ydEhvcmFzVGFyZ2V0RGF0ZTsgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghZmlsZSB8fCAhc3RhcnREYXRlKSB7DQogICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wb3J0ZWREYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbXBvcnRlZERhdGEudGFibGVzIHx8ICFpbXBvcnRlZERhdGEudGFibGVzWydEYXRvcyddIHx8ICFpbXBvcnRlZERhdGEudGFibGVzWydEYXRvcyddLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWwgYXJjaGl2byBKU09OIG5vIHRpZW5lIGVsIGZvcm1hdG8gZXNwZXJhZG8gKGZhbHRhIHRhYmxlcy5EYXRvcy5kYXRhKS4nKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBpbXBvcnRlZERhdGEudGFibGVzWydEYXRvcyddLmRhdGE7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gQWN1bXVsYXIgaG9yYXMgcG9yIE9UIG5vcm1hbGl6YWRhIHkgRmVjaGENCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnNCeU9UQW5kRGF0ZSA9IHt9OyAvLyB7IG5vcm1hbGl6ZWRPVE5hbWU6IHsgZGF0ZTogdG90YWxIb3VycyB9IH0NCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3ROYW1lTWFwID0ge307ICAgICAgICAvLyB7IG5vcm1hbGl6ZWRPVE5hbWU6IG9yaWdpbmFsT1ROYW1lIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGpzb25EYXRhLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0RhdGUgPSBTdHJpbmcocm93LkZFQ0hBKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hciBzaSBoYXkgZmVjaGEgZGUgY29ydGUgcGFyYSBlc3RhIE9UDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdE5hbWVSb3cgPSBTdHJpbmcocm93Lk9UIHx8ICcnKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtT1RSb3cgPSBub3JtYWxpemVPVChvdE5hbWVSb3cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3RPYmogPSBzdGF0ZS5vdHMuZmluZChvID0+IG5vcm1hbGl6ZU9UKG8ubm9tYnJlKSA9PT0gbm9ybU9UUm93KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhQ29ydGVGaWphZGEgPSBvdE9iaiA/IG90T2JqLmZlY2hhQ29ydGUgOiAnJzsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIGZlY2hhIGRlIGNvcnRlLCBlcyBlbCBsw61taXRlIGFic29sdXRvLiBTaSBubywgdXNhbW9zIGxhIHNlbGVjY2lvbmFkYSBlbiBsYSBpbXBvcnRhY2nDs24uDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZmZlY3RpdmVMaW1pdCA9IGZlY2hhQ29ydGVGaWphZGEgfHwgc3RhcnREYXRlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93RGF0ZSA8IGVmZmVjdGl2ZUxpbWl0KSByZXR1cm47IA0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdE5hbWUgPSBTdHJpbmcocm93Lk9UIHx8ICcnKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW90TmFtZSkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkT1QgPSBub3JtYWxpemVPVChvdE5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkT1QpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgb3ROYW1lTWFwW25vcm1hbGl6ZWRPVF0gPSBvdE5hbWU7IA0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBobiA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGUgPSBwYXJzZUZsb2F0KFN0cmluZyhyb3cuSEUgfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhaWx5SG91cnMgPSBobiArIGhlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJbXBybyA9IHJvdy5JTVBST0RVQ1RJVk8gPT09ICdTSSc7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYWlseUhvdXJzID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzQnlPVEFuZERhdGVbbm9ybWFsaXplZE9UXSA9IGhvdXJzQnlPVEFuZERhdGVbbm9ybWFsaXplZE9UXSB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhvdXJzQnlPVEFuZERhdGVbbm9ybWFsaXplZE9UXVtyb3dEYXRlXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3Vyc0J5T1RBbmREYXRlW25vcm1hbGl6ZWRPVF1bcm93RGF0ZV0gPSB7IHByb2Q6IDAsIGltcHJvOiAwIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0ltcHJvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzQnlPVEFuZERhdGVbbm9ybWFsaXplZE9UXVtyb3dEYXRlXS5pbXBybyArPSBkYWlseUhvdXJzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzQnlPVEFuZERhdGVbbm9ybWFsaXplZE9UXVtyb3dEYXRlXS5wcm9kICs9IGRhaWx5SG91cnM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGxldCBuZXdPVHNDcmVhdGVkID0gMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1JlY29yZHNDcmVhdGVkID0gMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY29yZHNVcGRhdGVkQ291bnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICBsZXQgdG90YWxIb3Vyc0ltcG9ydGVkID0gMDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBBcGxpY2FyIGxvcyBjYW1iaW9zIGFsIGVzdGFkbyAoQ3JlYXIgT1QvUmVnaXN0cm8sIEFjdHVhbGl6YXIgSG9yYXMpDQogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgbm9ybWFsaXplZE9UIGluIGhvdXJzQnlPVEFuZERhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsT1ROYW1lID0gb3ROYW1lTWFwW25vcm1hbGl6ZWRPVF07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdEhvdXJzID0gaG91cnNCeU9UQW5kRGF0ZVtub3JtYWxpemVkT1RdOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhLiBFbmNvbnRyYXIgbyBDcmVhciBPVA0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG90ID0gc3RhdGUub3RzLmZpbmQobyA9PiBub3JtYWxpemVPVChvLm5vbWJyZSkgPT09IG5vcm1hbGl6ZWRPVCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhciBudWV2YSBPVA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBvcmlnaW5hbE9UTmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FzdG9FbkN1cnNvOiAwIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUub3RzLnB1c2gob3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnJlZ2lzdHJvc1tvdC5pZF0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPVHNDcmVhdGVkKys7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG90UmVnaXN0cm9zID0gc3RhdGUucmVnaXN0cm9zW290LmlkXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIGluIG90SG91cnMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHByb2QsIGltcHJvIH0gPSBvdEhvdXJzW2RhdGVdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdpc3RybyA9IG90UmVnaXN0cm9zLmZpbmQociA9PiByLmZlY2hhID09PSBkYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiLiBFbmNvbnRyYXIgbyBDcmVhciBSZWdpc3Rybw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3UmVjb3JkID0gIXJlZ2lzdHJvOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05ld1JlY29yZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhciBudWV2byBSZWdpc3RybyBjb24gY2FtcG9zIGRlIGNvc3RlIHBvciBkZWZlY3RvICgwL3ZhY8OtbykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cm8gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlY2hhOiBkYXRlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXNfdHJhYmFqYWRvcmVzOiAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXNfaW1wcm9kdWN0aXZhczogMCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaW9faG9yYXM6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21pZGE6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3N0ZV90b3RhbF9yZWdpc3RybzogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFyIHRvZG9zIGxvcyBjYW1wb3MgZGUgY29zdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhDT1NUX0ZJRUxEUy5tYXAoZiA9PiBbYCR7Zi5pZH1fZGV0YWxsZWAsIFtdXSkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKENPU1RfRklFTERTLm1hcChmID0+IFtgJHtmLmlkfV90b3RhbGAsIDBdKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncnVwb3Nfc29sX2RldGFsbGU6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3J1cG9zX3NvbF90b3RhbDogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdydWFfY2FtaW9uX2RldGFsbGU6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3J1YV9jYW1pb25fdG90YWw6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90UmVnaXN0cm9zLnB1c2gocmVnaXN0cm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdSZWNvcmRzQ3JlYXRlZCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGMuIEFjdHVhbGl6YXIgaG9yYXMgeSByZWNhbGN1bGFyIHRvdGFsZXMgKFNvbG8gc2kgbGFzIGhvcmFzIGNhbWJpYW4gbyBzaSBlcyB1biByZWdpc3RybyBudWV2bykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXdSZWNvcmQgfHwgcmVnaXN0cm8uaG9yYXNfdHJhYmFqYWRvcmVzICE9PSBwcm9kIHx8IHJlZ2lzdHJvLmhvcmFzX2ltcHJvZHVjdGl2YXMgIT09IGltcHJvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmhvcmFzX3RyYWJhamFkb3JlcyA9IHByb2Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmhvcmFzX2ltcHJvZHVjdGl2YXMgPSBpbXBybzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxIb3Jhc0NvbWJpbmFkYXMgPSBwcm9kICsgaW1wcm87DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByZWNpb19ob3JhcyA9IGNhbGN1bGF0ZVByZWNpb0hvcmFzKHRvdGFsSG9yYXNDb21iaW5hZGFzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cm8uY29taWRhID0gY2FsY3VsYXRlQ29taWRhKHRvdGFsSG9yYXNDb21iaW5hZGFzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY2FsY3VsYXIgdG90YWwgZGVsIHJlZ2lzdHJvIChzdW1hbmRvIGxvcyBjb3N0ZXMgZmlqb3MgZXhpc3RlbnRlcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvc3RlVG90YWxSZWdpc3RybyA9IHJlZ2lzdHJvLnByZWNpb19ob3JhcyArIHJlZ2lzdHJvLmNvbWlkYTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09TVF9GSUVMRFMuZm9yRWFjaChmaWVsZCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3N0ZVRvdGFsUmVnaXN0cm8gKz0gKHJlZ2lzdHJvW2Ake2ZpZWxkLmlkfV90b3RhbGBdIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdGVUb3RhbFJlZ2lzdHJvICs9IChyZWdpc3Ryby5ncnVwb3Nfc29sX3RvdGFsIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3N0ZVRvdGFsUmVnaXN0cm8gKz0gKHJlZ2lzdHJvLmdydWFfY2FtaW9uX3RvdGFsIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3Ryby5jb3N0ZV90b3RhbF9yZWdpc3RybyA9IGNvc3RlVG90YWxSZWdpc3RybzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNVcGRhdGVkQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxIb3Vyc0ltcG9ydGVkICs9IChwcm9kICsgaW1wcm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChuZXdPVHNDcmVhdGVkID4gMCB8fCBuZXdSZWNvcmRzQ3JlYXRlZCA+IDAgfHwgcmVjb3Jkc1VwZGF0ZWRDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzY2FyIGxhIHZpc3RhIGFjdHVhbCAoc2kgZXN0w6EgZW4gcmVnaXN0cm9zLCBzZSByZWZyZXNjYSBsYSB0YWJsYTsgc2kgZXN0w6EgZW4gT1RzLCBzZSByZWZyZXNjYW4gbG9zIHRvdGFsZXMpDQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIoKTsgDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gYEltcG9ydGFjacOzbiBkZSBob3JhcyBjb21wbGV0YWRhIGEgcGFydGlyIGRlbCAke3N0YXJ0RGF0ZX0uXG5cbmA7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3T1RzQ3JlYXRlZCA+IDApIG1lc3NhZ2UgKz0gYCsgJHtuZXdPVHNDcmVhdGVkfSDDk3JkZW5lcyBkZSBUcmFiYWpvIGNyZWFkYXMuXG5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1JlY29yZHNDcmVhdGVkID4gMCkgbWVzc2FnZSArPSBgKyAke25ld1JlY29yZHNDcmVhdGVkfSBSZWdpc3Ryb3MgZGUgZMOtYSBjcmVhZG9zLlxuYDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWNvcmRzVXBkYXRlZENvdW50ID4gMCkgbWVzc2FnZSArPSBgKyAke3JlY29yZHNVcGRhdGVkQ291bnR9IFJlZ2lzdHJvcyBkZSBkw61hIGFjdHVhbGl6YWRvcy4gVG90YWwgZGUgaG9yYXM6ICR7dG90YWxIb3Vyc0ltcG9ydGVkLnRvRml4ZWQoMil9aC5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkltcG9ydGFjacOzbiBHbG9iYWwgRXhpdG9zYSIsIG1lc3NhZ2UudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiU2luIENhbWJpb3MiLCBgTm8gc2UgZW5jb250cmFyb24gaG9yYXMgdsOhbGlkYXMgZW4gZWwgSlNPTiBhIHBhcnRpciBkZWwgJHtzdGFydERhdGV9IHF1ZSByZXF1aXJpZXJhbiBjcmVhciBvIGFjdHVhbGl6YXIgT1RzIG8gcmVnaXN0cm9zLmApOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoJ0Vycm9yIGFsIEltcG9ydGFyIEhvcmFzJywgYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7DQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgICAgIGltcG9ydEhvcmFzVGFyZ2V0RGF0ZSA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgLy8gLS0tICoqKiogTlVFVkEgRlVOQ0nDk046IEVYUE9SVEFSIEEgRVhDRUwgKioqKiAtLS0NCiAgICAgICAgY29uc3QgaGFuZGxlRXhwb3J0RXhjZWwgPSAoKSA9PiB7DQogICAgICAgICAgICBpZiAoIXN0YXRlLmFjdGl2ZU9USWQpIHsNCiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkVycm9yIiwgIk5vIGhheSBuaW5ndW5hIE9UIGFjdGl2YSBzZWxlY2Npb25hZGEuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBvdCA9IHN0YXRlLm90cy5maW5kKG8gPT4gby5pZCA9PT0gc3RhdGUuYWN0aXZlT1RJZCk7DQogICAgICAgICAgICBpZiAoIW90KSB7DQogICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJFcnJvciIsICJObyBzZSBwdWRpZXJvbiBlbmNvbnRyYXIgbG9zIGRhdG9zIGRlIGxhIE9ULiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgcmVnaXN0cm9zID0gc3RhdGUucmVnaXN0cm9zW3N0YXRlLmFjdGl2ZU9USWRdIHx8IFtdOw0KICAgICAgICAgICAgaWYgKHJlZ2lzdHJvcy5sZW5ndGggPT09IDAgJiYgKG90Lmdhc3RvRW5DdXJzbyB8fCAwKSA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiU2luIERhdG9zIiwgIk5vIGhheSByZWdpc3Ryb3MgbmkgZ2FzdG9zIGVuIGN1cnNvIGVuIGVzdGEgT1QgcGFyYSBleHBvcnRhci4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIE9yZGVuYXIgcmVnaXN0cm9zIHBvciBmZWNoYSAoYXNjZW5kZW50ZSkgcGFyYSB1biBsb2cgY3Jvbm9sw7NnaWNvDQogICAgICAgICAgICBjb25zdCBzb3J0ZWRSZWdpc3Ryb3MgPSBbLi4ucmVnaXN0cm9zXS5zb3J0KChhLCBiKSA9PiBhLmZlY2hhLmxvY2FsZUNvbXBhcmUoYi5mZWNoYSkpOw0KDQogICAgICAgICAgICBjb25zdCBkYXRhVG9FeHBvcnQgPSBbXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gUHJvY2VzYXIgY2FkYSByZWdpc3Rybw0KICAgICAgICAgICAgc29ydGVkUmVnaXN0cm9zLmZvckVhY2gocmVnID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYSA9IHJlZy5mZWNoYTsNCg0KICAgICAgICAgICAgICAgIC8vIDEuIE1hbm8gZGUgT2JyYQ0KICAgICAgICAgICAgICAgIGlmIChyZWcucHJlY2lvX2hvcmFzID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBkYXRhVG9FeHBvcnQucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAiRmVjaGEiOiBmZWNoYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDYXRlZ29yw61hIjogIk1hbm8gZGUgT2JyYSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29uY2VwdG8vRGVzY3JpcGNpw7NuIjogIkhvcmFzIFRyYWJhamFkb3JlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29zdGUgKOKCrCkiOiByZWcucHJlY2lvX2hvcmFzLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRldGFsbGUiOiBgJHtyZWcuaG9yYXNfdHJhYmFqYWRvcmVzfWhgDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocmVnLmNvbWlkYSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgIGRhdGFUb0V4cG9ydC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJGZWNoYSI6IGZlY2hhLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNhdGVnb3LDrWEiOiAiTWFubyBkZSBPYnJhIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb25jZXB0by9EZXNjcmlwY2nDs24iOiAiQ29taWRhIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb3N0ZSAo4oKsKSI6IHJlZy5jb21pZGEsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGV0YWxsZSI6ICIiDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyAyLiBNdWx0aS1Db25jZXB0byAoQ29uc3VtaWJsZXMsIE9icmEgQ2l2aWwsIGV0Yy4pDQogICAgICAgICAgICAgICAgQ09TVF9GSUVMRFMuZm9yRWFjaChmaWVsZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFsbGVzID0gcmVnW2Ake2ZpZWxkLmlkfV9kZXRhbGxlYF0gfHwgW107DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTGFiZWwgPSBmaWVsZC5sYWJlbDsgLy8gIkNvbnN1bWlibGVzIiwgIk9icmEgQ2l2aWwiLCBldGMuDQogICAgICAgICAgICAgICAgICAgIGRldGFsbGVzLmZvckVhY2goZGV0YWxsZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWxsZS52YWxvciA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVG9FeHBvcnQucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJGZWNoYSI6IGZlY2hhLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2F0ZWdvcsOtYSI6IGZpZWxkTGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb25jZXB0by9EZXNjcmlwY2nDs24iOiBkZXRhbGxlLmNvbmNlcHRvLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29zdGUgKOKCrCkiOiBkZXRhbGxlLnZhbG9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGV0YWxsZSI6ICIiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gQWxxdWlsZXIgKEdydXBvcyBzb2wuIGV0YykNCiAgICAgICAgICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IE1hbmVqYXIgYXJyYXkgZGUgYWxxdWlsZXIgKioqKg0KICAgICAgICAgICAgICAgIGNvbnN0IGFscXVpbGVyZXMgPSBBcnJheS5pc0FycmF5KHJlZy5ncnVwb3Nfc29sX2RldGFsbGUpID8gcmVnLmdydXBvc19zb2xfZGV0YWxsZSA6IFtdOw0KICAgICAgICAgICAgICAgIGlmIChhbHF1aWxlcmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxxdWlsZXJlcy5mb3JFYWNoKGFscXVpbGVyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUb0V4cG9ydC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRmVjaGEiOiBmZWNoYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2F0ZWdvcsOtYSI6ICJHcnVwb3Mgc29sLiBldGMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb25jZXB0by9EZXNjcmlwY2nDs24iOiBhbHF1aWxlci5pdGVtRGVzY3JpcGNpb24gfHwgIlZhbG9yIE1hbnVhbC9BbnRpZ3VvIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29zdGUgKOKCrCkiOiBhbHF1aWxlci50b3RhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGV0YWxsZSI6IChhbHF1aWxlci5pdGVtRGVzY3JpcGNpb24gJiYgYWxxdWlsZXIuaXRlbURlc2NyaXBjaW9uICE9PSAnVmFsb3IgTWFudWFsL0FudGlndW8nICYmIGFscXVpbGVyLml0ZW1EZXNjcmlwY2lvbiAhPT0gJ1ZhbG9yIE1hbnVhbCcpID8gYETDrWFzOiAke2FscXVpbGVyLml0ZW1EaWFzfSwgTGl0cm9zOiAke2FscXVpbGVyLmxpdHJvc0NvbWJ1c3RpYmxlfSwgRW1wcmVzYTogJHthbHF1aWxlci5lbXByZXNhfSAoJHthbHF1aWxlci5hbm99KWAgOiAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnLmdydXBvc19zb2xfdG90YWwgPiAwICYmIGFscXVpbGVyZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIENvbXBhdGliaWxpZGFkIGNvbiBmb3JtYXRvIGFudGlndW8gbWFudWFsDQogICAgICAgICAgICAgICAgICAgICBkYXRhVG9FeHBvcnQucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAiRmVjaGEiOiBmZWNoYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDYXRlZ29yw61hIjogIkdydXBvcyBzb2wuIGV0YyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29uY2VwdG8vRGVzY3JpcGNpw7NuIjogIlZhbG9yIE1hbnVhbC9BbnRpZ3VvIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb3N0ZSAo4oKsKSI6IHJlZy5ncnVwb3Nfc29sX3RvdGFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRldGFsbGUiOiAiIg0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gNC4gR3LDumEgKEdyw7phIG8gQ2FtacOzbikNCiAgICAgICAgICAgICAgICAvLyAqKioqIE1PRElGSUNBRE86IE1hbmVqYXIgYXJyYXkgZGUgZ3LDumEgKioqKg0KICAgICAgICAgICAgICAgIGNvbnN0IGdydWFzID0gQXJyYXkuaXNBcnJheShyZWcuZ3J1YV9jYW1pb25fZGV0YWxsZSkgPyByZWcuZ3J1YV9jYW1pb25fZGV0YWxsZSA6IFtdOw0KICAgICAgICAgICAgICAgIGlmIChncnVhcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGdydWFzLmZvckVhY2goZ3J1YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhVG9FeHBvcnQucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkZlY2hhIjogZmVjaGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNhdGVnb3LDrWEiOiAiR3LDumEgbyBDYW1pw7NuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29uY2VwdG8vRGVzY3JpcGNpw7NuIjogZ3J1YS5pdGVtRGVzY3JpcGNpb24gfHwgIlZhbG9yIE1hbnVhbC9BbnRpZ3VvIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29zdGUgKOKCrCkiOiBncnVhLnRvdGFsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEZXRhbGxlIjogKGdydWEuaXRlbURlc2NyaXBjaW9uICYmIGdydWEuaXRlbURlc2NyaXBjaW9uICE9PSAnVmFsb3IgTWFudWFsL0FudGlndW8nICYmIGdydWEuaXRlbURlc2NyaXBjaW9uICE9PSAnVmFsb3IgTWFudWFsJykgPyBgSG9yYXMgU2VydjogJHtncnVhLml0ZW1Ib3Jhc31oLCBIb3JhcyBDb2JyOiAke2dydWEuaG9yYXNBQ29icmFyfWgsIEVtcHJlc2E6ICR7Z3J1YS5lbXByZXNhfSAoJHtncnVhLmFub30pYCA6ICIiDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWcuZ3J1YV9jYW1pb25fdG90YWwgPiAwICYmIGdydWFzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXRpYmlsaWRhZCBjb24gZm9ybWF0byBhbnRpZ3VvIG1hbnVhbA0KICAgICAgICAgICAgICAgICAgICAgZGF0YVRvRXhwb3J0LnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgIkZlY2hhIjogZmVjaGEsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ2F0ZWdvcsOtYSI6ICJHcsO6YSBvIENhbWnDs24iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvbmNlcHRvL0Rlc2NyaXBjacOzbiI6ICJWYWxvciBNYW51YWwvQW50aWd1byIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29zdGUgKOKCrCkiOiByZWcuZ3J1YV9jYW1pb25fdG90YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGV0YWxsZSI6ICIiDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyA1LiBGaWxhIGRlIFRvdGFsIGRlbCBSZWdpc3Rybw0KICAgICAgICAgICAgICAgIGRhdGFUb0V4cG9ydC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgIkZlY2hhIjogZmVjaGEsDQogICAgICAgICAgICAgICAgICAgICJDYXRlZ29yw61hIjogIi0tLSBUT1RBTCBSRUdJU1RSTyAtLS0iLA0KICAgICAgICAgICAgICAgICAgICAiQ29uY2VwdG8vRGVzY3JpcGNpw7NuIjogYFRvdGFsIGRlbCBkw61hICR7ZmVjaGF9YCwNCiAgICAgICAgICAgICAgICAgICAgIkNvc3RlICjigqwpIjogcmVnLmNvc3RlX3RvdGFsX3JlZ2lzdHJvLA0KICAgICAgICAgICAgICAgICAgICAiRGV0YWxsZSI6ICIiDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBBw7FhZGlyIEdhc3RvIGVuIEN1cnNvIHkgVG90YWwgRmluYWwgKioqKg0KICAgICAgICAgICAgY29uc3QgdG90YWxPVFJlZ2lzdHJvcyA9IGNhbGN1bGF0ZVRvdGFsQ29zdGVzRGV0YWxsZShzdGF0ZS5hY3RpdmVPVElkKTsNCiAgICAgICAgICAgIGNvbnN0IGdhc3RvRW5DdXJzbyA9IG90Lmdhc3RvRW5DdXJzbyB8fCAwOw0KICAgICAgICAgICAgY29uc3QgdG90YWxPVEZpbmFsID0gdG90YWxPVFJlZ2lzdHJvcyArIGdhc3RvRW5DdXJzbzsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZGF0YVRvRXhwb3J0LnB1c2goe30pOyAvLyBGaWxhIHZhY8OtYSBjb21vIHNlcGFyYWRvcg0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBw7FhZGlyIGZpbGEgcGFyYSBHYXN0byBlbiBDdXJzbw0KICAgICAgICAgICAgaWYgKGdhc3RvRW5DdXJzbyA+IDApIHsNCiAgICAgICAgICAgICAgICBkYXRhVG9FeHBvcnQucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICJGZWNoYSI6ICIiLA0KICAgICAgICAgICAgICAgICAgICAiQ2F0ZWdvcsOtYSI6ICJDb3N0ZSBGaWpvIE9UIiwNCiAgICAgICAgICAgICAgICAgICAgIkNvbmNlcHRvL0Rlc2NyaXBjacOzbiI6ICJHYXN0byBlbiBjdXJzbyIsDQogICAgICAgICAgICAgICAgICAgICJDb3N0ZSAo4oKsKSI6IGdhc3RvRW5DdXJzbywNCiAgICAgICAgICAgICAgICAgICAgIkRldGFsbGUiOiAiVmFsb3IgZmlqbyBhw7FhZGlkbyBhbCB0b3RhbCBkZSBsYSBPVCINCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZGF0YVRvRXhwb3J0LnB1c2goew0KICAgICAgICAgICAgICAgICJGZWNoYSI6ICIiLA0KICAgICAgICAgICAgICAgICJDYXRlZ29yw61hIjogIj09PT09PSBUT1RBTCBPVCA9PT09PT0iLA0KICAgICAgICAgICAgICAgICJDb25jZXB0by9EZXNjcmlwY2nDs24iOiBvdC5ub21icmUsDQogICAgICAgICAgICAgICAgIkNvc3RlICjigqwpIjogdG90YWxPVEZpbmFsLCAvLyBVc2FyIGVsIHRvdGFsIGZpbmFsDQogICAgICAgICAgICAgICAgIkRldGFsbGUiOiAiIg0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIENyZWFyIGxhIGhvamEgZGUgY8OhbGN1bG8NCiAgICAgICAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGRhdGFUb0V4cG9ydCk7DQoNCiAgICAgICAgICAgIC8vIERlZmluaXIgYW5jaG9zIGRlIGNvbHVtbmEgKGVuIGNhcmFjdGVyZXMpDQogICAgICAgICAgICB3c1snIWNvbHMnXSA9IFsNCiAgICAgICAgICAgICAgICB7IHdjaDogMTIgfSwgLy8gRmVjaGENCiAgICAgICAgICAgICAgICB7IHdjaDogMjUgfSwgLy8gQ2F0ZWdvcsOtYQ0KICAgICAgICAgICAgICAgIHsgd2NoOiA0NSB9LCAvLyBDb25jZXB0by9EZXNjcmlwY2nDs24NCiAgICAgICAgICAgICAgICB7IHdjaDogMTUgfSwgLy8gQ29zdGUgKOKCrCkNCiAgICAgICAgICAgICAgICB7IHdjaDogNDAgfSAgLy8gRGV0YWxsZQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQXBsaWNhciBmb3JtYXRvIGRlIG1vbmVkYSBhIGxhIGNvbHVtbmEgIkNvc3RlICjigqwpIg0KICAgICAgICAgICAgLy8gRXMgbGEgNMKqIGNvbHVtbmEsIMOtbmRpY2UgMw0KICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSAzOw0KICAgICAgICAgICAgY29uc3QgY29sTGV0dGVyID0gWExTWC51dGlscy5lbmNvZGVfY29sKGNvbEluZGV4KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gSXRlcmFyIHBvciB0b2RhcyBsYXMgZmlsYXMgZGUgZGF0b3MgKGkgPSAwIGVzIGxhIHByaW1lcmEgZmlsYSBkZSBkYXRvcykNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVRvRXhwb3J0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgLy8gKzIgcG9ycXVlIFhMU1ggZXMgMS1iYXNlZCB5IGxhIGZpbGEgMSBlcyBsYSBjYWJlY2VyYQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxBZGRyZXNzID0gYCR7Y29sTGV0dGVyfSR7aSArIDJ9YDsgDQogICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHdzW2NlbGxBZGRyZXNzXTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgcXVlIGxhIGNlbGRhIGV4aXN0ZSB5IHN1IHZhbG9yIGVzIHVuIG7Dum1lcm8NCiAgICAgICAgICAgICAgICBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbC52ID09PSAnbnVtYmVyJykgew0KICAgICAgICAgICAgICAgICAgICBjZWxsLnQgPSAnbic7IC8vIFNldCB0eXBlIHRvIG51bWJlcg0KICAgICAgICAgICAgICAgICAgICBjZWxsLnogPSAnIywjIzAuMDAiIOKCrCInOyAvLyBTZXQgbnVtYmVyIGZvcm1hdA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ3JlYXIgZWwgbGlicm8gZGUgdHJhYmFqbyB5IGHDsWFkaXIgbGEgaG9qYQ0KICAgICAgICAgICAgY29uc3Qgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7DQogICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCB3cywgIkRldGFsbGUgQ29zdGVzIik7DQoNCiAgICAgICAgICAgIC8vIEdlbmVyYXIgeSBkZXNjYXJnYXIgZWwgYXJjaGl2bw0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgQ29zdGVzX0RldGFsbGVfT1RfJHtvdC5ub21icmUucmVwbGFjZSgvW15hLXowLTldL2dpLCAnXycpfS54bHN4YDsNCiAgICAgICAgICAgIFhMU1gud3JpdGVGaWxlKHdiLCBmaWxlTmFtZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXhwb3J0YWNpw7NuIENvbXBsZXRhIiwgYFNlIGhhIGdlbmVyYWRvIGVsIGFyY2hpdm8gIiR7ZmlsZU5hbWV9Ii5gKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAtLS0gRlVOQ0lPTkVTIFBBUkEgR0VTVEnDk04gREUgQUxRVUlMRVJFUyAtLS0NCg0KICAgICAgICAvLyAqKioqIE5VRVZBOiBSZW5kZXJpemEgbGEgbGlzdGEgZGUgaXRlbXMgYcOxYWRpZG9zIGVuIGVsIG1vZGFsICoqKioNCiAgICAgICAgY29uc3QgcmVuZGVyQWxxdWlsZXJTdW1tYXJ5TGlzdCA9ICgpID0+IHsNCiAgICAgICAgICAgIGlmIChjdXJyZW50QWxxdWlsZXJEZXRhbGxlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICBkb20uYWxxdWlsZXJTdW1tYXJ5TGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTUwMCBpdGFsaWMiPk5vIHNlIGhhbiBhw7FhZGlkbyBpdGVtcy48L3A+JzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZG9tLmFscXVpbGVyU3VtbWFyeUxpc3QuaW5uZXJIVE1MID0gY3VycmVudEFscXVpbGVyRGV0YWxsZXMubWFwKChpdGVtLCBpbmRleCkgPT4gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0yIGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgdGV4dC1zbSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idHJ1bmNhdGUiIHRpdGxlPSIke2VzY2FwZUh0bWwoaXRlbS5pdGVtRGVzY3JpcGNpb24gfHwgJ04vQScpfSI+JHtpbmRleCArIDF9LiAke2VzY2FwZUh0bWwoaXRlbS5pdGVtRGVzY3JpcGNpb24gfHwgJ04vQScpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWwtMiI+JHtmb3JtYXRDdXJyZW5jeShpdGVtLnRvdGFsKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkZWxldGUtYWxxdWlsZXItaXRlbS1idG4gdGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCBtbC0yIHAtMSIgZGF0YS1pbmRleD0iJHtpbmRleH0iIHRpdGxlPSJFbGltaW5hciBpdGVtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJoLTQgdy00IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE5IDdsLS44NjcgMTIuMTQyQTIgMiAwIDAxMTYuMTM4IDIxSDcuODYyYTIgMiAwIDAxLTEuOTk1LTEuODU4TDUgN201IDR2Nm00LTZ2Nm0xLTEwVjRhMSAxIDAgMDAtMS0xaC00YTEgMSAwIDAwLTEgMXYzTTQgN2gxNiIgLz48L3N2Zz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICBgKS5qb2luKCcnKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBBw7FhZGlyIGxpc3RlbmVycyBhIGxvcyBib3RvbmVzIGRlIGVsaW1pbmFyDQogICAgICAgICAgICAgICAgZG9tLmFscXVpbGVyU3VtbWFyeUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmRlbGV0ZS1hbHF1aWxlci1pdGVtLWJ0bicpLmZvckVhY2goYnRuID0+IHsNCiAgICAgICAgICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURlbGV0ZUFscXVpbGVySXRlbShwYXJzZUludChlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleCkpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlY2FsY3VsYXRlQWxxdWlsZXJNb2RhbFRvdGFsKCk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyAqKioqIE5VRVZBOiBFbGltaW5hIHVuIGl0ZW0gZGUgbGEgbGlzdGEgdGVtcG9yYWwgKioqKg0KICAgICAgICBjb25zdCBoYW5kbGVEZWxldGVBbHF1aWxlckl0ZW0gPSAoaW5kZXgpID0+IHsNCiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgY3VycmVudEFscXVpbGVyRGV0YWxsZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgY3VycmVudEFscXVpbGVyRGV0YWxsZXMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgICAgICAgICAgICByZW5kZXJBbHF1aWxlclN1bW1hcnlMaXN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gKioqKiBOVUVWQTogUmVjYWxjdWxhIGVsIHRvdGFsIGRlbCAqbW9kYWwqIGRlc2RlIGVsIGFycmF5ICoqKioNCiAgICAgICAgY29uc3QgcmVjYWxjdWxhdGVBbHF1aWxlck1vZGFsVG90YWwgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCB0b3RhbCA9IGN1cnJlbnRBbHF1aWxlckRldGFsbGVzLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS50b3RhbCB8fCAwKSwgMCk7DQogICAgICAgICAgICBkb20uYWxxdWlsZXJUb3RhbC50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHRvdGFsKTsNCiAgICAgICAgICAgIHJldHVybiB0b3RhbDsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vICoqKiogTU9ESUZJQ0FEQTogQWhvcmEgc29sbyBjYXB0dXJhIGVsIGZvcm0geSBkZXZ1ZWx2ZSB1biBvYmpldG8gKioqKg0KICAgICAgICBjb25zdCBjYXB0dXJlQWxxdWlsZXJGb3JtID0gKCkgPT4gew0KICAgICAgICAgICAgLy8gQ29nZSBsb3MgZGF0b3MgZGUgbG9zIGlucHV0cyBkZWwgbW9kYWwNCiAgICAgICAgICAgIGNvbnN0IGVtcHJlc2EgPSBkb20uYWxxdWlsZXJFbXByZXNhLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgYW5vID0gZG9tLmFscXVpbGVyQW5vLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGdldEFscXVpbGVyRGF0YShlbXByZXNhLCBhbm8pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZERlc2NyaXBjaW9uID0gZG9tLmFscXVpbGVySXRlbURlc2NyaXBjaW9uLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRhdGE/Lml0ZW1zLmZpbmQoaSA9PiBpLmRlc2NyaXBjaW9uID09PSBzZWxlY3RlZERlc2NyaXBjaW9uKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgaXRlbVByZWNpb0RpYSA9IGl0ZW0gPyBpdGVtLnByZWNpbyA6IDA7DQogICAgICAgICAgICBjb25zdCBpdGVtRGlhcyA9IHBhcnNlRmxvYXQoZG9tLmFscXVpbGVySXRlbURpYXMudmFsdWUpIHx8IDA7DQogICAgICAgICAgICBjb25zdCBwcmVjaW9MaXRyb0NvbWJ1c3RpYmxlID0gZGF0YT8ucHJlY2lvTGl0cm9Db21idXN0aWJsZSB8fCAwOw0KICAgICAgICAgICAgY29uc3QgbGl0cm9zQ29tYnVzdGlibGUgPSBwYXJzZUZsb2F0KGRvbS5hbHF1aWxlckNvbWJ1c3RpYmxlTGl0cm9zLnZhbHVlKSB8fCAwOw0KDQogICAgICAgICAgICBjb25zdCBzdWJ0b3RhbE1hcXVpbmFyaWEgPSBpdGVtUHJlY2lvRGlhICogaXRlbURpYXM7DQogICAgICAgICAgICBjb25zdCBzdWJ0b3RhbENvbWJ1c3RpYmxlID0gcHJlY2lvTGl0cm9Db21idXN0aWJsZSAqIGxpdHJvc0NvbWJ1c3RpYmxlOw0KICAgICAgICAgICAgY29uc3QgdG90YWwgPSBzdWJ0b3RhbE1hcXVpbmFyaWEgKyBzdWJ0b3RhbENvbWJ1c3RpYmxlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIFVJIGRlIHN1YnRvdGFsZXMNCiAgICAgICAgICAgIGRvbS5hbHF1aWxlclN1YnRvdGFsTWFxdWluYXJpYS50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHN1YnRvdGFsTWFxdWluYXJpYSk7DQogICAgICAgICAgICBkb20uYWxxdWlsZXJTdWJ0b3RhbENvbWJ1c3RpYmxlLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3koc3VidG90YWxDb21idXN0aWJsZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgZW1wcmVzYTogZW1wcmVzYSwNCiAgICAgICAgICAgICAgICBhbm86IGFubywNCiAgICAgICAgICAgICAgICBpdGVtRGVzY3JpcGNpb246IHNlbGVjdGVkRGVzY3JpcGNpb24sDQogICAgICAgICAgICAgICAgaXRlbVByZWNpb0RpYTogaXRlbVByZWNpb0RpYSwNCiAgICAgICAgICAgICAgICBpdGVtRGlhczogaXRlbURpYXMsDQogICAgICAgICAgICAgICAgbGl0cm9zQ29tYnVzdGlibGU6IGxpdHJvc0NvbWJ1c3RpYmxlLA0KICAgICAgICAgICAgICAgIHByZWNpb0xpdHJvQ29tYnVzdGlibGU6IHByZWNpb0xpdHJvQ29tYnVzdGlibGUsDQogICAgICAgICAgICAgICAgdG90YWw6IHRvdGFsDQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KDQogICAgICAgIC8vICoqKiogTlVFVkE6IFJlc2V0ZWEgZWwgZm9ybXVsYXJpbyBkZSBhw7FhZGlyIGl0ZW0gZGUgYWxxdWlsZXIgKioqKg0KICAgICAgICBjb25zdCByZXNldEFscXVpbGVyRm9ybSA9ICgpID0+IHsNCiAgICAgICAgICAgIGRvbS5hbHF1aWxlckl0ZW1EZXNjcmlwY2lvbi52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgZG9tLmFscXVpbGVySXRlbVByZWNpb0RpYS52YWx1ZSA9IGZvcm1hdEN1cnJlbmN5KDApOw0KICAgICAgICAgICAgZG9tLmFscXVpbGVySXRlbURpYXMudmFsdWUgPSAiIjsNCiAgICAgICAgICAgIGRvbS5hbHF1aWxlckNvbWJ1c3RpYmxlTGl0cm9zLnZhbHVlID0gIiI7DQogICAgICAgICAgICBkb20uYWxxdWlsZXJTdWJ0b3RhbE1hcXVpbmFyaWEudGV4dENvbnRlbnQgPSBmb3JtYXRDdXJyZW5jeSgwKTsNCiAgICAgICAgICAgIGRvbS5hbHF1aWxlclN1YnRvdGFsQ29tYnVzdGlibGUudGV4dENvbnRlbnQgPSBmb3JtYXRDdXJyZW5jeSgwKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTm8gcmVzZXRlYSBlbXByZXNhLCBhw7FvIG5pIHByZWNpbyBkZWwgY29tYnVzdGlibGUNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBnZXRMYXRlc3RBbHF1aWxlclllYXIgPSAoKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoc3RhdGUuYWxxdWlsZXJEYXRhKS5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpWzBdOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGdldEFscXVpbGVyRGF0YSA9IChlbXByZXNhLCBhbm8pID0+IHsNCiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5hbHF1aWxlckRhdGFbYW5vXT8uW2VtcHJlc2FdOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGNhbGN1bGF0ZUFscXVpbGVyVG90YWwgPSAoKSA9PiB7DQogICAgICAgICAgICAvLyBFc3RhIGZ1bmNpw7NuIGFob3JhIHNvbG8gYWN0dWFsaXphIGxvcyBzdWJ0b3RhbGVzIG1pZW50cmFzIHNlIGVzY3JpYmUNCiAgICAgICAgICAgIGNvbnN0IGl0ZW1QcmVjaW9EaWEgPSBwYXJzZUZsb2F0KGRvbS5hbHF1aWxlckl0ZW1QcmVjaW9EaWEudmFsdWUucmVwbGFjZSgvW14wLTksLV0rL2csICIiKS5yZXBsYWNlKCIsIiwgIi4iKSkgfHwgMDsgLy8gUGFyc2VhciBkZXNkZSBlbCBjYW1wbyByZWFkb25seQ0KICAgICAgICAgICAgY29uc3QgaXRlbURpYXMgPSBwYXJzZUZsb2F0KGRvbS5hbHF1aWxlckl0ZW1EaWFzLnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgY29uc3QgcHJlY2lvTGl0cm9Db21idXN0aWJsZSA9IHBhcnNlRmxvYXQoZG9tLmFscXVpbGVyQ29tYnVzdGlibGVQcmVjaW9MaXRyby52YWx1ZS5yZXBsYWNlKC9bXjAtOSwtXSsvZywgIiIpLnJlcGxhY2UoIiwiLCAiLiIpKSB8fCAwOw0KICAgICAgICAgICAgY29uc3QgbGl0cm9zQ29tYnVzdGlibGUgPSBwYXJzZUZsb2F0KGRvbS5hbHF1aWxlckNvbWJ1c3RpYmxlTGl0cm9zLnZhbHVlKSB8fCAwOw0KDQogICAgICAgICAgICBjb25zdCBzdWJ0b3RhbE1hcXVpbmFyaWEgPSBpdGVtUHJlY2lvRGlhICogaXRlbURpYXM7DQogICAgICAgICAgICBjb25zdCBzdWJ0b3RhbENvbWJ1c3RpYmxlID0gcHJlY2lvTGl0cm9Db21idXN0aWJsZSAqIGxpdHJvc0NvbWJ1c3RpYmxlOw0KDQogICAgICAgICAgICBkb20uYWxxdWlsZXJTdWJ0b3RhbE1hcXVpbmFyaWEudGV4dENvbnRlbnQgPSBmb3JtYXRDdXJyZW5jeShzdWJ0b3RhbE1hcXVpbmFyaWEpOw0KICAgICAgICAgICAgZG9tLmFscXVpbGVyU3VidG90YWxDb21idXN0aWJsZS50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHN1YnRvdGFsQ29tYnVzdGlibGUpOw0KICAgICAgICAgICAgLy8gTk8gYWN0dWFsaXphIGVsIHRvdGFsIGdlbmVyYWwsIHNvbG8gbG9zIHN1YnRvdGFsZXMNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW5kZXJBbHF1aWxlck1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgLy8gQ2FyZ2FyIGHDsW8geSBlbXByZXNhIGRlc2RlIGVsICpwcmltZXIqIGl0ZW0gc2kgZXhpc3RlLCBvIGRlZmF1bHQNCiAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGN1cnJlbnRBbHF1aWxlckRldGFsbGVzWzBdOw0KICAgICAgICAgICAgY29uc3QgYW5vcyA9IE9iamVjdC5rZXlzKHN0YXRlLmFscXVpbGVyRGF0YSkuc29ydCgoYSwgYikgPT4gYi5sb2NhbGVDb21wYXJlKGEpKTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQW5vID0gZmlyc3RJdGVtPy5hbm8gfHwgYW5vc1swXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLmFscXVpbGVyQW5vLmlubmVySFRNTCA9IGFub3MubWFwKGFubyA9PiANCiAgICAgICAgICAgICAgICBgPG9wdGlvbiB2YWx1ZT0iJHthbm99IiAke2FubyA9PT0gc2VsZWN0ZWRBbm8gPyAnc2VsZWN0ZWQnIDogJyd9PiR7YW5vfTwvb3B0aW9uPmANCiAgICAgICAgICAgICkuam9pbignJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGVtcHJlc2FzID0gT2JqZWN0LmtleXMoc3RhdGUuYWxxdWlsZXJEYXRhW3NlbGVjdGVkQW5vXSB8fCB7fSk7DQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZEVtcHJlc2EgPSBmaXJzdEl0ZW0/LmVtcHJlc2EgfHwgZW1wcmVzYXNbMF07DQoNCiAgICAgICAgICAgIGRvbS5hbHF1aWxlckVtcHJlc2EuaW5uZXJIVE1MID0gZW1wcmVzYXMubWFwKGVtcHJlc2EgPT4NCiAgICAgICAgICAgICAgICBgPG9wdGlvbiB2YWx1ZT0iJHtlbXByZXNhfSIgJHtlbXByZXNhID09PSBzZWxlY3RlZEVtcHJlc2EgPyAnc2VsZWN0ZWQnIDogJyd9PiR7ZW1wcmVzYX08L29wdGlvbj5gDQogICAgICAgICAgICApLmpvaW4oJycpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB1cGRhdGVBbHF1aWxlckl0ZW1zKHRydWUpOyAvLyB0cnVlID0gbm8gcmVzZXRlYXIgZm9ybQ0KICAgICAgICAgICAgcmVuZGVyQWxxdWlsZXJTdW1tYXJ5TGlzdCgpOyAvLyAqKioqIE5VRVZPOiBSZW5kZXJpemFyIGxpc3RhIGRlIGl0ZW1zIGV4aXN0ZW50ZXMgKioqKg0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgdXBkYXRlQWxxdWlsZXJJdGVtcyA9IChpc0luaXRpYWxMb2FkID0gZmFsc2UpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGFubyA9IGRvbS5hbHF1aWxlckFuby52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGVtcHJlc2EgPSBkb20uYWxxdWlsZXJFbXByZXNhLnZhbHVlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uYWxxdWlsZXJBbm9EaXNwbGF5LnRleHRDb250ZW50ID0gYW5vOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBkYXRhID0gZ2V0QWxxdWlsZXJEYXRhKGVtcHJlc2EsIGFubyk7DQogICAgICAgICAgICBpZiAoIWRhdGEpIHsNCiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkVycm9yIiwgYE5vIHNlIGVuY29udHJhcm9uIGRhdG9zIGRlIHByZWNpb3MgcGFyYSAke2VtcHJlc2F9IGVuICR7YW5vfS5gKTsNCiAgICAgICAgICAgICAgICBkb20uYWxxdWlsZXJJdGVtRGVzY3JpcGNpb24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2luIGRhdG9zIC0tPC9vcHRpb24+JzsNCiAgICAgICAgICAgICAgICBkb20uYWxxdWlsZXJDb21idXN0aWJsZVByZWNpb0xpdHJvLnZhbHVlID0gZm9ybWF0Q3VycmVuY3koMCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBSZWxsZW5hciBpdGVtcw0KICAgICAgICAgICAgZG9tLmFscXVpbGVySXRlbURlc2NyaXBjaW9uLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjY2lvbmUgdW4gaXRlbSAtLTwvb3B0aW9uPicgKyANCiAgICAgICAgICAgICAgICBkYXRhLml0ZW1zLm1hcChpdGVtID0+IA0KICAgICAgICAgICAgICAgICAgICBgPG9wdGlvbiB2YWx1ZT0iJHtlc2NhcGVIdG1sKGl0ZW0uZGVzY3JpcGNpb24pfSI+JHtlc2NhcGVIdG1sKGl0ZW0uZGVzY3JpcGNpb24pfTwvb3B0aW9uPmANCiAgICAgICAgICAgICAgICApLmpvaW4oJycpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBSZWxsZW5hciBwcmVjaW8gY29tYnVzdGlibGUNCiAgICAgICAgICAgIGRvbS5hbHF1aWxlckNvbWJ1c3RpYmxlUHJlY2lvTGl0cm8udmFsdWUgPSBmb3JtYXRDdXJyZW5jeShkYXRhLnByZWNpb0xpdHJvQ29tYnVzdGlibGUgfHwgMCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghaXNJbml0aWFsTG9hZCkgew0KICAgICAgICAgICAgICAgIHJlc2V0QWxxdWlsZXJGb3JtKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHVwZGF0ZUFscXVpbGVySXRlbVByZWNpbygpOyAvLyBFc3RvIHJlY2FsY3VsYXLDoQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHVwZGF0ZUFscXVpbGVySXRlbVByZWNpbyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBnZXRBbHF1aWxlckRhdGEoZG9tLmFscXVpbGVyRW1wcmVzYS52YWx1ZSwgZG9tLmFscXVpbGVyQW5vLnZhbHVlKTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRGVzY3JpcGNpb24gPSBkb20uYWxxdWlsZXJJdGVtRGVzY3JpcGNpb24udmFsdWU7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkYXRhPy5pdGVtcy5maW5kKGkgPT4gaS5kZXNjcmlwY2lvbiA9PT0gc2VsZWN0ZWREZXNjcmlwY2lvbik7DQogICAgICAgICAgICBjb25zdCBpdGVtUHJlY2lvRGlhID0gaXRlbSA/IGl0ZW0ucHJlY2lvIDogMDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLmFscXVpbGVySXRlbVByZWNpb0RpYS52YWx1ZSA9IGZvcm1hdEN1cnJlbmN5KGl0ZW1QcmVjaW9EaWEpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjYWxjdWxhdGVBbHF1aWxlclRvdGFsKCk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBvcGVuQWxxdWlsZXJNb2RhbCA9ICgpID0+IHsNCiAgICAgICAgICAgIC8vIEVsIGFycmF5IGN1cnJlbnRBbHF1aWxlckRldGFsbGVzIHlhIHNlIGNhcmfDsyBlbiBgb3BlblJlZ2lzdHJvTW9kYWxgDQogICAgICAgICAgICByZW5kZXJBbHF1aWxlck1vZGFsKCk7IC8vIEVzdG8gcmVuZGVyaXphIHNlbGVjdG9yZXMgWSBsYSBsaXN0YSBkZSByZXN1bWVuDQogICAgICAgICAgICByZXNldEFscXVpbGVyRm9ybSgpOyAvLyBMaW1waWEgZWwgZm9ybXVsYXJpbyBkZSBlbnRyYWRhDQogICAgICAgICAgICByZWNhbGN1bGF0ZUFscXVpbGVyTW9kYWxUb3RhbCgpOyAvLyBBc2VndXJhIHF1ZSBlbCB0b3RhbCBlc3TDqSBiaWVuDQogICAgICAgICAgICBkb20uYWxxdWlsZXJNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vICoqKiogTlVFVkE6IEhhbmRsZXIgcGFyYSAiQcOxYWRpciBJdGVtIiAqKioqDQogICAgICAgIGNvbnN0IGhhbmRsZUFkZEFscXVpbGVySXRlbSA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSBjYXB0dXJlQWxxdWlsZXJGb3JtKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghbmV3SXRlbS5pdGVtRGVzY3JpcGNpb24pIHsNCiAgICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJFcnJvciIsICJEZWJlIHNlbGVjY2lvbmFyIHVuYSBkZXNjcmlwY2nDs24gZGUgaXRlbS4iKTsNCiAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG5ld0l0ZW0udG90YWwgPD0gMCkgew0KICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXJyb3IiLCAiTm8gc2UgcHVlZGUgYcOxYWRpciB1biBpdGVtIGNvbiBjb3N0ZSAwLjAwIOKCrC4gQXNlZ8O6cmVzZSBkZSByZWxsZW5hciBsb3MgZMOtYXMgbyBsaXRyb3MuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjdXJyZW50QWxxdWlsZXJEZXRhbGxlcy5wdXNoKG5ld0l0ZW0pOw0KICAgICAgICAgICAgcmVuZGVyQWxxdWlsZXJTdW1tYXJ5TGlzdCgpOyAvLyBSZS1yZW5kZXJpemEgbGEgbGlzdGEgeSBhY3R1YWxpemEgZWwgdG90YWwNCiAgICAgICAgICAgIHJlc2V0QWxxdWlsZXJGb3JtKCk7IC8vIExpbXBpYSBlbCBmb3JtIHBhcmEgZWwgc2lndWllbnRlIGl0ZW0NCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vICoqKiogTlVFVkE6IEhhbmRsZXIgcGFyYSAiSGVjaG8iICoqKioNCiAgICAgICAgY29uc3QgaGFuZGxlQ2xvc2VBbHF1aWxlck1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgZmluYWxUb3RhbCA9IHJlY2FsY3VsYXRlQWxxdWlsZXJNb2RhbFRvdGFsKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgaW5wdXQgZGlzcGxheSBkZWwgZm9ybXVsYXJpbyBwcmluY2lwYWwNCiAgICAgICAgICAgIGRvbS5ncnVwb3NTb2xUb3RhbElucHV0LnZhbHVlID0gZmluYWxUb3RhbCA+IDAgPyBmaW5hbFRvdGFsLnRvRml4ZWQoMikgOiAnJzsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY2xvc2VNb2RhbChkb20uYWxxdWlsZXJNb2RhbCk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3Qgb3BlblVwZGF0ZVByZWNpb3NNb2RhbCA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGFub0Jhc2UgPSBkb20uYWxxdWlsZXJBbm8udmFsdWU7DQogICAgICAgICAgICBjb25zdCBlbXByZXNhID0gZG9tLmFscXVpbGVyRW1wcmVzYS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFCYXNlID0gZ2V0QWxxdWlsZXJEYXRhKGVtcHJlc2EsIGFub0Jhc2UpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIWRhdGFCYXNlKSByZXR1cm47DQoNCiAgICAgICAgICAgIGRvbS51cGRhdGVQcmVjaW9zRW1wcmVzYS52YWx1ZSA9IGVtcHJlc2E7DQogICAgICAgICAgICBkb20udXBkYXRlUHJlY2lvc0Fub0Jhc2UudmFsdWUgPSBhbm9CYXNlOw0KICAgICAgICAgICAgZG9tLnVwZGF0ZVByZWNpb3NOdWV2b0Fuby52YWx1ZSA9IGFub0Jhc2U7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS51cGRhdGVQcmVjaW9zSXRlbXNMaXN0LmlubmVySFRNTCA9IGRhdGFCYXNlLml0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IGANCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC14LTQgaXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS03MDAgdHJ1bmNhdGUiIHRpdGxlPSIke2VzY2FwZUh0bWwoaXRlbS5kZXNjcmlwY2lvbil9Ij4ke2VzY2FwZUh0bWwoaXRlbS5kZXNjcmlwY2lvbil9PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgbWluPSIwIiBzdGVwPSIwLjAxIiBkYXRhLWluZGV4PSIke2luZGV4fSIgY2xhc3M9InByZWNpby1pdGVtLXVwZGF0ZSBtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiIHZhbHVlPSIke2l0ZW0ucHJlY2lvfSI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICBgKS5qb2luKCcnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLnVwZGF0ZVByZWNpb3NDb21idXN0aWJsZUxpdHJvLnZhbHVlID0gZGF0YUJhc2UucHJlY2lvTGl0cm9Db21idXN0aWJsZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLnVwZGF0ZVByZWNpb3NNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgaGFuZGxlU2F2ZU51ZXZvc1ByZWNpb3MgPSBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBlbXByZXNhID0gZG9tLnVwZGF0ZVByZWNpb3NFbXByZXNhLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgYW5vQmFzZSA9IGRvbS51cGRhdGVQcmVjaW9zQW5vQmFzZS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG51ZXZvQW5vID0gZG9tLnVwZGF0ZVByZWNpb3NOdWV2b0Fuby52YWx1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFudWV2b0FubyB8fCBwYXJzZUludChudWV2b0FubykgPCAyMDIwKSB7DQogICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJFcnJvciIsIGBFbCBudWV2byBhw7FvIG5vIGVzIHbDoWxpZG8uYCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBkYXRhRXhpc3RzID0gc3RhdGUuYWxxdWlsZXJEYXRhW251ZXZvQW5vXSAmJiBzdGF0ZS5hbHF1aWxlckRhdGFbbnVldm9Bbm9dW2VtcHJlc2FdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoZGF0YUV4aXN0cykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dDdXN0b21Db25maXJtKA0KICAgICAgICAgICAgICAgICAgICAiQ29uZmlybWFyIFNvYnJlc2NyaXR1cmEiLA0KICAgICAgICAgICAgICAgICAgICBgWWEgZXhpc3RlbiBkYXRvcyBkZSBwcmVjaW9zIHBhcmEgJHtlbXByZXNhfSBlbiBlbCBhw7FvICR7bnVldm9Bbm99LlxuXG7Cv0Rlc2VhIHNvYnJlc2NyaWJpcmxvcyBjb24gZXN0YSBudWV2YSBpbmZvcm1hY2nDs24/YA0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBVc2VyIGNhbmNlbGxlZA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGF0YUJhc2UgPSBnZXRBbHF1aWxlckRhdGEoZW1wcmVzYSwgYW5vQmFzZSk7DQogICAgICAgICAgICBjb25zdCBudWV2b3NQcmVjaW9zRGF0YSA9IHsNCiAgICAgICAgICAgICAgICBwcmVjaW9MaXRyb0NvbWJ1c3RpYmxlOiBwYXJzZUZsb2F0KGRvbS51cGRhdGVQcmVjaW9zQ29tYnVzdGlibGVMaXRyby52YWx1ZSkgfHwgMCwNCiAgICAgICAgICAgICAgICBpdGVtczogW10NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IGRvbS51cGRhdGVQcmVjaW9zSXRlbXNMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVjaW8taXRlbS11cGRhdGUnKTsNCiAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGlucHV0LmRhdGFzZXQuaW5kZXgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXBjaW9uID0gZGF0YUJhc2UuaXRlbXNbaW5kZXhdLmRlc2NyaXBjaW9uOw0KICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvUHJlY2lvID0gcGFyc2VGbG9hdChpbnB1dC52YWx1ZSkgfHwgMDsNCiAgICAgICAgICAgICAgICBudWV2b3NQcmVjaW9zRGF0YS5pdGVtcy5wdXNoKHsgZGVzY3JpcGNpb24sIHByZWNpbzogbnVldm9QcmVjaW8gfSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gR3VhcmRhciBlbiBlbCBlc3RhZG8NCiAgICAgICAgICAgIGlmICghc3RhdGUuYWxxdWlsZXJEYXRhW251ZXZvQW5vXSkgew0KICAgICAgICAgICAgICAgIHN0YXRlLmFscXVpbGVyRGF0YVtudWV2b0Fub10gPSB7fTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN0YXRlLmFscXVpbGVyRGF0YVtudWV2b0Fub11bZW1wcmVzYV0gPSBudWV2b3NQcmVjaW9zRGF0YTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICBjbG9zZU1vZGFsKGRvbS51cGRhdGVQcmVjaW9zTW9kYWwpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBY3R1YWxpemFyIHkgcmVmcmVzY2FyIGVsIG1vZGFsIGRlIGFscXVpbGVyDQogICAgICAgICAgICAvLyBjdXJyZW50QWxxdWlsZXJEZXRhbGxlLmFubyA9IG51ZXZvQW5vOyAvLyBBcHVudGFyIGFsIG51ZXZvIGHDsW8NCiAgICAgICAgICAgIHJlbmRlckFscXVpbGVyTW9kYWwoKTsNCiAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiw4l4aXRvIiwgYFNlIGhhbiAke2RhdGFFeGlzdHMgPyAnYWN0dWFsaXphZG8nIDogJ2d1YXJkYWRvJ30gbG9zIHByZWNpb3MgcGFyYSAke2VtcHJlc2F9IHBhcmEgZWwgYcOxbyAke251ZXZvQW5vfS5gKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAtLS0gKioqKiBGVU5DSU9ORVMgUEFSQSBHRVNUScOTTiBERSBHUsOaQS9DQU1Jw5NOIChNT0RJRklDQURBUyBZIE5VRVZBUykgKioqKiAtLS0NCg0KICAgICAgICAvLyAqKioqIE5VRVZBOiBSZW5kZXJpemEgbGEgbGlzdGEgZGUgaXRlbXMgYcOxYWRpZG9zIGVuIGVsIG1vZGFsICoqKioNCiAgICAgICAgY29uc3QgcmVuZGVyR3J1YVN1bW1hcnlMaXN0ID0gKCkgPT4gew0KICAgICAgICAgICAgaWYgKGN1cnJlbnRHcnVhQ2FtaW9uRGV0YWxsZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgZG9tLmdydWFTdW1tYXJ5TGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTUwMCBpdGFsaWMiPk5vIHNlIGhhbiBhw7FhZGlkbyBpdGVtcy48L3A+JzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZG9tLmdydWFTdW1tYXJ5TGlzdC5pbm5lckhUTUwgPSBjdXJyZW50R3J1YUNhbWlvbkRldGFsbGVzLm1hcCgoaXRlbSwgaW5kZXgpID0+IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMiBiZy1ncmF5LTEwMCByb3VuZGVkLWxnIHRleHQtc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRydW5jYXRlIiB0aXRsZT0iJHtlc2NhcGVIdG1sKGl0ZW0uaXRlbURlc2NyaXBjaW9uIHx8ICdOL0EnKX0iPiR7aW5kZXggKyAxfS4gJHtlc2NhcGVIdG1sKGl0ZW0uaXRlbURlc2NyaXBjaW9uIHx8ICdOL0EnKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZmxleC1zaHJpbmstMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCBtbC0yIj4ke2Zvcm1hdEN1cnJlbmN5KGl0ZW0udG90YWwpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRlbGV0ZS1ncnVhLWl0ZW0tYnRuIHRleHQtcmVkLTUwMCBob3Zlcjp0ZXh0LXJlZC03MDAgbWwtMiBwLTEiIGRhdGEtaW5kZXg9IiR7aW5kZXh9IiB0aXRsZT0iRWxpbWluYXIgaXRlbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC00IHctNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xOSA3bC0uODY3IDEyLjE0MkEyIDIgMCAwMTE2LjEzOCAyMUg3Ljg2MmEyIDIgMCAwMS0xLjk5NS0xLjg1OEw1IDdtNSA0djZtNC02djZtMS0xMFY0YTEgMSAwIDAwLTEtMWgtNGExIDEgMCAwMC0xIDF2M000IDdoMTYiIC8+PC9zdmc+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYCkuam9pbignJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQcOxYWRpciBsaXN0ZW5lcnMgYSBsb3MgYm90b25lcyBkZSBlbGltaW5hcg0KICAgICAgICAgICAgICAgIGRvbS5ncnVhU3VtbWFyeUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmRlbGV0ZS1ncnVhLWl0ZW0tYnRuJykuZm9yRWFjaChidG4gPT4gew0KICAgICAgICAgICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlR3J1YUl0ZW0ocGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXgpKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZWNhbGN1bGF0ZUdydWFNb2RhbFRvdGFsKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gKioqKiBOVUVWQTogRWxpbWluYSB1biBpdGVtIGRlIGxhIGxpc3RhIHRlbXBvcmFsICoqKioNCiAgICAgICAgY29uc3QgaGFuZGxlRGVsZXRlR3J1YUl0ZW0gPSAoaW5kZXgpID0+IHsNCiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgY3VycmVudEdydWFDYW1pb25EZXRhbGxlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBjdXJyZW50R3J1YUNhbWlvbkRldGFsbGVzLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgICAgICAgICAgcmVuZGVyR3J1YVN1bW1hcnlMaXN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyAqKioqIE5VRVZBOiBSZWNhbGN1bGEgZWwgdG90YWwgZGVsICptb2RhbCogZGVzZGUgZWwgYXJyYXkgKioqKg0KICAgICAgICBjb25zdCByZWNhbGN1bGF0ZUdydWFNb2RhbFRvdGFsID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdG90YWwgPSBjdXJyZW50R3J1YUNhbWlvbkRldGFsbGVzLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS50b3RhbCB8fCAwKSwgMCk7DQogICAgICAgICAgICBkb20uZ3J1YVRvdGFsLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3kodG90YWwpOw0KICAgICAgICAgICAgcmV0dXJuIHRvdGFsOw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vICoqKiogTlVFVkE6IFJlc2V0ZWEgZWwgZm9ybXVsYXJpbyBkZSBhw7FhZGlyIGl0ZW0gZGUgZ3LDumEgKioqKg0KICAgICAgICBjb25zdCByZXNldEdydWFGb3JtID0gKCkgPT4gew0KICAgICAgICAgICAgZG9tLmdydWFJdGVtRGVzY3JpcGNpb24udmFsdWUgPSAiIjsNCiAgICAgICAgICAgIGRvbS5ncnVhSXRlbUhvcmFzLnZhbHVlID0gIiI7DQogICAgICAgICAgICBkb20uZ3J1YUl0ZW1SZWNhcmdvLmNoZWNrZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIGRvbS5ncnVhRGlzcGxheVByZWNpby52YWx1ZSA9IGZvcm1hdEN1cnJlbmN5KDApOw0KICAgICAgICAgICAgZG9tLmdydWFEaXNwbGF5U2FsaWRhLnZhbHVlID0gZm9ybWF0Q3VycmVuY3koMCk7DQogICAgICAgICAgICBkb20uZ3J1YURpc3BsYXlNaW5pbW8udmFsdWUgPSAiMGgiOw0KICAgICAgICAgICAgZG9tLmdydWFEaXNwbGF5SG9yYXNDb2JyYXIudmFsdWUgPSAiMGgiOw0KICAgICAgICAgICAgLy8gTm8gcmVzZXRlYSBlbXByZXNhIG5pIGHDsW8NCiAgICAgICAgfTsNCg0KICAgICAgICAvKioNCiAgICAgICAgICogKioqKiBNT0RJRklDQURBOiBDYXB0dXJhIGVsIGVzdGFkbyBkZWwgZm9ybSB5IGRldnVlbHZlIHVuIG9iamV0byAqKioqDQogICAgICAgICAqLw0KICAgICAgICBjb25zdCBjYXB0dXJlR3J1YUZvcm0gPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBhbm8gPSBkb20uZ3J1YUFuby52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGVtcHJlc2EgPSBkb20uZ3J1YUVtcHJlc2EudmFsdWU7DQogICAgICAgICAgICBjb25zdCBpdGVtcyA9IHN0YXRlLmdydWFEYXRhW2Fub10/LltlbXByZXNhXT8uaXRlbXM7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVkSXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9HUlVBQ0FNSU9OX0lURU0pKTsNCiAgICAgICAgICAgIGNhcHR1cmVkSXRlbS5hbm8gPSBhbm87DQogICAgICAgICAgICBjYXB0dXJlZEl0ZW0uZW1wcmVzYSA9IGVtcHJlc2E7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghaXRlbXMpIHsNCiAgICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJFcnJvciIsIGBObyBzZSBlbmN1ZW50cmFuIHByZWNpb3MgZGUgZ3LDumEgcGFyYSAke2VtcHJlc2F9IGVuICR7YW5vfS5gKTsNCiAgICAgICAgICAgICAgICAgcmV0dXJuIGNhcHR1cmVkSXRlbTsgLy8gRGV2dWVsdmUgaXRlbSB2YWPDrW8gY29uIHRvdGFsIDANCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWREZXNjcmlwY2lvbiA9IGRvbS5ncnVhSXRlbURlc2NyaXBjaW9uLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zLmZpbmQoaSA9PiBpLmRlc2NyaXB0aW9uID09PSBzZWxlY3RlZERlc2NyaXBjaW9uKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFpdGVtKSB7DQogICAgICAgICAgICAgICAgLy8gU2kgbm8gaGF5IGl0ZW0sIHJlc2V0ZWFyIHRvZG8NCiAgICAgICAgICAgICAgICBjYXB0dXJlZEl0ZW0uaXRlbURlc2NyaXBjaW9uID0gbnVsbDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gSGF5IHVuIGl0ZW0sIGNhbGN1bGFyDQogICAgICAgICAgICAgICAgY2FwdHVyZWRJdGVtLml0ZW1EZXNjcmlwY2lvbiA9IHNlbGVjdGVkRGVzY3JpcGNpb247DQogICAgICAgICAgICAgICAgY2FwdHVyZWRJdGVtLml0ZW1Ib3JhcyA9IHBhcnNlRmxvYXQoZG9tLmdydWFJdGVtSG9yYXMudmFsdWUpIHx8IDA7DQogICAgICAgICAgICAgICAgY2FwdHVyZWRJdGVtLmNvblJlY2FyZ28gPSBkb20uZ3J1YUl0ZW1SZWNhcmdvLmNoZWNrZWQ7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbGV0IHByZWNpb1BvckhvcmFCYXNlID0gaXRlbS5ob3JhOw0KICAgICAgICAgICAgICAgIGxldCBzZXJ2aWNpb01pbmltbyA9IGl0ZW0uc2Vydk1pbmltbzsNCg0KICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlZEl0ZW0uY29uUmVjYXJnbykgew0KICAgICAgICAgICAgICAgICAgICBwcmVjaW9Qb3JIb3JhQmFzZSArPSBpdGVtLnJlY2FyZ29Ib3JhOw0KICAgICAgICAgICAgICAgICAgICBzZXJ2aWNpb01pbmltbyA9IGl0ZW0ucmVjTWluSG9yYTsgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGxldCBob3Jhc0FDb2JyYXIgPSBjYXB0dXJlZEl0ZW0uaXRlbUhvcmFzOw0KICAgICAgICAgICAgICAgIGlmIChob3Jhc0FDb2JyYXIgPiAwICYmIGhvcmFzQUNvYnJhciA8IHNlcnZpY2lvTWluaW1vKSB7DQogICAgICAgICAgICAgICAgICAgIGhvcmFzQUNvYnJhciA9IHNlcnZpY2lvTWluaW1vOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBjb3N0b0hvcmFzID0gcHJlY2lvUG9ySG9yYUJhc2UgKiBob3Jhc0FDb2JyYXI7DQogICAgICAgICAgICAgICAgY29uc3QgY29zdG9Ub3RhbCA9IGNvc3RvSG9yYXMgKyBpdGVtLnNhbGlkYTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjYXB0dXJlZEl0ZW0uY29zdGVTYWxpZGEgPSBpdGVtLnNhbGlkYTsNCiAgICAgICAgICAgICAgICBjYXB0dXJlZEl0ZW0ucHJlY2lvSG9yYVVzYWRvID0gcHJlY2lvUG9ySG9yYUJhc2U7DQogICAgICAgICAgICAgICAgY2FwdHVyZWRJdGVtLmhvcmFzQUNvYnJhciA9IGhvcmFzQUNvYnJhcjsNCiAgICAgICAgICAgICAgICBjYXB0dXJlZEl0ZW0uc2VydmljaW9NaW5pbW9Vc2FkbyA9IHNlcnZpY2lvTWluaW1vOw0KICAgICAgICAgICAgICAgIGNhcHR1cmVkSXRlbS50b3RhbCA9IGNvc3RvVG90YWw7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgVUkgZGVsIG1vZGFsIGRlIGdyw7phIChsb3MgY2FtcG9zIGRpc3BsYXkpDQogICAgICAgICAgICBkb20uZ3J1YURpc3BsYXlQcmVjaW8udmFsdWUgPSBmb3JtYXRDdXJyZW5jeShjYXB0dXJlZEl0ZW0ucHJlY2lvSG9yYVVzYWRvKTsNCiAgICAgICAgICAgIGRvbS5ncnVhRGlzcGxheVNhbGlkYS52YWx1ZSA9IGZvcm1hdEN1cnJlbmN5KGNhcHR1cmVkSXRlbS5jb3N0ZVNhbGlkYSk7DQogICAgICAgICAgICBkb20uZ3J1YURpc3BsYXlNaW5pbW8udmFsdWUgPSBgJHtjYXB0dXJlZEl0ZW0uc2VydmljaW9NaW5pbW9Vc2Fkb31oYDsNCiAgICAgICAgICAgIGRvbS5ncnVhRGlzcGxheUhvcmFzQ29icmFyLnZhbHVlID0gYCR7Y2FwdHVyZWRJdGVtLmhvcmFzQUNvYnJhcn1oYDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIGNhcHR1cmVkSXRlbTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vICoqKiogTlVFVkE6IEZ1bmNpw7NuIHdyYXBwZXIgcXVlIHNvbG8gYWN0dWFsaXphIGxvcyBkaXNwbGF5cyAqKioqDQogICAgICAgIGNvbnN0IGNhbGN1bGF0ZUdydWFUb3RhbCA9ICgpID0+IHsNCiAgICAgICAgICAgIGNhcHR1cmVHcnVhRm9ybSgpOyAvLyBFc3RhIGZ1bmNpw7NuIHlhIGFjdHVhbGl6YSBsb3MgZGlzcGxheXMNCiAgICAgICAgfTsNCg0KICAgICAgICAvKioNCiAgICAgICAgICogUmVsbGVuYSBlbCBtb2RhbCBkZSBncsO6YSBjb24gbG9zIGRhdG9zIGFjdHVhbGVzLg0KICAgICAgICAgKi8NCiAgICAgICAgY29uc3QgcmVuZGVyR3J1YU1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgLy8gQ2FyZ2FyIGHDsW8geSBlbXByZXNhIGRlc2RlIGVsICpwcmltZXIqIGl0ZW0gc2kgZXhpc3RlLCBvIGRlZmF1bHQNCiAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGN1cnJlbnRHcnVhQ2FtaW9uRGV0YWxsZXNbMF07DQogICAgICAgICAgICBjb25zdCBhbm9zID0gT2JqZWN0LmtleXMoc3RhdGUuZ3J1YURhdGEpLnNvcnQoKGEsIGIpID0+IGIubG9jYWxlQ29tcGFyZShhKSk7DQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZEFubyA9IGZpcnN0SXRlbT8uYW5vIHx8IGFub3NbMF07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5ncnVhQW5vLmlubmVySFRNTCA9IGFub3MubWFwKGFubyA9PiANCiAgICAgICAgICAgICAgICBgPG9wdGlvbiB2YWx1ZT0iJHthbm99IiAke2FubyA9PT0gc2VsZWN0ZWRBbm8gPyAnc2VsZWN0ZWQnIDogJyd9PiR7YW5vfTwvb3B0aW9uPmANCiAgICAgICAgICAgICkuam9pbignJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGVtcHJlc2FzID0gT2JqZWN0LmtleXMoc3RhdGUuZ3J1YURhdGFbc2VsZWN0ZWRBbm9dIHx8IHt9KTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRW1wcmVzYSA9IGZpcnN0SXRlbT8uZW1wcmVzYSB8fCBlbXByZXNhc1swXTsNCg0KICAgICAgICAgICAgZG9tLmdydWFFbXByZXNhLmlubmVySFRNTCA9IGVtcHJlc2FzLm1hcChlbXByZXNhID0+DQogICAgICAgICAgICAgICAgYDxvcHRpb24gdmFsdWU9IiR7ZW1wcmVzYX0iICR7ZW1wcmVzYSA9PT0gc2VsZWN0ZWRFbXByZXNhID8gJ3NlbGVjdGVkJyA6ICcnfT4ke2VtcHJlc2F9PC9vcHRpb24+YA0KICAgICAgICAgICAgKS5qb2luKCcnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdXBkYXRlR3J1YUl0ZW1zKHRydWUpOyAvLyB0cnVlID0gbm8gcmVzZXRlYXIgZm9ybQ0KICAgICAgICAgICAgcmVuZGVyR3J1YVN1bW1hcnlMaXN0KCk7IC8vICoqKiogTlVFVk86IFJlbmRlcml6YXIgbGlzdGEgZGUgaXRlbXMgZXhpc3RlbnRlcyAqKioqDQogICAgICAgIH07DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqICoqKiogTlVFVkEgRlVOQ0nDk046IEFjdHVhbGl6YSBsYSBsaXN0YSBkZSBpdGVtcyBkZSBncsO6YSBzZWfDum4gYcOxby9lbXByZXNhICoqKioNCiAgICAgICAgICovDQogICAgICAgIGNvbnN0IHVwZGF0ZUdydWFJdGVtcyA9IChpc0luaXRpYWxMb2FkID0gZmFsc2UpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGFubyA9IGRvbS5ncnVhQW5vLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZW1wcmVzYSA9IGRvbS5ncnVhRW1wcmVzYS52YWx1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHN0YXRlLmdydWFEYXRhW2Fub10/LltlbXByZXNhXTsNCiAgICAgICAgICAgIGlmICghZGF0YSkgew0KICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXJyb3IiLCBgTm8gc2UgZW5jb250cmFyb24gZGF0b3MgZGUgcHJlY2lvcyBwYXJhICR7ZW1wcmVzYX0gZW4gJHthbm99LmApOw0KICAgICAgICAgICAgICAgIGRvbS5ncnVhSXRlbURlc2NyaXBjaW9uLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNpbiBkYXRvcyAtLTwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBSZWxsZW5hciBpdGVtcw0KICAgICAgICAgICAgZG9tLmdydWFJdGVtRGVzY3JpcGNpb24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWNjaW9uZSB1biBpdGVtIC0tPC9vcHRpb24+JyArIA0KICAgICAgICAgICAgICAgIGRhdGEuaXRlbXMubWFwKGl0ZW0gPT4gDQogICAgICAgICAgICAgICAgICAgIGA8b3B0aW9uIHZhbHVlPSIke2VzY2FwZUh0bWwoaXRlbS5kZXNjcmlwdGlvbil9Ij4ke2VzY2FwZUh0bWwoaXRlbS5kZXNjcmlwdGlvbil9PC9vcHRpb24+YA0KICAgICAgICAgICAgICAgICkuam9pbignJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghaXNJbml0aWFsTG9hZCkgew0KICAgICAgICAgICAgICAgIHJlc2V0R3J1YUZvcm0oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2FsY3VsYXIgeSByZWxsZW5hciBjYW1wb3MgZGlzcGxheQ0KICAgICAgICAgICAgY2FsY3VsYXRlR3J1YVRvdGFsKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEFicmUgZWwgbW9kYWwgZGUgZ2VzdGnDs24gZGUgR3LDumEvQ2FtacOzbi4NCiAgICAgICAgICovDQogICAgICAgIGNvbnN0IG9wZW5HcnVhTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICAvLyBFbCBhcnJheSBjdXJyZW50R3J1YUNhbWlvbkRldGFsbGVzIHlhIHNlIGNhcmfDsyBlbiBgb3BlblJlZ2lzdHJvTW9kYWxgDQogICAgICAgICAgICByZW5kZXJHcnVhTW9kYWwoKTsgLy8gRXN0byByZW5kZXJpemEgc2VsZWN0b3JlcyBZIGxhIGxpc3RhIGRlIHJlc3VtZW4NCiAgICAgICAgICAgIHJlc2V0R3J1YUZvcm0oKTsgLy8gTGltcGlhIGVsIGZvcm11bGFyaW8gZGUgZW50cmFkYQ0KICAgICAgICAgICAgcmVjYWxjdWxhdGVHcnVhTW9kYWxUb3RhbCgpOyAvLyBBc2VndXJhIHF1ZSBlbCB0b3RhbCBlc3TDqSBiaWVuDQogICAgICAgICAgICBkb20uZ3J1YU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gKioqKiBOVUVWQTogSGFuZGxlciBwYXJhICJBw7FhZGlyIEl0ZW0iICoqKioNCiAgICAgICAgY29uc3QgaGFuZGxlQWRkR3J1YUl0ZW0gPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gY2FwdHVyZUdydWFGb3JtKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghbmV3SXRlbS5pdGVtRGVzY3JpcGNpb24pIHsNCiAgICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJFcnJvciIsICJEZWJlIHNlbGVjY2lvbmFyIHVuYSBkZXNjcmlwY2nDs24gZGUgaXRlbS4iKTsNCiAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG5ld0l0ZW0udG90YWwgPD0gMCkgew0KICAgICAgICAgICAgICAgIHNob3dDdXN0b21BbGVydCgiRXJyb3IiLCAiTm8gc2UgcHVlZGUgYcOxYWRpciB1biBpdGVtIGNvbiBjb3N0ZSAwLjAwIOKCrC4gQXNlZ8O6cmVzZSBkZSByZWxsZW5hciBsYXMgaG9yYXMuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjdXJyZW50R3J1YUNhbWlvbkRldGFsbGVzLnB1c2gobmV3SXRlbSk7DQogICAgICAgICAgICByZW5kZXJHcnVhU3VtbWFyeUxpc3QoKTsgLy8gUmUtcmVuZGVyaXphIGxhIGxpc3RhIHkgYWN0dWFsaXphIGVsIHRvdGFsDQogICAgICAgICAgICByZXNldEdydWFGb3JtKCk7IC8vIExpbXBpYSBlbCBmb3JtIHBhcmEgZWwgc2lndWllbnRlIGl0ZW0NCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vICoqKiogTlVFVkE6IEhhbmRsZXIgcGFyYSAiSGVjaG8iICoqKioNCiAgICAgICAgY29uc3QgaGFuZGxlQ2xvc2VHcnVhTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBmaW5hbFRvdGFsID0gcmVjYWxjdWxhdGVHcnVhTW9kYWxUb3RhbCgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGlucHV0IGRpc3BsYXkgZGVsIGZvcm11bGFyaW8gcHJpbmNpcGFsDQogICAgICAgICAgICBkb20uZ3J1YUNhbWlvblRvdGFsSW5wdXQudmFsdWUgPSBmaW5hbFRvdGFsID4gMCA/IGZpbmFsVG90YWwudG9GaXhlZCgyKSA6ICcnOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjbG9zZU1vZGFsKGRvbS5ncnVhTW9kYWwpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgLyoqDQogICAgICAgICAqICoqKiogTlVFVkEgRlVOQ0nDk046IEFicmUgZWwgbW9kYWwgcGFyYSBhY3R1YWxpemFyIHByZWNpb3MgZGUgZ3LDumEgKioqKg0KICAgICAgICAgKi8NCiAgICAgICAgY29uc3Qgb3BlblVwZGF0ZVByZWNpb3NHcnVhTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBhbm9CYXNlID0gZG9tLmdydWFBbm8udmFsdWU7DQogICAgICAgICAgICBjb25zdCBlbXByZXNhID0gZG9tLmdydWFFbXByZXNhLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZGF0YUJhc2UgPSBzdGF0ZS5ncnVhRGF0YVthbm9CYXNlXT8uW2VtcHJlc2FdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIWRhdGFCYXNlKSByZXR1cm47DQoNCiAgICAgICAgICAgIGRvbS51cGRhdGVQcmVjaW9zR3J1YUVtcHJlc2EudmFsdWUgPSBlbXByZXNhOw0KICAgICAgICAgICAgZG9tLnVwZGF0ZVByZWNpb3NHcnVhQW5vQmFzZS52YWx1ZSA9IGFub0Jhc2U7DQogICAgICAgICAgICBkb20udXBkYXRlUHJlY2lvc0dydWFOdWV2b0Fuby52YWx1ZSA9IGFub0Jhc2U7IC8vIERlZmF1bHQgYWwgbWlzbW8gYcOxbyBwYXJhIGVkaXRhcg0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20udXBkYXRlUHJlY2lvc0dydWFJdGVtc0xpc3QuaW5uZXJIVE1MID0gZGF0YUJhc2UuaXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gYA0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXIgcm91bmRlZC1sZyBiZy1ncmF5LTUwLzUwIiBkYXRhLWRlc2NyaXB0aW9uPSIke2VzY2FwZUh0bWwoaXRlbS5kZXNjcmlwdGlvbil9Ij4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwIHRydW5jYXRlIiB0aXRsZT0iJHtlc2NhcGVIdG1sKGl0ZW0uZGVzY3JpcHRpb24pfSI+JHtlc2NhcGVIdG1sKGl0ZW0uZGVzY3JpcHRpb24pfTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTIgbWQ6Z3JpZC1jb2xzLTMgbGc6Z3JpZC1jb2xzLTUgZ2FwLTMgbXQtMyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNjAwIj5QcmVjaW8vSG9yYTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgbWluPSIwIiBzdGVwPSIwLjAxIiBkYXRhLWZpZWxkPSJob3JhIiBjbGFzcz0icHJlY2lvLWl0ZW0tdXBkYXRlLWdydWEgbXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIiB2YWx1ZT0iJHtpdGVtLmhvcmF9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTYwMCI+Q29zdGUgU2FsaWRhPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjAiIHN0ZXA9IjAuMDEiIGRhdGEtZmllbGQ9InNhbGlkYSIgY2xhc3M9InByZWNpby1pdGVtLXVwZGF0ZS1ncnVhIG10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSIgdmFsdWU9IiR7aXRlbS5zYWxpZGF9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTYwMCI+U2Vydi4gTcOtbmltbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgbWluPSIwIiBzdGVwPSIwLjUiIGRhdGEtZmllbGQ9InNlcnZNaW5pbW8iIGNsYXNzPSJwcmVjaW8taXRlbS11cGRhdGUtZ3J1YSBtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20iIHZhbHVlPSIke2l0ZW0uc2Vydk1pbmltb30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNjAwIj5SZWNhcmdvL0hvcmE8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIG1pbj0iMCIgc3RlcD0iMC4wMSIgZGF0YS1maWVsZD0icmVjYXJnb0hvcmEiIGNsYXNzPSJwcmVjaW8taXRlbS11cGRhdGUtZ3J1YSBtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20iIHZhbHVlPSIke2l0ZW0ucmVjYXJnb0hvcmF9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTYwMCI+TcOtbi4gUmVjYXJnbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgbWluPSIwIiBzdGVwPSIwLjUiIGRhdGEtZmllbGQ9InJlY01pbkhvcmEiIGNsYXNzPSJwcmVjaW8taXRlbS11cGRhdGUtZ3J1YSBtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20iIHZhbHVlPSIke2l0ZW0ucmVjTWluSG9yYX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgYCkuam9pbignJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS51cGRhdGVQcmVjaW9zR3J1YU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqICoqKiogTlVFVkEgRlVOQ0nDk046IEd1YXJkYSBsb3MgbnVldm9zIHByZWNpb3MgZGUgZ3LDumEgZW4gZWwgZXN0YWRvICoqKioNCiAgICAgICAgICovDQogICAgICAgIGNvbnN0IGhhbmRsZVNhdmVOdWV2b3NQcmVjaW9zR3J1YSA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGVtcHJlc2EgPSBkb20udXBkYXRlUHJlY2lvc0dydWFFbXByZXNhLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgbnVldm9Bbm8gPSBkb20udXBkYXRlUHJlY2lvc0dydWFOdWV2b0Fuby52YWx1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFudWV2b0FubyB8fCBwYXJzZUludChudWV2b0FubykgPCAyMDIwKSB7DQogICAgICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCJFcnJvciIsIGBFbCBudWV2byBhw7FvIG5vIGVzIHbDoWxpZG8uYCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBkYXRhRXhpc3RzID0gc3RhdGUuZ3J1YURhdGFbbnVldm9Bbm9dICYmIHN0YXRlLmdydWFEYXRhW251ZXZvQW5vXVtlbXByZXNhXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGRhdGFFeGlzdHMpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCBzaG93Q3VzdG9tQ29uZmlybSgNCiAgICAgICAgICAgICAgICAgICAgIkNvbmZpcm1hciBTb2JyZXNjcml0dXJhIiwNCiAgICAgICAgICAgICAgICAgICAgYFlhIGV4aXN0ZW4gZGF0b3MgZGUgcHJlY2lvcyBwYXJhICR7ZW1wcmVzYX0gZW4gZWwgYcOxbyAke251ZXZvQW5vfS5cblxuwr9EZXNlYSBzb2JyZXNjcmliaXJsb3MgY29uIGVzdGEgbnVldmEgaW5mb3JtYWNpw7NuP2ANCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIGlmICghY29uZmlybWVkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVXNlciBjYW5jZWxsZWQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IG51ZXZvc1ByZWNpb3NEYXRhID0geyBpdGVtczogW10gfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgaXRlbVJvd3MgPSBkb20udXBkYXRlUHJlY2lvc0dydWFJdGVtc0xpc3QucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZGVzY3JpcHRpb25dJyk7DQogICAgICAgICAgICBpdGVtUm93cy5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgbmV3SXRlbSA9IHsNCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJvdy5kYXRhc2V0LmRlc2NyaXB0aW9uDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICByb3cucXVlcnlTZWxlY3RvckFsbCgnLnByZWNpby1pdGVtLXVwZGF0ZS1ncnVhJykuZm9yRWFjaChpbnB1dCA9PiB7DQogICAgICAgICAgICAgICAgICAgIG5ld0l0ZW1baW5wdXQuZGF0YXNldC5maWVsZF0gPSBwYXJzZUZsb2F0KGlucHV0LnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIG51ZXZvc1ByZWNpb3NEYXRhLml0ZW1zLnB1c2gobmV3SXRlbSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gR3VhcmRhciBlbiBlbCBlc3RhZG8NCiAgICAgICAgICAgIGlmICghc3RhdGUuZ3J1YURhdGFbbnVldm9Bbm9dKSB7DQogICAgICAgICAgICAgICAgc3RhdGUuZ3J1YURhdGFbbnVldm9Bbm9dID0ge307DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzdGF0ZS5ncnVhRGF0YVtudWV2b0Fub11bZW1wcmVzYV0gPSBudWV2b3NQcmVjaW9zRGF0YTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICBjbG9zZU1vZGFsKGRvbS51cGRhdGVQcmVjaW9zR3J1YU1vZGFsKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQWN0dWFsaXphciB5IHJlZnJlc2NhciBlbCBtb2RhbCBkZSBncsO6YQ0KICAgICAgICAgICAgLy8gY3VycmVudEdydWFDYW1pb25EZXRhbGxlLmFubyA9IG51ZXZvQW5vOyAvLyBBcHVudGFyIGFsIG51ZXZvIGHDsW8NCiAgICAgICAgICAgIHJlbmRlckdydWFNb2RhbCgpOw0KICAgICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCLDiXhpdG8iLCBgU2UgaGFuICR7ZGF0YUV4aXN0cyA/ICdhY3R1YWxpemFkbycgOiAnZ3VhcmRhZG8nfSBsb3MgcHJlY2lvcyBwYXJhICR7ZW1wcmVzYX0gcGFyYSBlbCBhw7FvICR7bnVldm9Bbm99LmApOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgLy8gLS0tIEZJTiBERSBOVUVWQVMgRlVOQ0lPTkVTIERFIEdSw5pBL0NBTUnDk04gLS0tDQoNCiAgICAgICAgLy8gLS0tIElOSUNJQUxJWkFDScOTTiBZIEVWRU5UT1MgLS0tDQoNCiAgICAgICAgDQogICAgICAgIC8vIC0tLSBMw5NHSUNBIERFIEdBU1RPIEVOIENVUlNPIC0tLQ0KICAgICAgICBjb25zdCBvcGVuR2FzdG9DdXJzb01vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYy1tZXMnKS52YWx1ZSA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2MtYW5vJykudmFsdWUgPSBub3cuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIHJlbmRlckdhc3RvQ3Vyc29UYWJsZSgpOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhc3RvLWN1cnNvLW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW5kZXJHYXN0b0N1cnNvVGFibGUgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBtZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2MtbWVzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBhbm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2MtYW5vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCByZWdpc3Ryb3MgPSBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0gfHwgW107DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGNvbHNUb1N1bSA9IFsNCiAgICAgICAgICAgICAgICAuLi5DT1NUX0ZJRUxEUy5tYXAoZiA9PiAoeyBpZDogZi5pZCArICdfdG90YWwnLCBsYWJlbDogZi5sYWJlbCB9KSksDQogICAgICAgICAgICAgICAgeyBpZDogJ2dydWFfY2FtaW9uX3RvdGFsJywgbGFiZWw6ICdHcsO6YSBvIENhbWnDs24nIH0sDQogICAgICAgICAgICAgICAgeyBpZDogJ2dydXBvc19zb2xfdG90YWwnLCBsYWJlbDogJ0dydXBvcyBzb2wuIGV0YycgfSwNCiAgICAgICAgICAgICAgICB7IGlkOiAnY29taWRhJywgbGFiZWw6ICdDb21pZGEnIH0NCiAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gcmVnaXN0cm9zLmZpbHRlcihyID0+IHIuZmVjaGEuc3RhcnRzV2l0aChgJHthbm99LSR7bWVzfWApKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2MtdGFibGUtYm9keScpOw0KICAgICAgICAgICAgdGJvZHkuaW5uZXJIVE1MID0gY29sc1RvU3VtLm1hcChjb2wgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IGZpbHRlcmVkLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiBhY2MgKyAocGFyc2VGbG9hdChjdXJyW2NvbC5pZF0pIHx8IDApLCAwKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICA8dHIgZGF0YS1jb2wtaWQ9IiR7Y29sLmlkfSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB4LTQgcHktMyB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAiPiR7Y29sLmxhYmVsfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB4LTQgcHktMyB0ZXh0LXNtIHRleHQtZ3JheS02MDAiPiR7Zm9ybWF0Q3VycmVuY3koc3VtKX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTMiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIGNsYXNzPSJnYy1hanVzdGUtaW5wdXQgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHAtMSB0ZXh0LXNtIiB2YWx1ZT0iMCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTMgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTgwMCBnYy1yZXMtY29sIiBkYXRhLXN1bT0iJHtzdW19Ij4ke2Zvcm1hdEN1cnJlbmN5KHN1bSl9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgfSkuam9pbignJyk7DQoNCiAgICAgICAgICAgIC8vIExpc3RlbmVycyBwYXJhIGFjdHVhbGl6YWNpw7NuIGVuIHRpZW1wbyByZWFsDQogICAgICAgICAgICB0Ym9keS5xdWVyeVNlbGVjdG9yQWxsKCcuZ2MtYWp1c3RlLWlucHV0JykuZm9yRWFjaChpbnB1dCA9PiB7DQogICAgICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGlucHV0LmNsb3Nlc3QoJ3RyJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IHBhcnNlRmxvYXQocm93LnF1ZXJ5U2VsZWN0b3IoJy5nYy1yZXMtY29sJykuZGF0YXNldC5zdW0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhanVzdGUgPSBwYXJzZUZsb2F0KGlucHV0LnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBzdW0gKyBhanVzdGU7DQogICAgICAgICAgICAgICAgICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcuZ2MtcmVzLWNvbCcpLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3kocmVzKTsNCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlR0NUb3RhbCgpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB1cGRhdGVHQ1RvdGFsKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgdXBkYXRlR0NUb3RhbCA9ICgpID0+IHsNCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2MtcmVzLWNvbCcpLmZvckVhY2goZWwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbFN0ciA9IGVsLnRleHRDb250ZW50LnJlcGxhY2UoL1teMC05LC1dKy9nLCAiIikucmVwbGFjZSgiLCIsICIuIik7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VGbG9hdCh2YWxTdHIpIHx8IDA7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYy1maW5hbC10b3RhbCcpLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3kodG90YWwpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZUNvbmZpcm1HYXN0b0N1cnNvID0gYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgY29uc3Qgb3QgPSBzdGF0ZS5vdHMuZmluZChvID0+IG8uaWQgPT09IHN0YXRlLmFjdGl2ZU9USWQpOw0KICAgICAgICAgICAgY29uc3QgbnVldm9Ub3RhbFN0ciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYy1maW5hbC10b3RhbCcpLnRleHRDb250ZW50LnJlcGxhY2UoL1teMC05LC1dKy9nLCAiIikucmVwbGFjZSgiLCIsICIuIik7DQogICAgICAgICAgICBjb25zdCBudWV2b1RvdGFsID0gcGFyc2VGbG9hdChudWV2b1RvdGFsU3RyKSB8fCAwOw0KICAgICAgICAgICAgY29uc3QgYW50ZXJpb3JUb3RhbCA9IG90Lmdhc3RvRW5DdXJzbyB8fCAwOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBtZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2MtbWVzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBhbm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2MtYW5vJykudmFsdWU7DQoNCiAgICAgICAgICAgIC8vIFJlZ2lzdHJvIGRlIGxhIGFjY2nDs24gZGUgaW1wb3J0YXINCiAgICAgICAgICAgIGNvbnN0IGltcG9ydFJlY29yZCA9IHsNCiAgICAgICAgICAgICAgICByZWNvcmRJZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwNCiAgICAgICAgICAgICAgICBmZWNoYTogZ2V0VG9kYXlEYXRlU3RyaW5nKCksDQogICAgICAgICAgICAgICAgaG9yYXNfdHJhYmFqYWRvcmVzOiAwLA0KICAgICAgICAgICAgICAgIHByZWNpb19ob3JhczogMCwNCiAgICAgICAgICAgICAgICBjb21pZGE6IDAsDQogICAgICAgICAgICAgICAgY29zdGVfdG90YWxfcmVnaXN0cm86IDAsDQogICAgICAgICAgICAgICAgaXNJbXBvcnRMb2c6IHRydWUsDQogICAgICAgICAgICAgICAgaW1wb3J0TXNnOiBgSW1wb3J0YWNpw7NuIEdhc3RvIGVuIEN1cnNvICgke21lc30vJHthbm99KWAsDQogICAgICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKENPU1RfRklFTERTLm1hcChmID0+IFtgJHtmLmlkfV90b3RhbGAsIDBdKSkNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGlmIChudWV2b1RvdGFsIDwgYW50ZXJpb3JUb3RhbCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRpZmVyZW5jaWEgPSBNYXRoLmFicyhhbnRlcmlvclRvdGFsIC0gbnVldm9Ub3RhbCk7DQogICAgICAgICAgICAgICAgLy8gQ3JlYXIgcmVnaXN0cm8gZGUgYWp1c3RlDQogICAgICAgICAgICAgICAgY29uc3QgYWp1c3RlUmVjb3JkID0gew0KICAgICAgICAgICAgICAgICAgICByZWNvcmRJZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwNCiAgICAgICAgICAgICAgICAgICAgZmVjaGE6IGdldFRvZGF5RGF0ZVN0cmluZygpLA0KICAgICAgICAgICAgICAgICAgICBob3Jhc190cmFiYWphZG9yZXM6IDAsDQogICAgICAgICAgICAgICAgICAgIHByZWNpb19ob3JhczogMCwNCiAgICAgICAgICAgICAgICAgICAgY29taWRhOiAwLA0KICAgICAgICAgICAgICAgICAgICBjb3N0ZV90b3RhbF9yZWdpc3RybzogZGlmZXJlbmNpYSwNCiAgICAgICAgICAgICAgICAgICAgaXNBanVzdGVHYXN0bzogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgYWp1c3RlTXNnOiBgQWp1c3RlIGRpZmVyZW5jaWEgR2FzdG8gZW4gQ3Vyc28gKFJlZHVjY2nDs24pYCwNCiAgICAgICAgICAgICAgICAgICAgY29uc3VtaWJsZXNfdG90YWw6IGRpZmVyZW5jaWEgLy8gTG8gbWV0ZW1vcyBlbiBjb25zdW1pYmxlcyBvIHVuIGNhbXBvIGdlbsOpcmljbyBwYXJhIGVsIHRvdGFsDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICBzdGF0ZS5yZWdpc3Ryb3Nbc3RhdGUuYWN0aXZlT1RJZF0ucHVzaChhanVzdGVSZWNvcmQpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBvdC5nYXN0b0VuQ3Vyc28gPSBudWV2b1RvdGFsOw0KICAgICAgICAgICAgc3RhdGUucmVnaXN0cm9zW3N0YXRlLmFjdGl2ZU9USWRdLnB1c2goaW1wb3J0UmVjb3JkKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FzdG8tY3Vyc28tbW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoIkltcG9ydGFjacOzbiBFeGl0b3NhIiwgIlNlIGhhIGFjdHVhbGl6YWRvIGVsIGdhc3RvIGVuIGN1cnNvIHkgc2UgaGFuIGdlbmVyYWRvIGxvcyByZWdpc3Ryb3MgY29ycmVzcG9uZGllbnRlcy4iKTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7DQoNCiAgICAgICAgICAgIC8vIFZpbmN1bGFjacOzbiBzZWd1cmEgZGUgY29tcG9uZW50ZXMgSUENCiAgICAgICAgICAgIGNvbnN0IGJvb3RJQSA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZG9tLm9wZW5BaUJ0bikgZG9tLm9wZW5BaUJ0bi5vbmNsaWNrID0gKCkgPT4gZG9tLmFpQ2hhdFBhbmVsLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTsNCiAgICAgICAgICAgICAgICBpZiAoZG9tLmNsb3NlQWlCdG4pIGRvbS5jbG9zZUFpQnRuLm9uY2xpY2sgPSAoKSA9PiBkb20uYWlDaGF0UGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpOw0KICAgICAgICAgICAgICAgIGlmIChkb20uc2F2ZUtleUJ0bikgZG9tLnNhdmVLZXlCdG4ub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZG9tLmFwaUtleUlucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYoa2V5KSB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYXBpS2V5ID0ga2V5OyANCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnZW1pbmlfYXBpX2tleScsIGtleSk7IA0KICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2hhdE1lc3NhZ2UoJ2FpJywgJ0FQSSBLZXkgZ3VhcmRhZGEgY29ycmVjdGFtZW50ZS4gQWhvcmEgcHVlZG8gYW5hbGl6YXIgdHVzIGRhdG9zLicpOyANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgaWYgKGRvbS5zZW5kQWlCdG4pIGRvbS5zZW5kQWlCdG4ub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZG9tLmFpSW5wdXQudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZih2YWwpIHsgYWRkQ2hhdE1lc3NhZ2UoJ3VzZXInLCB2YWwpOyBkb20uYWlJbnB1dC52YWx1ZSA9ICcnOyBjYWxsR2VtaW5pQVBJKHZhbCk7IH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIGlmIChkb20uYXBpS2V5SW5wdXQpIGRvbS5hcGlLZXlJbnB1dC52YWx1ZSA9IHN0YXRlLmFwaUtleSB8fCAnJzsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBib290SUEoKTsNCiAgICAgICAgICAgIC8vIEJvdG9uZXMgcHJpbmNpcGFsZXMNCiAgICAgICAgICAgIGRvbS5hZGRPdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG9wZW5PVE1vZGFsKG51bGwpKTsNCiAgICAgICAgICAgIGRvbS5pbXBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkb20uaW1wb3J0RmlsZUlucHV0LmNsaWNrKCkpOw0KICAgICAgICAgICAgZG9tLmltcG9ydEZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVJbXBvcnQpOw0KICAgICAgICAgICAgZG9tLnNhdmVDaGFuZ2VzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2F2ZUNoYW5nZXMpOw0KICAgICAgICAgICAgZG9tLnNlYXJjaE90SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCByZW5kZXJPVExpc3RWaWV3KTsNCiAgICAgICAgICAgIGRvbS5iYWNrVG9PdHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlVmlldyA9ICdvdHMnOw0KICAgICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZU9USWQgPSBudWxsOw0KICAgICAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBkb20uYWRkUmVnaXN0cm9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvcGVuUmVnaXN0cm9Nb2RhbChudWxsKSk7DQoNCiAgICAgICAgICAgIC8vIE51ZXZvcyBsaXN0ZW5lcnMgZGUgaW1wb3J0YWNpw7NuIGRlIGhvcmFzDQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtZ2FzdG8tY3Vyc28tYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuR2FzdG9DdXJzb01vZGFsKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjLWdjLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyR2FzdG9DdXJzb1RhYmxlKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1nYy1tb2RhbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhc3RvLWN1cnNvLW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybS1nYy1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNvbmZpcm1HYXN0b0N1cnNvKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLmltcG9ydEhvcmFzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlSW1wb3J0SG9yYXNDbGljayk7DQogICAgICAgICAgICBkb20uaW1wb3J0SG9yYXNKc29uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlSW1wb3J0SG9yYXNGaWxlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gKioqKiBMSVNURU5FUiBBw5FBRElETyAqKioqDQogICAgICAgICAgICBkb20uZXhwb3J0RXhjZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVFeHBvcnRFeGNlbCk7DQoNCiAgICAgICAgICAgIC8vIE1vZGFsIE9UDQogICAgICAgICAgICBkb20uY2FuY2VsT3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKGRvbS5vdE1vZGFsKSk7DQogICAgICAgICAgICBkb20uc2F2ZU90QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2F2ZU9UKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTW9kYWwgUmVnaXN0cm8NCiAgICAgICAgICAgIGRvbS5jYW5jZWxSZWdpc3Ryb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLnJlZ2lzdHJvTW9kYWwpKTsNCiAgICAgICAgICAgIGRvbS5zYXZlUmVnaXN0cm9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVTYXZlUmVnaXN0cm8pOw0KICAgICAgICAgICAgZG9tLnJlZ2lzdHJvSG9yYXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVDYWxjdWxhdGVkRmllbGRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTGlzdGVuZXJzIHBhcmEgQWxxdWlsZXIgKE1hbnVhbC9BdXRvKQ0KICAgICAgICAgICAgZG9tLmdlc3Rpb25hckFscXVpbGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkFscXVpbGVyTW9kYWwpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBMaXN0ZW5lciBwYXJhIGVudHJhZGEgbWFudWFsIGRlIGFscXVpbGVyDQogICAgICAgICAgICBkb20uZ3J1cG9zU29sVG90YWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBtYW51YWxUb3RhbCA9IHBhcnNlRmxvYXQoZG9tLmdydXBvc1NvbFRvdGFsSW5wdXQudmFsdWUpIHx8IDA7DQogICAgICAgICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlc2NyaWJlLCBzZSByZXNldGVhbiBsb3MgZGV0YWxsZXMgeSBzZSB1c2EgZWwgdG90YWwgbWFudWFsDQogICAgICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBDb252ZXJ0aXIgYSBhcnJheSBwYXJhIGNvbnNpc3RlbmNpYSAqKioqDQogICAgICAgICAgICAgICAgY3VycmVudEFscXVpbGVyRGV0YWxsZXMgPSBbew0KICAgICAgICAgICAgICAgICAgICAuLi5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfQUxRVUlMRVJfSVRFTSkpLA0KICAgICAgICAgICAgICAgICAgICBpdGVtRGVzY3JpcGNpb246ICJWYWxvciBNYW51YWwiLA0KICAgICAgICAgICAgICAgICAgICB0b3RhbDogbWFudWFsVG90YWwNCiAgICAgICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBMaXN0ZW5lcnMgZGVsIG1vZGFsIGRlIGFscXVpbGVyIChBdXRvKQ0KICAgICAgICAgICAgZG9tLmNsb3NlQWxxdWlsZXJNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsb3NlQWxxdWlsZXJNb2RhbCk7IC8vIE1PRElGSUNBRE8NCiAgICAgICAgICAgIGRvbS5hZGRBbHF1aWxlckl0ZW1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVBZGRBbHF1aWxlckl0ZW0pOyAvLyBNT0RJRklDQURPDQogICAgICAgICAgICBkb20uYWxxdWlsZXJBbm8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gdXBkYXRlQWxxdWlsZXJJdGVtcyhmYWxzZSkpOyAvLyBNT0RJRklDQURPDQogICAgICAgICAgICBkb20uYWxxdWlsZXJFbXByZXNhLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHVwZGF0ZUFscXVpbGVySXRlbXMoZmFsc2UpKTsgLy8gTU9ESUZJQ0FETw0KICAgICAgICAgICAgZG9tLmFscXVpbGVySXRlbURlc2NyaXBjaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHVwZGF0ZUFscXVpbGVySXRlbVByZWNpbyk7DQogICAgICAgICAgICBkb20uYWxxdWlsZXJJdGVtRGlhcy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGNhbGN1bGF0ZUFscXVpbGVyVG90YWwpOw0KICAgICAgICAgICAgZG9tLmFscXVpbGVyQ29tYnVzdGlibGVMaXRyb3MuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjYWxjdWxhdGVBbHF1aWxlclRvdGFsKTsNCiAgICAgICAgICAgIGRvbS51cGRhdGVQcmVjaW9zQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblVwZGF0ZVByZWNpb3NNb2RhbCk7DQogICAgICAgICAgICBkb20uY2FuY2VsVXBkYXRlUHJlY2lvc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLnVwZGF0ZVByZWNpb3NNb2RhbCkpOw0KICAgICAgICAgICAgZG9tLnNhdmVVcGRhdGVQcmVjaW9zQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2F2ZU51ZXZvc1ByZWNpb3MpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyAqKioqIE5VRVZPOiBMaXN0ZW5lcnMgcGFyYSBHcsO6YS9DYW1pw7NuIChNYW51YWwvQXV0bykgKioqKg0KICAgICAgICAgICAgZG9tLmdlc3Rpb25hckdydWFCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuR3J1YU1vZGFsKTsNCg0KICAgICAgICAgICAgZG9tLmdydWFDYW1pb25Ub3RhbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IG1hbnVhbFRvdGFsID0gcGFyc2VGbG9hdChkb20uZ3J1YUNhbWlvblRvdGFsSW5wdXQudmFsdWUpIHx8IDA7DQogICAgICAgICAgICAgICAgLy8gKioqKiBNT0RJRklDQURPOiBDb252ZXJ0aXIgYSBhcnJheSBwYXJhIGNvbnNpc3RlbmNpYSAqKioqDQogICAgICAgICAgICAgICAgY3VycmVudEdydWFDYW1pb25EZXRhbGxlcyA9IFt7DQogICAgICAgICAgICAgICAgICAgIC4uLkpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9HUlVBQ0FNSU9OX0lURU0pKSwNCiAgICAgICAgICAgICAgICAgICAgaXRlbURlc2NyaXBjaW9uOiAiVmFsb3IgTWFudWFsIiwNCiAgICAgICAgICAgICAgICAgICAgdG90YWw6IG1hbnVhbFRvdGFsDQogICAgICAgICAgICAgICAgfV07DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gTGlzdGVuZXJzIGRlbCBtb2RhbCBkZSBncsO6YSAoQXV0bykNCiAgICAgICAgICAgIGRvbS5jbG9zZUdydWFNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsb3NlR3J1YU1vZGFsKTsgLy8gTU9ESUZJQ0FETw0KICAgICAgICAgICAgZG9tLmFkZEdydWFJdGVtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQWRkR3J1YUl0ZW0pOyAvLyBNT0RJRklDQURPDQogICAgICAgICAgICBkb20uZ3J1YUFuby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB1cGRhdGVHcnVhSXRlbXMoZmFsc2UpKTsgLy8gTU9ESUZJQ0FETw0KICAgICAgICAgICAgZG9tLmdydWFFbXByZXNhLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHVwZGF0ZUdydWFJdGVtcyhmYWxzZSkpOyAvLyBNT0RJRklDQURPDQogICAgICAgICAgICBkb20uZ3J1YUl0ZW1EZXNjcmlwY2lvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjYWxjdWxhdGVHcnVhVG90YWwpOw0KICAgICAgICAgICAgZG9tLmdydWFJdGVtSG9yYXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjYWxjdWxhdGVHcnVhVG90YWwpOw0KICAgICAgICAgICAgZG9tLmdydWFJdGVtUmVjYXJnby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjYWxjdWxhdGVHcnVhVG90YWwpOw0KICAgICAgICAgICAgZG9tLnVwZGF0ZVByZWNpb3NHcnVhQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblVwZGF0ZVByZWNpb3NHcnVhTW9kYWwpOyAvLyA8LS0gTlVFVk8NCiAgICAgICAgICAgIGRvbS5jYW5jZWxVcGRhdGVQcmVjaW9zR3J1YUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLnVwZGF0ZVByZWNpb3NHcnVhTW9kYWwpKTsgLy8gPC0tIE5VRVZPDQogICAgICAgICAgICBkb20uc2F2ZVVwZGF0ZVByZWNpb3NHcnVhQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2F2ZU51ZXZvc1ByZWNpb3NHcnVhKTsgLy8gPC0tIE5VRVZPDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEV2ZW50IGRlbGVnYXRpb24gZW4gZWwgZm9ybXVsYXJpbyBkZSByZWdpc3RybyBwYXJhIGJvdG9uZXMgZGluw6FtaWNvcw0KICAgICAgICAgICAgZG9tLnJlZ2lzdHJvRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgYWRkQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmFkZC1jb25jZXB0by1idG4nKTsNCiAgICAgICAgICAgICAgICBpZiAoYWRkQnRuKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkSWQgPSBhZGRCdG4uZGF0YXNldC5maWVsZElkOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb20ucmVnaXN0cm9Gb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2ZpZWxkSWR9LWNvbmNlcHRvcy1saXN0YCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENvbmNlcHRvUm93KGNvbnRhaW5lciwgZmllbGRJZCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gRXZlbnQgZGVsZWdhdGlvbiBlbiBsYXMgdmlzdGFzIHByaW5jaXBhbGVzDQogICAgICAgICAgICBkb20ub3RMaXN0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWV3QnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLnZpZXctcmVnaXN0cm9zLWJ0bicpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFkZEJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hZGQtcmVnaXN0cm8tdG8tb3QtYnRuJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZWRpdEJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5lZGl0LW90LWJ0bicpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtb3QtYnRuJyk7DQoNCiAgICAgICAgICAgICAgICBpZiAodmlld0J0bikgew0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVWaWV3ID0gJ3JlZ2lzdHJvcyc7DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZU9USWQgPSB2aWV3QnRuLmRhdGFzZXQub3RJZDsNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZGRCdG4pIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlT1RJZCA9IGFkZEJ0bi5kYXRhc2V0Lm90SWQ7IC8vIEVzdGFibGVjZXIgT1QgYWN0aXZhDQogICAgICAgICAgICAgICAgICAgIG9wZW5SZWdpc3Ryb01vZGFsKG51bGwpOyAvLyBBYnJpciBtb2RhbCBwYXJhIGHDsWFkaXINCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVkaXRCdG4pIHsNCiAgICAgICAgICAgICAgICAgICAgb3Blbk9UTW9kYWwoZWRpdEJ0bi5kYXRhc2V0Lm90SWQpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsZXRlQnRuKSB7DQogICAgICAgICAgICAgICAgICAgIGhhbmRsZURlbGV0ZU9UKGRlbGV0ZUJ0bi5kYXRhc2V0Lm90SWQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyAqKioqIE5VRVZPOiBMaXN0ZW5lciBwYXJhIGVsIGlucHV0IGRlICJHYXN0byBlbiBjdXJzbyIgKioqKg0KICAgICAgICAgICAgZG9tLm90TGlzdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGdhc3RvSW5wdXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuZ2FzdG8tZW4tY3Vyc28taW5wdXQnKTsNCiAgICAgICAgICAgICAgICBpZiAoZ2FzdG9JbnB1dCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvdElkID0gZ2FzdG9JbnB1dC5kYXRhc2V0Lm90SWQ7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gcGFyc2VGbG9hdChnYXN0b0lucHV0LnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3QgPSBzdGF0ZS5vdHMuZmluZChvID0+IG8uaWQgPT09IG90SWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG90Lmdhc3RvRW5DdXJzbyA9IG5ld1ZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJPVExpc3RWaWV3KCk7IC8vIFJlLXJlbmRlcml6YXIgcGFyYSBhY3R1YWxpemFyIHRvdGFsZXMNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBMaXN0ZW5lciBwYXJhIEFqdXN0ZSBJbmZvcm1hdGl2bw0KICAgICAgICAgICAgZG9tLm90TGlzdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZS50YXJnZXQuY2xvc2VzdCgnLmFqdXN0ZS1pbmZvcm1hdGl2by1pbnB1dCcpOw0KICAgICAgICAgICAgICAgIGlmIChpbnB1dCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvdElkID0gaW5wdXQuZGF0YXNldC5vdElkOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvdCA9IHN0YXRlLm90cy5maW5kKG8gPT4gby5pZCA9PT0gb3RJZCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3QuYWp1c3RlSW5mb3JtYXRpdm8gPSBwYXJzZUZsb2F0KGlucHV0LnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJPVExpc3RWaWV3KCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gTGlzdGVuZXIgcGFyYSBGZWNoYSBkZSBDb3J0ZQ0KICAgICAgICAgICAgZG9tLm90TGlzdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZS50YXJnZXQuY2xvc2VzdCgnLmZlY2hhLWNvcnRlLWlucHV0Jyk7DQogICAgICAgICAgICAgICAgaWYgKGlucHV0KSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG90SWQgPSBpbnB1dC5kYXRhc2V0Lm90SWQ7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG90ID0gc3RhdGUub3RzLmZpbmQobyA9PiBvLmlkID09PSBvdElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG90KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvdC5mZWNoYUNvcnRlID0gaW5wdXQudmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICBtYXJrRGlydHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlck9UTGlzdFZpZXcoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20ucmVnaXN0cm9UYWJsZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWRpdEJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5lZGl0LXJlZ2lzdHJvLWJ0bicpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtcmVnaXN0cm8tYnRuJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZGV0YWxsZXNCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcudmlldy1kZXRhbGxlcy1idG4nKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoZWRpdEJ0bikgew0KICAgICAgICAgICAgICAgICAgICBvcGVuUmVnaXN0cm9Nb2RhbChlZGl0QnRuLmRhdGFzZXQucmVjb3JkSWQpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsZXRlQnRuKSB7DQogICAgICAgICAgICAgICAgICAgIGhhbmRsZURlbGV0ZVJlZ2lzdHJvKGRlbGV0ZUJ0bi5kYXRhc2V0LnJlY29yZElkKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRldGFsbGVzQnRuKSB7DQogICAgICAgICAgICAgICAgICAgIG9wZW5EZXRhbGxlc01vZGFsKGRldGFsbGVzQnRuLmRhdGFzZXQucmVjb3JkSWQsIGRldGFsbGVzQnRuLmRhdGFzZXQuZmllbGRJZCwgZGV0YWxsZXNCdG4uZGF0YXNldC5maWVsZExhYmVsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTW9kYWxlcyBwZXJzb25hbGl6YWRvcw0KICAgICAgICAgICAgZG9tLmN1c3RvbUFsZXJ0T2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKGRvbS5jdXN0b21BbGVydE1vZGFsKSk7DQogICAgICAgICAgICBkb20uY2xvc2VEZXRhbGxlc01vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2xvc2VNb2RhbChkb20uZGV0YWxsZXNNb2RhbCkpOw0KICAgICAgICAgICAgLy8gTGlzdGVuZXIgcGFyYSBQcm9tcHQgKHNlIGNvbmZpZ3VyYW4gZW4gc2hvd0N1c3RvbVByb21wdCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQXZpc28gZGUgY2FtYmlvcyBzaW4gZ3VhcmRhciBhbCBjZXJyYXINCiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoZSkgPT4geyANCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNEaXJ0eSkgeyANCiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyANCiAgICAgICAgICAgICAgICAgICAgZS5yZXR1cm5WYWx1ZSA9ICdUaWVuZXMgY2FtYmlvcyBzaW4gZ3VhcmRhci4gwr9TZWd1cm8gcXVlIHF1aWVyZXMgc2FsaXI/JzsgDQogICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZW5kZXIoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICByZXR1cm4geyBpbml0IH07DQogICAgfSkoKTsNCg0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBBcHAuaW5pdCk7DQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQo8L2h0bWw+"},"2":{"p":"pedidos","c":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVzIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q29udHJvbCBkZSBQZWRpZG9zIHY4IC0gSUE8L3RpdGxlPgogICAgPCEtLSBMb2dvIGUgSWNvbm9zIC0tPgogICAgPGxpbmsgcmVsPSJpY29uIiBocmVmPSJodHRwczovL21lZGlhLmdsYXNzZG9vci5jb20vc3FsLzk3MDUzNC9ncnVwby1jb2JyYS1zcXVhcmVsb2dvLTE1Njc1ODI1MjI5MzkucG5nIiB0eXBlPSJpbWFnZS9wbmciPgogICAgCiAgICA8IS0tIFRhaWx3aW5kIENTUyAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgCiAgICA8IS0tIEZ1ZW50ZSBJbnRlciAtLT4KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+CiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20iIGNyb3Nzb3JpZ2luPgogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDQwMDs1MDA7NjAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAKICAgIDwhLS0gTGlicmVyw61hcyBkZSBFeGNlbCAoU2hlZXRKUykgLS0+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsgfQogICAgICAgIC5tb2RhbC1lbnRlciB7IGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZS1vdXQ7IH0KICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7CiAgICAgICAgICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOyB9CiAgICAgICAgICAgIHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfQogICAgICAgIH0KICAgICAgICAvKiBDdXN0b20gU2Nyb2xsYmFyICovCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiA4cHg7IGhlaWdodDogOHB4OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7IGJhY2tncm91bmQ6ICNmMWYxZjE7IGJvcmRlci1yYWRpdXM6IDRweDsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgeyBiYWNrZ3JvdW5kOiAjY2JkNWUxOyBib3JkZXItcmFkaXVzOiA0cHg7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHsgYmFja2dyb3VuZDogIzk0YTNiODsgfQogICAgICAgIAogICAgICAgIC5tZXMtYmFkZ2UgeyBmb250LXNpemU6IDAuNjVyZW07IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOiAwLjA1ZW07IH0KICAgICAgICAKICAgICAgICAuc2VhcmNoLXNlbGVjdC1pbnB1dCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGZpbGw9J25vbmUnIHZpZXdCb3g9JzAgMCAyNCAyNCcgc3Ryb2tlPSclMjM5Q0EzQUYnJTNFJTNDcGF0aCBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS13aWR0aD0nMicgZD0nTTIxIDIxbC02LTZtMi01YTcgNyAwIDExLTE0IDAgNyA3IDAgMDExNCAweicgLyUzRSUzQy9zdmclM0UiKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogOHB4IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNHB4IDE0cHg7CiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMzBweDsKICAgICAgICB9CiAgICAKICAgICAgICAvKiBFc3RpbG9zIENoYXQgSUEgdjggKi8KICAgICAgICAjYWktY2hhdC1jb250YWluZXIgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGJvdHRvbTogMjBweDsKICAgICAgICAgICAgcmlnaHQ6IDIwcHg7CiAgICAgICAgICAgIHdpZHRoOiAzODBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogNTAwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNnB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDEwcHggMjVweCAtNXB4IHJnYmEoMCwgMCwgMCwgMC4xKSwgMCA4cHggMTBweCAtNnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgei1pbmRleDogMTAwMDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UyZThmMDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICB9CiAgICAgICAgI2FpLWNoYXQtY29udGFpbmVyLm1pbmltaXplZCB7IGhlaWdodDogNTBweDsgd2lkdGg6IDIyMHB4OyB9CiAgICAgICAgLmNoYXQtbXNnIHsgbWF4LXdpZHRoOiA4NSU7IHBhZGRpbmc6IDhweCAxMnB4OyBib3JkZXItcmFkaXVzOiAxMnB4OyBtYXJnaW4tYm90dG9tOiA4cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgbGluZS1oZWlnaHQ6IDEuNDsgfQogICAgICAgIC5tc2ctYWkgeyBiYWNrZ3JvdW5kOiAjZjFmNWY5OyBjb2xvcjogIzFlMjkzYjsgYWxpZ24tc2VsZjogZmxleC1zdGFydDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMnB4OyB9CiAgICAgICAgLm1zZy11c2VyIHsgYmFja2dyb3VuZDogIzI1NjNlYjsgY29sb3I6IHdoaXRlOyBhbGlnbi1zZWxmOiBmbGV4LWVuZDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDJweDsgfQogICAgICAgIC50eXBpbmctZG90IHsgd2lkdGg6IDZweDsgaGVpZ2h0OiA2cHg7IGJhY2tncm91bmQ6ICM5NGEzYjg7IGJvcmRlci1yYWRpdXM6IDUwJTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBhbmltYXRpb246IHR5cGluZyAxcyBpbmZpbml0ZSBlYXNlLWluLW91dDsgfQogICAgICAgIC50eXBpbmctZG90Om50aC1jaGlsZCgyKSB7IGFuaW1hdGlvbi1kZWxheTogMC4yczsgfQogICAgICAgIC50eXBpbmctZG90Om50aC1jaGlsZCgzKSB7IGFuaW1hdGlvbi1kZWxheTogMC40czsgfQogICAgICAgIEBrZXlmcmFtZXMgdHlwaW5nIHsgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gNTAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC00cHgpOyB9IH0KICAgICAgICAgICAgCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5IGNsYXNzPSJiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS04MDAgaC1zY3JlZW4gb3ZlcmZsb3ctaGlkZGVuIGZsZXgiPgoKICAgIDwhLS0gU0lERUJBUiAtLT4KICAgIDxhc2lkZSBjbGFzcz0idy04MCBiZy13aGl0ZSBib3JkZXItciBib3JkZXItc2xhdGUtMjAwIGZsZXggZmxleC1jb2wgei0yMCBzaGFkb3cteGwgaC1mdWxsIGZsZXgtc2hyaW5rLTAiPgogICAgICAgIDxkaXYgY2xhc3M9InAtNiBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIj4KICAgICAgICAgICAgPCEtLSBMb2dvIGR1cGxpY2FkbyBkZSB0YW1hw7FvIChkZSBoLTI4IGEgaC01NikgLS0+CiAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2FyZXBsYS5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMjIvMDUvbG9nb3MtbW9uY29icmEuanBnIiBhbHQ9IkxvZ28gQ29icmEiIGNsYXNzPSJoLTU2IHctYXV0byBvYmplY3QtY29udGFpbiBtYi00IGhvdmVyOnNjYWxlLTEwNSB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0zMDAiPgogICAgICAgICAgICA8aDEgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIHRyYWNraW5nLXRpZ2h0Ij5Db250cm9sIGRlIFBlZGlkb3M8L2gxPgogICAgICAgICAgICA8cCBjbGFzcz0idGV4dC14cyB0ZXh0LXNsYXRlLTQwMCBmb250LW1lZGl1bSBtdC0xIj5HZXN0acOzbiAmIE9icmEgZW4gQ3Vyc288L3A+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gRmlsdHJvcyAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJwLTUgZmxleC1ncm93IG92ZXJmbG93LXktYXV0byBzcGFjZS15LTUgY3VzdG9tLXNjcm9sbGJhciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciI+RmlsdHJvcyBBY3Rpdm9zPC9oMj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJhY3RpdmUtZmlsdGVycy1kb3QiIGNsYXNzPSJoaWRkZW4gaC0yLjUgdy0yLjUgcm91bmRlZC1mdWxsIGJnLWJsdWUtNTAwIHNoYWRvdy1zbSBzaGFkb3ctYmx1ZS0yMDAiIHRpdGxlPSJGaWx0cm9zIGFwbGljYWRvcyI+PC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktNCI+CiAgICAgICAgICAgICAgICA8IS0tIEHDsW8gLS0+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtNjAwIG1iLTEuNSBtbC0xIj5Bw7FvIEZpc2NhbDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZmlsdGVyLXllYXIiIGNsYXNzPSJ3LWZ1bGwgdGV4dC1zbSBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBweS0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj5Ub2RvcyBsb3MgQcOxb3M8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDwhLS0gT1QgKGNvbiBidXNjYWRvcikgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MC84MCBwLTIuNSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHJlbGF0aXZlIGdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTYwMCBtYi0xLjUgbWwtMSBmbGV4IGp1c3RpZnktYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVuIGRlIFRyYWJham8gKE9UKQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1bMTBweF0gdGV4dC1ibHVlLTUwMCBmb250LW5vcm1hbCBoaWRkZW4gZ3JvdXAtaG92ZXI6aW5saW5lIj5BY3RpdmEgT2JyYSBlbiBDdXJzbzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoLWZpbHRlci1vdCIgcGxhY2Vob2xkZXI9IkJ1c2NhciBuwrogT1QuLi4iIGNsYXNzPSJzZWFyY2gtc2VsZWN0LWlucHV0IHctZnVsbCB0ZXh0LXhzIGJvcmRlci1zbGF0ZS0yMDAgcm91bmRlZC1sZyBtYi0yIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHBsYWNlaG9sZGVyLXNsYXRlLTQwMCI+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZmlsdGVyLW90IiBjbGFzcz0idy1mdWxsIHRleHQtc20gYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBiZy13aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+VG9kYXMgbGFzIE9Uczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBQZWRpZG8gKGNvbiBidXNjYWRvcikgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MC84MCBwLTIuNSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTYwMCBtYi0xLjUgbWwtMSI+TsK6IFBlZGlkbzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJzZWFyY2gtZmlsdGVyLXBlZGlkbyIgcGxhY2Vob2xkZXI9IkJ1c2NhciBuwrogUGVkaWRvLi4uIiBjbGFzcz0ic2VhcmNoLXNlbGVjdC1pbnB1dCB3LWZ1bGwgdGV4dC14cyBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQtbGcgbWItMiBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBwbGFjZWhvbGRlci1zbGF0ZS00MDAiPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImZpbHRlci1wZWRpZG8iIGNsYXNzPSJ3LWZ1bGwgdGV4dC1zbSBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIGJnLXdoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj5Ub2RvcyBsb3MgUGVkaWRvczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBNZXMgLS0+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtNjAwIG1iLTEuNSBtbC0xIj5NZXMgZGUgQ2VydGlmaWNhY2nDs248L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImZpbHRlci1tZXMiIGNsYXNzPSJ3LWZ1bGwgdGV4dC1zbSBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHB5LTIiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPlRvZG9zIGxvcyBNZXNlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIj5FbmVybzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj5GZWJyZXJvPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPk1hcnpvPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjMiPkFicmlsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjQiPk1heW88L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNSI+SnVuaW88L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNiI+SnVsaW88L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNyI+QWdvc3RvPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjgiPlNlcHRpZW1icmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOSI+T2N0dWJyZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMCI+Tm92aWVtYnJlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjExIj5EaWNpZW1icmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8IS0tIEJ1c2NhZG9yIFRleHRvIC0tPgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTYwMCBtYi0xLjUgbWwtMSI+QsO6c3F1ZWRhIEdsb2JhbDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQteS0wIGxlZnQtMCBmbGV4IGl0ZW1zLWNlbnRlciBwbC0zIHRleHQtc2xhdGUtNDAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEgMjFsLTYtNm0yLTVhNyA3IDAgMTEtMTQgMCA3IDcgMCAwMTE0IDB6Ij48L3BhdGg+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWx0ZXItdGV4dCIgcGxhY2Vob2xkZXI9IkRlc2NyaXBjacOzbiwgY29udGFjdG8sIEhFUy4uLiIgY2xhc3M9InctZnVsbCB0ZXh0LXNtIGJvcmRlci1zbGF0ZS0yMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgcGwtOSBweS0yIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxidXR0b24gaWQ9InJlc2V0LWZpbHRlcnMtYnRuIiBjbGFzcz0idy1mdWxsIGJnLXdoaXRlIHRleHQtc2xhdGUtNjAwIHRleHQteHMgZm9udC1ib2xkIHB5LTIuNSBweC0zIHJvdW5kZWQtbGcgaG92ZXI6Ymctc2xhdGUtNTAgdHJhbnNpdGlvbi1jb2xvcnMgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgc2hhZG93LXNtIGZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctMyBoLTMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNCA0djVoLjU4Mm0xNS4zNTYgMkE4LjAwMSA4LjAwMSAwIDAwNC41ODIgOW0wIDBIOW0xMSAxMXYtNWgtLjU4MW0wIDBhOC4wMDMgOC4wMDMgMCAwMS0xNS4zNTctMm0xNS4zNTcgMkgxNSI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgTGltcGlhciBGaWx0cm9zCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCBwdC01IG10LTIiPgogICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTMiPkFkbWluaXN0cmFjacOzbjwvaDI+CiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im1hbmFnZS1vdHMtYnRuIiBjbGFzcz0iYmctaW5kaWdvLTUwIHRleHQtaW5kaWdvLTcwMCB0ZXh0LXhzIGZvbnQtYm9sZCBweS0yLjUgcHgtMiByb3VuZGVkLWxnIGhvdmVyOmJnLWluZGlnby0xMDAgYm9yZGVyIGJvcmRlci1pbmRpZ28tMjAwIHRyYW5zaXRpb24tY29sb3JzIj4KICAgICAgICAgICAgICAgICAgICAgICAgIEdlc3QuIE9UcwogICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ibWFuYWdlLXBlZGlkb3MtYnRuIiBjbGFzcz0iYmctaW5kaWdvLTUwIHRleHQtaW5kaWdvLTcwMCB0ZXh0LXhzIGZvbnQtYm9sZCBweS0yLjUgcHgtMiByb3VuZGVkLWxnIGhvdmVyOmJnLWluZGlnby0xMDAgYm9yZGVyIGJvcmRlci1pbmRpZ28tMjAwIHRyYW5zaXRpb24tY29sb3JzIj4KICAgICAgICAgICAgICAgICAgICAgICAgIEdlc3QuIFBlZGlkb3MKICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEltcG9ydGFyIC8gRXhwb3J0YXIgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0icC00IGJvcmRlci10IGJvcmRlci1zbGF0ZS0yMDAgYmctc2xhdGUtNTAvNTAgc3BhY2UteS0zIGZsZXgtc2hyaW5rLTAiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSBncm91cCB3LWZ1bGwiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idy1mdWxsIGJnLWVtZXJhbGQtNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIuNSBweC00IHJvdW5kZWQteGwgaG92ZXI6YmctZW1lcmFsZC03MDAgdHJhbnNpdGlvbi1hbGwgc2hhZG93LW1kIHNoYWRvdy1lbWVyYWxkLTIwMCB0ZXh0LXNtIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4+RXhwb3J0YXIgRXhjZWw8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCBtbC0yIG9wYWNpdHktODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIgMTB2Nm0wIDBsLTMtM20zIDNsMy0zbTIgOEg3YTIgMiAwIDAxLTItMlY1YTIgMiAwIDAxMi0yaDUuNTg2YTEgMSAwIDAxLjcwNy4yOTNsNS40MTQgNS40MTRhMSAxIDAgMDEuMjkzLjcwN1YxOWEyIDIgMCAwMS0yIDJ6Ij48L3BhdGg+PC9zdmc+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhpZGRlbiBncm91cC1ob3ZlcjpibG9jayBhYnNvbHV0ZSBib3R0b20tZnVsbCBsZWZ0LTAgdy1mdWxsIG1iLTIgYmctd2hpdGUgcm91bmRlZC14bCBzaGFkb3cteGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgb3ZlcmZsb3ctaGlkZGVuIHotMzAgdHJhbnNmb3JtIG9yaWdpbi1ib3R0b20gdHJhbnNpdGlvbi1hbGwiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImV4cG9ydC1leGNlbC1maWx0ZXJlZCIgY2xhc3M9ImJsb2NrIHctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0zIHRleHQtc20gdGV4dC1zbGF0ZS03MDAgaG92ZXI6Ymctc2xhdGUtNTAgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTUwIGZvbnQtbWVkaXVtIj5WaXN0YSBBY3R1YWwgKEZpbHRyYWRhKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImV4cG9ydC1leGNlbC1hbGwiIGNsYXNzPSJibG9jayB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMyB0ZXh0LXNtIHRleHQtc2xhdGUtNzAwIGhvdmVyOmJnLXNsYXRlLTUwIGZvbnQtbWVkaXVtIj5CYXNlIGRlIERhdG9zIENvbXBsZXRhPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0yIGdhcC0zIj4KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImltcG9ydC1idG4iIGNsYXNzPSJiZy1zbGF0ZS03MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtMiByb3VuZGVkLWxnIGhvdmVyOmJnLXNsYXRlLTgwMCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctc20gdGV4dC14cyBib3JkZXIgYm9yZGVyLXNsYXRlLTgwMCI+CiAgICAgICAgICAgICAgICAgICAgSW1wb3J0YXIgSlNPTgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJleHBvcnQtYnRuIiBjbGFzcz0iYmctd2hpdGUgdGV4dC1zbGF0ZS03MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTIgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS01MCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctc20gdGV4dC14cyBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgQmFja3VwIEpTT04KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnQtZmlsZS1pbnB1dCIgY2xhc3M9ImhpZGRlbiIgYWNjZXB0PSIuanNvbiI+CiAgICAgICAgPC9kaXY+CiAgICA8L2FzaWRlPgoKICAgIDwhLS0gQVJFQSBQUklOQ0lQQUwgLS0+CiAgICA8bWFpbiBjbGFzcz0iZmxleC1ncm93IGZsZXggZmxleC1jb2wgYmctc2xhdGUtNTAgaC1mdWxsIG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSI+CiAgICAgICAgPCEtLSBIZWFkZXIgLS0+CiAgICAgICAgPGhlYWRlciBjbGFzcz0iYmctd2hpdGUgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCBzaGFkb3ctc20gei0xMCBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDwhLS0gRmlsYSBTdXBlcmlvcjogVMOtdHVsbyB5IEFjY2lvbmVzIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJweC04IHB5LTUgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgdHJhY2tpbmctdGlnaHQiPlJlZ2lzdHJvIGRlIENlcnRpZmljYWNpb25lczwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgbXQtMS41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9InJlZ2lzdHJvcy1jb3VudCIgY2xhc3M9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS01MDAiPkNhcmdhbmRvLi4uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ibGltaXQtd2FybmluZyIgY2xhc3M9ImhpZGRlbiB0ZXh0LVsxMHB4XSBiZy1hbWJlci0xMDAgdGV4dC1hbWJlci04MDAgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYW1iZXItMjAwIGZvbnQtYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSI+VmlzdGEgTGltaXRhZGEgKDUwKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgIDwhLS0gVG90YWxpemFkb3IgQsOhc2ljbyAoU2llbXByZSB2aXNpYmxlKSAtLT4KICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtMTAwIHB4LTQgcHktMiByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHRleHQtcmlnaHQgaGlkZGVuIG1kOmJsb2NrIj4KICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIGZvbnQtc2VtaWJvbGQgdXBwZXJjYXNlIGJsb2NrIj5Ub3RhbCBlbiBWaXN0YTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJoZWFkZXItdG90YWwtYW1vdW50IiBjbGFzcz0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAiPjAsMDAg4oKsPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgIAogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImFkZC1yZWdpc3Ryby1idG4iIGNsYXNzPSJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yLjUgcHgtNSByb3VuZGVkLXhsIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24tYWxsIHNoYWRvdy1sZyBzaGFkb3ctYmx1ZS0yMDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdHJhbnNmb3JtIGFjdGl2ZTpzY2FsZS05NSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC01IHctNSIgdmlld0JveD0iMCAwIDIwIDIwIiBmaWxsPSJjdXJyZW50Q29sb3IiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAgM2ExIDEgMCAwMTEgMXY1aDVhMSAxIDAgMTEwIDJoLTV2NWExIDEgMCAxMS0yIDB2LTVINGExIDEgMCAxMTAtMmg1VjRhMSAxIDAgMDExLTF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICBOdWV2byBSZWdpc3RybwogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBGaWxhIEluZmVyaW9yOiBNw6l0cmljYXMgZGUgT1QgKE9icmEgZW4gQ3Vyc28pIC0gU29sbyB2aXNpYmxlIGFsIGZpbHRyYXIgT1QgLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9Im90LW1ldHJpY3MtcGFuZWwiIGNsYXNzPSJoaWRkZW4gYmctc2xhdGUtODAwIHRleHQtd2hpdGUgcHgtOCBweS0zIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBib3JkZXItdCBib3JkZXItc2xhdGUtNzAwIHNoYWRvdy1pbm5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJnLWJsdWUtNTAwIHRleHQtd2hpdGUgdGV4dC1bMTBweF0gZm9udC1ib2xkIHB4LTIgcHktMC41IHJvdW5kZWQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIj5BbsOhbGlzaXMgT1Q8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9Im90LW1ldHJpY3MtdGl0bGUiIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtMzAwIj5SZXN1bWVuIGRlIE9icmEgZW4gQ3Vyc288L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtOCB0ZXh0LXNtIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWVuZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LVsxMHB4XSB0ZXh0LXNsYXRlLTQwMCBmb250LWJvbGQgdXBwZXJjYXNlIj5Ub3RhbCBQcm9kdWNpZG8gKM6jIEvDl0ltcCk8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJvdC10b3RhbC1wcm9kdWNpZG8iIGNsYXNzPSJmb250LW1vbm8gZm9udC1ib2xkIHRleHQtZW1lcmFsZC00MDAgdGV4dC1iYXNlIj4wLDAwIOKCrDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWVuZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LVsxMHB4XSB0ZXh0LXNsYXRlLTQwMCBmb250LWJvbGQgdXBwZXJjYXNlIj5Ub3RhbCBGYWN0dXJhZG88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJvdC10b3RhbC1mYWN0dXJhZG8iIGNsYXNzPSJmb250LW1vbm8gZm9udC1ib2xkIHRleHQtYmx1ZS00MDAgdGV4dC1iYXNlIj4wLDAwIOKCrDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8IS0tIFNlcGFyYWRvciAtLT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LXB4IGJnLXNsYXRlLTYwMCBoLTggc2VsZi1jZW50ZXIgbXgtMiI+PC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtZW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtWzEwcHhdIHRleHQtYW1iZXItNDAwIGZvbnQtYm9sZCB1cHBlcmNhc2UiPk9icmEgZW4gQ3Vyc288L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJvdC1vYnJhLWVuLWN1cnNvIiBjbGFzcz0iZm9udC1tb25vIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIHRleHQteGwiPjAsMDAg4oKsPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvaGVhZGVyPgoKICAgICAgICA8IS0tIFRhYmxhIC0tPgogICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyBvdmVyZmxvdy1hdXRvIHAtNiBjdXN0b20tc2Nyb2xsYmFyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9Im1pbi13LWZ1bGwgZGl2aWRlLXkgZGl2aWRlLXNsYXRlLTEwMCB0YWJsZS1maXhlZCI+CiAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzPSJiZy1zbGF0ZS01MC84MCBzdGlja3kgdG9wLTAgei0xMCBiYWNrZHJvcC1ibHVyLXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJweC00IHB5LTMuNSB0ZXh0LWxlZnQgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIHctMzIgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCI+RmVjaGEgLyBNZXM8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJweC00IHB5LTMuNSB0ZXh0LWxlZnQgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIHctMjQgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCI+T1Q8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJweC00IHB5LTMuNSB0ZXh0LWxlZnQgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIHctMjQgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCI+TsK6IFBlZGlkbzwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9ImNvbCIgY2xhc3M9InB4LTQgcHktMy41IHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgdy00MCBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIj5Db250YWN0bzwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9ImNvbCIgY2xhc3M9InB4LTQgcHktMy41IHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCI+RGVzY3JpcGNpw7NuIGRlbCBUcmFiYWpvPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gTnVldmFzIENvbHVtbmFzIFZpc2libGVzIGVuIFRhYmxhIChPcGNpb25hbCwgcGVybyDDunRpbCBwYXJhIGRlYnVnKSAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT0iY29sIiBjbGFzcz0iaGlkZGVuIG1kOnRhYmxlLWNlbGwgcHgtMiBweS0zLjUgdGV4dC1yaWdodCB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgdy0yMCBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIiB0aXRsZT0iRmFjdG9yIEsiPks8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9ImNvbCIgY2xhc3M9InB4LTQgcHktMy41IHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgdy0yOCBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIj5GQUNUPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT0iY29sIiBjbGFzcz0icHgtNCBweS0zLjUgdGV4dC1yaWdodCB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgYmctc2xhdGUtMTAwLzUwIHctMzYgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCI+RmFjdHVyYWRvICjigqwpPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT0iY29sIiBjbGFzcz0icHgtNCBweS0zLjUgdy0xNiBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIj48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGlkPSJyZWdpc3Ryb3MtdGFibGUtYm9keSIgY2xhc3M9ImJnLXdoaXRlIGRpdmlkZS15IGRpdmlkZS1zbGF0ZS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gSlMgZ2VuZXJhIGZpbGFzIGFxdcOtIC0tPgogICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+CiAgICAgICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJlbXB0eS1zdGF0ZSIgY2xhc3M9ImhpZGRlbiBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweS0yMCB0ZXh0LXNsYXRlLTQwMCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC00IHJvdW5kZWQtZnVsbCBtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJoLTEyIHctMTIgdGV4dC1zbGF0ZS0zMDAiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTTkgMTd2LTJtMyAydi00bTMgNHYtNm0yIDEwSDdhMiAyIDAgMDEtMi0yVjVhMiAyIDAgMDEyLTJoNS41ODZhMSAxIDAgMDEuNzA3LjI5M2w1LjQxNCA1LjQxNGExIDEgMCAwMS4yOTMuNzA3VjE5YTIgMiAwIDAxLTIgMnoiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS02MDAiPk5vIHNlIGVuY29udHJhcm9uIHJlZ2lzdHJvczwvcD4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSI+QWp1c3RhIGxvcyBmaWx0cm9zIG8gY3JlYSB1biBudWV2byByZWdpc3Ryby48L3A+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L21haW4+CgogICAgPCEtLSBNT0RBTCBNQUVTVFJPUyAtLT4KICAgIDxkaXYgaWQ9Im1hc3Rlci1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctc2xhdGUtOTAwLzQwIGJhY2tkcm9wLWJsdXItc20gaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMjAwIj4KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSByb3VuZGVkLTJ4bCBzaGFkb3ctMnhsIHctZnVsbCBtYXgtdy1tZCBtb2RhbC1lbnRlciBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCBtYXgtaC1bODB2aF0iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTUgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTEwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYmctc2xhdGUtNTAvNTAiPgogICAgICAgICAgICAgICAgPGgzIGlkPSJtYXN0ZXItbW9kYWwtdGl0bGUiIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCI+R2VzdGlvbmFyIE1hZXN0cm9zPC9oMz4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNsb3NlLW1vZGFsLWJ0biBwLTEgcm91bmRlZC1mdWxsIGhvdmVyOmJnLXNsYXRlLTIwMCB0ZXh0LXNsYXRlLTQwMCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy01IGgtNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik02IDE4TDE4IDZNNiA2bDEyIDEyIj48L3BhdGg+PC9zdmc+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNSBzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJuZXctbWFzdGVyLWlucHV0IiBjbGFzcz0iZmxleC1ncm93IGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1pbmRpZ28tNTAwIGZvY3VzOmJvcmRlci1pbmRpZ28tNTAwIHRleHQtc20iIHBsYWNlaG9sZGVyPSJBw7FhZGlyIG51ZXZvIHZhbG9yLi4uIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJhZGQtbWFzdGVyLWJ0biIgY2xhc3M9ImJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgdGV4dC1zbSBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1pbmRpZ28tNzAwIHNoYWRvdy1tZCB0cmFuc2l0aW9uLWNvbG9ycyI+QcOxYWRpcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHB4LTUgcGItNSBjdXN0b20tc2Nyb2xsYmFyIj4KICAgICAgICAgICAgICAgIDx1bCBpZD0ibWFzdGVyLWxpc3QiIGNsYXNzPSJkaXZpZGUteSBkaXZpZGUtc2xhdGUtMTAwIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gTU9EQUwgRURJVE9SIENPTVBMRVRPIChSRUdJU1RSTyArIEVOVFJBREFTKSAtLT4KICAgIDxkaXYgaWQ9InJlZ2lzdHJvLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1zbGF0ZS05MDAvNTAgYmFja2Ryb3AtYmx1ci1zbSBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0yMDAiPgogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHJvdW5kZWQtMnhsIHNoYWRvdy0yeGwgdy1mdWxsIG1heC13LTV4bCBtb2RhbC1lbnRlciBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCBtYXgtaC1bOTB2aF0iPgogICAgICAgICAgICAKICAgICAgICAgICAgPCEtLSBNb2RhbCBIZWFkZXIgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InB4LTggcHktNiBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGZsZXgtc2hyaW5rLTAiPgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8aDMgaWQ9InJlZ2lzdHJvLW1vZGFsLXRpdGxlIiBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIj5EZXRhbGxlIGRlbCBSZWdpc3RybzwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS01MDAgbXQtMSI+R2VzdGnDs24gZGUgcHJvZHVjY2nDs24sIGNlcnRpZmljYWNpb25lcyB5IG9icmEgZW4gY3Vyc28uPC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJjbG9zZS1tb2RhbC1idG4gcC0yIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1zbGF0ZS0yMDAgdGV4dC1zbGF0ZS00MDAgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNiBoLTYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNiAxOEwxOCA2TTYgNmwxMiAxMiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBtZDpmbGV4LXJvdyBmbGV4LWdyb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgIDwhLS0gQ09MVU1OQSBJWlFVSUVSREE6IERBVE9TIEdFTkVSQUxFUyAoU3RpY2t5KSAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBtZDp3LTEvMyBiZy1zbGF0ZS01MC81MCBib3JkZXItciBib3JkZXItc2xhdGUtMTAwIHAtNiBvdmVyZmxvdy15LWF1dG8gY3VzdG9tLXNjcm9sbGJhciBmbGV4IGZsZXgtY29sIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCBwYi0yIj5DbGFzaWZpY2FjacOzbjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0xLjUiPk9yZGVuIGRlIFRyYWJham8gKE9UKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJlZy1vdCIgY2xhc3M9InctZnVsbCBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHRleHQtc20gcHktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPlNlbGVjY2lvbmFyIE9ULi4uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIG1iLTEuNSI+TsK6IFBlZGlkbzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJlZy1wZWRpZG8iIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCB0ZXh0LXNtIHB5LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj5TZWxlY2Npb25hciBQZWRpZG8uLi48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDwhLS0gTlVFVk9TIENBTVBPUzogUFJPRFVDQ0nDk04gLS0+CiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWJsdWUtNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgYm9yZGVyLWIgYm9yZGVyLWJsdWUtMTAwIHBiLTIgcHQtMiI+RGF0b3MgZGUgUHJvZHVjY2nDs248L2g0PgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdGV4dC1zbGF0ZS02MDAgbWItMS41IHVwcGVyY2FzZSI+SW1wb3J0ZSBQZWRpZG8gKOKCrCk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgaWQ9InJlZy1pbXBvcnRlLXBlZGlkbyIgY2xhc3M9InctZnVsbCBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LXJpZ2h0IiBwbGFjZWhvbGRlcj0iMC4wMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdGV4dC1zbGF0ZS02MDAgbWItMS41IHVwcGVyY2FzZSI+RmFjdG9yIEsgKDAtMSk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgbWluPSIwIiBtYXg9IjEiIGlkPSJyZWctZmFjdG9yLWsiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1jZW50ZXIiIHBsYWNlaG9sZGVyPSIxLjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8IS0tIERpc3BsYXkgQ2FsY3VsYWRvIGVuIHRpZW1wbyByZWFsIGRlbnRybyBkZWwgbW9kYWwgLS0+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTMgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtWzEwcHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1ibHVlLTQwMCI+UHJvZHVjaWRvIChJbXAgKiBLKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJjYWxjLXByb2R1Y2lkbyIgY2xhc3M9InRleHQtc20gZm9udC1ib2xkIHRleHQtYmx1ZS04MDAiPjAsMDAg4oKsPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtWzEwcHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1ibHVlLTQwMCI+RmFjdHVyYWRvIFRvdGFsPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImNhbGMtZmFjdHVyYWRvIiBjbGFzcz0idGV4dC1zbSBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAiPjAsMDAg4oKsPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBoLXB4IGJnLWJsdWUtMjAwIG15LTEiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtWzEwcHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1hbWJlci02MDAiPk9icmEgZW4gQ3Vyc288L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iY2FsYy1vYnJhLWN1cnNvIiBjbGFzcz0idGV4dC1zbSBmb250LWJvbGQgdGV4dC1hbWJlci03MDAiPjAsMDAg4oKsPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8IS0tIENhc2lsbGEgUG9yIFBhcnRlcyAtLT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0xIHB4LTEiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJyZWctcG9yLXBhcnRlcyIgY2xhc3M9InctNCBoLTQgdGV4dC1ibHVlLTYwMCBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy1ibHVlLTUwMCBjdXJzb3ItcG9pbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InJlZy1wb3ItcGFydGVzIiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS02MDAgY3Vyc29yLXBvaW50ZXIgc2VsZWN0LW5vbmUiPk1hcmNhciBjb21vICJQb3IgcGFydGVzIjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIHBiLTIgcHQtMiI+RGV0YWxsZXM8L2g0PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIG1iLTEuNSI+Q29udGFjdG88L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlZy1jb250YWN0byIgY2xhc3M9InctZnVsbCBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHRleHQtc20iIHBsYWNlaG9sZGVyPSJQZXJzb25hIGRlIGNvbnRhY3RvIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0xLjUiPlJlZmVyZW5jaWFzPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlZy1yZWYtaGVzIiBjbGFzcz0idy1mdWxsIGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgdGV4dC14cyBweC0yIHB5LTIiIHBsYWNlaG9sZGVyPSJSZWYuIEhFUyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlZy1yZWYtZmFjdCIgY2xhc3M9InctZnVsbCBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHRleHQteHMgcHgtMiBweS0yIiBwbGFjZWhvbGRlcj0iUmVmLiBGQUNUIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItMS41Ij5EZXNjcmlwY2nDs248L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9InJlZy1kZXNjcmlwY2lvbiIgcm93cz0iMyIgY2xhc3M9InctZnVsbCBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHRleHQtc20gcmVzaXplLW5vbmUiIHBsYWNlaG9sZGVyPSJEZXNjcmlwY2nDs24gZGVsIHRyYWJham8uLi4iPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8IS0tIENPTFVNTkEgREVSRUNIQTogRU5UUkFEQVMgLyBDRVJUSUZJQ0FDSU9ORVMgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LWZ1bGwgbWQ6dy0yLzMgZmxleCBmbGV4LWNvbCBiZy13aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgPCEtLSBGb3JtdWxhcmlvIGHDsWFkaXIgZW50cmFkYSByw6FwaWRhIC0tPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNiBiZy1zbGF0ZS01MCBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQgdGV4dC1lbWVyYWxkLTUwMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMiA4Yy0xLjY1NyAwLTMgLjg5NS0zIDJzMS4zNDMgMiAzIDIgMyAuODk1IDMgMi0xLjM0MyAyLTMgMm0wLThjMS4xMSAwIDIuMDguNDAyIDIuNTk5IDFNMTIgOFY3bTAgMXY4bTAgMHYxbTAtMWMtMS4xMSAwLTIuMDgtLjQwMi0yLjU5OS0xTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAweiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2VydGlmaWNhY2lvbmVzIC8gRmFjdHVyYWRvCiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTMgaXRlbXMtZW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIG1iLTEiPkZlY2hhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImVudHJ5LWZlY2hhIiBjbGFzcz0idy1mdWxsIGJvcmRlci1zbGF0ZS0yMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgdGV4dC1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctNDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC1bMTBweF0gZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSBtYi0xIj5JbXBvcnRlIEZhY3R1cmFkbyAo4oKsKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImVudHJ5LWltcG9ydGUiIHN0ZXA9IjAuMDEiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXJpZ2h0IiBwbGFjZWhvbGRlcj0iMC4wMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iYnRuLWFkZC1lbnRyeSIgY2xhc3M9ImJnLXNsYXRlLTcwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS04MDAgc2hhZG93LW1kIHRyYW5zaXRpb24tY29sb3JzIHRleHQtc20gaC1bMzhweF0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEHDsWFkaXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPCEtLSBMaXN0YSBkZSBFbnRyYWRhcyAtLT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHAtMCBjdXN0b20tc2Nyb2xsYmFyIHJlbGF0aXZlIGJnLXdoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJtaW4tdy1mdWxsIGRpdmlkZS15IGRpdmlkZS1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzPSJiZy13aGl0ZSBzdGlja3kgdG9wLTAgc2hhZG93LXNtIHotMTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJweC02IHB5LTMgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciI+RmVjaGE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9InB4LTYgcHktMyB0ZXh0LXJpZ2h0IHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciI+SW1wb3J0ZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0icHgtNiBweS0zIHRleHQtcmlnaHQgdy0xNiI+PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0iZW50cmllcy1saXN0IiBjbGFzcz0iYmctd2hpdGUgZGl2aWRlLXkgZGl2aWRlLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIEpTIGl0ZW1zIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4KICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibm8tZW50cmllcy1tc2ciIGNsYXNzPSJhYnNvbHV0ZSBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc2xhdGUtNDAwIHRleHQtc20gcG9pbnRlci1ldmVudHMtbm9uZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaW4gY2VydGlmaWNhY2lvbmVzIHJlZ2lzdHJhZGFzCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8IS0tIEZvb3RlciBUb3RhbCBNb2RhbCAtLT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYmctc2xhdGUtODAwIHRleHQtd2hpdGUgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGZsZXgtc2hyaW5rLTAiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtMzAwIj5Ub3RhbCBGYWN0dXJhZG8gKEVzdGUgcmVnaXN0cm8pPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBmb250LW1vbm8iIGlkPSJtb2RhbC10b3RhbC1kaXNwbGF5Ij4wLDAwIOKCrDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBGb290ZXIgTW9kYWwgQWN0aW9ucyAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IGJvcmRlci10IGJvcmRlci1zbGF0ZS0yMDAgYmctd2hpdGUgZmxleCBqdXN0aWZ5LWVuZCBnYXAtMyBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iY2xvc2UtbW9kYWwtYnRuIHB4LTUgcHktMi41IGJnLXdoaXRlIHRleHQtc2xhdGUtNjAwIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQteGwgaG92ZXI6Ymctc2xhdGUtNTAgZm9udC1ib2xkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnMiPkNhbmNlbGFyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InNhdmUtZnVsbC1yZWNvcmQtYnRuIiBjbGFzcz0icHgtNiBweS0yLjUgYmctZW1lcmFsZC02MDAgdGV4dC13aGl0ZSByb3VuZGVkLXhsIGhvdmVyOmJnLWVtZXJhbGQtNzAwIGZvbnQtYm9sZCB0ZXh0LXNtIHNoYWRvdy1sZyBzaGFkb3ctZW1lcmFsZC0yMDAgdHJhbnNpdGlvbi1hbGwgdHJhbnNmb3JtIGFjdGl2ZTpzY2FsZS05NSI+R3VhcmRhciBDYW1iaW9zPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgCiAgICA8IS0tIENIQVQgSUEgKElueWVjdGFkbyB2OCkgLS0+CiAgICA8ZGl2IGlkPSJhaS1jaGF0LWNvbnRhaW5lciIgY2xhc3M9Im1pbmltaXplZCI+CiAgICAgICAgPGRpdiBpZD0iY2hhdC1oZWFkZXIiIGNsYXNzPSJiZy1zbGF0ZS04MDAgdGV4dC13aGl0ZSBweC00IHB5LTMgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyIHNlbGVjdC1ub25lIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy01IGgtNSB0ZXh0LWJsdWUtNDAwIiBmaWxsPSJjdXJyZW50Q29sb3IiIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZD0iTTIgNWEyIDIgMCAwMTItMmg3YTIgMiAwIDAxMiAydjRhMiAyIDAgMDEtNCA0SDkuODI4bC0xLjc2NiAxLjc2N2MuMjguMTQ5LjU5OS4yMzMuOTM4LjIzM2gybDMgM3YtM2gyYTIgMiAwIDAwMi0yVjlhMiAyIDAgMDAtMi0yaC0xeiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNtIHRyYWNraW5nLXRpZ2h0Ij5Bc2lzdGVudGUgZGUgT2JyYTwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gaWQ9InRvZ2dsZS1jaGF0LWljb24iIGNsYXNzPSJwLTEgaG92ZXI6Ymctc2xhdGUtNzAwIHJvdW5kZWQgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xOSA5bC03IDctNy03Ij48L3BhdGg+PC9zdmc+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9ImNoYXQtbWVzc2FnZXMiIGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHAtNCBmbGV4IGZsZXgtY29sIGN1c3RvbS1zY3JvbGxiYXIgYmctc2xhdGUtNTAgaGlkZGVuIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hhdC1tc2cgbXNnLWFpIHNoYWRvdy1zbSI+CiAgICAgICAgICAgICAgICDCoUhvbGEhIFNveSB0dSBhc2lzdGVudGUuIEhlIGFuYWxpemFkbyBsb3Mgc3VtYXRvcmlvcyBkZSB0dXMgT1RzIGFjdHVhbGVzLiBQcmVnw7pudGFtZSBzb2JyZSBlbCBnYXN0byBlbiBjdXJzbyBkZSB1bmEgT1QgbyB0b3RhbGVzIGdlbmVyYWxlcy4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0iY2hhdC1pbnB1dC1hcmVhIiBjbGFzcz0icC0zIGJvcmRlci10IGJvcmRlci1zbGF0ZS0xMDAgYmctd2hpdGUgaGlkZGVuIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgZmxleCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJhaS1xdWVyeS1pbnB1dCIgcGxhY2Vob2xkZXI9IlByZWd1bnRhIHNvYnJlIHVuYSBPVC4uLiIgY2xhc3M9InctZnVsbCBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQtZnVsbCBwbC00IHByLTEyIHB5LTIgdGV4dC1zbSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgYm9yZGVyIHNoYWRvdy1pbm5lciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZW5kLWFpLWJ0biIgY2xhc3M9ImFic29sdXRlIHJpZ2h0LTEgcC0yIHRleHQtYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS01MCByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwiPgogICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNSBoLTUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIgMTlsOSAyLTktMTgtOSAxOCA5LTJ6bTAgMHYtOCI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICAgICAgICAgIAoKICAgIDxzY3JpcHQ+CiAgICAgICAgY29uc3QgQXBwID0gKCgpID0+IHsKICAgICAgICAgICAgLy8gLS0tIEVTVEFETyAtLS0KICAgICAgICAgICAgLy8gRXN0cnVjdHVyYSBSZWdpc3RybyBWNjogCiAgICAgICAgICAgIC8vIHsgaWQsIG90LCBwZWRpZG8sIGNvbnRhY3RvLCBkZXNjcmlwY2lvbiwgcmVmX2hlcywgcmVmX2ZhY3QsIGltcG9ydGVfcGVkaWRvLCBmYWN0b3JfaywgcG9yX3BhcnRlcywgZW50cmFkYXM6IFsge2lkLCBmZWNoYSwgaW1wb3J0ZX0gXSB9CiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gewogICAgICAgICAgICAgICAgb3RzOiBbXSwKICAgICAgICAgICAgICAgIHBlZGlkb3M6IFtdLAogICAgICAgICAgICAgICAgcmVnaXN0cm9zOiBbXSAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFZhcmlhYmxlIHRlbXBvcmFsIHBhcmEgZWRpdGFyIGVudHJhZGFzIGRlbnRybyBkZWwgbW9kYWwgYW50ZXMgZGUgZ3VhcmRhcgogICAgICAgICAgICBsZXQgdGVtcEVudHJhZGFzID0gW107IAogICAgICAgICAgICBsZXQgZWRpdGluZ1JlY29yZElkID0gbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IE1PTlRIUyA9IFsiRW5lcm8iLCAiRmVicmVybyIsICJNYXJ6byIsICJBYnJpbCIsICJNYXlvIiwgIkp1bmlvIiwgIkp1bGlvIiwgIkFnb3N0byIsICJTZXB0aWVtYnJlIiwgIk9jdHVicmUiLCAiTm92aWVtYnJlIiwgIkRpY2llbWJyZSJdOwoKICAgICAgICAgICAgLy8gLS0tIERPTSAtLS0KICAgICAgICAgICAgY29uc3QgZG9tID0gewogICAgICAgICAgICAgICAgZmlsdGVyWWVhcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci15ZWFyJyksCiAgICAgICAgICAgICAgICBmaWx0ZXJPdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1vdCcpLAogICAgICAgICAgICAgICAgc2VhcmNoRmlsdGVyT3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtZmlsdGVyLW90JyksCiAgICAgICAgICAgICAgICBmaWx0ZXJQZWRpZG86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItcGVkaWRvJyksCiAgICAgICAgICAgICAgICBzZWFyY2hGaWx0ZXJQZWRpZG86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtZmlsdGVyLXBlZGlkbycpLAogICAgICAgICAgICAgICAgZmlsdGVyTWVzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyLW1lcycpLAogICAgICAgICAgICAgICAgZmlsdGVyVGV4dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci10ZXh0JyksCiAgICAgICAgICAgICAgICByZXNldEZpbHRlcnNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldC1maWx0ZXJzLWJ0bicpLAogICAgICAgICAgICAgICAgYWN0aXZlRmlsdGVyc0RvdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZS1maWx0ZXJzLWRvdCcpLAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZWdpc3Ryb3NDb3VudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdHJvcy1jb3VudCcpLAogICAgICAgICAgICAgICAgbGltaXRXYXJuaW5nOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGltaXQtd2FybmluZycpLAogICAgICAgICAgICAgICAgdGFibGVCb2R5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnaXN0cm9zLXRhYmxlLWJvZHknKSwKICAgICAgICAgICAgICAgIGVtcHR5U3RhdGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbXB0eS1zdGF0ZScpLAogICAgICAgICAgICAgICAgaGVhZGVyVG90YWxBbW91bnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXItdG90YWwtYW1vdW50JyksCgogICAgICAgICAgICAgICAgLy8gSGVhZGVyIE9UIE1ldHJpY3MKICAgICAgICAgICAgICAgIG90TWV0cmljc1BhbmVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3QtbWV0cmljcy1wYW5lbCcpLAogICAgICAgICAgICAgICAgb3RNZXRyaWNzVGl0bGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdC1tZXRyaWNzLXRpdGxlJyksCiAgICAgICAgICAgICAgICBvdFRvdGFsUHJvZHVjaWRvOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3QtdG90YWwtcHJvZHVjaWRvJyksCiAgICAgICAgICAgICAgICBvdFRvdGFsRmFjdHVyYWRvOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3QtdG90YWwtZmFjdHVyYWRvJyksCiAgICAgICAgICAgICAgICBvdE9icmFFbkN1cnNvOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Qtb2JyYS1lbi1jdXJzbycpLAoKICAgICAgICAgICAgICAgIGFkZFJlZ2lzdHJvQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXJlZ2lzdHJvLWJ0bicpLAogICAgICAgICAgICAgICAgbWFuYWdlT3RzQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuYWdlLW90cy1idG4nKSwKICAgICAgICAgICAgICAgIG1hbmFnZVBlZGlkb3NCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYW5hZ2UtcGVkaWRvcy1idG4nKSwKICAgICAgICAgICAgICAgIGltcG9ydEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1idG4nKSwKICAgICAgICAgICAgICAgIGV4cG9ydEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydC1idG4nKSwKICAgICAgICAgICAgICAgIGV4cG9ydEV4Y2VsRmlsdGVyZWQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnQtZXhjZWwtZmlsdGVyZWQnKSwKICAgICAgICAgICAgICAgIGV4cG9ydEV4Y2VsQWxsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0LWV4Y2VsLWFsbCcpLAogICAgICAgICAgICAgICAgaW1wb3J0SW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtZmlsZS1pbnB1dCcpLAoKICAgICAgICAgICAgICAgIC8vIE1vZGFsIE1hZXN0cm9zCiAgICAgICAgICAgICAgICBtYXN0ZXJNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hc3Rlci1tb2RhbCcpLAogICAgICAgICAgICAgICAgbWFzdGVyTW9kYWxUaXRsZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hc3Rlci1tb2RhbC10aXRsZScpLAogICAgICAgICAgICAgICAgbWFzdGVySW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctbWFzdGVyLWlucHV0JyksCiAgICAgICAgICAgICAgICBtYXN0ZXJMaXN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFzdGVyLWxpc3QnKSwKICAgICAgICAgICAgICAgIGFkZE1hc3RlckJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1tYXN0ZXItYnRuJyksCgogICAgICAgICAgICAgICAgLy8gTW9kYWwgUmVnaXN0cm8gVjYKICAgICAgICAgICAgICAgIHJlZ2lzdHJvTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3Ryby1tb2RhbCcpLAogICAgICAgICAgICAgICAgcmVnaXN0cm9UaXRsZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdHJvLW1vZGFsLXRpdGxlJyksCiAgICAgICAgICAgICAgICByZWdPdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZy1vdCcpLAogICAgICAgICAgICAgICAgcmVnUGVkaWRvOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnLXBlZGlkbycpLAogICAgICAgICAgICAgICAgcmVnQ29udGFjdG86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWctY29udGFjdG8nKSwKICAgICAgICAgICAgICAgIHJlZ0Rlc2NyaXBjaW9uOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnLWRlc2NyaXBjaW9uJyksCiAgICAgICAgICAgICAgICByZWdSZWZIZXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWctcmVmLWhlcycpLAogICAgICAgICAgICAgICAgcmVnUmVmRmFjdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZy1yZWYtZmFjdCcpLAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBOdWV2b3MgSW5wdXRzIFY2CiAgICAgICAgICAgICAgICByZWdJbXBvcnRlUGVkaWRvOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnLWltcG9ydGUtcGVkaWRvJyksCiAgICAgICAgICAgICAgICByZWdGYWN0b3JLOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnLWZhY3Rvci1rJyksCiAgICAgICAgICAgICAgICByZWdQb3JQYXJ0ZXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWctcG9yLXBhcnRlcycpLAogICAgICAgICAgICAgICAgY2FsY1Byb2R1Y2lkbzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbGMtcHJvZHVjaWRvJyksCiAgICAgICAgICAgICAgICBjYWxjRmFjdHVyYWRvOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsYy1mYWN0dXJhZG8nKSwKICAgICAgICAgICAgICAgIGNhbGNPYnJhQ3Vyc286IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjLW9icmEtY3Vyc28nKSwKCiAgICAgICAgICAgICAgICAvLyBFbnRyYWRhcyBkZW50cm8gZGVsIE1vZGFsCiAgICAgICAgICAgICAgICBlbnRyeUZlY2hhOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50cnktZmVjaGEnKSwKICAgICAgICAgICAgICAgIGVudHJ5SW1wb3J0ZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudHJ5LWltcG9ydGUnKSwKICAgICAgICAgICAgICAgIGJ0bkFkZEVudHJ5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWFkZC1lbnRyeScpLAogICAgICAgICAgICAgICAgZW50cmllc0xpc3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRyaWVzLWxpc3QnKSwKICAgICAgICAgICAgICAgIG5vRW50cmllc01zZzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vLWVudHJpZXMtbXNnJyksCiAgICAgICAgICAgICAgICBtb2RhbFRvdGFsRGlzcGxheTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXRvdGFsLWRpc3BsYXknKSwKICAgICAgICAgICAgICAgIHNhdmVGdWxsUmVjb3JkQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1mdWxsLXJlY29yZC1idG4nKSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY2xvc2VNb2RhbEJ0bnM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZS1tb2RhbC1idG4nKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIFVUSUxTIC0tLQogICAgICAgICAgICBjb25zdCBmb3JtYXRDdXJyZW5jeSA9ICh2YWwpID0+IG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZXMtRVMnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUicgfSkuZm9ybWF0KHZhbCk7CiAgICAgICAgICAgIGNvbnN0IGZvcm1hdERhdGUgPSAoZCkgPT4geyBpZighZCkgcmV0dXJuICctJzsgcmV0dXJuIG5ldyBEYXRlKGQpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnLCB7ZGF5OicyLWRpZ2l0JywgbW9udGg6JzItZGlnaXQnLCB5ZWFyOidudW1lcmljJ30pOyB9OwogICAgICAgICAgICBjb25zdCBnZW5lcmF0ZUlkID0gKCkgPT4gY3J5cHRvLnJhbmRvbVVVSUQgPyBjcnlwdG8ucmFuZG9tVVVJRCgpIDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpICsgRGF0ZS5ub3coKS50b1N0cmluZygzNik7CgogICAgICAgICAgICAvLyAtLS0gTMOTR0lDQSBGSUxUUk9TIFNFTEVDVCAtLS0KICAgICAgICAgICAgY29uc3QgZmlsdGVyU2VsZWN0T3B0aW9ucyA9IChzZWFyY2hJbnB1dCwgc2VsZWN0RWxlbWVudCwgYWxsT3B0aW9ucywgZGVmYXVsdExhYmVsKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB0ZXJtID0gc2VhcmNoSW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBzZWxlY3RFbGVtZW50LnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBhbGxPcHRpb25zLmZpbHRlcihvcHQgPT4gb3B0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpOwogICAgICAgICAgICAgICAgbGV0IGh0bWwgPSBgPG9wdGlvbiB2YWx1ZT0iIj4ke2RlZmF1bHRMYWJlbH08L29wdGlvbj5gOwogICAgICAgICAgICAgICAgaHRtbCArPSBmaWx0ZXJlZC5tYXAob3B0ID0+IGA8b3B0aW9uIHZhbHVlPSIke29wdH0iPiR7b3B0fTwvb3B0aW9uPmApLmpvaW4oJycpOwogICAgICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5pbm5lckhUTUwgPSBodG1sOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWwgJiYgKGZpbHRlcmVkLmluY2x1ZGVzKGN1cnJlbnRWYWwpIHx8IGN1cnJlbnRWYWwgPT09ICIiKSkgc2VsZWN0RWxlbWVudC52YWx1ZSA9IGN1cnJlbnRWYWw7CiAgICAgICAgICAgICAgICBlbHNlIHNlbGVjdEVsZW1lbnQudmFsdWUgPSAiIjsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIC0tLSBMw5NHSUNBIERBVE9TIFY2IC0tLQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTWlncmFkb3I6IENvbnZpZXJ0ZSByZWdpc3Ryb3MgVjQvVjUgYSBWNiAoY29uIGNhbXBvcyBudWV2b3MpCiAgICAgICAgICAgIGNvbnN0IG1pZ3JhdGVEYXRhID0gKHJhd1JlZ2lzdHJvcykgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHJhd1JlZ2lzdHJvcy5tYXAocmVnID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBBc2VndXJhbW9zIHF1ZSBleGlzdGFuIGxvcyBudWV2b3MgY2FtcG9zCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wb3J0ZVBlZGlkbyA9IHJlZy5pbXBvcnRlX3BlZGlkbyAhPT0gdW5kZWZpbmVkID8gcmVnLmltcG9ydGVfcGVkaWRvIDogMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWN0b3JLID0gcmVnLmZhY3Rvcl9rICE9PSB1bmRlZmluZWQgPyByZWcuZmFjdG9yX2sgOiAxOyAvLyBEZWZhdWx0IEs9MSBwYXJhIGxlZ2FjeQoKICAgICAgICAgICAgICAgICAgICAvLyBTaSB5YSBlcyBWNSAodGllbmUgYXJyYXkgZW50cmFkYXMpLCBvay4gU2kgZXMgVjQgKHBsYW5vKSwgY29udmVydGlyLgogICAgICAgICAgICAgICAgICAgIGxldCBlbnRyYWRhcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChyZWcuZW50cmFkYXMgJiYgQXJyYXkuaXNBcnJheShyZWcuZW50cmFkYXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJhZGFzID0gcmVnLmVudHJhZGFzOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFY0IC0+IFY1IGxvZ2ljCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltcG9ydGVCYXNlID0gcGFyc2VGbG9hdChyZWcuaW1wb3J0ZSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltcG9ydGVCYXNlID4gMCB8fCByZWcuZmVjaGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJhZGFzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBnZW5lcmF0ZUlkKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVjaGE6IHJlZy5mZWNoYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlOiBpbXBvcnRlQmFzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZWcuaWQgfHwgZ2VuZXJhdGVJZCgpLAogICAgICAgICAgICAgICAgICAgICAgICBvdDogcmVnLm90LAogICAgICAgICAgICAgICAgICAgICAgICBwZWRpZG86IHJlZy5wZWRpZG8sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RvOiByZWcuY29udGFjdG8sCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uOiByZWcuZGVzY3JpcGNpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZl9oZXM6IHJlZy5yZWZfaGVzLAogICAgICAgICAgICAgICAgICAgICAgICByZWZfZmFjdDogcmVnLnJlZl9mYWN0LAogICAgICAgICAgICAgICAgICAgICAgICAvLyBOdWV2b3MgY2FtcG9zCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGVfcGVkaWRvOiBwYXJzZUZsb2F0KGltcG9ydGVQZWRpZG8pIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGZhY3Rvcl9rOiBwYXJzZUZsb2F0KGZhY3RvckspLCAvLyBQdWVkZSBzZXIgMAogICAgICAgICAgICAgICAgICAgICAgICBwb3JfcGFydGVzOiByZWcucG9yX3BhcnRlcyB8fCBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW50cmFkYXM6IGVudHJhZGFzCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gQ2FsY3VsYSB0b3RhbGVzIGRlIHVuIHJlZ2lzdHJvIGJhc8OhbmRvc2UgZW4gbG9zIGZpbHRyb3MgYWN0aXZvcwogICAgICAgICAgICBjb25zdCBjYWxjdWxhdGVSZWNvcmRNZXRyaWNzID0gKHJlY29yZCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZlllYXIgPSBkb20uZmlsdGVyWWVhci52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGZNZXMgPSBkb20uZmlsdGVyTWVzLnZhbHVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBGYWN0dXJhZG8gVG90YWwgKGluZGVwZW5kaWVudGUgZGUgZmlsdHJvIHBhcmEgY8OhbGN1bG9zIGRlIG9icmEgZW4gY3Vyc28pCiAgICAgICAgICAgICAgICBjb25zdCBmYWN0dXJhZG9Ub3RhbEFic29sdXRvID0gcmVjb3JkLmVudHJhZGFzLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyAoZS5pbXBvcnRlIHx8IDApLCAwKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ8OhbGN1bG8gZGUgRmlsdHJvCiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyZWRFbnRyaWVzID0gcmVjb3JkLmVudHJhZGFzOwogICAgICAgICAgICAgICAgbGV0IGlzUGFydGlhbCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmIChmWWVhciB8fCBmTWVzICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRW50cmllcyA9IHJlY29yZC5lbnRyYWRhcy5maWx0ZXIoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZS5mZWNoYSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoZS5mZWNoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoWWVhciA9ICFmWWVhciB8fCBkLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSA9PT0gZlllYXI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoTW9udGggPSBmTWVzID09PSAiIiB8fCBkLmdldE1vbnRoKCkudG9TdHJpbmcoKSA9PT0gZk1lczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoWWVhciAmJiBtYXRjaE1vbnRoOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlzUGFydGlhbCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgdG90YWxGaWx0cmFkbyA9IGZpbHRlcmVkRW50cmllcy5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgKGUuaW1wb3J0ZSB8fCAwKSwgMCk7CiAgICAgICAgICAgICAgICBjb25zdCBsYXN0RGF0ZSA9IGZpbHRlcmVkRW50cmllcy5sZW5ndGggPiAwID8gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRW50cmllcy5tYXAoZSA9PiBlLmZlY2hhKS5zb3J0KCkucG9wKCkgOiBudWxsOwoKICAgICAgICAgICAgICAgIC8vIEPDoWxjdWxvcyBWNgogICAgICAgICAgICAgICAgLy8gUHJvZHVjaWRvID0gSW1wb3J0ZSBQZWRpZG8gKiBLCiAgICAgICAgICAgICAgICBjb25zdCBrID0gcmVjb3JkLmZhY3Rvcl9rICE9PSB1bmRlZmluZWQgPyByZWNvcmQuZmFjdG9yX2sgOiAxOwogICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjaWRvID0gKHJlY29yZC5pbXBvcnRlX3BlZGlkbyB8fCAwKSAqIGs7CiAgICAgICAgICAgICAgICAvLyBPYnJhIGVuIEN1cnNvID0gUHJvZHVjaWRvIC0gRmFjdHVyYWRvIFRPVEFMIChObyBlbCBmaWx0cmFkbywgc2lubyBlbCB0b3RhbCByZWFsKQogICAgICAgICAgICAgICAgY29uc3Qgb2JyYUVuQ3Vyc28gPSBwcm9kdWNpZG8gLSBmYWN0dXJhZG9Ub3RhbEFic29sdXRvOwoKICAgICAgICAgICAgICAgIHJldHVybiB7IAogICAgICAgICAgICAgICAgICAgIHRvdGFsRGlzcGxheTogdG90YWxGaWx0cmFkbywgCiAgICAgICAgICAgICAgICAgICAgZmFjdHVyYWRvVG90YWxBYnNvbHV0bywKICAgICAgICAgICAgICAgICAgICBwcm9kdWNpZG8sCiAgICAgICAgICAgICAgICAgICAgb2JyYUVuQ3Vyc28sCiAgICAgICAgICAgICAgICAgICAgbGFzdERhdGUsIAogICAgICAgICAgICAgICAgICAgIGlzUGFydGlhbCwgCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hDb3VudDogZmlsdGVyZWRFbnRyaWVzLmxlbmd0aCAKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBGaWx0cm8gUHJpbmNpcGFsCiAgICAgICAgICAgIGNvbnN0IGdldEZpbHRlcmVkUmVnaXN0cm9zID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZlllYXIgPSBkb20uZmlsdGVyWWVhci52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGZPdCA9IGRvbS5maWx0ZXJPdC52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGZQZWRpZG8gPSBkb20uZmlsdGVyUGVkaWRvLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZk1lcyA9IGRvbS5maWx0ZXJNZXMudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBmVGV4dCA9IGRvbS5maWx0ZXJUZXh0LnZhbHVlLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICAgICAgLy8gMS4gRmlsdHJhciByZWdpc3Ryb3MgcXVlIGNvaW5jaWRhbiBjb24gT1QsIFBlZGlkbyB5IFRleHRvCiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IHN0YXRlLnJlZ2lzdHJvcy5maWx0ZXIocmVnID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaE90ID0gIWZPdCB8fCByZWcub3QgPT09IGZPdDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFBlZGlkbyA9ICFmUGVkaWRvIHx8IHJlZy5wZWRpZG8gPT09IGZQZWRpZG87CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hUZXh0ID0gIWZUZXh0IHx8IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWcuY29udGFjdG8gfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZlRleHQpIHx8IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWcuZGVzY3JpcGNpb24gfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZlRleHQpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlZy5yZWZfaGVzIHx8ICcnKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZUZXh0KSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWcucmVmX2ZhY3QgfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZlRleHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaE90ICYmIG1hdGNoUGVkaWRvICYmIG1hdGNoVGV4dDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIDIuIE1hcGVhciBtw6l0cmljYXMKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBtYXRjaGVzLm1hcChyZWcgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldHJpY3MgPSBjYWxjdWxhdGVSZWNvcmRNZXRyaWNzKHJlZyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVnLCAuLi5tZXRyaWNzIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBTaSBoYXkgZmlsdHJvIHRlbXBvcmFsIGFjdGl2bywgb2N1bHRhbW9zIGxvcyBxdWUgdGllbmVuIG1hdGNoQ291bnQgMCAobm8gdGllbmVuIGZhY3R1cmFjaW9uIGVuIGVzYSBmZWNoYSkKICAgICAgICAgICAgICAgIGlmIChmWWVhciB8fCBmTWVzICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzLmZpbHRlcihyID0+IHIubWF0Y2hDb3VudCA+IDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIFJFTkRFUiAtLS0KICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IHJlbmRlckZpbHRlcnMgPSAoa2VlcFNlYXJjaCA9IGZhbHNlKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IGRvbS5maWx0ZXJZZWFyLnZhbHVlOwogICAgICAgICAgICAgICAgLy8gRXh0cmFlciBhw7FvcwogICAgICAgICAgICAgICAgY29uc3QgYWxsRGF0ZXMgPSBzdGF0ZS5yZWdpc3Ryb3MuZmxhdE1hcChyID0+IHIuZW50cmFkYXMubWFwKGUgPT4gZS5mZWNoYSkpLmZpbHRlcihkID0+IGQpOwogICAgICAgICAgICAgICAgY29uc3QgeWVhcnMgPSBbLi4ubmV3IFNldChhbGxEYXRlcy5tYXAoZCA9PiBuZXcgRGF0ZShkKS5nZXRGdWxsWWVhcigpKSldLnNvcnQoKS5yZXZlcnNlKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRvbS5maWx0ZXJZZWFyLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPlRvZG9zIGxvcyBBw7Fvczwvb3B0aW9uPicgKyAKICAgICAgICAgICAgICAgICAgICB5ZWFycy5tYXAoeSA9PiBgPG9wdGlvbiB2YWx1ZT0iJHt5fSI+JHt5fTwvb3B0aW9uPmApLmpvaW4oJycpOwogICAgICAgICAgICAgICAgZG9tLmZpbHRlclllYXIudmFsdWUgPSBjdXJyZW50WWVhcjsKCiAgICAgICAgICAgICAgICBpZiAoIWtlZXBTZWFyY2gpIHsKICAgICAgICAgICAgICAgICAgICBkb20uc2VhcmNoRmlsdGVyT3QudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICBkb20uc2VhcmNoRmlsdGVyUGVkaWRvLnZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2VsZWN0T3B0aW9ucyhkb20uc2VhcmNoRmlsdGVyT3QsIGRvbS5maWx0ZXJPdCwgc3RhdGUub3RzLCAiVG9kYXMgbGFzIE9UcyIpOwogICAgICAgICAgICAgICAgICAgIGZpbHRlclNlbGVjdE9wdGlvbnMoZG9tLnNlYXJjaEZpbHRlclBlZGlkbywgZG9tLmZpbHRlclBlZGlkbywgc3RhdGUucGVkaWRvcywgIlRvZG9zIGxvcyBQZWRpZG9zIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBQYW5lbCBkZSBIZWFkZXIgT1QgKE51ZXZvIFY2KQogICAgICAgICAgICBjb25zdCByZW5kZXJIZWFkZXJPVE1ldHJpY3MgPSAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE9UID0gZG9tLmZpbHRlck90LnZhbHVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRPVCkgewogICAgICAgICAgICAgICAgICAgIGRvbS5vdE1ldHJpY3NQYW5lbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZG9tLm90TWV0cmljc1BhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgZG9tLm90TWV0cmljc1RpdGxlLnRleHRDb250ZW50ID0gYFJlc3VtZW4gT2JyYSBlbiBDdXJzbyAtIE9UOiAke2N1cnJlbnRPVH1gOwoKICAgICAgICAgICAgICAgIC8vIENhbGN1bGFyIGFjdW11bGFkb3MgZGUgdG9kb3MgbG9zIHJlZ2lzdHJvcyBmaWx0cmFkb3MgKGRlIGVzYSBPVCkKICAgICAgICAgICAgICAgIGxldCBzdW1Qcm9kdWNpZG8gPSAwOwogICAgICAgICAgICAgICAgbGV0IHN1bUZhY3R1cmFkbyA9IDA7CiAgICAgICAgICAgICAgICBsZXQgc3VtT2JyYUN1cnNvID0gMDsKCiAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgICAgICAgICAgc3VtUHJvZHVjaWRvICs9IHIucHJvZHVjaWRvOwogICAgICAgICAgICAgICAgICAgIHN1bUZhY3R1cmFkbyArPSByLmZhY3R1cmFkb1RvdGFsQWJzb2x1dG87CiAgICAgICAgICAgICAgICAgICAgc3VtT2JyYUN1cnNvICs9IHIub2JyYUVuQ3Vyc287CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBkb20ub3RUb3RhbFByb2R1Y2lkby50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHN1bVByb2R1Y2lkbyk7CiAgICAgICAgICAgICAgICBkb20ub3RUb3RhbEZhY3R1cmFkby50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHN1bUZhY3R1cmFkbyk7CiAgICAgICAgICAgICAgICBkb20ub3RPYnJhRW5DdXJzby50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHN1bU9icmFDdXJzbyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIENvbG9yIGNvbmRpY2lvbmFsIHBhcmEgb2JyYSBlbiBjdXJzbwogICAgICAgICAgICAgICAgaWYgKHN1bU9icmFDdXJzbyA8IDApIHsKICAgICAgICAgICAgICAgICAgICBkb20ub3RPYnJhRW5DdXJzby5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LXdoaXRlJywgJ3RleHQtYW1iZXItNDAwJyk7CiAgICAgICAgICAgICAgICAgICAgZG9tLm90T2JyYUVuQ3Vyc28uY2xhc3NMaXN0LmFkZCgndGV4dC1yZWQtNDAwJyk7IC8vIE5lZ2F0aXZvIChGYWN0dXJhZG8gZGUgbcOhcz8pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRvbS5vdE9icmFFbkN1cnNvLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtcmVkLTQwMCcpOwogICAgICAgICAgICAgICAgICAgIGRvbS5vdE9icmFFbkN1cnNvLmNsYXNzTGlzdC5hZGQoJ3RleHQtd2hpdGUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHJlbmRlclRhYmxlID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGdldEZpbHRlcmVkUmVnaXN0cm9zKCk7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgICBjb25zdCBoYXNGaWx0ZXJzID0gZG9tLmZpbHRlclllYXIudmFsdWUgfHwgZG9tLmZpbHRlck90LnZhbHVlIHx8IGRvbS5maWx0ZXJQZWRpZG8udmFsdWUgfHwgZG9tLmZpbHRlck1lcy52YWx1ZSAhPT0gIiIgfHwgZG9tLmZpbHRlclRleHQudmFsdWU7CgogICAgICAgICAgICAgICAgLy8gUmVuZGVyIEhlYWRlciBNZXRyaWNzIChPYnJhIGVuIGN1cnNvKQogICAgICAgICAgICAgICAgcmVuZGVySGVhZGVyT1RNZXRyaWNzKGRhdGEpOwoKICAgICAgICAgICAgICAgIC8vIE9yZGVuYXI6IHByaW1lcm8gbG9zIG3DoXMgcmVjaWVudGVzCiAgICAgICAgICAgICAgICBkYXRhLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWEubGFzdERhdGUpIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgIGlmICghYi5sYXN0RGF0ZSkgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShiLmxhc3REYXRlKSAtIG5ldyBEYXRlKGEubGFzdERhdGUpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8gTGltaXRlIDUwCiAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0YSA9ICghaGFzRmlsdGVycyAmJiBkYXRhLmxlbmd0aCA+IDUwKSA/IGRhdGEuc2xpY2UoMCwgNTApIDogZGF0YTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZG9tLmxpbWl0V2FybmluZy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCBkaXNwbGF5RGF0YS5sZW5ndGggPT09IGRhdGEubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGRvbS5yZWdpc3Ryb3NDb3VudC50ZXh0Q29udGVudCA9IGAke2Rpc3BsYXlEYXRhLmxlbmd0aH0gcmVnaXN0cm9zYDsKICAgICAgICAgICAgICAgIGRvbS5hY3RpdmVGaWx0ZXJzRG90LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFoYXNGaWx0ZXJzKTsKCiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhciBUb3RhbCBDYWJlY2VyYSAoU3VtYSBkZSBsbyB2aXNpYmxlIC0gRmFjdHVyYWRvKQogICAgICAgICAgICAgICAgY29uc3QgZ3JhbmRUb3RhbCA9IGRhdGEucmVkdWNlKChhY2MsIHIpID0+IGFjYyArIHIudG90YWxEaXNwbGF5LCAwKTsKICAgICAgICAgICAgICAgIGRvbS5oZWFkZXJUb3RhbEFtb3VudC50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KGdyYW5kVG90YWwpOwoKICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5RGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBkb20udGFibGVCb2R5LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAgICAgICAgIGRvbS5lbXB0eVN0YXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvbS5lbXB0eVN0YXRlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwoKICAgICAgICAgICAgICAgIGRvbS50YWJsZUJvZHkuaW5uZXJIVE1MID0gZGlzcGxheURhdGEubWFwKHJlZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZU9iaiA9IHJlZy5sYXN0RGF0ZSA/IG5ldyBEYXRlKHJlZy5sYXN0RGF0ZSkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc05vbWJyZSA9IGRhdGVPYmogPyBNT05USFNbZGF0ZU9iai5nZXRNb250aCgpXSA6ICcnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlEYXRlID0gZGF0ZU9iaiA/IGRhdGVPYmoudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHtkYXk6JzItZGlnaXQnLCBtb250aDonMi1kaWdpdCcsIHllYXI6JzItZGlnaXQnfSkgOiAnU2luIGZlY2hhJzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFN0eWxlID0gcmVnLmlzUGFydGlhbCA/ICJ0ZXh0LWJsdWUtNjAwIGZvbnQtYm9sZCIgOiAidGV4dC1zbGF0ZS05MDAgZm9udC1ib2xkIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbExhYmVsID0gcmVnLmlzUGFydGlhbCA/IGAgdGl0bGU9IlRvdGFsIGZpbHRyYWRvLiBUb3RhbCByZWFsOiAke2Zvcm1hdEN1cnJlbmN5KHJlZy5mYWN0dXJhZG9Ub3RhbEFic29sdXRvKX0iYCA6ICIiOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIENsYXNlIGRlIGZvbmRvIGNvbmRpY2lvbmFsCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93Q2xhc3MgPSByZWcucG9yX3BhcnRlcyAKICAgICAgICAgICAgICAgICAgICAgICAgPyAiYmctYW1iZXItNTAgaG92ZXI6YmctYW1iZXItMTAwLzgwIHRyYW5zaXRpb24tY29sb3JzIGdyb3VwIGJvcmRlci1iIGJvcmRlci1hbWJlci0xMDAgY3Vyc29yLXBvaW50ZXIiIAogICAgICAgICAgICAgICAgICAgICAgICA6ICJob3ZlcjpiZy1ibHVlLTUwLzMwIHRyYW5zaXRpb24tY29sb3JzIGdyb3VwIGJvcmRlci1iIGJvcmRlci1zbGF0ZS01MCBjdXJzb3ItcG9pbnRlciI7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSIke3Jvd0NsYXNzfSIgb25jbGljaz0id2luZG93LkFwcC5lZGl0UmVnaXN0cm8oJyR7cmVnLmlkfScpIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIj4ke2Rpc3BsYXlEYXRlfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke21lc05vbWJyZSA/IGA8c3BhbiBjbGFzcz0idGV4dC1ibHVlLTUwMCBtZXMtYmFkZ2UgZm9udC1ib2xkIj4ke21lc05vbWJyZX08L3NwYW4+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icHgtNCBweS00IHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTYwMCI+JHtyZWcub3R9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTQgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtNTAwIj4ke3JlZy5wZWRpZG99PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTQgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNsYXRlLTcwMCB0cnVuY2F0ZSBtYXgtdy1bMTQwcHhdIj4ke3JlZy5jb250YWN0byB8fCAnLSd9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTQgdGV4dC14cyB0ZXh0LXNsYXRlLTUwMCBtYXgtdy1bMjIwcHhdIHRydW5jYXRlIj4ke3JlZy5kZXNjcmlwY2lvbiB8fCAnLSd9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJoaWRkZW4gbWQ6dGFibGUtY2VsbCBweC00IHB5LTQgdGV4dC1yaWdodCB0ZXh0LXhzIHRleHQtc2xhdGUtNDAwIGZvbnQtbW9ubyI+JHtyZWcuZmFjdG9yX2sgIT09IHVuZGVmaW5lZCA/IHJlZy5mYWN0b3JfayA6ICctJ308L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB4LTQgcHktNCB0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIGZvbnQtbW9ubyI+JHtyZWcucmVmX2ZhY3QgfHwgJy0nfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icHgtNCBweS00IHRleHQtcmlnaHQgYmctc2xhdGUtNTAvNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9IiR7dG90YWxTdHlsZX0gdGV4dC1zbSIke3RvdGFsTGFiZWx9PiR7Zm9ybWF0Q3VycmVuY3kocmVnLnRvdGFsRGlzcGxheSl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtyZWcuaXNQYXJ0aWFsID8gJzxzcGFuIGNsYXNzPSJ0ZXh0LVs5cHhdIGJsb2NrIHRleHQtYmx1ZS00MDAgZm9udC1tZWRpdW0iPkZJTFRSQURPPC9zcGFuPicgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweC00IHB5LTQgdGV4dC1yaWdodCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB3aW5kb3cuQXBwLmRlbGV0ZVJlZ2lzdHJvKCcke3JlZy5pZH0nKSIgY2xhc3M9InRleHQtc2xhdGUtMzAwIGhvdmVyOnRleHQtcmVkLTUwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTEgcm91bmRlZC1tZCBob3ZlcjpiZy1yZWQtNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaC00IHctNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xOSA3bC0uODY3IDEyLjE0MkEyIDIgMCAwMTE2LjEzOCAyMUg3Ljg2MmEyIDIgMCAwMS0xLjk5NS0xLjg1OEw1IDdtNSA0djZtNC02djZtMS0xMFY0YTEgMSAwIDAwLTEtMWgtNGExIDEgMCAwMC0xIDF2M000IDdoMTYiIC8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgYH0pLmpvaW4oJycpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIEzDk0dJQ0EgTU9EQUwgRURJVE9SIChWNikgLS0tCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZWNhbGN1bGEgbcOpdHJpY2FzIGRlbnRybyBkZWwgbW9kYWwKICAgICAgICAgICAgY29uc3QgdXBkYXRlTW9kYWxDYWxjdWxhdGlvbnMgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpbXAgPSBwYXJzZUZsb2F0KGRvbS5yZWdJbXBvcnRlUGVkaWRvLnZhbHVlKSB8fCAwOwogICAgICAgICAgICAgICAgY29uc3QgayA9IHBhcnNlRmxvYXQoZG9tLnJlZ0ZhY3RvcksudmFsdWUpOwogICAgICAgICAgICAgICAgY29uc3Qga1ZhbCA9IGlzTmFOKGspID8gMSA6IGs7IC8vIFNpIG5vIHBvbmUgbmFkYSwgdmlzdWFsbWVudGUgYXN1bWltb3MgY2FsY3VsbywgcGVybyBhbCBndWFyZGFyIGN1aWRhZG8uCgogICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjaWRvID0gaW1wICoga1ZhbDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gU3VtYXIgZW50cmFkYXMgYWN0dWFsZXMgKHRlbXApCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEZhY3R1cmFkbyA9IHRlbXBFbnRyYWRhcy5yZWR1Y2UoKHMsIGUpID0+IHMgKyAoZS5pbXBvcnRlIHx8IDApLCAwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG9icmFDdXJzbyA9IHByb2R1Y2lkbyAtIHRvdGFsRmFjdHVyYWRvOwoKICAgICAgICAgICAgICAgIGRvbS5jYWxjUHJvZHVjaWRvLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3kocHJvZHVjaWRvKTsKICAgICAgICAgICAgICAgIGRvbS5jYWxjRmFjdHVyYWRvLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3kodG90YWxGYWN0dXJhZG8pOwogICAgICAgICAgICAgICAgZG9tLmNhbGNPYnJhQ3Vyc28udGV4dENvbnRlbnQgPSBmb3JtYXRDdXJyZW5jeShvYnJhQ3Vyc28pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBFc3RpbG9zIG9icmEgY3Vyc28KICAgICAgICAgICAgICAgIGlmIChvYnJhQ3Vyc28gPCAwKSBkb20uY2FsY09icmFDdXJzby5jbGFzc05hbWUgPSAidGV4dC1zbSBmb250LWJvbGQgdGV4dC1yZWQtNTAwIjsKICAgICAgICAgICAgICAgIGVsc2UgZG9tLmNhbGNPYnJhQ3Vyc28uY2xhc3NOYW1lID0gInRleHQtc20gZm9udC1ib2xkIHRleHQtYW1iZXItNzAwIjsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHJlbmRlck1vZGFsRW50cmllcyA9ICgpID0+IHsKICAgICAgICAgICAgICAgIC8vIE9yZGVuYXIgZW50cmFkYXMgcG9yIGZlY2hhCiAgICAgICAgICAgICAgICB0ZW1wRW50cmFkYXMuc29ydCgoYSxiKSA9PiBuZXcgRGF0ZShiLmZlY2hhKSAtIG5ldyBEYXRlKGEuZmVjaGEpKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHRlbXBFbnRyYWRhcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBkb20uZW50cmllc0xpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLm5vRW50cmllc01zZy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgICAgICBkb20ubW9kYWxUb3RhbERpc3BsYXkudGV4dENvbnRlbnQgPSAnMCwwMCDigqwnOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1vZGFsQ2FsY3VsYXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9tLm5vRW50cmllc01zZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHRvdGFsID0gMDsKICAgICAgICAgICAgICAgIGRvbS5lbnRyaWVzTGlzdC5pbm5lckhUTUwgPSB0ZW1wRW50cmFkYXMubWFwKGVudHJ5ID0+IHsKICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSAoZW50cnkuaW1wb3J0ZSB8fCAwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYAogICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz0iaG92ZXI6Ymctc2xhdGUtNTAgZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB4LTYgcHktMyB0ZXh0LXNtIHRleHQtc2xhdGUtNzAwIGZvbnQtbWVkaXVtIGJvcmRlci1iIGJvcmRlci1zbGF0ZS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2Zvcm1hdERhdGUoZW50cnkuZmVjaGEpfQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB4LTYgcHktMyB0ZXh0LXJpZ2h0IHRleHQtc20gdGV4dC1zbGF0ZS04MDAgZm9udC1ib2xkIGJvcmRlci1iIGJvcmRlci1zbGF0ZS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2Zvcm1hdEN1cnJlbmN5KGVudHJ5LmltcG9ydGUpfQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB4LTYgcHktMyB0ZXh0LXJpZ2h0IGJvcmRlci1iIGJvcmRlci1zbGF0ZS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5BcHAucmVtb3ZlVGVtcEVudHJ5KCcke2VudHJ5LmlkfScpIiBjbGFzcz0idGV4dC1zbGF0ZS0zMDAgaG92ZXI6dGV4dC1yZWQtNTAwIHAtMSBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1hbGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNiAxOEwxOCA2TTYgNmwxMiAxMiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSkuam9pbignJyk7CiAgICAgICAgICAgICAgICBkb20ubW9kYWxUb3RhbERpc3BsYXkudGV4dENvbnRlbnQgPSBmb3JtYXRDdXJyZW5jeSh0b3RhbCk7CiAgICAgICAgICAgICAgICB1cGRhdGVNb2RhbENhbGN1bGF0aW9ucygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgYWRkVGVtcEVudHJ5ID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZmVjaGEgPSBkb20uZW50cnlGZWNoYS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGltcG9ydGUgPSBwYXJzZUZsb2F0KGRvbS5lbnRyeUltcG9ydGUudmFsdWUpOwoKICAgICAgICAgICAgICAgIGlmICghZmVjaGEgfHwgaXNOYU4oaW1wb3J0ZSkpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiSW5kaWNhIGZlY2hhIGUgaW1wb3J0ZSB2w6FsaWRvLiIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0ZW1wRW50cmFkYXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGdlbmVyYXRlSWQoKSwKICAgICAgICAgICAgICAgICAgICBmZWNoYSwKICAgICAgICAgICAgICAgICAgICBpbXBvcnRlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBSZXNldCBpbnB1dHMgcGVxdWXDsW9zCiAgICAgICAgICAgICAgICBkb20uZW50cnlGZWNoYS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZG9tLmVudHJ5SW1wb3J0ZS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZG9tLmVudHJ5RmVjaGEuZm9jdXMoKTsKICAgICAgICAgICAgICAgIHJlbmRlck1vZGFsRW50cmllcygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgcmVtb3ZlVGVtcEVudHJ5ID0gKGVudHJ5SWQpID0+IHsKICAgICAgICAgICAgICAgIHRlbXBFbnRyYWRhcyA9IHRlbXBFbnRyYWRhcy5maWx0ZXIoZSA9PiBlLmlkICE9PSBlbnRyeUlkKTsKICAgICAgICAgICAgICAgIHJlbmRlck1vZGFsRW50cmllcygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3Qgb3BlblJlZ2lzdHJvTW9kYWwgPSAoaWQgPSBudWxsKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUub3RzLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5wZWRpZG9zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGYWx0YW4gZGF0b3MgbWFlc3Ryb3MgKE9Ucy9QZWRpZG9zKS4gQ8OhcmdhbG9zIG8gaW1ww7NydGFsb3MgcHJpbWVyby4nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZWRpdGluZ1JlY29yZElkID0gaWQ7CiAgICAgICAgICAgICAgICBkb20ucmVnaXN0cm9UaXRsZS50ZXh0Q29udGVudCA9IGlkID8gJ0VkaXRhciBSZWdpc3RybycgOiAnTnVldm8gUmVnaXN0cm8nOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBSZWxsZW5hciBzZWxlY3RzCiAgICAgICAgICAgICAgICBjb25zdCBvdE9wdHMgPSBzdGF0ZS5vdHMubWFwKG8gPT4gYDxvcHRpb24gdmFsdWU9IiR7b30iPiR7b308L29wdGlvbj5gKS5qb2luKCcnKTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlZE9wdHMgPSBzdGF0ZS5wZWRpZG9zLm1hcChwID0+IGA8b3B0aW9uIHZhbHVlPSIke3B9Ij4ke3B9PC9vcHRpb24+YCkuam9pbignJyk7CiAgICAgICAgICAgICAgICBkb20ucmVnT3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+U2VsZWNjaW9uYXIgT1QuLi48L29wdGlvbj4nICsgb3RPcHRzOwogICAgICAgICAgICAgICAgZG9tLnJlZ1BlZGlkby5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5TZWxlY2Npb25hciBQZWRpZG8uLi48L29wdGlvbj4nICsgcGVkT3B0czsKCiAgICAgICAgICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZWcgPSBzdGF0ZS5yZWdpc3Ryb3MuZmluZChyID0+IHIuaWQgPT09IGlkKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGRvbS5yZWdPdC52YWx1ZSA9IHJlZy5vdDsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnUGVkaWRvLnZhbHVlID0gcmVnLnBlZGlkbzsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnQ29udGFjdG8udmFsdWUgPSByZWcuY29udGFjdG8gfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLnJlZ0Rlc2NyaXBjaW9uLnZhbHVlID0gcmVnLmRlc2NyaXBjaW9uIHx8ICcnOwogICAgICAgICAgICAgICAgICAgIGRvbS5yZWdSZWZIZXMudmFsdWUgPSByZWcucmVmX2hlcyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnUmVmRmFjdC52YWx1ZSA9IHJlZy5yZWZfZmFjdCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBWNiBmaWVsZHMKICAgICAgICAgICAgICAgICAgICBkb20ucmVnSW1wb3J0ZVBlZGlkby52YWx1ZSA9IHJlZy5pbXBvcnRlX3BlZGlkbyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnRmFjdG9ySy52YWx1ZSA9IHJlZy5mYWN0b3JfayAhPT0gdW5kZWZpbmVkID8gcmVnLmZhY3Rvcl9rIDogMTsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnUG9yUGFydGVzLmNoZWNrZWQgPSByZWcucG9yX3BhcnRlcyB8fCBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xvbmFyIGVudHJhZGFzCiAgICAgICAgICAgICAgICAgICAgdGVtcEVudHJhZGFzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZWcuZW50cmFkYXMgfHwgW10pKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTnVldm8KICAgICAgICAgICAgICAgICAgICBkb20ucmVnT3QudmFsdWUgPSBkb20uZmlsdGVyT3QudmFsdWUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLnJlZ1BlZGlkby52YWx1ZSA9IGRvbS5maWx0ZXJQZWRpZG8udmFsdWUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLnJlZ0NvbnRhY3RvLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLnJlZ0Rlc2NyaXBjaW9uLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLnJlZ1JlZkhlcy52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgICAgIGRvbS5yZWdSZWZGYWN0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICAgICAgZG9tLnJlZ0ltcG9ydGVQZWRpZG8udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnRmFjdG9ySy52YWx1ZSA9ICcxJzsKICAgICAgICAgICAgICAgICAgICBkb20ucmVnUG9yUGFydGVzLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0ZW1wRW50cmFkYXMgPSBbXTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZW5kZXJNb2RhbEVudHJpZXMoKTsKICAgICAgICAgICAgICAgIGRvbS5yZWdpc3Ryb01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgZG9tLnJlZ2lzdHJvTW9kYWwuY2xhc3NMaXN0LmFkZCgnZmxleCcpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3Qgc2F2ZUZ1bGxSZWNvcmQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBvdCA9IGRvbS5yZWdPdC52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlZGlkbyA9IGRvbS5yZWdQZWRpZG8udmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoIW90IHx8ICFwZWRpZG8pIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiT1QgeSBQZWRpZG8gc29uIG9ibGlnYXRvcmlvcy4iKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFZhbGlkYXIgSwogICAgICAgICAgICAgICAgbGV0IGsgPSBwYXJzZUZsb2F0KGRvbS5yZWdGYWN0b3JLLnZhbHVlKTsKICAgICAgICAgICAgICAgIGlmIChpc05hTihrKSB8fCBrIDwgMCB8fCBrID4gMSkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJFbCBGYWN0b3IgSyBkZWJlIGVzdGFyIGVudHJlIDAgeSAxLiBTZSBndWFyZGFyw6EgY29tbyAxIHBvciBkZWZlY3RvIHNpIGVzIGludsOhbGlkby4iKTsKICAgICAgICAgICAgICAgICAgICBrID0gMTsgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgbmV3UmVjb3JkID0gewogICAgICAgICAgICAgICAgICAgIGlkOiBlZGl0aW5nUmVjb3JkSWQgfHwgZ2VuZXJhdGVJZCgpLAogICAgICAgICAgICAgICAgICAgIG90LAogICAgICAgICAgICAgICAgICAgIHBlZGlkbywKICAgICAgICAgICAgICAgICAgICBjb250YWN0bzogZG9tLnJlZ0NvbnRhY3RvLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uOiBkb20ucmVnRGVzY3JpcGNpb24udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgcmVmX2hlczogZG9tLnJlZ1JlZkhlcy52YWx1ZSwKICAgICAgICAgICAgICAgICAgICByZWZfZmFjdDogZG9tLnJlZ1JlZkZhY3QudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZV9wZWRpZG86IHBhcnNlRmxvYXQoZG9tLnJlZ0ltcG9ydGVQZWRpZG8udmFsdWUpIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgZmFjdG9yX2s6IGssCiAgICAgICAgICAgICAgICAgICAgcG9yX3BhcnRlczogZG9tLnJlZ1BvclBhcnRlcy5jaGVja2VkLAogICAgICAgICAgICAgICAgICAgIGVudHJhZGFzOiB0ZW1wRW50cmFkYXMKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKGVkaXRpbmdSZWNvcmRJZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHN0YXRlLnJlZ2lzdHJvcy5maW5kSW5kZXgociA9PiByLmlkID09PSBlZGl0aW5nUmVjb3JkSWQpOwogICAgICAgICAgICAgICAgICAgIGlmIChpZHggIT09IC0xKSBzdGF0ZS5yZWdpc3Ryb3NbaWR4XSA9IG5ld1JlY29yZDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUucmVnaXN0cm9zLnB1c2gobmV3UmVjb3JkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjbG9zZU1vZGFscygpOwogICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVycyh0cnVlKTsKICAgICAgICAgICAgICAgIHJlbmRlclRhYmxlKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyAtLS0gR0VTVEnDk04gTUFFU1RST1MgLS0tCiAgICAgICAgICAgIGxldCBhY3RpdmVNYXN0ZXJUeXBlID0gbnVsbDsKICAgICAgICAgICAgY29uc3Qgb3Blbk1hc3Rlck1vZGFsID0gKHR5cGUpID0+IHsKICAgICAgICAgICAgICAgIGFjdGl2ZU1hc3RlclR5cGUgPSB0eXBlOwogICAgICAgICAgICAgICAgZG9tLm1hc3Rlck1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSB0eXBlID09PSAnT1QnID8gJ08uVC4gUmVnaXN0cmFkYXMnIDogJ1BlZGlkb3MgUmVnaXN0cmFkb3MnOwogICAgICAgICAgICAgICAgcmVuZGVyTWFzdGVyTGlzdCgpOwogICAgICAgICAgICAgICAgZG9tLm1hc3Rlck1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgZG9tLm1hc3Rlck1vZGFsLmNsYXNzTGlzdC5hZGQoJ2ZsZXgnKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgcmVuZGVyTWFzdGVyTGlzdCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBhY3RpdmVNYXN0ZXJUeXBlID09PSAnT1QnID8gc3RhdGUub3RzIDogc3RhdGUucGVkaWRvczsKICAgICAgICAgICAgICAgIGRvbS5tYXN0ZXJMaXN0LmlubmVySFRNTCA9IGxpc3QubWFwKGl0ZW0gPT4gYAogICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0icHgtNCBweS0zIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBiZy13aGl0ZSBob3ZlcjpiZy1zbGF0ZS01MCBib3JkZXItYiBsYXN0OmJvcmRlci0wIGJvcmRlci1zbGF0ZS01MCBncm91cCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS03MDAiPiR7aXRlbX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93LkFwcC5kZWxldGVNYXN0ZXJJdGVtKCcke2l0ZW19JykiIGNsYXNzPSJ0ZXh0LXNsYXRlLTMwMCBob3Zlcjp0ZXh0LXJlZC01MDAgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE5IDdsLS44NjcgMTIuMTQyQTIgMiAwIDAxMTYuMTM4IDIxSDcuODYyYTIgMiAwIDAxLTEuOTk1LTEuODU4TDUgN201IDR2Nm00LTZ2Nm0xLTEwVjRhMSAxIDAgMDAtMS0xaC00YTEgMSAwIDAwLTEgMXYzTTQgN2gxNiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2xpPmApLmpvaW4oJycpIHx8ICc8bGkgY2xhc3M9InAtNCB0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtc2xhdGUtNDAwIGl0YWxpYyI+TGlzdGEgdmFjw61hPC9saT4nOwogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBhZGRNYXN0ZXJJdGVtID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZG9tLm1hc3RlcklucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ID0gYWN0aXZlTWFzdGVyVHlwZSA9PT0gJ09UJyA/IHN0YXRlLm90cyA6IHN0YXRlLnBlZGlkb3M7CiAgICAgICAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXModmFsKSkgeyBsaXN0LnB1c2godmFsKTsgbGlzdC5zb3J0KCk7IH0KICAgICAgICAgICAgICAgIGRvbS5tYXN0ZXJJbnB1dC52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgcmVuZGVyTWFzdGVyTGlzdCgpOwogICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVycyh0cnVlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgZGVsZXRlTWFzdGVySXRlbSA9ICh2YWwpID0+IHsKICAgICAgICAgICAgICAgIGlmKCFjb25maXJtKCLCv0VsaW1pbmFyPyIpKSByZXR1cm47CiAgICAgICAgICAgICAgICBpZihhY3RpdmVNYXN0ZXJUeXBlID09PSAnT1QnKSBzdGF0ZS5vdHMgPSBzdGF0ZS5vdHMuZmlsdGVyKHg9PnghPT12YWwpOwogICAgICAgICAgICAgICAgZWxzZSBzdGF0ZS5wZWRpZG9zID0gc3RhdGUucGVkaWRvcy5maWx0ZXIoeD0+eCE9PXZhbCk7CiAgICAgICAgICAgICAgICByZW5kZXJNYXN0ZXJMaXN0KCk7CiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXJzKHRydWUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIEVYUE9SVEFSIEVYQ0VMIC0tLQogICAgICAgICAgICBjb25zdCBleHBvcnRFeGNlbCA9IChvbmx5RmlsdGVyZWQpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZURhdGEgPSBvbmx5RmlsdGVyZWQgPyBnZXRGaWx0ZXJlZFJlZ2lzdHJvcygpIDogc3RhdGUucmVnaXN0cm9zOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBmbGF0Um93cyA9IFtdOwogICAgICAgICAgICAgICAgc291cmNlRGF0YS5mb3JFYWNoKHJlZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IHJlZy5mYWN0b3JfayAhPT0gdW5kZWZpbmVkID8gcmVnLmZhY3Rvcl9rIDogMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWNpZG8gPSAocmVnLmltcG9ydGVfcGVkaWRvIHx8IDApICogazsKCiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gdGllbmUgZW50cmFkYXMKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZy5lbnRyYWRhcyB8fCByZWcuZW50cmFkYXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYXRSb3dzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIk9UIjogcmVnLm90LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIk7CuiBQZWRpZG8iOiByZWcucGVkaWRvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkltcC4gUGVkaWRvIjogcmVnLmltcG9ydGVfcGVkaWRvIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRmFjdG9yIEsiOiBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBvciBQYXJ0ZXMiOiByZWcucG9yX3BhcnRlcyA/ICJTw40iIDogIk5PIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9kdWNpZG8gVG90YWwiOiBwcm9kdWNpZG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29udGFjdG8iOiByZWcuY29udGFjdG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcGNpw7NuIjogcmVnLmRlc2NyaXBjaW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlZi4gSEVTIjogcmVnLnJlZl9oZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRmVjaGEgQ2VydC4iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJNZXMiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBw7FvIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1wb3J0ZSBGYWN0dXJhZG8iOiAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuYSBmaWxhIHBvciBjZXJ0aWZpY2FjacOzbgogICAgICAgICAgICAgICAgICAgICAgICByZWcuZW50cmFkYXMuZm9yRWFjaChlbnQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKGVudC5mZWNoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGF0Um93cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiT1QiOiByZWcub3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk7CuiBQZWRpZG8iOiByZWcucGVkaWRvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbXAuIFBlZGlkbyI6IHJlZy5pbXBvcnRlX3BlZGlkbyB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJGYWN0b3IgSyI6IGssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBvciBQYXJ0ZXMiOiByZWcucG9yX3BhcnRlcyA/ICJTw40iIDogIk5PIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjaWRvIFRvdGFsIjogcHJvZHVjaWRvLCAvLyBTZSByZXBpdGUgZW4gY2FkYSBmaWxhIGRlbCBtaXNtbyByZWdpc3RybwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250YWN0byI6IHJlZy5jb250YWN0bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcGNpw7NuIjogcmVnLmRlc2NyaXBjaW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWYuIEhFUyI6IHJlZy5yZWZfaGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJGZWNoYSBDZXJ0LiI6IGVudC5mZWNoYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWVzIjogTU9OVEhTW2QuZ2V0TW9udGgoKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkHDsW8iOiBkLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkltcG9ydGUgRmFjdHVyYWRvIjogZW50LmltcG9ydGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjb25zdCB3cyA9IFhMU1gudXRpbHMuanNvbl90b19zaGVldChmbGF0Um93cyk7CiAgICAgICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsKICAgICAgICAgICAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod2IsIHdzLCAiRGVzZ2xvc2UiKTsKICAgICAgICAgICAgICAgIFhMU1gud3JpdGVGaWxlKHdiLCBgQ29udHJvbFBlZGlkb3NfVjZfJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl9Lnhsc3hgKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEpTT04gSW1wb3J0L0V4cG9ydAogICAgICAgICAgICBjb25zdCBleHBvcnRKU09OID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShzdGF0ZSwgbnVsbCwgMildLCB7dHlwZTonYXBwbGljYXRpb24vanNvbid9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IGBCYWNrdXBfUGVkaWRvc19WNi5qc29uYDsKICAgICAgICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgaW1wb3J0RGF0YSA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBmID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgICAgICAgICBpZighZikgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICByLm9ubG9hZCA9IChldnQpID0+IHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShldnQudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGpzb24ub3RzICYmIGpzb24ucGVkaWRvcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUub3RzID0ganNvbi5vdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wZWRpZG9zID0ganNvbi5wZWRpZG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucmVnaXN0cm9zID0gbWlncmF0ZURhdGEoanNvbi5yZWdpc3Ryb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVycygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGFibGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJJbXBvcnRhY2nDs24gZXhpdG9zYSAoRGF0b3MgYWN0dWFsaXphZG9zIGEgVjYgY29uIGNhbXBvcyBkZSBwcm9kdWNjacOzbikiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgYWxlcnQoIkVycm9yIGVuIEpTT04iKTsgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHIucmVhZEFzVGV4dChmKTsKICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gJyc7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyAtLS0gSU5JVCAtLS0KICAgICAgICAgICAgY29uc3QgY2xvc2VNb2RhbHMgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBkb20ubWFzdGVyTW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBkb20ubWFzdGVyTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnZmxleCcpOwogICAgICAgICAgICAgICAgZG9tLnJlZ2lzdHJvTW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBkb20ucmVnaXN0cm9Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4Jyk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBpbml0ID0gKCkgPT4gewogICAgICAgICAgICAgICAgd2luZG93LkFwcCA9IHsgZGVsZXRlTWFzdGVySXRlbSwgZWRpdFJlZ2lzdHJvOiBvcGVuUmVnaXN0cm9Nb2RhbCwgZGVsZXRlUmVnaXN0cm86IChpZCkgPT4geyAKICAgICAgICAgICAgICAgICAgICBpZihjb25maXJtKCLCv0JvcnJhciByZWdpc3RybyB5IHRvZGFzIHN1cyBjZXJ0aWZpY2FjaW9uZXM/IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucmVnaXN0cm9zID0gc3RhdGUucmVnaXN0cm9zLmZpbHRlcihyPT5yLmlkIT09aWQpOyByZW5kZXJGaWx0ZXJzKHRydWUpOyByZW5kZXJUYWJsZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIHJlbW92ZVRlbXBFbnRyeSB9OwoKICAgICAgICAgICAgICAgIC8vIExpc3RlbmVycwogICAgICAgICAgICAgICAgZG9tLm1hbmFnZU90c0J0bi5vbmNsaWNrID0gKCkgPT4gb3Blbk1hc3Rlck1vZGFsKCdPVCcpOwogICAgICAgICAgICAgICAgZG9tLm1hbmFnZVBlZGlkb3NCdG4ub25jbGljayA9ICgpID0+IG9wZW5NYXN0ZXJNb2RhbCgnUEVESURPJyk7CiAgICAgICAgICAgICAgICBkb20uYWRkTWFzdGVyQnRuLm9uY2xpY2sgPSBhZGRNYXN0ZXJJdGVtOwogICAgICAgICAgICAgICAgZG9tLmFkZFJlZ2lzdHJvQnRuLm9uY2xpY2sgPSAoKSA9PiBvcGVuUmVnaXN0cm9Nb2RhbCgpOwogICAgICAgICAgICAgICAgZG9tLmJ0bkFkZEVudHJ5Lm9uY2xpY2sgPSBhZGRUZW1wRW50cnk7CiAgICAgICAgICAgICAgICBkb20uc2F2ZUZ1bGxSZWNvcmRCdG4ub25jbGljayA9IHNhdmVGdWxsUmVjb3JkOwogICAgICAgICAgICAgICAgZG9tLmNsb3NlTW9kYWxCdG5zLmZvckVhY2goYiA9PiBiLm9uY2xpY2sgPSBjbG9zZU1vZGFscyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFJlY2FsY3VsYXIgbcOpdHJpY2FzIGFsIGVzY3JpYmlyIGVuIGVsIG1vZGFsCiAgICAgICAgICAgICAgICBkb20ucmVnSW1wb3J0ZVBlZGlkby5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZU1vZGFsQ2FsY3VsYXRpb25zKTsKICAgICAgICAgICAgICAgIGRvbS5yZWdGYWN0b3JLLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlTW9kYWxDYWxjdWxhdGlvbnMpOwoKICAgICAgICAgICAgICAgIC8vIEZpbHRyb3MKICAgICAgICAgICAgICAgIFtkb20uZmlsdGVyWWVhciwgZG9tLmZpbHRlck90LCBkb20uZmlsdGVyUGVkaWRvLCBkb20uZmlsdGVyTWVzLCBkb20uZmlsdGVyVGV4dF0uZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCByZW5kZXJUYWJsZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZG9tLnNlYXJjaEZpbHRlck90LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gZmlsdGVyU2VsZWN0T3B0aW9ucyhkb20uc2VhcmNoRmlsdGVyT3QsIGRvbS5maWx0ZXJPdCwgc3RhdGUub3RzLCAiVG9kYXMgbGFzIE9UcyIpKTsKICAgICAgICAgICAgICAgIGRvbS5zZWFyY2hGaWx0ZXJQZWRpZG8uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBmaWx0ZXJTZWxlY3RPcHRpb25zKGRvbS5zZWFyY2hGaWx0ZXJQZWRpZG8sIGRvbS5maWx0ZXJQZWRpZG8sIHN0YXRlLnBlZGlkb3MsICJUb2RvcyBsb3MgUGVkaWRvcyIpKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZG9tLnJlc2V0RmlsdGVyc0J0bi5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGRvbS5maWx0ZXJZZWFyLnZhbHVlID0gJyc7IGRvbS5maWx0ZXJPdC52YWx1ZSA9ICcnOyBkb20uZmlsdGVyUGVkaWRvLnZhbHVlID0gJyc7IGRvbS5maWx0ZXJNZXMudmFsdWUgPSAnJzsgZG9tLmZpbHRlclRleHQudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICBkb20uc2VhcmNoRmlsdGVyT3QudmFsdWUgPSAnJzsgZG9tLnNlYXJjaEZpbHRlclBlZGlkby52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcnMoKTsgcmVuZGVyVGFibGUoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gRXhwb3J0cwogICAgICAgICAgICAgICAgZG9tLmV4cG9ydEV4Y2VsRmlsdGVyZWQub25jbGljayA9ICgpID0+IGV4cG9ydEV4Y2VsKHRydWUpOwogICAgICAgICAgICAgICAgZG9tLmV4cG9ydEV4Y2VsQWxsLm9uY2xpY2sgPSAoKSA9PiBleHBvcnRFeGNlbChmYWxzZSk7CiAgICAgICAgICAgICAgICBkb20uZXhwb3J0QnRuLm9uY2xpY2sgPSBleHBvcnRKU09OOwogICAgICAgICAgICAgICAgZG9tLmltcG9ydEJ0bi5vbmNsaWNrID0gKCkgPT4gZG9tLmltcG9ydElucHV0LmNsaWNrKCk7CiAgICAgICAgICAgICAgICBkb20uaW1wb3J0SW5wdXQub25jaGFuZ2UgPSBpbXBvcnREYXRhOwoKICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcnMoKTsKICAgICAgICAgICAgICAgIHJlbmRlclRhYmxlKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gLS0tIEzDk0dJQ0EgSUEgSU5ZRUNUQURBICh2OCkgLS0tCiAgICAgICAgICAgIGNvbnN0IGFpU3RhdGUgPSB7CiAgICAgICAgICAgICAgICBhcGlLZXk6ICJBSXphU3lBZkdObnplbDNUZE15SUU4enVaMlg4MmVzZ2RhbmJXS1EiLAogICAgICAgICAgICAgICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWktY2hhdC1jb250YWluZXInKSwKICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1tZXNzYWdlcycpLAogICAgICAgICAgICAgICAgaW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaS1xdWVyeS1pbnB1dCcpLAogICAgICAgICAgICAgICAgc2VuZEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtYWktYnRuJyksCiAgICAgICAgICAgICAgICBoZWFkZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LWhlYWRlcicpCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBnZXRJbnRlcm5hbFN1bW1hcnkgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBvdE1hcCA9IHt9OwogICAgICAgICAgICAgICAgLy8gVXNhbW9zIGVsICdzdGF0ZS5yZWdpc3Ryb3MnIHF1ZSB5YSBleGlzdGUgZW4gdHUgYXBsaWNhY2nDs24KICAgICAgICAgICAgICAgIHN0YXRlLnJlZ2lzdHJvcy5mb3JFYWNoKHJlZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjdHVyYWRvVG90YWwgPSByZWcuZW50cmFkYXMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIChlLmltcG9ydGUgfHwgMCksIDApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y2lkbyA9IChyZWcuaW1wb3J0ZV9wZWRpZG8gfHwgMCkgKiAocmVnLmZhY3Rvcl9rICE9PSB1bmRlZmluZWQgPyByZWcuZmFjdG9yX2sgOiAxKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIW90TWFwW3JlZy5vdF0pIG90TWFwW3JlZy5vdF0gPSB7IHByb2R1Y2Npb246IDAsIGZhY3R1cmFjaW9uOiAwLCB3aXA6IDAgfTsKICAgICAgICAgICAgICAgICAgICBvdE1hcFtyZWcub3RdLnByb2R1Y2Npb24gKz0gcHJvZHVjaWRvOwogICAgICAgICAgICAgICAgICAgIG90TWFwW3JlZy5vdF0uZmFjdHVyYWNpb24gKz0gZmFjdHVyYWRvVG90YWw7CiAgICAgICAgICAgICAgICAgICAgb3RNYXBbcmVnLm90XS53aXAgKz0gKHByb2R1Y2lkbyAtIGZhY3R1cmFkb1RvdGFsKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG90TWFwKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUFpQ2hhdCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGlzTWluID0gYWlTdGF0ZS5jb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaW5pbWl6ZWQnKTsKICAgICAgICAgICAgICAgIGFpU3RhdGUuY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ21pbmltaXplZCcpOwogICAgICAgICAgICAgICAgYWlTdGF0ZS5tZXNzYWdlcy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhaXNNaW4pOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXQtaW5wdXQtYXJlYScpLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFpc01pbik7CiAgICAgICAgICAgICAgICBpZiAoaXNNaW4pIGFpU3RhdGUuaW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGFkZE1zZyA9IChyb2xlLCB0ZXh0KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiY2hhdC1tc2cgbXNnLSIgKyByb2xlICsgIiBzaGFkb3ctc20iOwogICAgICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gdGV4dDsKICAgICAgICAgICAgICAgIGFpU3RhdGUubWVzc2FnZXMuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICAgICAgICAgIGFpU3RhdGUubWVzc2FnZXMuc2Nyb2xsVG9wID0gYWlTdGF0ZS5tZXNzYWdlcy5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZGl2OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgYXNrSUEgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBxdWVyeSA9IGFpU3RhdGUuaW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuOwogICAgICAgICAgICAgICAgYWRkTXNnKCd1c2VyJywgcXVlcnkpOwogICAgICAgICAgICAgICAgYWlTdGF0ZS5pbnB1dC52YWx1ZSA9ICcnOwoKICAgICAgICAgICAgICAgIGNvbnN0IHR5cGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgdHlwaW5nLmNsYXNzTmFtZSA9ICdjaGF0LW1zZyBtc2ctYWkgc2hhZG93LXNtIGZsZXggZ2FwLTEnOwogICAgICAgICAgICAgICAgdHlwaW5nLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz0idHlwaW5nLWRvdCI+PC9zcGFuPjxzcGFuIGNsYXNzPSJ0eXBpbmctZG90Ij48L3NwYW4+PHNwYW4gY2xhc3M9InR5cGluZy1kb3QiPjwvc3Bhbj4nOwogICAgICAgICAgICAgICAgYWlTdGF0ZS5tZXNzYWdlcy5hcHBlbmRDaGlsZCh0eXBpbmcpOwogICAgICAgICAgICAgICAgYWlTdGF0ZS5tZXNzYWdlcy5zY3JvbGxUb3AgPSBhaVN0YXRlLm1lc3NhZ2VzLnNjcm9sbEhlaWdodDsKCiAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gZ2V0SW50ZXJuYWxTdW1tYXJ5KCk7CiAgICAgICAgICAgICAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSAiRXJlcyB1biBhc2lzdGVudGUgZGUgZ2VzdGnDs24gZGUgb2JyYXMgZGUgTU9OQ09CUkEuIFRpZW5lcyBhY2Nlc28gYSBsb3Mgc3VtYXRvcmlvcyBkZSBPVHMgYWN0dWFsZXMgKE9UOiB7cHJvZHVjY2lvbiwgZmFjdHVyYWNpb24sIHdpcH0pOiAiICsgY29udGV4dCArICIuIFJlc3BvbmRlIGRlIGZvcm1hIG11eSBjb25jaXNhLiBTaSB0ZSBwcmVndW50YW4gcG9yIHVuYSBPVCBlc3BlY8OtZmljYSwgYnVzY2EgZW4gbG9zIGRhdG9zLiBObyBpbnZlbnRlcyByZWdpc3Ryb3MuIjsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuNS1mbGFzaC1wcmV2aWV3LTA5LTIwMjU6Z2VuZXJhdGVDb250ZW50P2tleT0iICsgYWlTdGF0ZS5hcGlLZXksIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50czogW3sgcGFydHM6IFt7IHRleHQ6IHF1ZXJ5IH1dIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHsgcGFydHM6IFt7IHRleHQ6IHN5c3RlbVByb21wdCB9XSB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICAgICAgICAgIHR5cGluZy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhaVRleHQgPSByZXN1bHQuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0IHx8ICJObyBoZSBwb2RpZG8gb2J0ZW5lciByZXNwdWVzdGEuIjsKICAgICAgICAgICAgICAgICAgICBhZGRNc2coJ2FpJywgYWlUZXh0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0eXBpbmcucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgYWRkTXNnKCdhaScsICJFcnJvciBkZSBjb25leGnDs24gY29uIEdlbWluaS4iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGFpU3RhdGUuaGVhZGVyLm9uY2xpY2sgPSB0b2dnbGVBaUNoYXQ7CiAgICAgICAgICAgIGFpU3RhdGUuc2VuZEJ0bi5vbmNsaWNrID0gYXNrSUE7CiAgICAgICAgICAgIGFpU3RhdGUuaW5wdXQub25rZXlwcmVzcyA9IChlKSA9PiB7IGlmKGUua2V5ID09PSAnRW50ZXInKSBhc2tJQSgpOyB9OwogICAgICAgICAgICAvLyAtLS0gRklOIEzDk0dJQ0EgSUEgLS0tCiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmV0dXJuIHsgaW5pdCB9OwogICAgICAgIH0pKCk7CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBBcHAuaW5pdCk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"},"3":{"p":"laboral","c":"PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5Db250cm9sIExhYm9yYWwgKElBIEludGVncmFkYSk8L3RpdGxlPg0KICAgIDwhLS0gSUNPTk9TIEFDVFVBTElaQURPUyAtLT4NCiAgICA8bGluayByZWw9Imljb24iIGhyZWY9Imh0dHBzOi8vbWVkaWEuZ2xhc3Nkb29yLmNvbS9zcWwvOTcwNTM0L2dydXBvLWNvYnJhLXNxdWFyZWxvZ28tMTU2NzU4MjUyMjkzOS5wbmciIHR5cGU9ImltYWdlL3BuZyI+DQogICAgPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uIiBocmVmPSJodHRwczovL21lZGlhLmdsYXNzZG9vci5jb20vc3FsLzk3MDUzNC9ncnVwby1jb2JyYS1zcXVhcmVsb2dvLTE1Njc1ODI1MjI5MzkucG5nIj4NCiAgICA8IS0tIFVzYW1vcyBUYWlsd2luZCBDU1MgcGFyYSB1biBkaXNlw7FvIG1vZGVybm8geSBhZGFwdGFibGUgLS0+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+DQogICAgPCEtLSBMaWJyZXLDrWFzIHBhcmEgZ2VuZXJhciBQREYgeSBYTFMgLS0+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLzIuNS4xL2pzcGRmLnVtZC5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qc3BkZi1hdXRvdGFibGUvMy41LjIzL2pzcGRmLnBsdWdpbi5hdXRvdGFibGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPCEtLSBNYXJrZWQgcGFyYSByZW5kZXJpemFyIG1hcmtkb3duIHNpIGZ1ZXJhIG5lY2VzYXJpbyAtLT4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9tYXJrZWQvbWFya2VkLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tIj4NCiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20iIGNyb3Nzb3JpZ2luPg0KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEA0MDA7NTAwOzYwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPg0KICAgIDxzdHlsZT4NCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOyB9DQogICAgICAgIC5tb2RhbC1lbnRlciB7IGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZS1vdXQ7IH0NCiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4gew0KICAgICAgICAgICAgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogc2NhbGUoMC45NSk7IH0NCiAgICAgICAgICAgIHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfQ0KICAgICAgICB9DQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDogOHB4OyBoZWlnaHQ6IDhweDsgfQ0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsgYmFja2dyb3VuZDogI2YxZjFmMTsgYm9yZGVyLXJhZGl1czogMTBweDsgfQ0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsgYmFja2dyb3VuZDogI2E4YThhODsgYm9yZGVyLXJhZGl1czogMTBweDsgfQ0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHsgYmFja2dyb3VuZDogIzg4ODsgfQ0KICAgICAgICAuYXV0b2NvbXBsZXRlLWNvbnRhaW5lciB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQ0KICAgICAgICAuYXV0b2NvbXBsZXRlLWl0ZW1zIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm9yZGVyOiAxcHggc29saWQgI2QxZDVkYjsgYm9yZGVyLXRvcDogbm9uZTsgei1pbmRleDogOTk7DQogICAgICAgICAgICB0b3A6IDEwMCU7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBvdmVyZmxvdy15OiBhdXRvOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjk1KTsgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgMC41cmVtIDAuNXJlbTsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgfQ0KICAgICAgICAuYXV0b2NvbXBsZXRlLWl0ZW0geyBwYWRkaW5nOiAwLjc1cmVtIDFyZW07IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjg3NXJlbTsgfQ0KICAgICAgICAuYXV0b2NvbXBsZXRlLWl0ZW06aG92ZXIsIC5hdXRvY29tcGxldGUtYWN0aXZlIHsgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMTksIDIzNCwgMjU0LCAwLjkpOyB9DQogICAgICAgIC5hdXRvY29tcGxldGUtaXRlbSBzdHJvbmcgeyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogIzFlNDBhZjsgfQ0KICAgICAgICBzdW1tYXJ5Ojotd2Via2l0LWRldGFpbHMtbWFya2VyIHsgZGlzcGxheTogbm9uZTsgfQ0KICAgICAgICBzdW1tYXJ5IHsgbGlzdC1zdHlsZS10eXBlOiBub25lOyB9DQogICAgICAgIC53YXJuaW5nLXN1Z2dlc3Rpb24geyBjb2xvcjogI2MyNDEwYzsgZm9udC1zdHlsZTogaXRhbGljOyB9DQogICAgICAgIC5lcnJvci1tZXNzYWdlIHsgY29sb3I6ICNiOTFjMWM7IGZvbnQtd2VpZ2h0OiA1MDA7fQ0KICAgICAgICAjZGFpbHktd2FybmluZy1iYW5uZXIgew0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYW5pbWF0aW9uOiBwdWxzZSAycyBpbmZpbml0ZTsNCiAgICAgICAgfQ0KICAgICAgICBAa2V5ZnJhbWVzIHB1bHNlIHsNCiAgICAgICAgICAgIDAlLCAxMDAlIHsgb3BhY2l0eTogMTsgfQ0KICAgICAgICAgICAgNTAlIHsgb3BhY2l0eTogMC44OyB9DQogICAgICAgIH0NCiAgICAgICAgLyogTG9hZGVyIHBhcmEgSUEgKi8NCiAgICAgICAgLmdlbWluaS1sb2FkZXIgew0KICAgICAgICAgICAgYm9yZGVyOiA0cHggc29saWQgI2YzZjNmMzsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDRweCBzb2xpZCAjM2I4MmY2OyAvKiBCbHVlIDUwMCAqLw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgd2lkdGg6IDMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDMwcHg7DQogICAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlOw0KICAgICAgICB9DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7IDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH0gMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH0gfQ0KICAgIA0KICAgICAgICAuYmFkZ2UtaW1wcm9kdWN0aXZvIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZWUyZTI7DQogICAgICAgICAgICBjb2xvcjogI2I5MWMxYzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmY2E1YTU7DQogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHkgY2xhc3M9ImJnLWdyYXktMTAwIHRleHQtZ3JheS04MDAiPg0KDQogICAgPGRpdiBpZD0iYXBwIiBjbGFzcz0iZmxleCBoLXNjcmVlbiI+DQogICAgICAgIDwhLS0gUGFuZWwgTGF0ZXJhbCAtLT4NCiAgICAgICAgPGFzaWRlIGNsYXNzPSJ3LTY0IGJnLXdoaXRlLzgwIGJhY2tkcm9wLWJsdXItc20gYm9yZGVyLXIgYm9yZGVyLWdyYXktMjAwLzUwIHAtNiBmbGV4IGZsZXgtY29sIGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWNlbnRlciBtYi00Ij4NCiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9hcmVwbGEuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzA1L2xvZ29zLW1vbmNvYnJhLmpwZyIgYWx0PSJMb2dvIENvYnJhIiBjbGFzcz0iaC0yNiB3LWF1dG8iPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxoMSBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtYmx1ZS05MDAgbWItNiI+Q29udHJvbCBsYWJvcmFsPC9oMT4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPGRpdiBpZD0icXVpY2stYWN0aW9ucyIgY2xhc3M9ImJvcmRlci10IHB0LTQgbXQtNCBzcGFjZS15LTIiPg0KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgdGV4dC1ncmF5LTgwMCBtYi0yIj5SZWdpc3Ryb3MgTWFlc3Ryb3M8L2gyPg0KICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJtb2RpZnktbWFzdGVycy1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2t5LTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbSBweS0yIHB4LTMgcm91bmRlZC1sZyBob3ZlcjpiZy1za3ktNzAwIHRyYW5zaXRpb24tY29sb3JzIHRleHQtY2VudGVyIj5Nb2RpZmljYXIgT1RzIG8gUGVyc29uYXM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icGVyc29uLWRhdGEtYnRuIiBjbGFzcz0idy1mdWxsIGJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHRleHQtc20gcHktMiBweC0zIHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LWNlbnRlciBtdC0yIj5EYXRvcyBwb3IgUGVyc29uYTwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDwhLS0gTlVFVk86IEJvdMOzbiBkZSBJQSAtLT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJvcmRlci10IHB0LTQgbXQtNCBzcGFjZS15LTIiPg0KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgdGV4dC1wdXJwbGUtODAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPg0KICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgY2xhc3M9ImgtNSB3LTUiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0iY3VycmVudENvbG9yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjMxNiAzLjA1MWExIDEgMCAwMS42MzMgMS4yNjVsLTQgMTJhMSAxIDAgMTEtMS44OTgtLjYzMmw0LTEyYTEgMSAwIDAxMS4yNjUtLjYzM3pNNS43MDcgNi4yOTNhMSAxIDAgMDEwIDEuNDE0TDMuNDE0IDEwbDIuMjkzIDIuMjkzYTEgMSAwIDExLTEuNDE0IDEuNDE0bC0zLTNhMSAxIDAgMDEwLTEuNDE0bDMtM2ExIDEgMCAwMTEuNDE0IDB6bTguNTg2IDBhMSAxIDAgMDExLjQxNCAwbDMgM2ExIDEgMCAwMTAgMS40MTRsLTMgM2ExIDEgMCAxMS0xLjQxNC0xLjQxNEwxNi41ODYgMTBsLTIuMjkzLTIuMjkzYTEgMSAwIDAxMC0xLjQxNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIgLz4NCiAgICAgICAgICAgICAgICAgICAgPC9zdmc+DQogICAgICAgICAgICAgICAgICAgIFNlcnZpY2lvcyBkZSBJQQ0KICAgICAgICAgICAgICAgIDwvaDI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ib3Blbi1nZW1pbmktYnRuIiBjbGFzcz0idy1mdWxsIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXB1cnBsZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIHRleHQtY2VudGVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4+4pyoPC9zcGFuPiBJbXBvcnRhciBjb24gSUENCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIDwhLS0gU0VDQ0nDk04gUFJFR1VOVEFTIEdMT0JBTEVTIC0tPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm9yZGVyLXQgcHQtNCBtdC00IHNwYWNlLXktMiI+DQogICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LXNsYXRlLTgwMCBtYi0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgQW7DoWxpc2lzIGRlIERhdG9zDQogICAgICAgICAgICAgICAgPC9oMj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJvcGVuLWdsb2JhbC1xdWVzdGlvbnMtYnRuIiBjbGFzcz0idy1mdWxsIGJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTcwMCBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNsYXRlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctc20gdGV4dC1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICBQcmVndW50YXMgR2xvYmFsZXMNCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0idGFibGVzLW1hbmFnZW1lbnQiIGNsYXNzPSJib3JkZXItdCBwdC00IG10LTQgZmxleC1ncm93IGZsZXggZmxleC1jb2wgaGlkZGVuIj4NCiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTIiPg0KICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JheS04MDAiPlRhYmxhcyBkZSBEYXRvczwvaDI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0idGFibGVzLWxpc3QiIGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC1hdXRvIGJvcmRlci10IHB0LTQgc3BhY2UteS0yIj4NCiAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iY3JlYXRlLXBhcnRpdGlvbi1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctdGVhbC02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXRlYWwtNzAwIHRyYW5zaXRpb24tY29sb3JzIHNoYWRvdy1zbSB0ZXh0LWNlbnRlciI+DQogICAgICAgICAgICAgICAgICAgIEhhY2VyIHVuYSBQYXJ0aWNpw7NuDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImltcG9ydC1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2xhdGUtNzAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS04MDAgdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIHRleHQtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgSW1wb3J0YXIgZGVzZGUgQXJjaGl2bw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNhdmUtY2hhbmdlcy1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2xhdGUtNzAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS04MDAgdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIHRleHQtY2VudGVyIGhpZGRlbiI+DQogICAgICAgICAgICAgICAgICAgIEd1YXJkYXIgQ2FtYmlvcw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW1wb3J0LWZpbGUtaW5wdXQiIGNsYXNzPSJoaWRkZW4iIGFjY2VwdD0iLmpzb24iPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvYXNpZGU+DQoNCiAgICAgICAgPCEtLSDDgXJlYSBQcmluY2lwYWwgLS0+DQogICAgICAgIDxtYWluIGlkPSJtYWluLWNvbnRlbnQiIGNsYXNzPSJmbGV4LWdyb3cgcC04IGZsZXggZmxleC1jb2wgYmctZ3JheS01MC81MCI+DQogICAgICAgICAgICA8IS0tIEJBTk5FUiBERSBBVklTTyBESUFSSU8gLS0+DQogICAgICAgICAgICA8ZGl2IGlkPSJkYWlseS13YXJuaW5nLWJhbm5lciIgY2xhc3M9ImhpZGRlbiBtYi00IHAtNCBiZy1yZWQtNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHJvdW5kZWQtbGcgc2hhZG93LWxnIHRleHQtY2VudGVyIj48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9InRhYmxlLWFyZWEiIGNsYXNzPSJoLWZ1bGwgZmxleCBmbGV4LWNvbCI+PC9kaXY+DQogICAgICAgIDwvbWFpbj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTU9EQUxFUyAtLT4NCg0KICAgIDwhLS0gTW9kYWwgUHJlZ3VudGFzIEdsb2JhbGVzIC0tPg0KICAgIDxkaXYgaWQ9Imdsb2JhbC1xdWVzdGlvbnMtbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNjAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTYgdy1mdWxsIG1heC13LTR4bCBtb2RhbC1lbnRlciBmbGV4IGZsZXgtY29sIGgtWzg1dmhdIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IG1iLTQiPg0KICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtOTAwIj5BbsOhbGlzaXMgR2xvYmFsIChWaXNpw7NuIE1hY3JvKTwvaDM+DQogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS02MDAiPkNvbnN1bHRhIGRhdG9zIGFncmVnYWRvcyBzb2JyZSBPVHMgeSBQZXJzb25hcyB1dGlsaXphbmRvIFNlcnZpY2lvcyBkZSBJQS48L3A+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iY2xvc2UtZ2xvYmFsLW1vZGFsIiBjbGFzcz0idGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIGZvbnQtYm9sZCB0ZXh0LXhsIj4mdGltZXM7PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC1ncm93IGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuIGJnLWdyYXktNTAgcm91bmRlZC1sZyBib3JkZXIiPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9Imdsb2JhbC1jaGF0LWhpc3RvcnkiIGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHAtNCBzcGFjZS15LTQiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCB0ZXh0LXNsYXRlLTgwMCBwLTQgcm91bmRlZC1sZyBzaGFkb3ctc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgU2lzdGVtYSBsaXN0by4gSGUgcHJlcGFyYWRvIHVuIHJlc3VtZW4gZGUgdG9kYXMgbGFzIE9UcyB5IGVsIHBlcnNvbmFsLjxicj48YnI+DQogICAgICAgICAgICAgICAgICAgICAgICBFamVtcGxvcyBkZSBjb25zdWx0YTo8YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAtICLCv0N1w6FudGFzIGhvcmFzIGltcHJvZHVjdGl2YXMgaGF5IGVuIGxhIE9UIFhYWFg/Ijxicj4NCiAgICAgICAgICAgICAgICAgICAgICAgIC0gIsK/Q3XDoWwgZXMgZWwgdG90YWwgZGUgaG9yYXMgdHJhYmFqYWRhcyBwb3IgW05vbWJyZV0/Ijxicj4NCiAgICAgICAgICAgICAgICAgICAgICAgIC0gIlJlc3VtZW4gZGUgdmFjYWNpb25lcyBwZW5kaWVudGVzIHBvciBwZXJzb25hLiINCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYmctd2hpdGUgYm9yZGVyLXQgZmxleCBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ2xvYmFsLXF1ZXJ5LWlucHV0IiBjbGFzcz0iZmxleC1ncm93IGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBwLTMiIHBsYWNlaG9sZGVyPSJFc2NyaWJhIHN1IGNvbnN1bHRhIGFuYWzDrXRpY2EuLi4iPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZW5kLWdsb2JhbC1xdWVyeS1idG4iIGNsYXNzPSJiZy1zbGF0ZS04MDAgdGV4dC13aGl0ZSBweC04IHB5LTIgcm91bmRlZC1sZyBmb250LWJvbGQgaG92ZXI6Ymctc2xhdGUtOTAwIHRyYW5zaXRpb24tYWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkVudmlhcjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Imdsb2JhbC1zcGlubmVyIiBjbGFzcz0iaGlkZGVuIGFuaW1hdGUtc3BpbiBoLTQgdy00IGJvcmRlci0yIGJvcmRlci13aGl0ZSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTW9kYWwgSUEgQUkgKE5VRVZPKSAtLT4NCiAgICA8ZGl2IGlkPSJnZW1pbmktbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNjAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtNiB3LWZ1bGwgbWF4LXctNXhsIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzkwdmhdIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IG1iLTQiPg0KICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtcHVycGxlLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj7inKg8L3NwYW4+IEltcG9ydGFjacOzbiBJbnRlbGlnZW50ZSAoSUEgQXZhbnphZGEpDQogICAgICAgICAgICAgICAgICAgIDwvaDM+DQogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS02MDAiPkludHJvZHVjZSBwYXJ0ZXMgZGUgaG9yYXMgbWFudXNjcml0b3MgKGZvdG8pLCB0ZXh0byBjb3BpYWRvIGRlIEV4Y2VsIG8gbGVuZ3VhamUgbmF0dXJhbC48L3A+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iY2xvc2UtZ2VtaW5pLW1vZGFsIiBjbGFzcz0idGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIGZvbnQtYm9sZCB0ZXh0LXhsIj4mdGltZXM7PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtNiBmbGV4LWdyb3cgb3ZlcmZsb3ctaGlkZGVuIj4NCiAgICAgICAgICAgICAgICA8IS0tIFBhbmVsIEl6cXVpZXJkbzogRW50cmFkYSAtLT4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTEvMyBmbGV4IGZsZXgtY29sIGdhcC00IGJvcmRlci1yIHByLTQgb3ZlcmZsb3cteS1hdXRvIj4NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIDwhLS0gQ29uZmlndXJhY2nDs24gQVBJIEtleSAtLT4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctZ3JheS01MCBwLTMgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIiBzdHlsZT0iZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS03MDAgbWItMSI+RXN0YWRvIGRlbCBTZXJ2aWNpbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJnZW1pbmktYXBpLWtleSIgcGxhY2Vob2xkZXI9IlNpc3RlbWEgZGUgSUEgQWN0aXZvIiBjbGFzcz0iZmxleC1ncm93IHRleHQtc20gYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgc2hhZG93LXNtIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCBwLTEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNhdmUtYXBpLWtleSIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS03MDAgdGV4dC14cyBweC0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0zMDAiPkd1YXJkYXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtWzEwcHhdIHRleHQtZ3JheS01MDAgbXQtMSI+U2UgZ3VhcmRhIGVuIHR1IG5hdmVnYWRvci4gTm8gc2UgY29tcGFydGUgY29uIG5hZGllLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPCEtLSBFbnRyYWRhIGRlIEltYWdlbiAtLT4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS03MDAgbWItMiI+MS4gU3ViaXIgSW1hZ2VuIChPcGNpb25hbCk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy1mdWxsIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJnZW1pbmktaW1hZ2UtdXBsb2FkIiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy1mdWxsIGgtMzIgYm9yZGVyLTIgYm9yZGVyLXB1cnBsZS0zMDAgYm9yZGVyLWRhc2hlZCByb3VuZGVkLWxnIGN1cnNvci1wb2ludGVyIGJnLXB1cnBsZS01MCBob3ZlcjpiZy1wdXJwbGUtMTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHQtNSBwYi02Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctOCBoLTggbWItMiB0ZXh0LXB1cnBsZS01MDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNCAxNmw0LjU4Ni00LjU4NmEyIDIgMCAwMTIuODI4IDBMMTYgMTZtLTItMmwxLjU4Ni0xLjU4NmEyIDIgMCAwMTIuODI4IDBMMjAgMTRtLTYtNmguMDFNNiAyMGgxMmEyIDIgMCAwMDItMlY2YTIgMiAwIDAwLTItMkg2YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMnoiPjwvcGF0aD48L3N2Zz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPjxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj5DbGljayBwYXJhIHN1YmlyPC9zcGFuPiBwYXJ0ZSBtYW51c2NyaXRvPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJnZW1pbmktaW1hZ2UtdXBsb2FkIiB0eXBlPSJmaWxlIiBjbGFzcz0iaGlkZGVuIiBhY2NlcHQ9ImltYWdlLyoiIC8+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iaW1hZ2UtcHJldmlldy1jb250YWluZXIiIGNsYXNzPSJoaWRkZW4gbXQtMiByZWxhdGl2ZSBncm91cCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iaW1hZ2UtcHJldmlldyIgY2xhc3M9InctZnVsbCBoLWF1dG8gcm91bmRlZCBib3JkZXIgc2hhZG93LXNtIG1heC1oLTQwIG9iamVjdC1jb3ZlciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icmVtb3ZlLWltYWdlLWJ0biIgY2xhc3M9ImFic29sdXRlIHRvcC0xIHJpZ2h0LTEgYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtZnVsbCBwLTEgdy02IGgtNiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIHNoYWRvdyBob3ZlcjpiZy1yZWQtNjAwIj4mdGltZXM7PC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPCEtLSBFbnRyYWRhIGRlIFRleHRvIC0tPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LWdyb3cgZmxleCBmbGV4LWNvbCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNzAwIG1iLTIiPjIuIEluc3RydWNjaW9uZXMgLyBUZXh0byBFeHRyYTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImdlbWluaS1wcm9tcHQtdGV4dCIgY2xhc3M9ImZsZXgtZ3JvdyB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCBwLTIgdGV4dC1zbSIgcGxhY2Vob2xkZXI9IkVqOiAnUHJvY2VzYSBsYSBpbWFnZW4gYWRqdW50YScgbyAnSnVhbiBoaXpvIDggaG9yYXMgYXllciBlbiBsYSBPVCA0MDAgeSBNYXLDrWEgMiBob3JhcyBleHRyYXMnLiI+PC90ZXh0YXJlYT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icHJvY2Vzcy1nZW1pbmktYnRuIiBjbGFzcz0idy1mdWxsIGJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNjAwIHRvLWluZGlnby02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMyBweC00IHJvdW5kZWQtbGcgc2hhZG93IGhvdmVyOm9wYWNpdHktOTAgdHJhbnNpdGlvbi1hbGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+8J+agDwvc3Bhbj4gUHJvY2VzYXIgRGF0b3MNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJnZW1pbmktbG9hZGluZyIgY2xhc3M9ImhpZGRlbiBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktNCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJnZW1pbmktbG9hZGVyIG1iLTIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1wdXJwbGUtODAwIGZvbnQtc2VtaWJvbGQgYW5pbWF0ZS1wdWxzZSI+UHJvY2VzYW5kbyBkYXRvcy4uLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8IS0tIFBhbmVsIERlcmVjaG86IFJldmlzacOzbiAtLT4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTIvMyBmbGV4IGZsZXgtY29sIj4NCiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIG1iLTIgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIFZpc3RhIFByZXZpYSBkZSBEYXRvcw0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImdlbWluaS1jb3VudCIgY2xhc3M9InRleHQtc20gZm9udC1ub3JtYWwgdGV4dC1ncmF5LTUwMCBiZy1ncmF5LTEwMCBweC0yIHB5LTEgcm91bmRlZCI+MCByZWdpc3Ryb3M8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDwvaDQ+DQogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWItMiI+UmV2aXNhIHkgZWRpdGEgbG9zIGRhdG9zIGV4dHJhw61kb3MgYW50ZXMgZGUgZ3VhcmRhcmxvcy4gU2kgaGF5IGNlbGRhcyBlbiByb2pvLCByZXbDrXNhbGFzLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyBvdmVyZmxvdy1hdXRvIGJvcmRlciByb3VuZGVkLWxnIGJnLWdyYXktNTAgcmVsYXRpdmUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJtaW4tdy1mdWxsIGRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMCB0ZXh0LXNtIiBpZD0iZ2VtaW5pLXByZXZpZXctdGFibGUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZCBjbGFzcz0iYmctZ3JheS0xMDAgc3RpY2t5IHRvcC0wIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJweC0yIHB5LTIgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPkZlY2hhPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0icHgtMiBweS0yIHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIj5Dw7NkaWdvPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0icHgtMiBweS0yIHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIj5Ob21icmU8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJweC0yIHB5LTIgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPkhOPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0icHgtMiBweS0yIHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIj5IRTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9InB4LTIgcHktMiB0ZXh0LWxlZnQgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSI+T1Q8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJweC0yIHB5LTIgdGV4dC1sZWZ0IHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPkFjY2nDs248L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5IGNsYXNzPSJiZy13aGl0ZSBkaXZpZGUteSBkaXZpZGUtZ3JheS0yMDAiIGlkPSJnZW1pbmktcHJldmlldy1ib2R5Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBGaWxhcyBnZW5lcmFkYXMgcG9yIEpTIC0tPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iNyIgY2xhc3M9InB4LTQgcHktOCB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb3MgcmVzdWx0YWRvcyBhcGFyZWNlcsOhbiBhcXXDrSBwYXJhIHR1IHJldmlzacOzbi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXQtNCBmbGV4IGp1c3RpZnktZW5kIGdhcC0zIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImNsZWFyLWdlbWluaS1wcmV2aWV3IiBjbGFzcz0icHgtNCBweS0yIGJnLWdyYXktMjAwIHRleHQtZ3JheS03MDAgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCBmb250LW1lZGl1bSI+Qm9ycmFyIFRvZG88L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImNvbmZpcm0tZ2VtaW5pLWltcG9ydCIgY2xhc3M9InB4LTYgcHktMiBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGhvdmVyOmJnLWdyZWVuLTcwMCBmb250LWJvbGQgc2hhZG93LWxnIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIiBkaXNhYmxlZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICDinIUgQ29uZmlybWFyIGUgSW1wb3J0YXIgYSBsYSBBcHANCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTW9kYWwgRGF0b3MgcG9yIFBlcnNvbmEgLS0+DQogICAgPGRpdiBpZD0icGVyc29uLWRhdGEtbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctNnhsIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzkwdmhdIj4NCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1pbmRpZ28tOTAwIGZsZXgtc2hyaW5rLTAiPkRhdG9zIENvbnNvbGlkYWRvcyBwb3IgUGVyc29uYTwvaDM+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LWdyb3cgZmxleCBnYXAtNiBvdmVyZmxvdy1oaWRkZW4iPg0KICAgICAgICAgICAgICAgIDwhLS0gQ29sdW1uYSBkZSBQZXJzb25hcyAtLT4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTEvMyBmbGV4IGZsZXgtY29sIGJvcmRlci1yIHByLTQiPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic2VhcmNoIiBpZD0ic2VhcmNoLXBlcnNvbi1kYXRhIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHBlcnNvbmEuLi4iIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIG1iLTQgcC0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCBmb2N1czpib3JkZXItaW5kaWdvLTUwMCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBlcnNvbi1kYXRhLWxpc3QiIGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHNwYWNlLXktMSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIExpc3RhIGRlIHBlcnNvbmFzIC0tPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8IS0tIENvbHVtbmEgZGUgRGV0YWxsZXMgLS0+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0icGVyc29uLWRhdGEtZGV0YWlscyIgY2xhc3M9InctMi8zIGZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtZ3JheS01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHA+U2VsZWNjaW9uZSB1bmEgcGVyc29uYSBkZSBsYSBsaXN0YSBwYXJhIHZlciBzdXMgZGF0b3MuPC9wPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTQgbXQtOCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNsb3NlLXBlcnNvbi1kYXRhLW1vZGFsIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5DZXJyYXI8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTW9kYWwgUmVnaXN0cm9zIE9ibGlnYXRvcmlvcyAtLT4NCiAgICA8ZGl2IGlkPSJtYW5kYXRvcnktcmVncy1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy00eGwgbW9kYWwtZW50ZXIgZmxleCBmbGV4LWNvbCBtYXgtaC1bOTB2aF0iPg0KICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LW9yYW5nZS05MDAgZmxleC1zaHJpbmstMCI+R2VzdGlvbmFyIFJlZ2lzdHJvcyBPYmxpZ2F0b3Jpb3M8L2gzPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC1ncm93IGZsZXggZ2FwLTYgb3ZlcmZsb3ctaGlkZGVuIj4NCiAgICAgICAgICAgICAgICA8IS0tIENvbHVtbmEgZGUgSGlzdG9yaWFsIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctMS8zIGZsZXggZmxleC1jb2wgYm9yZGVyLXIgcHItNCI+DQogICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS03MDAgbWItMiI+RmVjaGFzIGNvbiBSZWdpc3Ryb3M8L2g0Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJtYW5kYXRvcnktZGF0ZXMtaGlzdG9yeSIgY2xhc3M9ImZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gc3BhY2UteS0xIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gTGFzIGZlY2hhcyBzZSBnZW5lcmFyw6FuIGFxdcOtIC0tPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8IS0tIENvbHVtbmEgUHJpbmNpcGFsIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctMi8zIGZsZXggZmxleC1jb2wiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9Im1hbmRhdG9yeS1kYXRlLXBpY2tlciIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xIj5TZWxlY2Npb25hciBmZWNoYTo8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJtYW5kYXRvcnktZGF0ZS1waWNrZXIiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiBmb2N1czpyaW5nLW9yYW5nZS01MDAgZm9jdXM6Ym9yZGVyLW9yYW5nZS01MDAiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InNlYXJjaCIgaWQ9InNlYXJjaC1tYW5kYXRvcnktcGVyc29uIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHBlcnNvbmEgcG9yIG5vbWJyZSBvIGPDs2RpZ28uLi4iIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIG1iLTQgcC0yIGZvY3VzOnJpbmctb3JhbmdlLTUwMCBmb2N1czpib3JkZXItb3JhbmdlLTUwMCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im1hbmRhdG9yeS1wZW9wbGUtbGlzdCIgY2xhc3M9ImZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gYm9yZGVyIHJvdW5kZWQtbGcgcC00IGJnLWdyYXktNTAvNTAgc3BhY2UteS0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gTGEgbGlzdGEgZGUgcGVyc29uYXMgc2UgZ2VuZXJhcsOhIGFxdcOtIC0tPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTQgbXQtOCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNhbmNlbC1tYW5kYXRvcnktcmVncyIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCI+Q2FuY2VsYXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InNhdmUtbWFuZGF0b3J5LXJlZ3MiIGNsYXNzPSJiZy1vcmFuZ2UtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1vcmFuZ2UtNzAwIj5HdWFyZGFyIFNlbGVjY2nDs248L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTW9kYWwgQXJjaGl2byBkZSBBdmlzb3MgLS0+DQogICAgPGRpdiBpZD0id2FybmluZ3MtYXJjaGl2ZS1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy00eGwgbW9kYWwtZW50ZXIgZmxleCBmbGV4LWNvbCBtYXgtaC1bOTB2aF0iPg0KICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LXllbGxvdy05MDAgZmxleC1zaHJpbmstMCI+QXJjaGl2byBIaXN0w7NyaWNvIGRlIEF2aXNvczwvaDM+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGdhcC00IG1iLTQgcC00IGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgYm9yZGVyIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCBmbGV4LWdyb3ciPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0id2FybmluZ3MtYXJjaGl2ZS1mcm9tIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5EZXNkZTo8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJ3YXJuaW5ncy1hcmNoaXZlLWZyb20iIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gcC0yIGZvY3VzOnJpbmcteWVsbG93LTUwMCBmb2N1czpib3JkZXIteWVsbG93LTUwMCI+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0id2FybmluZ3MtYXJjaGl2ZS10byIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+SGFzdGE6PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0id2FybmluZ3MtYXJjaGl2ZS10byIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIgZm9jdXM6cmluZy15ZWxsb3ctNTAwIGZvY3VzOmJvcmRlci15ZWxsb3ctNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1yaWdodCBmbGV4LXNocmluay0wIHBsLTQiPg0KICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPiZuYnNwOzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9Im9wZW4tZXhjbHVkZWQtZGF5cy1idG4iIGNsYXNzPSJtdC0xIGJnLXdoaXRlIHRleHQtZ3JheS03MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTIwMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHNoYWRvdy1zbSI+DQogICAgICAgICAgICAgICAgICAgICAgICBHZXN0aW9uYXIgRMOtYXMgRXhjbHVpZG9zDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgaWQ9Indhcm5pbmdzLWFyY2hpdmUtY29udGVudCIgY2xhc3M9ImZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gYm9yZGVyIHJvdW5kZWQtbGcgcC00IGJnLWdyYXktNTAvNTAgc3BhY2UteS00Ij4NCiAgICAgICAgICAgICAgICA8IS0tIEVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2byBzZSBnZW5lcmFyw6EgYXF1w60gLS0+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgaXRlbXMtY2VudGVyIHNwYWNlLXgtNCBtdC04IGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY2xvc2Utd2FybmluZ3MtYXJjaGl2ZSIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCI+Q2VycmFyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgDQogICAgPCEtLSBNb2RhbCBwYXJhIEV4Y2x1aXIgRMOtYXMgLS0+DQogICAgPGRpdiBpZD0iZXhjbHVkZWQtZGF5cy1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy00eGwgbW9kYWwtZW50ZXIgZmxleCBmbGV4LWNvbCBtYXgtaC1bOTB2aF0iPg0KICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktOTAwIGZsZXgtc2hyaW5rLTAiPkdlc3Rpb25hciBEw61hcyBFeGNsdWlkb3MgZGUgQXZpc29zPC9oMz4NCiAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgbWItNCI+U2VsZWNjaW9uZSBsb3MgZMOtYXMgcXVlIGRlc2VhIGlnbm9yYXIgYWwgZ2VuZXJhciBhdmlzb3MgKGZlc3Rpdm9zLCBldGMuKS4gRXN0b3MgZMOtYXMgbm8gY29udGFyw6FuIGNvbW8gYXVzZW5jaWFzLjwvcD4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTQgbWItNCBwLTIgYmctZ3JheS0xMDAgcm91bmRlZC1sZyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icHJldi15ZWFyLWJ0biIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkLW1kIGJnLWdyYXktMzAwIGhvdmVyOmJnLWdyYXktNDAwIGZvbnQtYm9sZCI+Jmx0OzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJjdXJyZW50LXllYXItc3BhbiIgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDAgdy0yNCB0ZXh0LWNlbnRlciI+MjAyNTwvc3Bhbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJuZXh0LXllYXItYnRuIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQtbWQgYmctZ3JheS0zMDAgaG92ZXI6YmctZ3JheS00MDAgZm9udC1ib2xkIj4mZ3Q7PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC1ncm93IG92ZXJmbG93LXktYXV0byBib3JkZXIgcm91bmRlZC1sZyBwLTQgYmctZ3JheS01MC81MCI+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iZXhjbHVkZWQtZGF5cy1jYWxlbmRhciIgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTQgZ2FwLTYiPg0KICAgICAgICAgICAgICAgICAgICA8IS0tIExvcyBtZXNlcyB5IGTDrWFzIHNlIGdlbmVyYXLDoW4gYXF1w60gLS0+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTQgbXQtOCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNsb3NlLWV4Y2x1ZGVkLWRheXMtbW9kYWwiIGNsYXNzPSJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAiPkNlcnJhciB5IEFwbGljYXI8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gTW9kYWwgTW9kaWZpY2FkbyBwYXJhIE9UcyB5IFBlcnNvbmFzIC0tPg0KICAgIDxkaXYgaWQ9Im1vZGlmeS1tYXN0ZXJzLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotNTAiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LTR4bCBtb2RhbC1lbnRlciBmbGV4IGZsZXgtY29sIG1heC1oLVs5MHZoXSI+DQogICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi02IHRleHQtYmx1ZS05MDAgZmxleC1zaHJpbmstMCI+TW9kaWZpY2FyIE9UcyB5IFBlcnNvbmFzPC9oMz4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktNCBmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHByLTIiPg0KICAgICAgICAgICAgICAgIDxkZXRhaWxzIGlkPSJkZXRhaWxzLXBlcnNvbmFzIiBjbGFzcz0iYmctZ3JheS01MCByb3VuZGVkLWxnIGJvcmRlciI+DQogICAgICAgICAgICAgICAgICAgIDxzdW1tYXJ5IGNsYXNzPSJwLTQgZm9udC1zZW1pYm9sZCB0ZXh0LWxnIHRleHQtc2t5LTgwMCBjdXJzb3ItcG9pbnRlciBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+UGVyc29uYXM8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTUgaC01IHRyYW5zaXRpb24tdHJhbnNmb3JtIHRyYW5zZm9ybSBkZXRhaWxzLWFycm93IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTkgOWwtNyA3LTctNyIgLz48L3N2Zz4NCiAgICAgICAgICAgICAgICAgICAgPC9zdW1tYXJ5Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBORVc6IFZhY2F0aW9uIEFkanVzdG1lbnQgRGF0ZSAtLT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTYgcC00IGJnLWluZGlnby01MCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItaW5kaWdvLTIwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iYWp1c3RlLXZhY2FjaW9uZXMtZmVjaGEiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtaW5kaWdvLTgwMCBtYi0xIj5GZWNoYSBkZSBFZmVjdG8gcGFyYSBBanVzdGVzIE1hbnVhbGVzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC14cyB0ZXh0LWluZGlnby03MDAgbWItMiI+UGFyYSBjdWFscXVpZXIgcGVyc29uYSBjb24gdW4gIkFqdXN0ZSBWYWMuIiwgbGFzIHZhY2FjaW9uZXMgdG9tYWRhcyBhIHBhcnRpciBkZSBlc3RhIGZlY2hhIHNlIHJlc3RhcsOhbiBkZSBzdSBzYWxkbyBhanVzdGFkby48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJhanVzdGUtdmFjYWNpb25lcy1mZWNoYSIgY2xhc3M9InctZnVsbCBzbTp3LTEvMiBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1pbmRpZ28tNTAwIGZvY3VzOmJvcmRlci1pbmRpZ28tNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBpZD0iYWRkLXBlcnNvbmEtZm9ybSIgY2xhc3M9Im1iLTQgZ3JpZCBncmlkLWNvbHMtMSBzbTpncmlkLWNvbHMtMyBnYXAtMyBpdGVtcy1lbmQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGVyc29uYS1jb2RpZ28iIHJlcXVpcmVkIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIiBwbGFjZWhvbGRlcj0iQ8OzZGlnbyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJwZXJzb25hLW5vbWJyZSIgcmVxdWlyZWQgY2xhc3M9InctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiIHBsYWNlaG9sZGVyPSJOb21icmUgQ29tcGxldG8iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InBlcnNvbmEtdGlwby1jb250cmF0byIgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTYwMCBtYi0xIj5UaXBvPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icGVyc29uYS10aXBvLWNvbnRyYXRvIiBjbGFzcz0idy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBoLVs0MnB4XSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmaWpvIj5GaWpvPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0ZW1wb3JhbCI+VGVtcG9yYWw8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJ3LWZ1bGwgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNzAwIHNtOmNvbC1zcGFuLTMiPkHDsWFkaXIgUGVyc29uYTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InNlYXJjaCIgaWQ9InNlYXJjaC1wZXJzb25hIiBjbGFzcz0idy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBtYi00IiBwbGFjZWhvbGRlcj0iQnVzY2FyIHBvciBub21icmUgbyBjw7NkaWdvLi4uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBlcnNvbmFzLWxpc3QtY29udGFpbmVyIiBjbGFzcz0ibWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIGJvcmRlci10IHB0LTIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2RldGFpbHM+DQoNCiAgICAgICAgICAgICAgICAgPGRldGFpbHMgaWQ9ImRldGFpbHMtb3RzIiBjbGFzcz0iYmctZ3JheS01MCByb3VuZGVkLWxnIGJvcmRlciI+DQogICAgICAgICAgICAgICAgICAgIDxzdW1tYXJ5IGNsYXNzPSJwLTQgZm9udC1zZW1pYm9sZCB0ZXh0LWxnIHRleHQtc2t5LTgwMCBjdXJzb3ItcG9pbnRlciBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+w5NyZGVuZXMgZGUgVHJhYmFqbyAoT1RzKTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTUgaC01IHRyYW5zaXRpb24tdHJhbnNmb3JtIHRyYW5zZm9ybSBkZXRhaWxzLWFycm93IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTkgOWwtNyA3LTctNyIgLz48L3N2Zz4NCiAgICAgICAgICAgICAgICAgICAgPC9zdW1tYXJ5Pg0KICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IGJvcmRlci10Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGlkPSJhZGQtb3QtZm9ybSIgY2xhc3M9Im1iLTQgZ3JpZCBncmlkLWNvbHMtMSBzbTpncmlkLWNvbHMtMyBnYXAtMyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJvdC1jb2RpZ28iIHJlcXVpcmVkIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHNtOmNvbC1zcGFuLTIiIHBsYWNlaG9sZGVyPSJDw7NkaWdvIGRlIE9UIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9InctZnVsbCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAiPkHDsWFkaXIgT1Q8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJzZWFyY2giIGlkPSJzZWFyY2gtb3QiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIG1iLTQiIHBsYWNlaG9sZGVyPSJCdXNjYXIgcG9yIGPDs2RpZ28gZGUgT1QuLi4iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ib3RzLWxpc3QtY29udGFpbmVyIiBjbGFzcz0ibWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIGJvcmRlci10IHB0LTIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2RldGFpbHM+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTggZmxleC1zaHJpbmstMCI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjbG9zZS1tb2RpZnktbWFzdGVycyIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCB0cmFuc2l0aW9uLWNvbG9ycyI+Q2VycmFyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJlZGl0LXJvdy1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy0yeGwgbW9kYWwtZW50ZXIiPg0KICAgICAgICAgICAgPGgzIGlkPSJlZGl0LXJvdy1tb2RhbC10aXRsZSIgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi02IHRleHQtYmx1ZS05MDAiPjwvaDM+DQogICAgICAgICAgICA8Zm9ybSBpZD0iZWRpdC1yb3ctZm9ybSIgY2xhc3M9InNwYWNlLXktNCBtYXgtaC1bNjB2aF0gb3ZlcmZsb3cteS1hdXRvIHByLTIiPjwvZm9ybT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTgiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY2FuY2VsLWVkaXQtcm93IiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIj5DYW5jZWxhcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0ic2F2ZS1yb3ctYnRuIiBjbGFzcz0iYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24tY29sb3JzIj5HdWFyZGFyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8IS0tIE1vZGFsIGRlIELDunNxdWVkYSAtLT4NCiAgICA8ZGl2IGlkPSJzZWFyY2gtbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctNnhsIG1vZGFsLWVudGVyIj4NCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC1ibHVlLTkwMCI+QsO6c3F1ZWRhIFBlcnNvbmFsaXphZGEgLyBGaWx0cmFyPC9oMz4NCiAgICAgICAgICAgIDxkaXYgaWQ9InNlYXJjaC1ydWxlcy1jb250YWluZXIiIGNsYXNzPSJzcGFjZS15LTMgbWF4LWgtWzUwdmhdIG92ZXJmbG93LXktYXV0byBwci0yIj4NCiAgICAgICAgICAgICAgICA8IS0tIExhcyByZWdsYXMgZGUgYsO6c3F1ZWRhIHNlIGdlbmVyYW4gYXF1w60gLS0+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImFkZC1zZWFyY2gtcnVsZS1idG4iIGNsYXNzPSJtdC00IHRleHQtc20gYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtMyByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIj4rIEHDsWFkaXIgQ29uZGljacOzbjwvYnV0dG9uPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG10LTgiPg0KICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iZG93bmxvYWQtZmlsdGVyZWQtcGRmLWJ0biIgY2xhc3M9ImJnLXJlZC03MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXJlZC04MDAgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiIGRpc2FibGVkPkRlc2NhcmdhciBQREY8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJkb3dubG9hZC1maWx0ZXJlZC14bHMtYnRuIiBjbGFzcz0iYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmVlbi03MDAgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiIGRpc2FibGVkPkRlc2NhcmdhciBYTFM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IHNwYWNlLXgtNCI+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY2FuY2VsLXNlYXJjaCIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCB0cmFuc2l0aW9uLWNvbG9ycyI+Q2FuY2VsYXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJhcHBseS1zZWFyY2gtYnRuIiBjbGFzcz0iYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24tY29sb3JzIj5BcGxpY2FyIEZpbHRybzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICAgIA0KICAgIDxzY3JpcHQ+DQogICAgY29uc3QgQXBwID0gKCgpID0+IHsNCiAgICAgICAgLy8gLS0tIENPTlNUQU5URVMgWSBFU1RBRE8gLS0tDQogICAgICAgIGNvbnN0IENBTk9OSUNBTF9FWFBPUlRfT1JERVIgPSBbJ0ZFQ0hBJywgJ0PDs2RpZ28nLCAnTm9tYnJlJywgJ0hOJywgJ0hFJywgJ09UJywgJ1RVUk5PJywgJ0lNUFJPRFVDVElWTycsICdBQlNFTlRJU01PJywgJ0NBTUJJTyBKT1JOQURBJywgJ1BMVVMgUEFSQURBJywgJ0lOQ0lERU5DSUFTJywgJ1NhbGRvIGRlIHZhY2FjaW9uZXMnXTsNCiAgICAgICAgY29uc3QgUFJFREVGSU5FRF9PUFRJT05TID0gew0KICAgICAgICAgICAgJ0hOJzogWycwJywgJzAsNScsICcxJywgJzEsNScsICcyJywgJzIsNScsICczJywgJzMsNScsICc0JywgJzQsNScsICc1JywgJzUsNScsICc2JywgJzYsNScsICc3JywgJzcsNScsICc4J10sDQogICAgICAgICAgICAnSEUnOiBbJzAnLCAnMCw1JywgJzEnLCAnMSw1JywgJzInLCAnMiw1JywgJzMnLCAnMyw1JywgJzQnLCAnNCw1JywgJzUnLCAnNSw1JywgJzYnLCAnNiw1JywgJzcnLCAnNyw1JywgJzgnLCAnOCw1JywgJzknLCAnOSw1JywgJzEwJywgJzEwLDUnLCAnMTEnLCAnMTEsNScsICcxMicsICcxMiw1JywgJzEzJywgJzEzLDUnLCAnMTQnLCAnMTQsNScsICcxNSddLA0KICAgICAgICAgICAgJ1RVUk5PJzogWydESUEnLCAnTk9DSEUnXSwgJ0NBTUJJTyBKT1JOQURBJzogWydTSSddLCAnUExVUyBQQVJBREEnOiBbJ1NJJ10sICdJTVBST0RVQ1RJVk8nOiBbJ1NJJywgJ05PJ10sDQogICAgICAgICAgICAnQUJTRU5USVNNTyc6IFsnVkFDQUNJT05FUycsICdDT01QRU5TQVRPUklPJywgJ0JBSkEgTUVESUNBJywgJ0RFRlVOQ0nDk04gRkFNSUxJQVInLCAnSE9TUElUQUxJWkFDScOTTiBGQU1JTElBUicsICdDVVJTTycsICdSRUNPTk9DSU1JRU5UTyBNRURJQ08nLCAnQ0lUQSBNw4lESUNBJywgJ09UUk9TJ10NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBnZXRJbml0aWFsU3RhdGUgPSAoKSA9PiAoew0KICAgICAgICAgICAgdGFibGVzOiB7DQogICAgICAgICAgICAgICAgJ1BlcnNvbmFzJzogeyBjb2x1bW5zOiBbJ0PDs2RpZ28nLCAnTm9tYnJlJywgJ3RpcG9Db250cmF0bycsICdhanVzdGVWYWNhY2lvbmVzJ10sIGRhdGE6IFtdLCByZWxhdGlvbnM6IHt9IH0sDQogICAgICAgICAgICAgICAgJ09Ucyc6IHsgY29sdW1uczogWydPVCddLCBkYXRhOiBbXSwgcmVsYXRpb25zOiB7fSB9LA0KICAgICAgICAgICAgICAgICdEYXRvcyc6IHsgY29sdW1uczogQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUi5maWx0ZXIoYyA9PiBjICE9PSAnU2FsZG8gZGUgdmFjYWNpb25lcycpLCBkYXRhOiBbXSwgcmVsYXRpb25zOiB7fSB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgbWFuZGF0b3J5UmVnaXN0cmF0aW9uczoge30sIC8vIEZvcm1hdG86IHsgJ1lZWVktTU0tREQnOiBbJ2NvZGlnbzEnLCAnY29kaWdvMiddIH0NCiAgICAgICAgICAgIHdhcm5pbmdzQXJjaGl2ZTogW10sIC8vIEZvcm1hdG86IFt7IGRhdGU6ICdZWVlZLU1NLUREJywgbWlzc2luZzogW3tDw7NkaWdvOiAnYzEnLCBOb21icmU6ICduMSd9XSB9XQ0KICAgICAgICAgICAgZXhjbHVkZWREYXlzOiB7fSwgLy8gRm9ybWF0bzogeyAnWVlZWS1NTS1ERCc6IHRydWUgfQ0KICAgICAgICAgICAgcGVyc29uRGF0YVN1bW1hcnk6IHt9LCAvLyBQYXJhIGhlcmVuY2lhIGRlIGRhdG9zIGVuIHBhcnRpY2lvbmVzDQogICAgICAgICAgICBhanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW86IG51bGwsDQogICAgICAgICAgICBnZW1pbmlBcGlLZXk6ICdBSXphU3lDaFlIbGhoQ2Y2Y01wYkFXV2JXZXgyaDBJVDF0bFBDbmMnLCAvLyBOVUVWTzogRXN0YWRvIHBhcmEgQVBJIEtleQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBhY3RpdmVUYWJsZTogJ0RhdG9zJywNCiAgICAgICAgICAgIGlzRGlydHk6IGZhbHNlLA0KICAgICAgICAgICAgZGF0YUxvYWRlZDogZmFsc2UsDQogICAgICAgICAgICBhY3RpdmVGaWx0ZXJzOiBbXSwNCiAgICAgICAgICAgIGNvZGVUb05hbWVNYXA6IHt9LA0KICAgICAgICAgICAgbmFtZVRvQ29kZU1hcDoge30sDQogICAgICAgIH0pOw0KDQogICAgICAgIGxldCBzdGF0ZSA9IGdldEluaXRpYWxTdGF0ZSgpOw0KICAgICAgICBsZXQgZXhjbHVkZWREYXlzQ3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7DQogICAgICAgIGxldCBnZW1pbmlTdGFnaW5nRGF0YSA9IFtdOyAvLyBOVUVWTzogRXN0YWRvIHRlbXBvcmFsIHBhcmEgaW1wb3J0YWNpw7NuDQogICAgICAgIA0KICAgICAgICBsZXQgYWN0aXZlU2VhcmNoRHJvcGRvd24gPSBudWxsOw0KDQogICAgICAgIGNvbnN0IGRvbSA9IHsNCiAgICAgICAgICAgIHRhYmxlQXJlYTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxlLWFyZWEnKSwNCiAgICAgICAgICAgIG1vZGlmeU1hc3RlcnNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RpZnktbWFzdGVycy1idG4nKSwNCiAgICAgICAgICAgIG1vZGlmeU1hc3RlcnNNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGlmeS1tYXN0ZXJzLW1vZGFsJyksDQogICAgICAgICAgICBhZGRQZXJzb25hRm9ybTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1wZXJzb25hLWZvcm0nKSwNCiAgICAgICAgICAgIGFkZE90Rm9ybTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1vdC1mb3JtJyksDQogICAgICAgICAgICBwZXJzb25hc0xpc3RDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJzb25hcy1saXN0LWNvbnRhaW5lcicpLA0KICAgICAgICAgICAgb3RzTGlzdENvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ290cy1saXN0LWNvbnRhaW5lcicpLA0KICAgICAgICAgICAgY2xvc2VNb2RpZnlNYXN0ZXJzQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtbW9kaWZ5LW1hc3RlcnMnKSwNCiAgICAgICAgICAgIHNlYXJjaFBlcnNvbmFJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1wZXJzb25hJyksDQogICAgICAgICAgICBzZWFyY2hPdElucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLW90JyksDQogICAgICAgICAgICBlZGl0Um93TW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXJvdy1tb2RhbCcpLA0KICAgICAgICAgICAgc2VhcmNoTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtbW9kYWwnKSwNCiAgICAgICAgICAgIGVkaXRSb3dGb3JtOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1yb3ctZm9ybScpLA0KICAgICAgICAgICAgc2F2ZVJvd0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtcm93LWJ0bicpLA0KICAgICAgICAgICAgY2FuY2VsRWRpdFJvd0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbC1lZGl0LXJvdycpLA0KICAgICAgICAgICAgaW1wb3J0QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWJ0bicpLA0KICAgICAgICAgICAgc2F2ZUNoYW5nZXNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLWNoYW5nZXMtYnRuJyksDQogICAgICAgICAgICBjcmVhdGVQYXJ0aXRpb25CdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGUtcGFydGl0aW9uLWJ0bicpLA0KICAgICAgICAgICAgaW1wb3J0RmlsZUlucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWZpbGUtaW5wdXQnKSwNCiAgICAgICAgICAgIHNlYXJjaFJ1bGVzQ29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJ1bGVzLWNvbnRhaW5lcicpLA0KICAgICAgICAgICAgYWRkU2VhcmNoUnVsZUJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1zZWFyY2gtcnVsZS1idG4nKSwNCiAgICAgICAgICAgIGNhbmNlbFNlYXJjaEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbC1zZWFyY2gnKSwNCiAgICAgICAgICAgIGFwcGx5U2VhcmNoQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwbHktc2VhcmNoLWJ0bicpLA0KICAgICAgICAgICAgZG93bmxvYWRGaWx0ZXJlZFBkZkJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLWZpbHRlcmVkLXBkZi1idG4nKSwNCiAgICAgICAgICAgIGRvd25sb2FkRmlsdGVyZWRYbHNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZC1maWx0ZXJlZC14bHMtYnRuJyksDQogICAgICAgICAgICBtYW5kYXRvcnlSZWdzTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYW5kYXRvcnktcmVncy1tb2RhbCcpLA0KICAgICAgICAgICAgbWFuZGF0b3J5RGF0ZVBpY2tlcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmRhdG9yeS1kYXRlLXBpY2tlcicpLA0KICAgICAgICAgICAgbWFuZGF0b3J5UGVvcGxlTGlzdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmRhdG9yeS1wZW9wbGUtbGlzdCcpLA0KICAgICAgICAgICAgY2FuY2VsTWFuZGF0b3J5UmVnc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbC1tYW5kYXRvcnktcmVncycpLA0KICAgICAgICAgICAgc2F2ZU1hbmRhdG9yeVJlZ3NCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLW1hbmRhdG9yeS1yZWdzJyksDQogICAgICAgICAgICB3YXJuaW5nc0FyY2hpdmVNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdzLWFyY2hpdmUtbW9kYWwnKSwNCiAgICAgICAgICAgIHdhcm5pbmdzQXJjaGl2ZUNvbnRlbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5ncy1hcmNoaXZlLWNvbnRlbnQnKSwNCiAgICAgICAgICAgIGNsb3NlV2FybmluZ3NBcmNoaXZlQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2Utd2FybmluZ3MtYXJjaGl2ZScpLA0KICAgICAgICAgICAgZGFpbHlXYXJuaW5nQmFubmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFpbHktd2FybmluZy1iYW5uZXInKSwNCiAgICAgICAgICAgIHNlYXJjaE1hbmRhdG9yeVBlcnNvbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1tYW5kYXRvcnktcGVyc29uJyksDQogICAgICAgICAgICBtYW5kYXRvcnlEYXRlc0hpc3Rvcnk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYW5kYXRvcnktZGF0ZXMtaGlzdG9yeScpLA0KICAgICAgICAgICAgd2FybmluZ3NBcmNoaXZlRnJvbTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdzLWFyY2hpdmUtZnJvbScpLA0KICAgICAgICAgICAgd2FybmluZ3NBcmNoaXZlVG86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5ncy1hcmNoaXZlLXRvJyksDQogICAgICAgICAgICBvcGVuRXhjbHVkZWREYXlzQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbi1leGNsdWRlZC1kYXlzLWJ0bicpLA0KICAgICAgICAgICAgZXhjbHVkZWREYXlzTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGNsdWRlZC1kYXlzLW1vZGFsJyksDQogICAgICAgICAgICBjbG9zZUV4Y2x1ZGVkRGF5c01vZGFsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtZXhjbHVkZWQtZGF5cy1tb2RhbCcpLA0KICAgICAgICAgICAgcHJldlllYXJCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2LXllYXItYnRuJyksDQogICAgICAgICAgICBjdXJyZW50WWVhclNwYW46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LXllYXItc3BhbicpLA0KICAgICAgICAgICAgbmV4dFllYXJCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0LXllYXItYnRuJyksDQogICAgICAgICAgICBleGNsdWRlZERheXNDYWxlbmRhcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4Y2x1ZGVkLWRheXMtY2FsZW5kYXInKSwNCiAgICAgICAgICAgIHBlcnNvbkRhdGFCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJzb24tZGF0YS1idG4nKSwNCiAgICAgICAgICAgIHBlcnNvbkRhdGFNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcnNvbi1kYXRhLW1vZGFsJyksDQogICAgICAgICAgICBjbG9zZVBlcnNvbkRhdGFNb2RhbEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLXBlcnNvbi1kYXRhLW1vZGFsJyksDQogICAgICAgICAgICBzZWFyY2hQZXJzb25EYXRhSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcGVyc29uLWRhdGEnKSwNCiAgICAgICAgICAgIHBlcnNvbkRhdGFMaXN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyc29uLWRhdGEtbGlzdCcpLA0KICAgICAgICAgICAgcGVyc29uRGF0YURldGFpbHM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJzb24tZGF0YS1kZXRhaWxzJyksDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEVMRU1FTlRPUyBHRU1JTkkgTlVFVk9TDQogICAgICAgICAgICBvcGVuSUFCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuLWdlbWluaS1idG4nKSwNCiAgICAgICAgICAgIGdlbWluaU1vZGFsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VtaW5pLW1vZGFsJyksDQogICAgICAgICAgICBjbG9zZUlBTW9kYWxCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1nZW1pbmktbW9kYWwnKSwNCiAgICAgICAgICAgIGdlbWluaUFwaUtleUlucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VtaW5pLWFwaS1rZXknKSwNCiAgICAgICAgICAgIHNhdmVBcGlLZXlCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLWFwaS1rZXknKSwNCiAgICAgICAgICAgIGdlbWluaUltYWdlVXBsb2FkOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VtaW5pLWltYWdlLXVwbG9hZCcpLA0KICAgICAgICAgICAgaW1hZ2VQcmV2aWV3Q29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UtcHJldmlldy1jb250YWluZXInKSwNCiAgICAgICAgICAgIGltYWdlUHJldmlldzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlLXByZXZpZXcnKSwNCiAgICAgICAgICAgIHJlbW92ZUltYWdlQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3ZlLWltYWdlLWJ0bicpLA0KICAgICAgICAgICAgZ2VtaW5pUHJvbXB0VGV4dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbWluaS1wcm9tcHQtdGV4dCcpLA0KICAgICAgICAgICAgcHJvY2Vzc0lBQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY2Vzcy1nZW1pbmktYnRuJyksDQogICAgICAgICAgICBnZW1pbmlMb2FkaW5nOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VtaW5pLWxvYWRpbmcnKSwNCiAgICAgICAgICAgIGdlbWluaVByZXZpZXdCb2R5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VtaW5pLXByZXZpZXctYm9keScpLA0KICAgICAgICAgICAgY2xlYXJJQVByZXZpZXdCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhci1nZW1pbmktcHJldmlldycpLA0KICAgICAgICAgICAgY29uZmlybUlBSW1wb3J0QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybS1nZW1pbmktaW1wb3J0JyksDQogICAgICAgICAgICBnZW1pbmlDb3VudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbWluaS1jb3VudCcpLA0KICAgICAgICAgICAgZ2xvYmFsUXVlc3Rpb25zTW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtcXVlc3Rpb25zLW1vZGFsJyksDQogICAgICAgICAgICBjbG9zZUdsb2JhbE1vZGFsQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtZ2xvYmFsLW1vZGFsJyksDQogICAgICAgICAgICBvcGVuR2xvYmFsUXVlc3Rpb25zQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbi1nbG9iYWwtcXVlc3Rpb25zLWJ0bicpLA0KICAgICAgICAgICAgZ2xvYmFsQ2hhdEhpc3Rvcnk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtY2hhdC1oaXN0b3J5JyksDQogICAgICAgICAgICBnbG9iYWxRdWVyeUlucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2xvYmFsLXF1ZXJ5LWlucHV0JyksDQogICAgICAgICAgICBzZW5kR2xvYmFsUXVlcnlCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kLWdsb2JhbC1xdWVyeS1idG4nKSwNCiAgICAgICAgICAgIGdsb2JhbFNwaW5uZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtc3Bpbm5lcicpLA0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgbWFya0RpcnR5ID0gKCkgPT4geyBpZiAoIXN0YXRlLmlzRGlydHkpIHsgc3RhdGUuaXNEaXJ0eSA9IHRydWU7IHJlbmRlcigpOyB9IH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBidWlsZENvZGVOYW1lTWFwcyA9ICgpID0+IHsNCiAgICAgICAgICAgIHN0YXRlLmNvZGVUb05hbWVNYXAgPSB7fTsNCiAgICAgICAgICAgIHN0YXRlLm5hbWVUb0NvZGVNYXAgPSB7fTsNCiAgICAgICAgICAgIGNvbnN0IHBlcnNvbmFzVGFibGUgPSBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ107DQogICAgICAgICAgICBpZihwZXJzb25hc1RhYmxlKSB7DQogICAgICAgICAgICAgICAgcGVyc29uYXNUYWJsZS5kYXRhLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IHJvd1snQ8OzZGlnbyddOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcm93WydOb21icmUnXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgJiYgbmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuY29kZVRvTmFtZU1hcFtjb2RlXSA9IG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5uYW1lVG9Db2RlTWFwW25hbWVdID0gY29kZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlciA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGhhc0RhdGEgPSBzdGF0ZS50YWJsZXNbc3RhdGUuYWN0aXZlVGFibGVdPy5kYXRhLmxlbmd0aCA+IDAgfHwgc3RhdGUuZGF0YUxvYWRlZDsNCiAgICAgICAgICAgIGRvbS5pbXBvcnRCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgaGFzRGF0YSk7DQogICAgICAgICAgICBkb20uc2F2ZUNoYW5nZXNCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgIWhhc0RhdGEpOw0KICAgICAgICAgICAgZG9tLmNyZWF0ZVBhcnRpdGlvbkJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhaGFzRGF0YSk7DQogICAgICAgICAgICBkb20ucGVyc29uRGF0YUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhaGFzRGF0YSk7DQogICAgICAgICAgICBjaGVja0RhaWx5V2FybmluZ3MoKTsgDQogICAgICAgICAgICByZW5kZXJBY3RpdmVWaWV3KCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gLS0tIEdFTUlOSSBGVU5DVElPTlMgU1RBUlQgLS0tDQogICAgICAgIGNvbnN0IG9wZW5JQU1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgZG9tLmdlbWluaUFwaUtleUlucHV0LnZhbHVlID0gc3RhdGUuZ2VtaW5pQXBpS2V5Ow0KICAgICAgICAgICAgZG9tLmdlbWluaVByb21wdFRleHQudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGRvbS5nZW1pbmlJbWFnZVVwbG9hZC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgZG9tLmltYWdlUHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIGRvbS5pbWFnZVByZXZpZXcuc3JjID0gJyc7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGdlbWluaVN0YWdpbmdEYXRhID0gW107IC8vIFJlc2V0IHN0YWdpbmcNCiAgICAgICAgICAgIHJlbmRlcklBUHJldmlld1RhYmxlKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5nZW1pbmlNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHNhdmVJQUFwaUtleSA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGtleSA9IGRvbS5nZW1pbmlBcGlLZXlJbnB1dC52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBpZiAoa2V5KSB7DQogICAgICAgICAgICAgICAgc3RhdGUuZ2VtaW5pQXBpS2V5ID0ga2V5Ow0KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnZW1pbmlfYXBpX2tleScsIGtleSk7DQogICAgICAgICAgICAgICAgYWxlcnQoJ0FQSSBLZXkgZ3VhcmRhZGEgZW4gZWwgbmF2ZWdhZG9yLicpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgnUG9yIGZhdm9yIGludHJvZHVjZSB1bmEgQVBJIEtleS4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVJbWFnZVVwbG9hZCA9IChlKSA9PiB7DQogICAgICAgICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07DQogICAgICAgICAgICBpZiAoZmlsZSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZG9tLmltYWdlUHJldmlldy5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIGRvbS5pbWFnZVByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW1vdmVJbWFnZSA9ICgpID0+IHsNCiAgICAgICAgICAgIGRvbS5nZW1pbmlJbWFnZVVwbG9hZC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgZG9tLmltYWdlUHJldmlldy5zcmMgPSAnJzsNCiAgICAgICAgICAgIGRvbS5pbWFnZVByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgZ2V0QmFzZTY0SW1hZ2UgPSAoKSA9PiB7DQogICAgICAgICAgICBpZiAoZG9tLmltYWdlUHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIHJldHVybiBkb20uaW1hZ2VQcmV2aWV3LnNyYy5zcGxpdCgnLCcpWzFdOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgYnVpbGRJQUNvbnRleHQgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBwZXJzb25hcyA9IHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhLm1hcChwID0+IGAke3AuQ8OzZGlnb306ICR7cC5Ob21icmV9YCkuam9pbignXG4nKTsNCiAgICAgICAgICAgIGNvbnN0IG90cyA9IHN0YXRlLnRhYmxlc1snT1RzJ10uZGF0YS5tYXAobyA9PiBvLk9UKS5qb2luKCcsICcpOw0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBnZXRUb2RheURhdGVTdHJpbmcoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgIEFDVCBBUyBBIERBVEEgRU5UUlkgRVhQRVJULg0KICAgICAgICAgICAgVE9EQVkgSVM6ICR7dG9kYXl9DQogICAgICAgICAgICANCiAgICAgICAgICAgIENPTlRFWFQgREFUQSAoVXNlIHRoZXNlIHRvIG1hdGNoIG5hbWVzL2NvZGVzIGFjY3VyYXRlbHkuIElmIHVzZXIgd3JpdGVzIGEgbmFtZSwgZmluZCB0aGUgY29kZS4pOg0KICAgICAgICAgICAgDQogICAgICAgICAgICBWQUxJRCBQRVJTT05TIChDb2RlOiBOYW1lKToNCiAgICAgICAgICAgICR7cGVyc29uYXN9DQogICAgICAgICAgICANCiAgICAgICAgICAgIFZBTElEIE9UcyAoV29yayBPcmRlcnMpOg0KICAgICAgICAgICAgJHtvdHN9DQogICAgICAgICAgICANCiAgICAgICAgICAgIElOU1RSVUNUSU9OUzoNCiAgICAgICAgICAgIDEuIEV4dHJhY3QgbGFib3IvdGltZXNoZWV0IGRhdGEgZnJvbSB0aGUgdGV4dCBvciBpbWFnZSBwcm92aWRlZC4NCiAgICAgICAgICAgIDIuIE1hdGNoIG5hbWVzIHRvIHRoZSBjb3JyZWN0ICJDw7NkaWdvIiBmcm9tIHRoZSBsaXN0IGFib3ZlLiBJZiB1bmNlcnRhaW4sIGxlYXZlIEPDs2RpZ28gZW1wdHkgYnV0IGZpbGwgTm9tYnJlLg0KICAgICAgICAgICAgMy4gIkhOIiBhcmUgTm9ybWFsIEhvdXJzLCAiSEUiIGFyZSBPdmVydGltZSBIb3Vycy4NCiAgICAgICAgICAgIDQuIElmIGRhdGUgaXMgInllc3RlcmRheSIsICJ0b2RheSIsIGV0Yy4sIGNhbGN1bGF0ZSB0aGUgWVlZWS1NTS1ERCBiYXNlZCBvbiB0b2RheSdzIGRhdGUgKCR7dG9kYXl9KS4NCiAgICAgICAgICAgIDUuIE91dHB1dCBwdXJlbHkgYSBKU09OIEFSUkFZIG9mIG9iamVjdHMuIE5PIE1hcmtkb3duLCBOTyBleHBsYW5hdGlvbi4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgT1VUUFVUIEpTT04gU0NIRU1BOg0KICAgICAgICAgICAgWw0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgIkZFQ0hBIjogIllZWVktTU0tREQiLA0KICAgICAgICAgICAgICAgICJDw7NkaWdvIjogInN0cmluZyIsDQogICAgICAgICAgICAgICAgIk5vbWJyZSI6ICJzdHJpbmciLA0KICAgICAgICAgICAgICAgICJITiI6ICJzdHJpbmcgKG51bWJlcikiLA0KICAgICAgICAgICAgICAgICJIRSI6ICJzdHJpbmcgKG51bWJlcikiLA0KICAgICAgICAgICAgICAgICJPVCI6ICJzdHJpbmciLA0KICAgICAgICAgICAgICAgICJUVVJOTyI6ICJESUEiIG9yICJOT0NIRSIsDQogICAgICAgICAgICAgICAgIkFCU0VOVElTTU8iOiAiIiwNCiAgICAgICAgICAgICAgICAiSU5DSURFTkNJQVMiOiAiIg0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgICAgICBgOw0KICAgICAgICB9Ow0KDQogICAgICAgIA0KICAgICAgICBjb25zdCBjYWxsSUFBUEkgPSBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICBpZiAoIXN0YXRlLmdlbWluaUFwaUtleSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJQb3IgZmF2b3IgZ3VhcmRhIHR1IEFQSSBLZXkgcHJpbWVyby4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHVzZXJUZXh0ID0gZG9tLmdlbWluaVByb21wdFRleHQudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgY29uc3QgYmFzZTY0SW1hZ2UgPSBnZXRCYXNlNjRJbWFnZSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIXVzZXJUZXh0ICYmICFiYXNlNjRJbWFnZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJQb3IgZmF2b3IgZXNjcmliZSBpbnN0cnVjY2lvbmVzIG8gc3ViZSB1bmEgaW1hZ2VuLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9tLnByb2Nlc3NJQUJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb20uZ2VtaW5pTG9hZGluZy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIGRvbS5nZW1pbmlMb2FkaW5nLmNsYXNzTGlzdC5hZGQoJ2ZsZXgnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBidWlsZElBQ29udGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRzID0gW3sNCiAgICAgICAgICAgICAgICAgICAgcm9sZTogInVzZXIiLA0KICAgICAgICAgICAgICAgICAgICBwYXJ0czogWw0KICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiBzeXN0ZW1Qcm9tcHQgKyAiXG5cbkVOVFJBREEgREVMIFVTVUFSSU86XG4iICsgdXNlclRleHQgfQ0KICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgfV07DQoNCiAgICAgICAgICAgICAgICBpZiAoYmFzZTY0SW1hZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudHNbMF0ucGFydHMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVEYXRhOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6ICJpbWFnZS9wbmciLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJhc2U2NEltYWdlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuNS1mbGFzaC1wcmV2aWV3LTA5LTIwMjU6Z2VuZXJhdGVDb250ZW50P2tleT0ke3N0YXRlLmdlbWluaUFwaUtleX1gLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb250ZW50czogY29udGVudHMgfSkNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JCb2R5LmVycm9yPy5tZXNzYWdlIHx8IHJlc3BvbnNlLnN0YXR1c1RleHQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHRSZXNwb25zZSA9IGRhdGEuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0Ow0KICAgICAgICAgICAgICAgIGlmICghdGV4dFJlc3BvbnNlKSB0aHJvdyBuZXcgRXJyb3IoIkxhIEFQSSBubyBkZXZvbHZpw7MgY29udGVuaWRvLiIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QganNvblN0ciA9IHRleHRSZXNwb25zZS5yZXBsYWNlKC9gYGBqc29uL2csICcnKS5yZXBsYWNlKC9gYGAvZywgJycpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShqc29uU3RyKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWREYXRhKSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJdGVtcyA9IHBhcnNlZERhdGEubWFwKChpdGVtLCBpZHgpID0+ICh7IC4uLml0ZW0sIF90ZW1wSWQ6IERhdGUubm93KCkgKyBpZHggfSkpOw0KICAgICAgICAgICAgICAgICAgICBnZW1pbmlTdGFnaW5nRGF0YSA9IFsuLi5nZW1pbmlTdGFnaW5nRGF0YSwgLi4ubmV3SXRlbXNdOw0KICAgICAgICAgICAgICAgICAgICByZW5kZXJJQVByZXZpZXdUYWJsZSgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJGb3JtYXRvIGRlIHJlc3B1ZXN0YSBJQSBubyB2w6FsaWRvLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgICAgICAgICAgICAgICBhbGVydChgRXJyb3IgZGUgQVBJOiAke2Vycm9yLm1lc3NhZ2V9YCk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGRvbS5wcm9jZXNzSUFCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBkb20uZ2VtaW5pTG9hZGluZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsNCiAgICAgICAgICAgICAgICBkb20uZ2VtaW5pTG9hZGluZy5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4Jyk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgcmVuZGVySUFQcmV2aWV3VGFibGUgPSAoKSA9PiB7DQogICAgICAgICAgICBkb20uZ2VtaW5pQ291bnQudGV4dENvbnRlbnQgPSBgJHtnZW1pbmlTdGFnaW5nRGF0YS5sZW5ndGh9IHJlZ2lzdHJvc2A7DQogICAgICAgICAgICBkb20uY29uZmlybUlBSW1wb3J0QnRuLmRpc2FibGVkID0gZ2VtaW5pU3RhZ2luZ0RhdGEubGVuZ3RoID09PSAwOw0KDQogICAgICAgICAgICBpZiAoZ2VtaW5pU3RhZ2luZ0RhdGEubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgZG9tLmdlbWluaVByZXZpZXdCb2R5LmlubmVySFRNTCA9IGA8dHI+PHRkIGNvbHNwYW49IjciIGNsYXNzPSJweC00IHB5LTggdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTQwMCI+TG9zIHJlc3VsdGFkb3MgYXBhcmVjZXLDoW4gYXF1w60uPC90ZD48L3RyPmA7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb20uZ2VtaW5pUHJldmlld0JvZHkuaW5uZXJIVE1MID0gZ2VtaW5pU3RhZ2luZ0RhdGEubWFwKChyb3csIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZENvZGUgPSBzdGF0ZS5jb2RlVG9OYW1lTWFwW3Jvd1snQ8OzZGlnbyddXTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2RlQ2xhc3MgPSBpc1ZhbGlkQ29kZSA/ICd0ZXh0LWdyZWVuLTcwMCcgOiAndGV4dC1yZWQtNjAwIGZvbnQtYm9sZCc7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICA8dHIgY2xhc3M9ImhvdmVyOmJnLWdyYXktNTAiPg0KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InAtMSBib3JkZXIiPjxpbnB1dCB0eXBlPSJkYXRlIiB2YWx1ZT0iJHtyb3cuRkVDSEEgfHwgJyd9IiBjbGFzcz0idy1mdWxsIHRleHQteHMgYm9yZGVyLW5vbmUgYmctdHJhbnNwYXJlbnQgZm9jdXM6cmluZy0wIiBvbmNoYW5nZT0iQXBwLnVwZGF0ZUlBUm93KCR7aW5kZXh9LCAnRkVDSEEnLCB0aGlzLnZhbHVlKSI+PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJwLTEgYm9yZGVyIj48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IiR7cm93LkPDs2RpZ28gfHwgJyd9IiBjbGFzcz0idy1mdWxsIHRleHQteHMgYm9yZGVyLW5vbmUgYmctdHJhbnNwYXJlbnQgZm9jdXM6cmluZy0wICR7Y29kZUNsYXNzfSIgb25jaGFuZ2U9IkFwcC51cGRhdGVJQVJvdygke2luZGV4fSwgJ0PDs2RpZ28nLCB0aGlzLnZhbHVlKSI+PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJwLTEgYm9yZGVyIj48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IiR7cm93Lk5vbWJyZSB8fCAnJ30iIGNsYXNzPSJ3LWZ1bGwgdGV4dC14cyBib3JkZXItbm9uZSBiZy10cmFuc3BhcmVudCBmb2N1czpyaW5nLTAiIG9uY2hhbmdlPSJBcHAudXBkYXRlSUFSb3coJHtpbmRleH0sICdOb21icmUnLCB0aGlzLnZhbHVlKSI+PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJwLTEgYm9yZGVyIj48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IiR7cm93LkhOIHx8ICcnfSIgY2xhc3M9InctMTIgdGV4dC14cyBib3JkZXItbm9uZSBiZy10cmFuc3BhcmVudCBmb2N1czpyaW5nLTAiIG9uY2hhbmdlPSJBcHAudXBkYXRlSUFSb3coJHtpbmRleH0sICdITicsIHRoaXMudmFsdWUpIj48L3RkPg0KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InAtMSBib3JkZXIiPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iJHtyb3cuSEUgfHwgJyd9IiBjbGFzcz0idy0xMiB0ZXh0LXhzIGJvcmRlci1ub25lIGJnLXRyYW5zcGFyZW50IGZvY3VzOnJpbmctMCIgb25jaGFuZ2U9IkFwcC51cGRhdGVJQVJvdygke2luZGV4fSwgJ0hFJywgdGhpcy52YWx1ZSkiPjwvdGQ+DQogICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icC0xIGJvcmRlciI+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSIke3Jvdy5PVCB8fCAnJ30iIGNsYXNzPSJ3LWZ1bGwgdGV4dC14cyBib3JkZXItbm9uZSBiZy10cmFuc3BhcmVudCBmb2N1czpyaW5nLTAiIG9uY2hhbmdlPSJBcHAudXBkYXRlSUFSb3coJHtpbmRleH0sICdPVCcsIHRoaXMudmFsdWUpIj48L3RkPg0KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InAtMSBib3JkZXIgdGV4dC1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJBcHAuZGVsZXRlSUFSb3coJHtpbmRleH0pIiBjbGFzcz0idGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCBmb250LWJvbGQiPiZ0aW1lczs8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICB9KS5qb2luKCcnKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCB1cGRhdGVJQVJvdyA9IChpbmRleCwgZmllbGQsIHZhbHVlKSA9PiB7DQogICAgICAgICAgICBnZW1pbmlTdGFnaW5nRGF0YVtpbmRleF1bZmllbGRdID0gdmFsdWU7DQogICAgICAgICAgICBpZiAoZmllbGQgPT09ICdDw7NkaWdvJyAmJiBzdGF0ZS5jb2RlVG9OYW1lTWFwW3ZhbHVlXSkgew0KICAgICAgICAgICAgICAgIGdlbWluaVN0YWdpbmdEYXRhW2luZGV4XVsnTm9tYnJlJ10gPSBzdGF0ZS5jb2RlVG9OYW1lTWFwW3ZhbHVlXTsNCiAgICAgICAgICAgICAgICByZW5kZXJJQVByZXZpZXdUYWJsZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGRlbGV0ZUlBUm93ID0gKGluZGV4KSA9PiB7DQogICAgICAgICAgICBnZW1pbmlTdGFnaW5nRGF0YS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgICAgICAgcmVuZGVySUFQcmV2aWV3VGFibGUoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBjb25maXJtSUFJbXBvcnQgPSAoKSA9PiB7DQogICAgICAgICAgICBpZiAoZ2VtaW5pU3RhZ2luZ0RhdGEubGVuZ3RoID09PSAwKSByZXR1cm47DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzWydEYXRvcyddOw0KICAgICAgICAgICAgbGV0IGFkZGVkQ291bnQgPSAwOw0KICAgICAgICAgICAgbGV0IGR1cGxpY2F0ZUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgZ2VtaW5pU3RhZ2luZ0RhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHsgX3RlbXBJZCwgLi4uY2xlYW5Sb3cgfSA9IHJvdzsNCiAgICAgICAgICAgICAgICBpZiAoIWNsZWFuUm93LkZFQ0hBIHx8ICFjbGVhblJvdy5Dw7NkaWdvKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsgDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGlzRHVwbGljYXRlKGNsZWFuUm93KSkgew0KICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVDb3VudCsrOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRhYmxlLmRhdGEucHVzaChjbGVhblJvdyk7DQogICAgICAgICAgICAgICAgICAgIGFkZGVkQ291bnQrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgc3RhdGUuZGF0YUxvYWRlZCA9IHRydWU7DQogICAgICAgICAgICBtYXJrRGlydHkoKTsNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBnZW1pbmlTdGFnaW5nRGF0YSA9IFtdOw0KICAgICAgICAgICAgcmVuZGVySUFQcmV2aWV3VGFibGUoKTsNCiAgICAgICAgICAgIGRvbS5nZW1pbmlNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBhbGVydChgSW1wb3J0YWNpw7NuIGNvbXBsZXRhZGE6XG4tICR7YWRkZWRDb3VudH0gcmVnaXN0cm9zIGHDsWFkaWRvcy5cbi0gJHtkdXBsaWNhdGVDb3VudH0gb21pdGlkb3MgcG9yIHNlciBkdXBsaWNhZG9zIGV4YWN0b3MuYCk7DQogICAgICAgIH07DQogICAgICAgIC8vIC0tLSBHRU1JTkkgRlVOQ1RJT05TIEVORCAtLS0NCg0KICAgICAgICAvLyAtLS0gRlVOQ0lPTkVTIERFIEFOw4FMSVNJUyBHTE9CQUwgKE1BQ1JPKSAtLS0NCiAgICAgICAgY29uc3Qgb3Blbkdsb2JhbFF1ZXN0aW9uc01vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgaWYgKCFzdGF0ZS5kYXRhTG9hZGVkKSByZXR1cm4gYWxlcnQoIlByaW1lcm8gZGViZXMgY2FyZ2FyIG8gaW1wb3J0YXIgZGF0b3MuIik7DQogICAgICAgICAgICBkb20uZ2xvYmFsUXVlc3Rpb25zTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBnZW5lcmF0ZU1hY3JvU3VtbWFyeURhdGEgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBkYXRhID0gc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGE7DQogICAgICAgICAgICBjb25zdCBwZXJzb25hc01hcCA9IHt9Ow0KICAgICAgICAgICAgY29uc3Qgb3RzTWFwID0ge307DQoNCiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSByb3cuQ8OzZGlnbzsNCiAgICAgICAgICAgICAgICBpZiAoY29kZSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBlcnNvbmFzTWFwW2NvZGVdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25hc01hcFtjb2RlXSA9IHsgbm9tYnJlOiByb3cuTm9tYnJlLCB0b3RhbEhOOiAwLCB0b3RhbEhFOiAwLCB2YWNhY2lvbmVzOiAwIH07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG4gPSBwYXJzZUZsb2F0KFN0cmluZyhyb3cuSE4gfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhFIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpOw0KICAgICAgICAgICAgICAgICAgICBwZXJzb25hc01hcFtjb2RlXS50b3RhbEhOICs9IGlzTmFOKGhuKSA/IDAgOiBobjsNCiAgICAgICAgICAgICAgICAgICAgcGVyc29uYXNNYXBbY29kZV0udG90YWxIRSArPSBpc05hTihoZSkgPyAwIDogaGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3cuQUJTRU5USVNNTyA9PT0gJ1ZBQ0FDSU9ORVMnKSBwZXJzb25hc01hcFtjb2RlXS52YWNhY2lvbmVzKys7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3Qgb3QgPSByb3cuT1Q7DQogICAgICAgICAgICAgICAgaWYgKG90KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghb3RzTWFwW290XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3RzTWFwW290XSA9IHsgdG90YWxITjogMCwgdG90YWxIRTogMCwgaW1wcm9kdWN0aXZhczogMCB9Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhuID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhOIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBoZSA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5IRSB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCiAgICAgICAgICAgICAgICAgICAgb3RzTWFwW290XS50b3RhbEhOICs9IGlzTmFOKGhuKSA/IDAgOiBobjsNCiAgICAgICAgICAgICAgICAgICAgb3RzTWFwW290XS50b3RhbEhFICs9IGlzTmFOKGhlKSA/IDAgOiBoZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5JTVBST0RVQ1RJVk8gPT09ICdTSScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG90c01hcFtvdF0uaW1wcm9kdWN0aXZhcyArPSAoaXNOYU4oaG4pID8gMCA6IGhuKSArIChpc05hTihoZSkgPyAwIDogaGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgcmVzdW1lbl9vdHM6IG90c01hcCwNCiAgICAgICAgICAgICAgICByZXN1bWVuX3BlcnNvbmFzOiBwZXJzb25hc01hcCwNCiAgICAgICAgICAgICAgICB0b3RhbF9yZWdpc3Ryb3M6IGRhdGEubGVuZ3RoLA0KICAgICAgICAgICAgICAgIGZlY2hhX2FjdHVhbDogZ2V0VG9kYXlEYXRlU3RyaW5nKCkNCiAgICAgICAgICAgIH07DQogICAgICAgIH07DQoNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGNhbGxHbG9iYWxJQUFQSSA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gZG9tLmdsb2JhbFF1ZXJ5SW5wdXQudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuOw0KDQogICAgICAgICAgICBkb20uZ2xvYmFsUXVlcnlJbnB1dC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgYXBwZW5kQ2hhdE1lc3NhZ2UoJ3VzZXInLCBxdWVyeSk7DQogICAgICAgICAgICBkb20uc2VuZEdsb2JhbFF1ZXJ5QnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGRvbS5nbG9iYWxTcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IG1hY3JvRGF0YSA9IGdlbmVyYXRlTWFjcm9TdW1tYXJ5RGF0YSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9ICJBbmFsaXN0YSBkZSBkYXRvcy4gQmFzZSBkZSBkYXRvczogIiArIEpTT04uc3RyaW5naWZ5KG1hY3JvRGF0YSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL3RleHQucG9sbGluYXRpb25zLmFpLycsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcm9sZTogInN5c3RlbSIsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcm9sZTogInVzZXIiLCBjb250ZW50OiBxdWVyeSB9DQogICAgICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6ICJvcGVuYWkiDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhaVRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgYXBwZW5kQ2hhdE1lc3NhZ2UoJ2FpJywgYWlUZXh0IHx8ICJTaW4gcmVzcHVlc3RhIGRlbCBzaXN0ZW1hLiIpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGFwcGVuZENoYXRNZXNzYWdlKCdhaScsICJFcnJvciBkZSBzaXN0ZW1hOiAiICsgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGRvbS5zZW5kR2xvYmFsUXVlcnlCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBkb20uZ2xvYmFsU3Bpbm5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBhcHBlbmRDaGF0TWVzc2FnZSA9IChyb2xlLCB0ZXh0KSA9PiB7DQogICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSByb2xlID09PSAndXNlcicgDQogICAgICAgICAgICAgICAgPyAnYmctc2xhdGUtMjAwIHRleHQtc2xhdGUtODAwIHAtNCByb3VuZGVkLXhsIG1heC13LVs4NSVdIHNlbGYtZW5kIG1sLWF1dG8gc2hhZG93LXNtJyANCiAgICAgICAgICAgICAgICA6ICdiZy1pbmRpZ28tNTAgYm9yZGVyIGJvcmRlci1pbmRpZ28tMTAwIHRleHQtc2xhdGUtODAwIHAtNCByb3VuZGVkLXhsIG1heC13LVs4NSVdIHNoYWRvdy1zbSc7DQogICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gbWFya2VkLnBhcnNlKHRleHQpOw0KICAgICAgICAgICAgZG9tLmdsb2JhbENoYXRIaXN0b3J5LmFwcGVuZENoaWxkKGRpdik7DQogICAgICAgICAgICBkb20uZ2xvYmFsQ2hhdEhpc3Rvcnkuc2Nyb2xsVG9wID0gZG9tLmdsb2JhbENoYXRIaXN0b3J5LnNjcm9sbEhlaWdodDsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW5kZXJBY3RpdmVWaWV3ID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdGFibGUgPSBzdGF0ZS50YWJsZXNbc3RhdGUuYWN0aXZlVGFibGVdOw0KICAgICAgICAgICAgaWYgKCF0YWJsZSkgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgZGlydHlJbmRpY2F0b3IgPSBzdGF0ZS5pc0RpcnR5ID8gJzxzcGFuIGNsYXNzPSJ0ZXh0LXJlZC01MDAgbWwtMiIgdGl0bGU9IkNhbWJpb3Mgc2luIGd1YXJkYXIiPio8L3NwYW4+JyA6ICcnOw0KICAgICAgICAgICAgY29uc3QgZmlsdGVySW5kaWNhdG9yID0gc3RhdGUuYWN0aXZlRmlsdGVycy5sZW5ndGggPiAwID8gYDxkaXYgY2xhc3M9Im1sLTQgZmxleCBpdGVtcy1jZW50ZXIgdGV4dC1zbSBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIHB4LTMgcHktMSByb3VuZGVkLWZ1bGwiPjxzdmcgY2xhc3M9InctNCBoLTQgbXItMiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjAgMjAiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMgM2ExIDEgMCAwMTEtMWgxMmExIDEgMCAwMTEgMXYzYTEgMSAwIDAxLS4yOTMuNzA3TDEyIDExLjQxNFYxNWExIDEgMCAwMS0uMjkzLjcwN2wtMiAyQTEgMSAwIDAxOCAxN3YtNS41ODZMMy4yOTMgNi43MDdBMSAxIDAgMDEzIDZWM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvc3ZnPkZpbHRybyBhY3Rpdm88YnV0dG9uIGlkPSJjbGVhci1maWx0ZXItYnRuIiBjbGFzcz0ibWwtMiBmb250LWJvbGQgaG92ZXI6dGV4dC1yZWQtNjAwIj4mdGltZXM7PC9idXR0b24+PC9kaXY+YCA6ICcnOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBsZXQgaGVhZGVyQnV0dG9ucyA9IGANCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJhZGQtcm93LWJ0biIgY2xhc3M9ImJnLXNreS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNreS03MDAiPisgQcOxYWRpciBSZWdpc3RybzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlYXJjaC1idG4iIGNsYXNzPSJiZy1za3ktNTAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1za3ktNjAwIj5CdXNjYXIgLyBGaWx0cmFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ibWFuZGF0b3J5LXJlZ3MtYnRuIiBjbGFzcz0iYmctb3JhbmdlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6Ymctb3JhbmdlLTcwMCI+UmVnaXN0cm9zIE9ibGlnYXRvcmlvczwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Indhcm5pbmdzLWFyY2hpdmUtYnRuIiBjbGFzcz0iYmcteWVsbG93LTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmcteWVsbG93LTcwMCI+QXJjaGl2byBkZSBBdmlzb3M8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJleHBvcnQtdGFibGUtcGRmLWJ0biIgY2xhc3M9ImJnLXJlZC03MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXJlZC04MDAiPkV4cG9ydGFyIFBERjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImV4cG9ydC10YWJsZS14bHMtYnRuIiBjbGFzcz0iYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmVlbi03MDAiPkV4cG9ydGFyIFhMUzwvYnV0dG9uPg0KICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbGV0IGhlYWRlckh0bWwgPSBgDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTYgZmxleC13cmFwIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIGZsZXgtd3JhcCBqdXN0aWZ5LXN0YXJ0IGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICR7aGVhZGVyQnV0dG9uc30NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICR7ZmlsdGVySW5kaWNhdG9yfSAke2RpcnR5SW5kaWNhdG9yfQ0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20udGFibGVBcmVhLmlubmVySFRNTCA9IGhlYWRlckh0bWw7DQogICAgICAgICAgICBkb20udGFibGVBcmVhLmlubmVySFRNTCArPSByZW5kZXJUYWJsZVZpZXcoKTsNCg0KICAgICAgICAgICAgY29uc3QgdGFibGVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFibGUtc2Nyb2xsLWNvbnRhaW5lcicpOw0KICAgICAgICAgICAgaWYgKHRhYmxlQ29udGFpbmVyICYmIHN0YXRlLmFjdGl2ZUZpbHRlcnMubGVuZ3RoID09PSAwKSB7IA0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0YWJsZUNvbnRhaW5lci5zY3JvbGxUb3AgPSB0YWJsZUNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7DQogICAgICAgICAgICAgICAgfSwgMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGFkZEFjdGl2ZVZpZXdFdmVudExpc3RlbmVycygpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlclRhYmxlVmlldyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzW3N0YXRlLmFjdGl2ZVRhYmxlXTsNCiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkQW5kU29ydGVkRGF0YSA9IGFwcGx5RmlsdGVycyh0YWJsZS5kYXRhKTsgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlDb2x1bW5zID0gQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUi5maWx0ZXIoYyA9PiB0YWJsZS5jb2x1bW5zLmluY2x1ZGVzKGMpICYmIGMgIT09ICdTYWxkbyBkZSB2YWNhY2lvbmVzJyk7DQogICAgICAgICAgICBjb25zdCBvdGhlckNvbHVtbnMgPSB0YWJsZS5jb2x1bW5zLmZpbHRlcihjID0+ICFDQU5PTklDQUxfRVhQT1JUX09SREVSLmluY2x1ZGVzKGMpKTsNCiAgICAgICAgICAgIGNvbnN0IGZpbmFsQ29sdW1ucyA9IFsuLi5kaXNwbGF5Q29sdW1ucywgLi4ub3RoZXJDb2x1bW5zXTsNCg0KICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gYDx0cj4ke2ZpbmFsQ29sdW1ucy5tYXAoY29sID0+IGA8dGggc2NvcGU9ImNvbCIgY2xhc3M9InB4LTQgcHktMyB0ZXh0LWxlZnQgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciI+JHtjb2x9PC90aD5gKS5qb2luKCcnKX08dGggc2NvcGU9ImNvbCIgY2xhc3M9InJlbGF0aXZlIHB4LTQgcHktMyI+PHNwYW4gY2xhc3M9InNyLW9ubHkiPkFjY2lvbmVzPC9zcGFuPjwvdGg+PC90cj5gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBkYXRhVG9SZW5kZXIgPSAoc3RhdGUuYWN0aXZlRmlsdGVycy5sZW5ndGggPiAwKSANCiAgICAgICAgICAgICAgICA/IGZpbHRlcmVkQW5kU29ydGVkRGF0YSANCiAgICAgICAgICAgICAgICA6IGZpbHRlcmVkQW5kU29ydGVkRGF0YS5zbGljZSgtNTApOyANCg0KICAgICAgICAgICAgY29uc3QgYm9keVJvd3MgPSBkYXRhVG9SZW5kZXIubWFwKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBmaW5hbENvbHVtbnMubWFwKGNvbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSByb3dbY29sXSB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCA9PT0gJ09UJyAmJiByb3dbJ0lNUFJPRFVDVElWTyddID09PSAnU0knKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDx0ZCBjbGFzcz0icHgtNCBweS00IHdoaXRlc3BhY2Utbm93cmFwIHRleHQtc20gdGV4dC1ncmF5LTcwMCI+JHtlc2NhcGVIdG1sKHZhbCl9IDxzcGFuIGNsYXNzPSJiYWRnZS1pbXByb2R1Y3Rpdm8iIHRpdGxlPSJIb3JhcyBJbXByb2R1Y3RpdmFzIj5JTVA8L3NwYW4+PC90ZD5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChjb2wgPT09ICdJTVBST0RVQ1RJVk8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0ltcCA9IHZhbCA9PT0gJ1NJJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPHRkIGNsYXNzPSJweC00IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC14cyBmb250LWJvbGQgJHtpc0ltcCA/ICd0ZXh0LXJlZC02MDAnIDogJ3RleHQtZ3JheS00MDAnfSI+JHtlc2NhcGVIdG1sKHZhbCl9PC90ZD5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBgPHRkIGNsYXNzPSJweC00IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIj4ke2VzY2FwZUh0bWwodmFsKX08L3RkPmA7DQogICAgICAgICAgICAgICAgfSkuam9pbignJyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGA8dHIgZGF0YS1vcmlnaW5hbC1pbmRleD0iJHtyb3cub3JpZ2luYWxJbmRleH0iPiR7Y2VsbHN9PHRkIGNsYXNzPSJweC00IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1yaWdodCB0ZXh0LXNtIGZvbnQtbWVkaXVtIHNwYWNlLXgtMiI+PGJ1dHRvbiBjbGFzcz0iZWRpdC1yb3ctYnRuIHRleHQtYmx1ZS02MDAgaG92ZXI6dGV4dC1ibHVlLTkwMCIgZGF0YS1pbmRleD0iJHtyb3cub3JpZ2luYWxJbmRleH0iPkVkaXRhcjwvYnV0dG9uPjxidXR0b24gY2xhc3M9ImRlbGV0ZS1yb3ctYnRuIHRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC05MDAiIGRhdGEtaW5kZXg9IiR7cm93Lm9yaWdpbmFsSW5kZXh9Ij5FbGltaW5hcjwvYnV0dG9uPjwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgfSkuam9pbignJyk7DQoNCiAgICAgICAgICAgIGxldCBmb290ZXJNZXNzYWdlUm93ID0gJyc7DQogICAgICAgICAgICBpZiAoZmlsdGVyZWRBbmRTb3J0ZWREYXRhLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGZvb3Rlck1lc3NhZ2VSb3cgPSBgPHRyPjx0ZCBjb2xzcGFuPSIke2ZpbmFsQ29sdW1ucy5sZW5ndGggKyAxfSIgY2xhc3M9InRleHQtY2VudGVyIHB5LTggdGV4dC1ncmF5LTUwMCI+Tm8gaGF5IHJlZ2lzdHJvcyBwYXJhIG1vc3RyYXIuIFB1ZWRlIGHDsWFkaXIgdW5vIGNvbiBlbCBib3TDs24gIisgQcOxYWRpciBSZWdpc3RybyIuPC90ZD48L3RyPmA7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlcmVkQW5kU29ydGVkRGF0YS5sZW5ndGggPiA1MCAmJiBzdGF0ZS5hY3RpdmVGaWx0ZXJzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGZvb3Rlck1lc3NhZ2VSb3cgPSBgPHRyPjx0ZCBjb2xzcGFuPSIke2ZpbmFsQ29sdW1ucy5sZW5ndGggKyAxfSIgY2xhc3M9InRleHQtY2VudGVyIHB5LTQgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIGJnLWdyYXktNTAvOTAgc3RpY2t5IGJvdHRvbS0wIj4NCiAgICAgICAgICAgICAgICAgICAgTW9zdHJhbmRvIGxvcyDDumx0aW1vcyA1MCBkZSAke2ZpbHRlcmVkQW5kU29ydGVkRGF0YS5sZW5ndGh9IHJlZ2lzdHJvcyB0b3RhbGVzLiBVc2UgIkJ1c2NhciAvIEZpbHRyYXIiIHBhcmEgdmVyIHRvZG9zLg0KICAgICAgICAgICAgICAgIDwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyBiZy13aGl0ZS84MCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQtbGcgc2hhZG93IG92ZXJmbG93LWhpZGRlbiI+PGRpdiBpZD0idGFibGUtc2Nyb2xsLWNvbnRhaW5lciIgY2xhc3M9Im92ZXJmbG93LWF1dG8gaC1mdWxsIj48dGFibGUgY2xhc3M9Im1pbi13LWZ1bGwgZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwLzUwIj48dGhlYWQgY2xhc3M9ImJnLWdyYXktNTAvOTAgYmFja2Ryb3AtYmx1ci1zbSBzdGlja3kgdG9wLTAgei0xMCI+JHtoZWFkZXJSb3d9PC90aGVhZD48dGJvZHkgY2xhc3M9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMC81MCI+JHtib2R5Um93c30ke2Zvb3Rlck1lc3NhZ2VSb3d9PC90Ym9keT48L3RhYmxlPjwvZGl2PjwvZGl2PmA7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBhZGRNb2RhbEZvcm1BdXRvbWF0aW9ucyA9IChmb3JtRWxlbWVudCkgPT4gew0KICAgICAgICAgICAgY29uc3QgYWJzZW50aXNtb1NlbGVjdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbD0iQUJTRU5USVNNTyJdJyk7DQogICAgICAgICAgICBjb25zdCBpbmNpZGVuY2lhc0lucHV0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29sPSJJTkNJREVOQ0lBUyJdJyk7DQogICAgICAgICAgICBjb25zdCBobklucHV0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29sPSJITiJdJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZUlucHV0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0tcm93LUZFQ0hBJyk7DQogICAgICAgICAgICBjb25zdCBlbmREYXRlSW5wdXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybS1yb3ctRkVDSEEtZmluJyk7DQogICAgICAgICAgICBjb25zdCBtdWx0aURheVRvZ2dsZSA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtdWx0aS1kYXktdG9nZ2xlJyk7DQoNCiAgICAgICAgICAgIGlmICghYWJzZW50aXNtb1NlbGVjdCkgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCB1cGRhdGVJbmNpZGVuY2lhcyA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIWluY2lkZW5jaWFzSW5wdXQpIHJldHVybjsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoYWJzZW50aXNtb1NlbGVjdC52YWx1ZSA9PT0gJ1ZBQ0FDSU9ORVMnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTXVsdGkgPSBtdWx0aURheVRvZ2dsZSA/IG11bHRpRGF5VG9nZ2xlLmNoZWNrZWQgOiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRWYWwgPSBzdGFydERhdGVJbnB1dCA/IHN0YXJ0RGF0ZUlucHV0LnZhbHVlIDogZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29sPSJGRUNIQSJdJykudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZFZhbCA9IGlzTXVsdGkgJiYgZW5kRGF0ZUlucHV0ID8gZW5kRGF0ZUlucHV0LnZhbHVlIDogc3RhcnRWYWw7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXQgPSAoZGF0ZVN0cikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRlU3RyKSByZXR1cm4gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0ciArICdUMDA6MDA6MDAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnIH0pOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGZvcm1hdChzdGFydFZhbCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBmb3JtYXQoZW5kVmFsKTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZSAmJiBlbmREYXRlICYmIHN0YXJ0VmFsICE9PSBlbmRWYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gYERlbCAke3N0YXJ0RGF0ZX0gYWwgJHtlbmREYXRlfWA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhcnREYXRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGBTw7NsbyBlbCAke3N0YXJ0RGF0ZX1gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpbmNpZGVuY2lhc0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247DQogICAgICAgICAgICAgICAgICAgIGluY2lkZW5jaWFzSW5wdXQucmVhZE9ubHkgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBpbmNpZGVuY2lhc0lucHV0LmNsYXNzTGlzdC5hZGQoJ2JnLWdyYXktMjAwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9QYXR0ZXJuID0gL14oRGVsfFPDs2xvIGVsKSBcZHsxLDJ9IGRlIFthLXpdKyggYWwgXGR7MSwyfSBkZSBbYS16XSspPyQvaTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGF1dG9QYXR0ZXJuLnRlc3QoaW5jaWRlbmNpYXNJbnB1dC52YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgaW5jaWRlbmNpYXNJbnB1dC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGluY2lkZW5jaWFzSW5wdXQucmVhZE9ubHkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgaW5jaWRlbmNpYXNJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmF5LTIwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCB1cGRhdGVDb21wZW5zYXRvcmlvSE4gPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFobklucHV0KSByZXR1cm47DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGFic2VudGlzbW9TZWxlY3QudmFsdWUgPT09ICdDT01QRU5TQVRPUklPJykgew0KICAgICAgICAgICAgICAgICAgICBobklucHV0LnZhbHVlID0gJzgnOw0KICAgICAgICAgICAgICAgICAgICBobklucHV0LnJlYWRPbmx5ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgaG5JbnB1dC5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTIwMCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBobklucHV0LnJlYWRPbmx5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGhuSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS0yMDAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYWJzZW50aXNtb1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgdXBkYXRlSW5jaWRlbmNpYXMoKTsNCiAgICAgICAgICAgICAgICB1cGRhdGVDb21wZW5zYXRvcmlvSE4oKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZihzdGFydERhdGVJbnB1dCkgc3RhcnREYXRlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlSW5jaWRlbmNpYXMpOw0KICAgICAgICAgICAgaWYoZW5kRGF0ZUlucHV0KSBlbmREYXRlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlSW5jaWRlbmNpYXMpOw0KICAgICAgICAgICAgaWYobXVsdGlEYXlUb2dnbGUpIG11bHRpRGF5VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHVwZGF0ZUluY2lkZW5jaWFzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdXBkYXRlSW5jaWRlbmNpYXMoKTsNCiAgICAgICAgICAgIHVwZGF0ZUNvbXBlbnNhdG9yaW9ITigpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlckVkaXRSb3dNb2RhbCA9IChyb3dJbmRleCA9IG51bGwpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzW3N0YXRlLmFjdGl2ZVRhYmxlXTsNCiAgICAgICAgICAgIGNvbnN0IGlzQWRkaW5nID0gcm93SW5kZXggPT09IG51bGw7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXJvdy1tb2RhbC10aXRsZScpLnRleHRDb250ZW50ID0gaXNBZGRpbmcgPyBgQcOxYWRpciBSZWdpc3Ryb3MgTcO6bHRpcGxlc2AgOiBgRWRpdGFyIFJlZ2lzdHJvYDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbGV0IGZvcm1IdG1sID0gJyc7DQoNCiAgICAgICAgICAgIGlmIChpc0FkZGluZykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07DQogICAgICAgICAgICAgICAgY29uc3QgY29tbW9uQ2xhc3NlcyA9ICJtdC0xIGJsb2NrIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZvcm1IdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImZvcm0tcm93LUZFQ0hBIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5GZWNoYSBJbmljaW88L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZm9ybS1yb3ctRkVDSEEiIHZhbHVlPSIke3RvZGF5fSIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJtdWx0aS1kYXktcmFuZ2UiIGNsYXNzPSJoaWRkZW4iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImZvcm0tcm93LUZFQ0hBLWZpbiIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+RmVjaGEgRmluPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImZvcm0tcm93LUZFQ0hBLWZpbiIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHRleHQtc20gY3Vyc29yLXBvaW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Im11bHRpLWRheS10b2dnbGUiIGNsYXNzPSJoLTQgdy00IHJvdW5kZWQgYm9yZGVyLWdyYXktMzAwIHRleHQtYmx1ZS02MDAgZm9jdXM6cmluZy1ibHVlLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+QcOxYWRpciBwYXJhIHVuIHJhbmdvIGRlIGZlY2hhczwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBwZW9wbGUgPSBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5zbGljZSgpLnNvcnQoKGEsIGIpID0+IGEuTm9tYnJlLmxvY2FsZUNvbXBhcmUoYi5Ob21icmUpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwZW9wbGVMaXN0SHRtbCA9IHBlb3BsZS5tYXAocGVyc29uID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyc29uTmFtZSA9IGVzY2FwZUh0bWwocGVyc29uLk5vbWJyZSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbkNvZGUgPSBlc2NhcGVIdG1sKHBlcnNvbi5Dw7NkaWdvKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIHAtMiByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMjAwLzgwIGN1cnNvci1wb2ludGVyIHBlcnNvbi1zZWxlY3Rpb24tbGFiZWwiIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbmFtZT0iJHtwZXJzb25OYW1lLnRvTG93ZXJDYXNlKCl9IiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNvZGU9IiR7cGVyc29uQ29kZS50b0xvd2VyQ2FzZSgpfSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJHtwZXJzb25Db2RlfSIgY2xhc3M9InBlcnNvbi1jaGVja2JveCBoLTQgdy00IHJvdW5kZWQgYm9yZGVyLWdyYXktMzAwIHRleHQtYmx1ZS02MDAgZm9jdXM6cmluZy1ibHVlLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtwZXJzb25OYW1lfSA8c3BhbiBjbGFzcz0idGV4dC14cyB0ZXh0LWdyYXktNTAwIj4oJHtwZXJzb25Db2RlfSk8L3NwYW4+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICB9KS5qb2luKCcnKTsNCg0KICAgICAgICAgICAgICAgIGZvcm1IdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXQtNCBwdC00IGJvcmRlci10Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWItMiI+U2VsZWNjaW9uYXIgUGVyc29uYXM8L2g0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InNlYXJjaCIgaWQ9InNlYXJjaC1hZGQtcGVyc29uIiBwbGFjZWhvbGRlcj0iQnVzY2FyIHBlcnNvbmEuLi4iIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIG1iLTIgcC0yIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFkZC1wZW9wbGUtbGlzdCIgY2xhc3M9Im1heC1oLTQ4IG92ZXJmbG93LXktYXV0byBib3JkZXIgcm91bmRlZC1sZyBwLTIgYmctZ3JheS01MC81MCBzcGFjZS15LTEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cGVvcGxlTGlzdEh0bWx9DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIGZvcm1IdG1sICs9ICc8ZGl2IGNsYXNzPSJtdC00IHB0LTQgYm9yZGVyLXQgZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNCI+JzsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW5zRm9yRm9ybSA9IENBTk9OSUNBTF9FWFBPUlRfT1JERVIuZmlsdGVyKGMgPT4gIVsnRkVDSEEnLCAnQ8OzZGlnbycsICdOb21icmUnLCAnU2FsZG8gZGUgdmFjYWNpb25lcyddLmluY2x1ZGVzKGMpKTsNCiAgICAgICAgICAgICAgICBmb3JtSHRtbCArPSBjb2x1bW5zRm9yRm9ybS5tYXAoY29sID0+IGA8ZGl2PiR7Z2VuZXJhdGVGb3JtSW5wdXQoY29sLCAnJywgdGFibGUucmVsYXRpb25zKX08L2Rpdj5gKS5qb2luKCcnKTsNCiAgICAgICAgICAgICAgICBmb3JtSHRtbCArPSAnPC9kaXY+JzsNCg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCByb3dEYXRhID0gdGFibGUuZGF0YVtyb3dJbmRleF0gfHwge307DQogICAgICAgICAgICAgICAgY29uc3QgY29sdW1uc0ZvckZvcm0gPSBDQU5PTklDQUxfRVhQT1JUX09SREVSLmZpbHRlcihjID0+IGMgIT09ICdTYWxkbyBkZSB2YWNhY2lvbmVzJyAmJiAodGFibGUuY29sdW1ucy5pbmNsdWRlcyhjKSB8fCBjID09PSAnSU1QUk9EVUNUSVZPJykpOw0KICAgICAgICAgICAgICAgIGZvcm1IdG1sID0gY29sdW1uc0ZvckZvcm0ubWFwKGNvbCA9PiBgPGRpdj4ke2dlbmVyYXRlRm9ybUlucHV0KGNvbCwgcm93RGF0YVtjb2xdIHx8ICcnLCB0YWJsZS5yZWxhdGlvbnMpfTwvZGl2PmApLmpvaW4oJycpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb20uZWRpdFJvd0Zvcm0uaW5uZXJIVE1MID0gZm9ybUh0bWw7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChpc0FkZGluZykgew0KICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpRGF5VG9nZ2xlID0gZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNtdWx0aS1kYXktdG9nZ2xlJyk7DQogICAgICAgICAgICAgICAgY29uc3QgbXVsdGlEYXlSYW5nZSA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjbXVsdGktZGF5LXJhbmdlJyk7DQogICAgICAgICAgICAgICAgaWYgKG11bHRpRGF5VG9nZ2xlICYmIG11bHRpRGF5UmFuZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgbXVsdGlEYXlUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpRGF5UmFuZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgIWUudGFyZ2V0LmNoZWNrZWQpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoLWFkZC1wZXJzb24nKTsNCiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoSW5wdXQpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBlcnNvbi1zZWxlY3Rpb24tbGFiZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVscy5mb3JFYWNoKGxhYmVsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGFiZWwuZGF0YXNldC5uYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBsYWJlbC5kYXRhc2V0LmNvZGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNYXRjaCA9IG5hbWUuaW5jbHVkZXMoc2VhcmNoVGVybSkgfHwgY29kZS5pbmNsdWRlcyhzZWFyY2hUZXJtKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5kaXNwbGF5ID0gaXNNYXRjaCA/ICdmbGV4JyA6ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICBpbml0QXV0b2NvbXBsZXRlKGRvbS5lZGl0Um93Rm9ybSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFkZE1vZGFsRm9ybUF1dG9tYXRpb25zKGRvbS5lZGl0Um93Rm9ybSk7DQogICAgICAgICAgICBkb20uc2F2ZVJvd0J0bi5kYXRhc2V0LmluZGV4ID0gcm93SW5kZXg7DQogICAgICAgICAgICBkb20uZWRpdFJvd01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgcmVuZGVyU2VhcmNoTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBkb20uc2VhcmNoUnVsZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7DQogICAgICAgICAgICBpZiAoc3RhdGUuYWN0aXZlRmlsdGVycy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlRmlsdGVycy5mb3JFYWNoKGZpbHRlciA9PiBhZGRTZWFyY2hSdWxlVG9ET00oZmlsdGVyKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGFkZFNlYXJjaFJ1bGVUb0RPTSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgaGFzRmlsdGVycyA9IHN0YXRlLmFjdGl2ZUZpbHRlcnMubGVuZ3RoID4gMDsNCiAgICAgICAgICAgIGRvbS5kb3dubG9hZEZpbHRlcmVkUGRmQnRuLmRpc2FibGVkID0gIWhhc0ZpbHRlcnM7DQogICAgICAgICAgICBkb20uZG93bmxvYWRGaWx0ZXJlZFhsc0J0bi5kaXNhYmxlZCA9ICFoYXNGaWx0ZXJzOw0KICAgICAgICAgICAgZG9tLnNlYXJjaE1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCByZW5kZXJNb2RpZnlNYXN0ZXJzTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBmZWNoYUFqdXN0ZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FqdXN0ZS12YWNhY2lvbmVzLWZlY2hhJyk7DQogICAgICAgICAgICBpZiAoZmVjaGFBanVzdGVJbnB1dCkgew0KICAgICAgICAgICAgICAgIGZlY2hhQWp1c3RlSW5wdXQudmFsdWUgPSBzdGF0ZS5hanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW8gfHwgJyc7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHBlcnNvbmFTZWFyY2hUZXJtID0gZG9tLnNlYXJjaFBlcnNvbmFJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRQZXJzb25hcyA9IHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhLm1hcCgocCwgaW5kZXgpID0+ICh7IC4uLnAsIG9yaWdpbmFsSW5kZXg6IGluZGV4IH0pKQ0KICAgICAgICAgICAgICAgIC5maWx0ZXIocCA9PiBwLk5vbWJyZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBlcnNvbmFTZWFyY2hUZXJtKSB8fCBwLkPDs2RpZ28udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwZXJzb25hU2VhcmNoVGVybSkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20ucGVyc29uYXNMaXN0Q29udGFpbmVyLmlubmVySFRNTCA9IGZpbHRlcmVkUGVyc29uYXMubGVuZ3RoID4gMCA/IGZpbHRlcmVkUGVyc29uYXMubWFwKHAgPT4gYA0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTIgYm9yZGVyLWIgdGV4dC1zbSBob3ZlcjpiZy1ncmF5LTEwMCBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LW1vbm8gdGV4dC14cyB3LTE2Ij4ke3AuQ8OzZGlnb308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmbGV4LWdyb3cgcHgtMiI+JHtwLk5vbWJyZX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9InBlcnNvbmEtdGlwby1jb250cmF0byB0ZXh0LXhzIHJvdW5kZWQgYm9yZGVyLWdyYXktMzAwIHNoYWRvdy1zbSBweS0xIiBkYXRhLWluZGV4PSIke3Aub3JpZ2luYWxJbmRleH0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmlqbyIgJHtwLnRpcG9Db250cmF0byA9PT0gJ2Zpam8nID8gJ3NlbGVjdGVkJyA6ICcnfT5GaWpvPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0ZW1wb3JhbCIgJHtwLnRpcG9Db250cmF0byA9PT0gJ3RlbXBvcmFsJyA/ICdzZWxlY3RlZCcgOiAnJ30+VGVtcG9yYWw8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFqdXN0ZS12YWNhY2lvbmVzLWJ0biB0ZXh0LXhzIGJnLWluZGlnby0xMDAgdGV4dC1pbmRpZ28tODAwIHJvdW5kZWQgcHgtMiBweS0xIG1sLTEgaG92ZXI6YmctaW5kaWdvLTIwMCB3aGl0ZXNwYWNlLW5vd3JhcCIgZGF0YS1pbmRleD0iJHtwLm9yaWdpbmFsSW5kZXh9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFqdXN0ZSBWYWMuICgke3AuYWp1c3RlVmFjYWNpb25lcyA/PyAnQXV0byd9KQ0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZWRpdC1wZXJzb25hLWJ0biB0ZXh0LXhzIGJnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAgcm91bmRlZCBweC0yIHB5LTEgbWwtMSBob3ZlcjpiZy1ibHVlLTIwMCB3aGl0ZXNwYWNlLW5vd3JhcCIgZGF0YS1pbmRleD0iJHtwLm9yaWdpbmFsSW5kZXh9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRhcg0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGVsZXRlLXBlcnNvbmEtYnRuIHRleHQtcmVkLTUwMCBob3Zlcjp0ZXh0LXJlZC03MDAgZm9udC1ib2xkIHRleHQteGwgbWwtMSIgZGF0YS1pbmRleD0iJHtwLm9yaWdpbmFsSW5kZXh9Ij4mdGltZXM7PC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICBgKS5qb2luKCcnKSA6ICc8cCBjbGFzcz0idGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIHAtNCI+Tm8gaGF5IGNvaW5jaWRlbmNpYXMuPC9wPic7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxldGUtcGVyc29uYS1idG4nKS5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7DQogICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oYMK/U2VndXJvIHF1ZSBxdWllcmVzIGVsaW1pbmFyIGEgJHtzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YVtpbmRleF0uTm9tYnJlfT9gKSkgew0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgICAgICAgICAgICAgICBtYXJrRGlydHkoKTsgYnVpbGRDb2RlTmFtZU1hcHMoKTsgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkpOw0KDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGVyc29uYS10aXBvLWNvbnRyYXRvJykuZm9yRWFjaChzZWxlY3QgPT4gc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleDsNCiAgICAgICAgICAgICAgICBjb25zdCBuZXdUeXBlID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlOw0KICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhW2luZGV4XS50aXBvQ29udHJhdG8gPSBuZXdUeXBlOw0KICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgfSkpOw0KDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWp1c3RlLXZhY2FjaW9uZXMtYnRuJykuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4Ow0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbiA9IHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhW2luZGV4XTsNCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBwZXJzb24uYWp1c3RlVmFjYWNpb25lcyA/PyAnJzsNCiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHRNZXNzYWdlID0gYEFqdXN0ZSBkZSBTYWxkbyBkZSBWYWNhY2lvbmVzIHBhcmEgJHtwZXJzb24uTm9tYnJlfS5cblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBJbnRyb2R1Y2UgZWwgc2FsZG8gZGUgZMOtYXMgcXVlIGxlIHF1ZWRhbi5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGUuYWp1c3RlVmFjYWNpb25lc0ZlY2hhSW5pY2lvIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYElNUE9SVEFOVEU6IFNlIGhhIGNvbmZpZ3VyYWRvIHVuYSBmZWNoYSBkZSBlZmVjdG8gKCR7c3RhdGUuYWp1c3RlVmFjYWNpb25lc0ZlY2hhSW5pY2lvfSkuIFNvbG8gc2UgcmVzdGFyw6FuIGxhcyB2YWNhY2lvbmVzIHRvbWFkYXMgYSBwYXJ0aXIgZGUgZXNhIGZlY2hhLlxuXG5gDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgQVZJU086IE5vIGhheSAnRmVjaGEgZGUgRWZlY3RvJyBjb25maWd1cmFkYS4gU2UgcmVzdGFyw6FuIHRvZGFzIGxhcyB2YWNhY2lvbmVzIGRlbCBhw7FvLlxuXG5gKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEZWphIGVuIGJsYW5jbyBvIGludHJvZHVjZSAnMCcgcGFyYSB1c2FyIGVsIGPDoWxjdWxvIGF1dG9tw6F0aWNvIChGaWpvL1RlbXBvcmFsKS5gOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWVTdHIgPSBwcm9tcHQocHJvbXB0TWVzc2FnZSwgY3VycmVudFZhbHVlKTsNCg0KICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZVN0ciA9PT0gbnVsbCkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlU3RyLnRyaW0oKSA9PT0gJycgfHwgbmV3VmFsdWVTdHIudHJpbSgpID09PSAnMCcpIHsNCiAgICAgICAgICAgICAgICAgICAgcGVyc29uLmFqdXN0ZVZhY2FjaW9uZXMgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlTnVtID0gcGFyc2VJbnQobmV3VmFsdWVTdHIsIDEwKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihuZXdWYWx1ZU51bSkgJiYgbmV3VmFsdWVOdW0gPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGVyc29uLmFqdXN0ZVZhY2FjaW9uZXMgPSBuZXdWYWx1ZU51bTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJQb3IgZmF2b3IsIGludHJvZHVjZSB1biBuw7ptZXJvIHbDoWxpZG8gKG1heW9yIG8gaWd1YWwgcXVlIDApIG8gZGVqYSBlbCBjYW1wbyBlbiBibGFuY28vY2VybyBwYXJhIGVsIGPDoWxjdWxvIGF1dG9tw6F0aWNvLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgICAgIHJlbmRlck1vZGlmeU1hc3RlcnNNb2RhbCgpOw0KICAgICAgICAgICAgfSkpOw0KDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC1wZXJzb25hLWJ0bicpLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleDsNCiAgICAgICAgICAgICAgICBoYW5kbGVFZGl0UGVyc29uKGluZGV4KTsgDQogICAgICAgICAgICB9KSk7DQoNCiAgICAgICAgICAgIGNvbnN0IG90U2VhcmNoVGVybSA9IGRvbS5zZWFyY2hPdElucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZE90cyA9IHN0YXRlLnRhYmxlc1snT1RzJ10uZGF0YS5tYXAoKG8sIGluZGV4KSA9PiAoeyAuLi5vLCBvcmlnaW5hbEluZGV4OiBpbmRleCB9KSkNCiAgICAgICAgICAgICAgICAuZmlsdGVyKG8gPT4gby5PVC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG90U2VhcmNoVGVybSkpOw0KDQogICAgICAgICAgICBkb20ub3RzTGlzdENvbnRhaW5lci5pbm5lckhUTUwgPSBmaWx0ZXJlZE90cy5sZW5ndGggPiAwID8gZmlsdGVyZWRPdHMubWFwKG8gPT4gYA0KICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0yIGJvcmRlci1iIHRleHQtc20gaG92ZXI6YmctZ3JheS0xMDAiPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZmxleC1ncm93IHByLTMiPiR7by5PVH08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRlbGV0ZS1vdC1idG4gdGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCBmb250LWJvbGQiIGRhdGEtaW5kZXg9IiR7by5vcmlnaW5hbEluZGV4fSI+JnRpbWVzOzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgYCkuam9pbignJykgOiAnPHAgY2xhc3M9InRleHQteHMgdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTUwMCBwLTQiPk5vIGhheSBjb2luY2lkZW5jaWFzLjwvcD4nOw0KDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVsZXRlLW90LWJ0bicpLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5kYXRhc2V0LmluZGV4Ow0KICAgICAgICAgICAgICAgIGlmIChjb25maXJtKGDCv1NlZ3VybyBxdWUgcXVpZXJlcyBlbGltaW5hciBsYSBPVCAiJHtzdGF0ZS50YWJsZXNbJ09UcyddLmRhdGFbaW5kZXhdLk9UfSI/YCkpIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFibGVzWydPVHMnXS5kYXRhLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOyByZW5kZXJNb2RpZnlNYXN0ZXJzTW9kYWwoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KSk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3Qgb3Blbk1vZGlmeU1hc3RlcnNNb2RhbCA9ICgpID0+IHsNCiAgICAgICAgICAgIGRvbS5zZWFyY2hQZXJzb25hSW5wdXQudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGRvbS5zZWFyY2hPdElucHV0LnZhbHVlID0gJyc7DQogICAgICAgICAgICByZW5kZXJNb2RpZnlNYXN0ZXJzTW9kYWwoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgZmVjaGFBanVzdGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhanVzdGUtdmFjYWNpb25lcy1mZWNoYScpOw0KICAgICAgICAgICAgaWYgKGZlY2hhQWp1c3RlSW5wdXQpIHsNCiAgICAgICAgICAgICAgICBmZWNoYUFqdXN0ZUlucHV0LnJlcGxhY2VXaXRoKGZlY2hhQWp1c3RlSW5wdXQuY2xvbmVOb2RlKHRydWUpKTsgDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FqdXN0ZS12YWNhY2lvbmVzLWZlY2hhJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWp1c3RlVmFjYWNpb25lc0ZlY2hhSW5pY2lvID0gZS50YXJnZXQudmFsdWUgfHwgbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FqdXN0ZS12YWNhY2lvbmVzLWZlY2hhJykudmFsdWUgPSBzdGF0ZS5hanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW8gfHwgJyc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5tb2RpZnlNYXN0ZXJzTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVTYXZlUm93ID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdGFibGUgPSBzdGF0ZS50YWJsZXNbc3RhdGUuYWN0aXZlVGFibGVdOw0KICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBkb20uc2F2ZVJvd0J0bi5kYXRhc2V0LmluZGV4Ow0KICAgICAgICAgICAgY29uc3QgaXNFZGl0aW5nID0gcm93SW5kZXggIT09ICdudWxsJzsNCg0KICAgICAgICAgICAgaWYgKGlzRWRpdGluZykgew0KICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Jvd0RhdGEgPSB7fTsNCiAgICAgICAgICAgICAgICBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29sXScpLmZvckVhY2goaW5wdXQgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gJ2NoZWNrYm94JykgbmV3Um93RGF0YVtpbnB1dC5kYXRhc2V0LmNvbF0gPSBpbnB1dC5jaGVja2VkID8gJ1NJJyA6ICdOTyc7DQogICAgICAgICAgICAgICAgZWxzZSBuZXdSb3dEYXRhW2lucHV0LmRhdGFzZXQuY29sXSA9IGlucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAobmV3Um93RGF0YVsnQUJTRU5USVNNTyddID09PSAnQ09NUEVOU0FUT1JJTycpIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3Um93RGF0YVsnSE4nXSA9ICc4JzsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIW5ld1Jvd0RhdGFbJ0ZFQ0hBJ10gfHwgIW5ld1Jvd0RhdGFbJ0PDs2RpZ28nXSB8fCAhbmV3Um93RGF0YVsnTm9tYnJlJ10pIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkxvcyBjYW1wb3MgJ0ZFQ0hBJywgJ0PDs2RpZ28nIHkgJ05vbWJyZScgc29uIG9ibGlnYXRvcmlvcyBwYXJhIGVkaXRhci4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0YWJsZS5kYXRhW3Jvd0luZGV4XSA9IG5ld1Jvd0RhdGE7DQoNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29tbW9uRGF0YSA9IHt9Ow0KICAgICAgICAgICAgICAgIGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb2xdJykuZm9yRWFjaChpbnB1dCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSAnY2hlY2tib3gnKSBjb21tb25EYXRhW2lucHV0LmRhdGFzZXQuY29sXSA9IGlucHV0LmNoZWNrZWQgPyAnU0knIDogJ05PJzsNCiAgICAgICAgICAgICAgICBlbHNlIGNvbW1vbkRhdGFbaW5wdXQuZGF0YXNldC5jb2xdID0gaW5wdXQudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChjb21tb25EYXRhWydBQlNFTlRJU01PJ10gPT09ICdDT01QRU5TQVRPUklPJykgew0KICAgICAgICAgICAgICAgICAgICBjb21tb25EYXRhWydITiddID0gJzgnOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUGVvcGxlQ29kZXMgPSBBcnJheS5mcm9tKGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucGVyc29uLWNoZWNrYm94OmNoZWNrZWQnKSkubWFwKGNiID0+IGNiLnZhbHVlKTsNCg0KICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFBlb3BsZUNvZGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiUG9yIGZhdm9yLCBzZWxlY2Npb25lIGFsIG1lbm9zIHVuYSBwZXJzb25hLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZVN0ciA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjZm9ybS1yb3ctRkVDSEEnKS52YWx1ZTsNCiAgICAgICAgICAgICAgICBjb25zdCBtdWx0aURheVRvZ2dsZSA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjbXVsdGktZGF5LXRvZ2dsZScpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzTXVsdGlEYXkgPSBtdWx0aURheVRvZ2dsZSAmJiBtdWx0aURheVRvZ2dsZS5jaGVja2VkOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVuZERhdGVTdHIgPSBpc011bHRpRGF5ID8gZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLXJvdy1GRUNIQS1maW4nKS52YWx1ZSA6IHN0YXJ0RGF0ZVN0cjsNCg0KICAgICAgICAgICAgICAgIGlmICghc3RhcnREYXRlU3RyIHx8IChpc011bHRpRGF5ICYmICFlbmREYXRlU3RyKSkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiUG9yIGZhdm9yLCBzZWxlY2Npb25lIHVuYSBmZWNoYSBkZSBpbmljaW8geSBmaW4gcGFyYSBlbCByYW5nby4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGVTdHIgKyAnVDAwOjAwOjAwJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKGVuZERhdGVTdHIgKyAnVDAwOjAwOjAwJyk7DQoNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnREYXRlID4gZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTGEgJ0ZlY2hhIEZpbicgbm8gcHVlZGUgc2VyIGFudGVyaW9yIGEgbGEgJ0ZlY2hhIEluaWNpbycuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9BZGQgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgZHVwbGljYXRlc0ZvdW5kID0gMDsNCiAgICAgICAgICAgICAgICBsZXQgcGFydGlhbER1cGxpY2F0ZXNGb3VuZCA9IDA7DQogICAgICAgICAgICAgICAgbGV0IHBhcnRpYWxEdXBsaWNhdGVDb25maXJtID0gbnVsbDsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGVyc29uQ29kZSBvZiBzZWxlY3RlZFBlb3BsZUNvZGVzKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBlbmREYXRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3cgPSB7IC4uLmNvbW1vbkRhdGEgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvd1snRkVDSEEnXSA9IGZvcm1hdERhdGVUb1lNRChjdXJyZW50RGF0ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3dbJ0PDs2RpZ28nXSA9IHBlcnNvbkNvZGU7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3dbJ05vbWJyZSddID0gc3RhdGUuY29kZVRvTmFtZU1hcFtwZXJzb25Db2RlXSB8fCAnRGVzY29ub2NpZG8nOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEdXBsaWNhdGUobmV3Um93LCAtMSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVzRm91bmQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNQYXJ0aWFsRHVwbGljYXRlID0gc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGEuc29tZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmQgPT4gZXhpc3RpbmdSZWNvcmQuQ8OzZGlnbyA9PT0gbmV3Um93LkPDs2RpZ28gJiYgZXhpc3RpbmdSZWNvcmQuRkVDSEEgPT09IG5ld1Jvdy5GRUNIQQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNQYXJ0aWFsRHVwbGljYXRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsRHVwbGljYXRlQ29uZmlybSA9PT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbER1cGxpY2F0ZUNvbmZpcm0gPSBjb25maXJtKGBBdmlzbzogWWEgZXhpc3RlbiByZWdpc3Ryb3MgcGFyYSBhbGd1bmEgZGUgbGFzIHBlcnNvbmFzIHNlbGVjY2lvbmFkYXMgZW4gbGFzIGZlY2hhcyBpbmRpY2FkYXMuXG5cbsK/Q29uZmlybWEgcXVlIGRlc2VhIGHDsWFkaXIgZXN0b3MgbnVldm9zIHJlZ2lzdHJvcyBjb24gZGF0b3MgZGlmZXJlbnRlcz9gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydGlhbER1cGxpY2F0ZUNvbmZpcm0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0FkZC5wdXNoKG5ld1Jvdyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsRHVwbGljYXRlc0ZvdW5kKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9BZGQucHVzaChuZXdSb3cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgMSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAocmVjb3Jkc1RvQWRkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmRhdGEucHVzaCguLi5yZWNvcmRzVG9BZGQpOw0KICAgICAgICAgICAgICAgICAgICAgbGV0IGFsZXJ0TWVzc2FnZSA9IGBTZSBoYW4gYcOxYWRpZG8gJHtyZWNvcmRzVG9BZGQubGVuZ3RofSBudWV2b3MgcmVnaXN0cm9zLmA7DQogICAgICAgICAgICAgICAgICAgICBpZiAoZHVwbGljYXRlc0ZvdW5kID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0TWVzc2FnZSArPSBgXG5TZSBvbWl0aWVyb24gJHtkdXBsaWNhdGVzRm91bmR9IHJlZ2lzdHJvcyBwb3Igc2VyIGR1cGxpY2Fkb3MgZXhhY3Rvcy5gOw0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsRHVwbGljYXRlc0ZvdW5kID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0TWVzc2FnZSArPSBgXG5TZSBvbWl0aWVyb24gJHtwYXJ0aWFsRHVwbGljYXRlc0ZvdW5kfSByZWdpc3Ryb3MgcG9yIGRlY2lzacOzbiBkZWwgdXN1YXJpbyAoZHVwbGljYWRvcyBwYXJjaWFsZXMpLmA7DQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICBhbGVydChhbGVydE1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gc2UgYcOxYWRpw7MgbmluZ8O6biByZWdpc3RybyBudWV2by4gRXMgcG9zaWJsZSBxdWUgdG9kb3MgbG9zIHJlZ2lzdHJvcyB5YSBleGlzdGllcmFuIG8gZnVlcmFuIGNhbmNlbGFkb3MuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBzdGF0ZS5kYXRhTG9hZGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgY2xvc2VNb2RhbChkb20uZWRpdFJvd01vZGFsKTsNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGFkZEFjdGl2ZVZpZXdFdmVudExpc3RlbmVycyA9ICgpID0+IHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYW5kYXRvcnktcmVncy1idG4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuTWFuZGF0b3J5UmVnc01vZGFsKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5ncy1hcmNoaXZlLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5XYXJuaW5nc0FyY2hpdmVNb2RhbCk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlclNlYXJjaE1vZGFsKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhci1maWx0ZXItYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xlYXJGaWx0ZXIpOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydC10YWJsZS14bHMtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlRXhwb3J0VGFibGUoJ3hscycpKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnQtdGFibGUtcGRmLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGhhbmRsZUV4cG9ydFRhYmxlKCdwZGYnKSk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXJvdy1idG4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZW5kZXJFZGl0Um93TW9kYWwobnVsbCkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC1yb3ctYnRuJykuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiByZW5kZXJFZGl0Um93TW9kYWwoZS50YXJnZXQuZGF0YXNldC5pbmRleCkpKTsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxldGUtcm93LWJ0bicpLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gew0KICAgICAgICAgICAgICAgIGlmIChjb25maXJtKCfCv0VsaW1pbmFyIGVzdGUgcmVnaXN0cm8/JykpIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFibGVzW3N0YXRlLmFjdGl2ZVRhYmxlXS5kYXRhLnNwbGljZShlLnRhcmdldC5kYXRhc2V0LmluZGV4LCAxKTsNCiAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7IHJlbmRlcigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pKTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGhhbmRsZUFwcGx5U2VhcmNoID0gKCkgPT4gew0KICAgICAgICAgICAgc3RhdGUuYWN0aXZlRmlsdGVycyA9IFtdOw0KICAgICAgICAgICAgZG9tLnNlYXJjaFJ1bGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtcnVsZScpLmZvckVhY2gocnVsZUVsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBydWxlRWwucXVlcnlTZWxlY3RvcignLnJ1bGUtY29sdW1uJykudmFsdWU7DQogICAgICAgICAgICAgICAgaWYgKCFjb2x1bW4pIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yRWwgPSBydWxlRWwucXVlcnlTZWxlY3RvcignLnJ1bGUtb3BlcmF0b3InKTsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUVsID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLXZhbHVlJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBvcGVyYXRvckVsID8gb3BlcmF0b3JFbC52YWx1ZSA6ICdlcXVhbHMnOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVFbCA/IHZhbHVlRWwudmFsdWUgOiAnJzsNCg0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVGaWx0ZXJzLnB1c2goeyBjb2x1bW4sIG9wZXJhdG9yLCB2YWx1ZSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZVNhdmVDaGFuZ2VzID0gKCkgPT4gew0KICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gcHJvbXB0KCJQb3IgZmF2b3IsIGludHJvZHVjZSB1biBub21icmUgcGFyYSBlbCBhcmNoaXZvIGRlIGd1YXJkYWRvOiIsICJkYXRvc19jb250cm9sX2xhYm9yYWwuanNvbiIpOw0KICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09PSBudWxsKSByZXR1cm47DQogICAgICAgICAgICBpZiAoIWZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5qc29uJykpIGZpbGVOYW1lICs9ICcuanNvbic7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGV4cG9ydFN0YXRlID0geyANCiAgICAgICAgICAgICAgICB0YWJsZXM6IHN0YXRlLnRhYmxlcywNCiAgICAgICAgICAgICAgICBtYW5kYXRvcnlSZWdpc3RyYXRpb25zOiBzdGF0ZS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zLA0KICAgICAgICAgICAgICAgIHdhcm5pbmdzQXJjaGl2ZTogc3RhdGUud2FybmluZ3NBcmNoaXZlLA0KICAgICAgICAgICAgICAgIGV4Y2x1ZGVkRGF5czogc3RhdGUuZXhjbHVkZWREYXlzLA0KICAgICAgICAgICAgICAgIHBlcnNvbkRhdGFTdW1tYXJ5OiBzdGF0ZS5wZXJzb25EYXRhU3VtbWFyeSwNCiAgICAgICAgICAgICAgICBhanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW86IHN0YXRlLmFqdXN0ZVZhY2FjaW9uZXNGZWNoYUluaWNpbywNCiAgICAgICAgICAgICAgICBnZW1pbmlBcGlLZXk6IHN0YXRlLmdlbWluaUFwaUtleSwgLy8gR3VhcmRhciBsYSBBUEkgS2V5IChvcGNpb25hbCBlbiBKU09OLCBwZXJvIHlhIGxhIGd1YXJkYW1vcyBlbiBsb2NhbFN0b3JhZ2UpDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgY29uc3QgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGV4cG9ydFN0YXRlLCBudWxsLCAyKTsNCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YVN0cl0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pOw0KICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IHVybDsgYS5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsgYS5jbGljaygpOyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOw0KICAgICAgICAgICAgc3RhdGUuaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICBhbGVydChgQ2FtYmlvcyBndWFyZGFkb3MgZW4gJyR7ZmlsZU5hbWV9Jy5gKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBkb3dubG9hZEpzb25GaWxlID0gKGRhdGFPYmplY3QsIGRlZmF1bHRGaWxlTmFtZSkgPT4gew0KICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gcHJvbXB0KGBJbnRyb2R1Y2UgdW4gbm9tYnJlIHBhcmEgZWwgYXJjaGl2bzpgLCBkZWZhdWx0RmlsZU5hbWUpOw0KICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09PSBudWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGlmICghZmlsZU5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLmpzb24nKSkgZmlsZU5hbWUgKz0gJy5qc29uJzsNCg0KICAgICAgICAgICAgY29uc3QgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGFPYmplY3QsIG51bGwsIDIpOw0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhU3RyXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7DQogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsNCiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7DQogICAgICAgICAgICBhLmNsaWNrKCk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOw0KICAgICAgICAgICAgcmV0dXJuIGZpbGVOYW1lOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgaGFuZGxlQ3JlYXRlUGFydGl0aW9uID0gKCkgPT4gew0KICAgICAgICAgICAgaWYgKCFzdGF0ZS5kYXRhTG9hZGVkKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIGhheSBkYXRvcyBjYXJnYWRvcyBwYXJhIGNyZWFyIHVuYSBwYXJ0aWNpw7NuLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMSk7DQogICAgICAgICAgICBjb25zdCBkZWZhdWx0U3RhcnREYXRlID0gZm9ybWF0RGF0ZVRvWU1EKGZpcnN0RGF5T2ZNb250aCk7DQoNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZUlucHV0ID0gcHJvbXB0KA0KICAgICAgICAgICAgICAgICJJbnRyb2R1Y2UgbGEgZmVjaGEgZGUgY29ydGUgcGFyYSBsYSBwYXJ0aWNpw7NuIChsb3MgZGF0b3MgZGVzZGUgZXN0ZSBkw61hIHNlIGd1YXJkYXLDoW4gZW4gZWwgbnVldm8gYXJjaGl2byk6IiwNCiAgICAgICAgICAgICAgICBkZWZhdWx0U3RhcnREYXRlDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoc3RhcnREYXRlSW5wdXQgPT09IG51bGwpIHJldHVybjsNCg0KICAgICAgICAgICAgaWYgKCEvXlxkezR9LVxkezJ9LVxkezJ9JC8udGVzdChzdGFydERhdGVJbnB1dCkpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRm9ybWF0byBkZSBmZWNoYSBpbnbDoWxpZG8uIFBvciBmYXZvciwgdXNhIGVsIGZvcm1hdG8gWVlZWS1NTS1ERC4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZUlucHV0ICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oDQogICAgICAgICAgICAgICAgYFNlIHZhbiBhIGNyZWFyIERPUyBhcmNoaXZvcyBkZSBwYXJ0aWNpw7NuIHVzYW5kbyBlbCAke2Zvcm1hdHRlZFN0YXJ0RGF0ZX0gY29tbyBmZWNoYSBkZSBjb3J0ZS5cblxuYCArDQogICAgICAgICAgICAgICAgIjEuIEFSQ0hJVk8gTlVFVk86IENvbnRlbmRyw6EgdG9kb3MgbG9zIGRhdG9zIERFU0RFIGVsICIgKyBmb3JtYXR0ZWRTdGFydERhdGUgKyAiIGVuIGFkZWxhbnRlLlxuIiArDQogICAgICAgICAgICAgICAgIjIuIEFSQ0hJVk8gQU5USUdVTzogQ29udGVuZHLDoSB0b2RvcyBsb3MgZGF0b3MgQU5URVJJT1JFUyBhbCAiICsgZm9ybWF0dGVkU3RhcnREYXRlICsgIi5cblxuIiArDQogICAgICAgICAgICAgICAgIkVsIEFSQ0hJVk8gTlVFVk8gJ2hlcmVkYXLDoScgdW4gcmVzdW1lbiBjYWxjdWxhZG8gZGUgdG9kb3MgbG9zIGRhdG9zIGhpc3TDs3JpY29zIHBhcmEgbWFudGVuZXIgbGEgY29udGludWlkYWQgZW4gbG9zIGPDs21wdXRvcyBwb3IgcGVyc29uYS5cblxuIiArDQogICAgICAgICAgICAgICAgIsK/RGVzZWEgY29udGludWFyPyINCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmICghY29uZmlybWF0aW9uKSByZXR1cm47DQoNCiAgICAgICAgICAgIGNvbnN0IG9sZERhdGEgPSBzdGF0ZS50YWJsZXNbJ0RhdG9zJ10uZGF0YS5maWx0ZXIocm93ID0+IHJvdy5GRUNIQSAmJiByb3cuRkVDSEEgPCBzdGFydERhdGVJbnB1dCk7DQogICAgICAgICAgICBjb25zdCBuZXdEYXRhID0gc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGEuZmlsdGVyKHJvdyA9PiByb3cuRkVDSEEgJiYgcm93LkZFQ0hBID49IHN0YXJ0RGF0ZUlucHV0KTsNCg0KICAgICAgICAgICAgY29uc3QgaGlzdG9yaWNhbFN1bW1hcnkgPSBnZW5lcmF0ZUZ1bGxQZXJzb25EYXRhU3VtbWFyeShvbGREYXRhKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgbmV3UGFydGl0aW9uU3RhdGUgPSB7DQogICAgICAgICAgICAgICAgdGFibGVzOiB7DQogICAgICAgICAgICAgICAgICAgICdQZXJzb25hcyc6IHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXSwNCiAgICAgICAgICAgICAgICAgICAgJ09Ucyc6IHN0YXRlLnRhYmxlc1snT1RzJ10sDQogICAgICAgICAgICAgICAgICAgICdEYXRvcyc6IHsgLi4uc3RhdGUudGFibGVzWydEYXRvcyddLCBkYXRhOiBuZXdEYXRhIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIG1hbmRhdG9yeVJlZ2lzdHJhdGlvbnM6IHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnMsDQogICAgICAgICAgICAgICAgd2FybmluZ3NBcmNoaXZlOiBzdGF0ZS53YXJuaW5nc0FyY2hpdmUsDQogICAgICAgICAgICAgICAgZXhjbHVkZWREYXlzOiBzdGF0ZS5leGNsdWRlZERheXMsDQogICAgICAgICAgICAgICAgcGVyc29uRGF0YVN1bW1hcnk6IGhpc3RvcmljYWxTdW1tYXJ5LA0KICAgICAgICAgICAgICAgIGFqdXN0ZVZhY2FjaW9uZXNGZWNoYUluaWNpbzogc3RhdGUuYWp1c3RlVmFjYWNpb25lc0ZlY2hhSW5pY2lvLA0KICAgICAgICAgICAgICAgIGdlbWluaUFwaUtleTogc3RhdGUuZ2VtaW5pQXBpS2V5LA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgbmV3RmlsZU5hbWVEZWZhdWx0ID0gYHBhcnRpY2lvbl9kZXNkZV8ke3N0YXJ0RGF0ZUlucHV0fS5qc29uYDsNCiAgICAgICAgICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gZG93bmxvYWRKc29uRmlsZShuZXdQYXJ0aXRpb25TdGF0ZSwgbmV3RmlsZU5hbWVEZWZhdWx0KTsNCiAgICAgICAgICAgIGlmIChuZXdGaWxlTmFtZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KGBOdWV2byBhcmNoaXZvIGRlIHBhcnRpY2nDs24gZ3VhcmRhZG8gY29tbyAnJHtuZXdGaWxlTmFtZX0nLmApOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQ3JlYWNpw7NuIGRlbCBudWV2byBhcmNoaXZvIGRlIHBhcnRpY2nDs24gY2FuY2VsYWRhLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsgDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChvbGREYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRPbGREYXRhID0gWy4uLm9sZERhdGFdLnNvcnQoKGEsIGIpID0+IGEuRkVDSEEubG9jYWxlQ29tcGFyZShiLkZFQ0hBKSk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2xkZXN0RGF0ZSA9IHNvcnRlZE9sZERhdGFbMF0uRkVDSEE7DQogICAgICAgICAgICAgICAgY29uc3QgbmV3ZXN0T2xkRGF0ZSA9IHNvcnRlZE9sZERhdGFbc29ydGVkT2xkRGF0YS5sZW5ndGggLSAxXS5GRUNIQTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBvbGRXYXJuaW5nc0FyY2hpdmUgPSBzdGF0ZS53YXJuaW5nc0FyY2hpdmUuZmlsdGVyKHcgPT4gdy5kYXRlIDwgc3RhcnREYXRlSW5wdXQpOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgb2xkUGFydGl0aW9uU3RhdGUgPSB7DQogICAgICAgICAgICAgICAgICAgIHRhYmxlczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ1BlcnNvbmFzJzogc3RhdGUudGFibGVzWydQZXJzb25hcyddLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ09Ucyc6IHN0YXRlLnRhYmxlc1snT1RzJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAnRGF0b3MnOiB7IC4uLnN0YXRlLnRhYmxlc1snRGF0b3MnXSwgZGF0YTogb2xkRGF0YSB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIG1hbmRhdG9yeVJlZ2lzdHJhdGlvbnM6IHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnMsDQogICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzQXJjaGl2ZTogb2xkV2FybmluZ3NBcmNoaXZlLA0KICAgICAgICAgICAgICAgICAgICBleGNsdWRlZERheXM6IHN0YXRlLmV4Y2x1ZGVkRGF5cywNCiAgICAgICAgICAgICAgICAgICAgcGVyc29uRGF0YVN1bW1hcnk6IHt9LA0KICAgICAgICAgICAgICAgICAgICBhanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW86IHN0YXRlLmFqdXN0ZVZhY2FjaW9uZXNGZWNoYUluaWNpbywNCiAgICAgICAgICAgICAgICAgICAgZ2VtaW5pQXBpS2V5OiBzdGF0ZS5nZW1pbmlBcGlLZXksDQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG9sZEZpbGVOYW1lRGVmYXVsdCA9IGBwYXJ0aWNpb25fYW50aWd1YV8ke29sZGVzdERhdGV9X2FfJHtuZXdlc3RPbGREYXRlfS5qc29uYDsNCiAgICAgICAgICAgICAgICBjb25zdCBvbGRGaWxlTmFtZSA9IGRvd25sb2FkSnNvbkZpbGUob2xkUGFydGl0aW9uU3RhdGUsIG9sZEZpbGVOYW1lRGVmYXVsdCk7DQogICAgICAgICAgICAgICAgaWYgKG9sZEZpbGVOYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBBcmNoaXZvIGFudGlndW8gZGUgcGFydGljacOzbiBndWFyZGFkbyBjb21vICcke29sZEZpbGVOYW1lfScuYCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkNyZWFjacOzbiBkZWwgYXJjaGl2byBhbnRpZ3VvIGRlIHBhcnRpY2nDs24gY2FuY2VsYWRhLiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIHNlIGVuY29udHJhcm9uIGRhdG9zIGFudGVyaW9yZXMgYSBsYSBmZWNoYSBkZSBjb3J0ZS4gTm8gc2UgaGEgY3JlYWRvIHVuIGFyY2hpdm8gYW50aWd1by4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVJbXBvcnQgPSAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07DQogICAgICAgICAgICBpZiAoIWZpbGUpIHJldHVybjsNCiAgICAgICAgICAgIGlmIChzdGF0ZS5pc0RpcnR5ICYmICFjb25maXJtKCfCv0ltcG9ydGFyIGFyY2hpdm8/IExvcyBjYW1iaW9zIG5vIGd1YXJkYWRvcyBzZSBwZXJkZXLDoW4uJykpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbXBvcnRlZERhdGEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW1wb3J0ZWREYXRhLnRhYmxlcyAhPT0gJ29iamVjdCcgfHwgaW1wb3J0ZWREYXRhLnRhYmxlcyA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdGb3JtYXRvIGRlIGFyY2hpdm8gaW52w6FsaWRvLicpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5TdGF0ZSA9IGdldEluaXRpYWxTdGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHsgLi4uY2xlYW5TdGF0ZSwgdGFibGVzOiBpbXBvcnRlZERhdGEudGFibGVzLCBnZW1pbmlBcGlLZXk6IGNsZWFuU3RhdGUuZ2VtaW5pQXBpS2V5IH07IC8vIE1haW50YWluIGV4aXN0aW5nIEFQSSBrZXkgaWYgcHJlc2VudA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXT8uZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFjYXRpb25EYXRhID0gaW1wb3J0ZWREYXRhLnZhY2F0aW9uT3ZlcnJpZGVzMjAyNSB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhLmZvckVhY2gocCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC50aXBvQ29udHJhdG8gPSBwLnRpcG9Db250cmF0byB8fCAnZmlqbyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAuYWp1c3RlVmFjYWNpb25lcyA9PT0gdW5kZWZpbmVkICYmIG9sZFZhY2F0aW9uRGF0YVtwLkPDs2RpZ29dICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hanVzdGVWYWNhY2lvbmVzID0gb2xkVmFjYXRpb25EYXRhW3AuQ8OzZGlnb107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLmFqdXN0ZVZhY2FjaW9uZXMgPT09IDAgfHwgcC5hanVzdGVWYWNhY2lvbmVzID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hanVzdGVWYWNhY2lvbmVzID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnMgPSBpbXBvcnRlZERhdGEubWFuZGF0b3J5UmVnaXN0cmF0aW9ucyB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUud2FybmluZ3NBcmNoaXZlID0gaW1wb3J0ZWREYXRhLndhcm5pbmdzQXJjaGl2ZSB8fCBbXTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZXhjbHVkZWREYXlzID0gaW1wb3J0ZWREYXRhLmV4Y2x1ZGVkRGF5cyB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUucGVyc29uRGF0YVN1bW1hcnkgPSBpbXBvcnRlZERhdGEucGVyc29uRGF0YVN1bW1hcnkgfHwge307DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLmFqdXN0ZVZhY2FjaW9uZXNGZWNoYUluaWNpbyA9IGltcG9ydGVkRGF0YS5hanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW8gfHwgbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmKCFzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10pIHN0YXRlLnRhYmxlc1snUGVyc29uQVMnXSA9IHsgY29sdW1uczogWydDw7NkaWdvJywgJ05vbWJyZScsICd0aXBvQ29udHJhdG8nLCAnYWp1c3RlVmFjYWNpb25lcyddLCBkYXRhOiBbXSwgcmVsYXRpb25zOiB7fSB9Ow0KICAgICAgICAgICAgICAgICAgICBpZighc3RhdGUudGFibGVzWydPVHMnXSkgc3RhdGUudGFibGVzWydPVHMnXSA9IHsgY29sdW1uczogWydPVCddLCBkYXRhOiBbXSwgcmVsYXRpb25zOiB7fSB9Ow0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YVRhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhzdGF0ZS50YWJsZXMpLmZpbHRlcih0ID0+IHQgIT09ICdQZXJzb25hcycgJiYgdCAhPT0gJ09UcycpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVRhYmxlTmFtZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlVGFibGUgPSBkYXRhVGFibGVOYW1lc1swXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGFUYWJsZU5hbWVzWzBdICE9PSAnRGF0b3MnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snRGF0b3MnXSA9IHN0YXRlLnRhYmxlc1tkYXRhVGFibGVOYW1lc1swXV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGUudGFibGVzW2RhdGFUYWJsZU5hbWVzWzBdXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZVRhYmxlID0gJ0RhdG9zJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snRGF0b3MnXSA9IHsgY29sdW1uczogQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUi5maWx0ZXIoYyA9PiBjICE9PSAnU2FsZG8gZGUgdmFjYWNpb25lcycpLCBkYXRhOiBbXSwgcmVsYXRpb25zOiB7fSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlVGFibGUgPSAnRGF0b3MnOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnRhYmxlc1snRGF0b3MnXT8uZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dbJ0FCU0VOVElTTU8nXSA9PT0gJ0NPTVBFTlNBVE9SSU8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1snSE4nXSA9ICc4JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRhdGFMb2FkZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBidWlsZENvZGVOYW1lTWFwcygpOyByZW5kZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0RhdG9zIGltcG9ydGFkb3MgY29ycmVjdGFtZW50ZS4nKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgeyBhbGVydChgRXJyb3IgYWwgaW1wb3J0YXI6ICR7ZXJyb3IubWVzc2FnZX1gKTsgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOw0KICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBoYW5kbGVFeHBvcnRUYWJsZSA9IChmb3JtYXQpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzW3N0YXRlLmFjdGl2ZVRhYmxlXTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFUb0V4cG9ydEZpbHRlcmVkID0gYXBwbHlGaWx0ZXJzKHRhYmxlLmRhdGEpOw0KDQogICAgICAgICAgICBpZiAoZGF0YVRvRXhwb3J0RmlsdGVyZWQubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIGhheSBkYXRvcyBwYXJhIGV4cG9ydGFyLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGF0YVdpdGhWYWNhdGlvbkJhbGFuY2UgPSBkYXRhVG9FeHBvcnRGaWx0ZXJlZC5tYXAocm93ID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IG9yaWdpbmFsSW5kZXgsIC4uLnJlc3QgfSA9IHJvdzsNCiAgICAgICAgICAgICAgICBjb25zdCBiYWxhbmNlSW5mbyA9IGNhbGN1bGF0ZVZhY2F0aW9uQmFsYW5jZShyZXN0WydDw7NkaWdvJ10sIHJlc3RbJ0ZFQ0hBJ10pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRpcG8gPSBiYWxhbmNlSW5mby50aXBvQ29udHJhdG8gPT09ICdmaWpvJyA/ICdGJyA6IChiYWxhbmNlSW5mby50aXBvQ29udHJhdG8gPT09ICd0ZW1wb3JhbCcgPyAnVCcgOiAnJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmVzdFsnU2FsZG8gZGUgdmFjYWNpb25lcyddID0gYmFsYW5jZUluZm8uYmFsYW5jZSAhPT0gbnVsbCA/IGAke2JhbGFuY2VJbmZvLmJhbGFuY2V9ICgke3RpcG99KWAgOiAnTi9BJzsNCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdDsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBkZWZhdWx0TmFtZSA9IGBleHBvcnRfZGF0b3MuJHtmb3JtYXR9YDsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcHJvbXB0KGBJbnRyb2R1Y2UgdW4gbm9tYnJlIHBhcmEgZWwgYXJjaGl2byAke2Zvcm1hdC50b1VwcGVyQ2FzZSgpfTpgLCBkZWZhdWx0TmFtZSk7DQogICAgICAgICAgICBpZiAoIWZpbGVOYW1lKSByZXR1cm47DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbmFsRmlsZU5hbWUgPSBmaWxlTmFtZS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKGAuJHtmb3JtYXR9YCkgPyBmaWxlTmFtZSA6IGAke2ZpbGVOYW1lfS4ke2Zvcm1hdH1gOw0KDQogICAgICAgICAgICBjb25zdCBvcmRlcmVkQ29sdW1ucyA9IENBTk9OSUNBTF9FWFBPUlRfT1JERVIuZmlsdGVyKGNvbCA9PiB0YWJsZS5jb2x1bW5zLmluY2x1ZGVzKGNvbCkgfHwgY29sID09PSAnU2FsZG8gZGUgdmFjYWNpb25lcycpOw0KICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nQ29sdW1ucyA9IHRhYmxlLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiAhQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUi5pbmNsdWRlcyhjb2wpKS5zb3J0KCk7DQogICAgICAgICAgICBjb25zdCBmaW5hbENvbHVtbnMgPSBbLi4ub3JkZXJlZENvbHVtbnMsIC4uLnJlbWFpbmluZ0NvbHVtbnNdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoZm9ybWF0ID09PSAncGRmJykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoeyBvcmllbnRhdGlvbjogJ2xhbmRzY2FwZScgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGRhdGFXaXRoVmFjYXRpb25CYWxhbmNlLm1hcChyb3cgPT4gZmluYWxDb2x1bW5zLm1hcChjb2wgPT4gcm93W2NvbF0gfHwgJycpKTsNCiAgICAgICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsgaGVhZDogW2ZpbmFsQ29sdW1uc10sIGJvZHk6IGJvZHksDQogICAgICAgICAgICAgICAgICAgIHN0eWxlczogeyBvdmVyZmxvdzogJ2xpbmVicmVhaycsIGNlbGxQYWRkaW5nOiAyLCBmb250U2l6ZTogOCB9LA0KICAgICAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzM3LCA5OSwgMjM1XSwgZm9udFNpemU6IDkgfSwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBkb2Muc2F2ZShmaW5hbEZpbGVOYW1lKTsNCiAgICAgICAgICAgIH0gZWxzZSB7IC8vIFhMUw0KICAgICAgICAgICAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGRhdGFXaXRoVmFjYXRpb25CYWxhbmNlLCB7IGhlYWRlcjogZmluYWxDb2x1bW5zLCBza2lwSGVhZGVyOiBmYWxzZSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2xXaWR0aHMgPSBmaW5hbENvbHVtbnMubWFwKGNvbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcldpZHRoID0gY29sLnRvU3RyaW5nKCkubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhV2lkdGhzID0gZGF0YVdpdGhWYWNhdGlvbkJhbGFuY2UubWFwKHJvdyA9PiAocm93W2NvbF0gfHwgJycpLnRvU3RyaW5nKCkubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heChoZWFkZXJXaWR0aCwgLi4uZGF0YVdpZHRocyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHdjaDogbWF4V2lkdGggKyAyIH07DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgd3NbJyFjb2xzJ10gPSBjb2xXaWR0aHM7DQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyU3R5bGUgPSB7DQogICAgICAgICAgICAgICAgICAgIGZpbGw6IHsgZmdDb2xvcjogeyByZ2I6ICJGRjRGODFCRCIgfSB9LA0KICAgICAgICAgICAgICAgICAgICBmb250OiB7IGNvbG9yOiB7IHJnYjogIkZGRkZGRkZGIiB9LCBib2xkOiB0cnVlIH0sDQogICAgICAgICAgICAgICAgICAgIGFsaWdubWVudDogeyBob3Jpem9udGFsOiAiY2VudGVyIiwgdmVydGljYWw6ICJjZW50ZXIiIH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gWExTWC51dGlscy5kZWNvZGVfcmFuZ2Uod3NbJyFyZWYnXSk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgQyA9IHJhbmdlLnMuYzsgQyA8PSByYW5nZS5lLmM7ICsrQykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gWExTWC51dGlscy5lbmNvZGVfY2VsbCh7IGM6IEMsIHI6IHJhbmdlLnMuciB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF3c1thZGRyZXNzXSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIHdzW2FkZHJlc3NdLnMgPSBoZWFkZXJTdHlsZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3Qgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7DQogICAgICAgICAgICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3MsICJEYXRvcyIpOw0KICAgICAgICAgICAgICAgIFhMU1gud3JpdGVGaWxlKHdiLCBmaW5hbEZpbGVOYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBjbG9zZU1vZGFsID0gKG1vZGFsKSA9PiBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICBjb25zdCBlc2NhcGVIdG1sID0gKHVuc2FmZSkgPT4gdHlwZW9mIHVuc2FmZSA9PT0gJ3N0cmluZycgPyB1bnNhZmUucmVwbGFjZSgvJi9nLCAiJmFtcDsiKS5yZXBsYWNlKC88L2csICImbHQ7IikucmVwbGFjZSgvPi9nLCAiJmd0OyIpLnJlcGxhY2UoLyIvZywgIiZxdW90OyIpLnJlcGxhY2UoLycvZywgIiYjMDM5OyIpIDogdW5zYWZlOw0KICAgICAgICANCiAgICAgICAgY29uc3QgZm9ybWF0RGF0ZVRvWU1EID0gKGRhdGUpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlKTsNCiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgZGF5ID0gU3RyaW5nKGQuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgZ2V0VG9kYXlEYXRlU3RyaW5nID0gKCkgPT4gZm9ybWF0RGF0ZVRvWU1EKG5ldyBEYXRlKCkpOw0KDQogICAgICAgIGNvbnN0IG9wZW5NYW5kYXRvcnlSZWdzTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBkb20ubWFuZGF0b3J5RGF0ZVBpY2tlci52YWx1ZSA9IGdldFRvZGF5RGF0ZVN0cmluZygpOw0KICAgICAgICAgICAgcmVuZGVyTWFuZGF0b3J5SGlzdG9yeUxpc3QoKTsNCiAgICAgICAgICAgIHJlbmRlck1hbmRhdG9yeVBlb3BsZUxpc3QoKTsNCiAgICAgICAgICAgIGRvbS5tYW5kYXRvcnlSZWdzTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHJlbmRlck1hbmRhdG9yeUhpc3RvcnlMaXN0ID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgaGlzdG9yeUNvbnRhaW5lciA9IGRvbS5tYW5kYXRvcnlEYXRlc0hpc3Rvcnk7DQogICAgICAgICAgICBjb25zdCBkYXRlcyA9IE9iamVjdC5rZXlzKHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnMpLnNvcnQoKGEsIGIpID0+IGIubG9jYWxlQ29tcGFyZShhKSk7DQoNCiAgICAgICAgICAgIGlmIChkYXRlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICBoaXN0b3J5Q29udGFpbmVyLmlubmVySFRNTCA9ICc8cCBjbGFzcz0idGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIHAtMiI+Tm8gaGF5IGZlY2hhcyBjb25maWd1cmFkYXMuPC9wPic7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBoaXN0b3J5Q29udGFpbmVyLmlubmVySFRNTCA9IGRhdGVzLm1hcChkYXRlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUoZGF0ZSArICdUMDA6MDA6MDAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZGF0ZU9iai50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywgeyBkYXk6ICcyLWRpZ2l0JywgbW9udGg6ICdzaG9ydCcsIHllYXI6ICdudW1lcmljJyB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25Db3VudCA9IHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnNbZGF0ZV0ubGVuZ3RoOw0KICAgICAgICAgICAgICAgIHJldHVybiBgDQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InctZnVsbCB0ZXh0LWxlZnQgcC0yIHJvdW5kZWQtbWQgaG92ZXI6Ymctb3JhbmdlLTEwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb3JhbmdlLTMwMCBoaXN0b3J5LWRhdGUtYnRuIiBkYXRhLWRhdGU9IiR7ZGF0ZX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQgdGV4dC1zbSB0ZXh0LWdyYXktODAwIj4ke2Zvcm1hdHRlZERhdGV9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJsb2NrIHRleHQteHMgdGV4dC1ncmF5LTYwMCI+JHtwZXJzb25Db3VudH0gcGVyc29uYShzKTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIH0pLmpvaW4oJycpOw0KDQogICAgICAgICAgICBoaXN0b3J5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5oaXN0b3J5LWRhdGUtYnRuJykuZm9yRWFjaChidG4gPT4gew0KICAgICAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5kYXRlOw0KICAgICAgICAgICAgICAgICAgICBkb20ubWFuZGF0b3J5RGF0ZVBpY2tlci52YWx1ZSA9IGRhdGU7DQogICAgICAgICAgICAgICAgICAgIHJlbmRlck1hbmRhdG9yeVBlb3BsZUxpc3QoKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlck1hbmRhdG9yeVBlb3BsZUxpc3QgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBkb20ubWFuZGF0b3J5RGF0ZVBpY2tlci52YWx1ZTsNCiAgICAgICAgICAgIGlmICghc2VsZWN0ZWREYXRlKSB7DQogICAgICAgICAgICAgICAgZG9tLm1hbmRhdG9yeVBlb3BsZUxpc3QuaW5uZXJIVE1MID0gJzxwIGNsYXNzPSJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIj5TZWxlY2Npb25lIHVuYSBmZWNoYSBwYXJhIHZlciBsYSBsaXN0YS48L3A+JzsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IG1hbmRhdG9yeUZvckRhdGUgPSBzdGF0ZS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zW3NlbGVjdGVkRGF0ZV0gfHwgW107DQogICAgICAgICAgICBjb25zdCBwZW9wbGUgPSBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YTsNCg0KICAgICAgICAgICAgZG9tLm1hbmRhdG9yeVBlb3BsZUxpc3QuaW5uZXJIVE1MID0gcGVvcGxlLm1hcChwZXJzb24gPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IG1hbmRhdG9yeUZvckRhdGUuaW5jbHVkZXMocGVyc29uLkPDs2RpZ28pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbk5hbWUgPSBlc2NhcGVIdG1sKHBlcnNvbi5Ob21icmUpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbkNvZGUgPSBlc2NhcGVIdG1sKHBlcnNvbi5Dw7NkaWdvKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBwLTIgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTIwMC84MCBjdXJzb3ItcG9pbnRlciBwZXJzb24tbGFiZWwiIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1uYW1lPSIke3BlcnNvbk5hbWUudG9Mb3dlckNhc2UoKX0iIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1jb2RlPSIke3BlcnNvbkNvZGUudG9Mb3dlckNhc2UoKX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJHtwZXJzb25Db2RlfSIgY2xhc3M9ImgtNSB3LTUgcm91bmRlZCBib3JkZXItZ3JheS0zMDAgdGV4dC1vcmFuZ2UtNjAwIGZvY3VzOnJpbmctb3JhbmdlLTUwMCIgJHtpc0NoZWNrZWQgPyAnY2hlY2tlZCcgOiAnJ30+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3BlcnNvbk5hbWV9IDxzcGFuIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPigke3BlcnNvbkNvZGV9KTwvc3Bhbj48L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQogICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIH0pLmpvaW4oJycpOw0KICAgICAgICAgICAgZG9tLnNlYXJjaE1hbmRhdG9yeVBlcnNvbi52YWx1ZSA9ICcnOw0KDQogICAgICAgICAgICBpZiAoZG9tLm1hbmRhdG9yeURhdGVzSGlzdG9yeSkgew0KICAgICAgICAgICAgICAgIGRvbS5tYW5kYXRvcnlEYXRlc0hpc3RvcnkucXVlcnlTZWxlY3RvckFsbCgnLmhpc3RvcnktZGF0ZS1idG4nKS5mb3JFYWNoKGIgPT4gew0KICAgICAgICAgICAgICAgICAgICBiLmNsYXNzTGlzdC50b2dnbGUoJ2JnLW9yYW5nZS0yMDAnLCBiLmRhdGFzZXQuZGF0ZSA9PT0gc2VsZWN0ZWREYXRlKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBzYXZlTWFuZGF0b3J5UmVncyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGRvbS5tYW5kYXRvcnlEYXRlUGlja2VyLnZhbHVlOw0KICAgICAgICAgICAgaWYgKCFzZWxlY3RlZERhdGUpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiUG9yIGZhdm9yLCBzZWxlY2Npb25lIHVuYSBmZWNoYSBhbnRlcyBkZSBndWFyZGFyLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUGVvcGxlQ29kZXMgPSBBcnJheS5mcm9tKGRvbS5tYW5kYXRvcnlQZW9wbGVMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0OmNoZWNrZWQnKSkubWFwKGlucHV0ID0+IGlucHV0LnZhbHVlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkUGVvcGxlQ29kZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnNbc2VsZWN0ZWREYXRlXSA9IHNlbGVjdGVkUGVvcGxlQ29kZXM7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zW3NlbGVjdGVkRGF0ZV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgY2xvc2VNb2RhbChkb20ubWFuZGF0b3J5UmVnc01vZGFsKTsNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgY2FsY3VsYXRlV2FybmluZ3MgPSAoZGF0YSkgPT4gew0KICAgICAgICAgICAgbGV0IGVhcmxpZXN0RGF0YURhdGUgPSBudWxsOw0KICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93LkZFQ0hBICYmICghZWFybGllc3REYXRhRGF0ZSB8fCByb3cuRkVDSEEgPCBlYXJsaWVzdERhdGFEYXRlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZWFybGllc3REYXRhRGF0ZSA9IHJvdy5GRUNIQTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHBlcnNvbkZpcnN0TWFuZGF0b3J5RGF0ZSA9IHt9Ow0KICAgICAgICAgICAgY29uc3Qgc29ydGVkTWFuZGF0b3J5RGF0ZXMgPSBPYmplY3Qua2V5cyhzdGF0ZS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zKS5zb3J0KCk7DQogICAgICAgICAgICBjb25zdCBhbGxNYW5kYXRvcnlQZW9wbGVFdmVyID0gbmV3IFNldCgpOw0KDQogICAgICAgICAgICBzb3J0ZWRNYW5kYXRvcnlEYXRlcy5mb3JFYWNoKGRhdGUgPT4gew0KICAgICAgICAgICAgICAgIHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnNbZGF0ZV0uZm9yRWFjaChjb2RlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgYWxsTWFuZGF0b3J5UGVvcGxlRXZlci5hZGQoY29kZSk7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGVyc29uRmlyc3RNYW5kYXRvcnlEYXRlW2NvZGVdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25GaXJzdE1hbmRhdG9yeURhdGVbY29kZV0gPSBkYXRlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgaWYgKGFsbE1hbmRhdG9yeVBlb3BsZUV2ZXIuc2l6ZSA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsgDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRCeURhdGUgPSBkYXRhLnJlZHVjZSgoYWNjLCByb3cpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocm93LkZFQ0hBICYmIHJvdy5Dw7NkaWdvKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghYWNjW3Jvdy5GRUNIQV0pIGFjY1tyb3cuRkVDSEFdID0gbmV3IFNldCgpOw0KICAgICAgICAgICAgICAgICAgICBhY2Nbcm93LkZFQ0hBXS5hZGQocm93LkPDs2RpZ28pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYWNjOw0KICAgICAgICAgICAgfSwge30pOw0KDQogICAgICAgICAgICBjb25zdCBuZXdXYXJuaW5nc0J5RGF0ZSA9IHt9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBvbmVNb250aEFnbyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBvbmVNb250aEFnby5zZXRNb250aCh0b2RheS5nZXRNb250aCgpIC0gMSk7DQogICAgICAgICAgICBvbmVNb250aEFnby5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgYWxsTWFuZGF0b3J5UGVvcGxlRXZlci5mb3JFYWNoKGNvZGUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0TWFuZGF0b3J5RGF0ZVN0ciA9IHBlcnNvbkZpcnN0TWFuZGF0b3J5RGF0ZVtjb2RlXTsNCiAgICAgICAgICAgICAgICBpZiAoIWZpcnN0TWFuZGF0b3J5RGF0ZVN0cikgcmV0dXJuOyANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdE1hbmRhdG9yeURhdGUgPSBuZXcgRGF0ZShmaXJzdE1hbmRhdG9yeURhdGVTdHIgKyAnVDAwOjAwOjAwJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0RGF0ZUZvckNoZWNrID0gKGZpcnN0TWFuZGF0b3J5RGF0ZSA+IG9uZU1vbnRoQWdvKSA/IGZpcnN0TWFuZGF0b3J5RGF0ZSA6IG9uZU1vbnRoQWdvOw0KDQogICAgICAgICAgICAgICAgaWYgKGVhcmxpZXN0RGF0YURhdGUgJiYgZm9ybWF0RGF0ZVRvWU1EKHN0YXJ0RGF0ZUZvckNoZWNrKSA8IGVhcmxpZXN0RGF0YURhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlRm9yQ2hlY2sgPSBuZXcgRGF0ZShlYXJsaWVzdERhdGFEYXRlICsgJ1QwMDowMDowMCcpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZUZvckNoZWNrKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2RheURhdGVPYmogPSBuZXcgRGF0ZShnZXRUb2RheURhdGVTdHJpbmcoKSArICdUMDA6MDA6MDAnKTsNCg0KICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSB0b2RheURhdGVPYmopIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZvcm1hdERhdGVUb1lNRChjdXJyZW50RGF0ZSk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZXhjbHVkZWREYXlzW2RhdGVTdHJdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5zZXREYXRlKGN1cnJlbnREYXRlLmdldERhdGUoKSArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlcmVkVG9kYXkgPSByZWdpc3RlcmVkQnlEYXRlW2RhdGVTdHJdIHx8IG5ldyBTZXQoKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdGVyZWRUb2RheS5oYXMoY29kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3V2FybmluZ3NCeURhdGVbZGF0ZVN0cl0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdXYXJuaW5nc0J5RGF0ZVtkYXRlU3RyXSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdXYXJuaW5nc0J5RGF0ZVtkYXRlU3RyXS5zb21lKHAgPT4gcC5Dw7NkaWdvID09PSBjb2RlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dhcm5pbmdzQnlEYXRlW2RhdGVTdHJdLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDw7NkaWdvOiBjb2RlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb21icmU6IHN0YXRlLmNvZGVUb05hbWVNYXBbY29kZV0gfHwgJ0Rlc2Nvbm9jaWRvJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgMSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhuZXdXYXJuaW5nc0J5RGF0ZSkNCiAgICAgICAgICAgICAgICAubWFwKChbZGF0ZSwgbWlzc2luZ10pID0+ICh7IGRhdGUsIG1pc3NpbmcgfSkpDQogICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSkpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGNoZWNrRGFpbHlXYXJuaW5ncyA9ICgpID0+IHsNCiAgICAgICAgICAgIHN0YXRlLndhcm5pbmdzQXJjaGl2ZSA9IGNhbGN1bGF0ZVdhcm5pbmdzKHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgdG90YWxNaXNzaW5nQ291bnQgPSBzdGF0ZS53YXJuaW5nc0FyY2hpdmUucmVkdWNlKChzdW0sIGVudHJ5KSA9PiBzdW0gKyBlbnRyeS5taXNzaW5nLmxlbmd0aCwgMCk7DQoNCiAgICAgICAgICAgIGlmICh0b3RhbE1pc3NpbmdDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICBkb20uZGFpbHlXYXJuaW5nQmFubmVyLnRleHRDb250ZW50ID0gYEFWSVNPOiBIYXkgJHt0b3RhbE1pc3NpbmdDb3VudH0gcmVnaXN0cm9zIG9ibGlnYXRvcmlvcyBwZW5kaWVudGVzIGVuIHRvdGFsLiAoUHVsc2FyIHBhcmEgdmVyKWA7DQogICAgICAgICAgICAgICAgZG9tLmRhaWx5V2FybmluZ0Jhbm5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZG9tLmRhaWx5V2FybmluZ0Jhbm5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBzaG93TWlzc2luZ1Blb3BsZUFsZXJ0ID0gKCkgPT4gew0KICAgICAgICAgICAgaWYgKHN0YXRlLndhcm5pbmdzQXJjaGl2ZS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gaGF5IGF2aXNvcyBkZSByZWdpc3Ryb3MgcGVuZGllbnRlcy4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gc3RhdGUud2FybmluZ3NBcmNoaXZlLm1hcChlbnRyeSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGVudHJ5LmRhdGUgKyAnVDAwOjAwOjAwJykudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHsgZGF5OiAnMi1kaWdpdCcsIG1vbnRoOiAnMi1kaWdpdCcsIHllYXI6ICdudW1lcmljJyB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lcyA9IGVudHJ5Lm1pc3NpbmcubWFwKHAgPT4gYC0gJHtwLk5vbWJyZX0gKCR7cC5Dw7NkaWdvfSlgKS5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgIHJldHVybiBgRmFsdGFuIHJlZ2lzdHJvcyBwYXJhIGVsICR7ZGF0ZX06XG4ke25hbWVzfWA7DQogICAgICAgICAgICB9KS5qb2luKCdcblxuJyk7DQoNCiAgICAgICAgICAgIGFsZXJ0KGBSZXN1bWVuIGRlIHJlZ2lzdHJvcyBwZW5kaWVudGVzOlxuXG4ke21lc3NhZ2V9YCk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3Qgb3Blbldhcm5pbmdzQXJjaGl2ZU1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgdHdvTW9udGhzQWdvID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIHR3b01vbnRoc0Fnby5zZXRNb250aCh0b2RheS5nZXRNb250aCgpIC0gMik7DQoNCiAgICAgICAgICAgIGRvbS53YXJuaW5nc0FyY2hpdmVUby52YWx1ZSA9IGZvcm1hdERhdGVUb1lNRCh0b2RheSk7DQogICAgICAgICAgICBkb20ud2FybmluZ3NBcmNoaXZlRnJvbS52YWx1ZSA9IGZvcm1hdERhdGVUb1lNRCh0d29Nb250aHNBZ28pOw0KDQogICAgICAgICAgICByZW5kZXJGaWx0ZXJlZFdhcm5pbmdzKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS53YXJuaW5nc0FyY2hpdmVNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlckZpbHRlcmVkV2FybmluZ3MgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBmcm9tRGF0ZSA9IGRvbS53YXJuaW5nc0FyY2hpdmVGcm9tLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgdG9EYXRlID0gZG9tLndhcm5pbmdzQXJjaGl2ZVRvLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgdG9kYXlTdHIgPSBnZXRUb2RheURhdGVTdHJpbmcoKTsNCg0KICAgICAgICAgICAgaWYgKCFmcm9tRGF0ZSB8fCAhdG9EYXRlKSB7DQogICAgICAgICAgICAgICAgZG9tLndhcm5pbmdzQXJjaGl2ZUNvbnRlbnQuaW5uZXJIVE1MID0gJzxwIGNsYXNzPSJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIj5Qb3IgZmF2b3IsIHNlbGVjY2lvbmUgdW4gcmFuZ28gZGUgZmVjaGFzIHbDoWxpZG8uPC9wPic7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZEFyY2hpdmUgPSBzdGF0ZS53YXJuaW5nc0FyY2hpdmUuZmlsdGVyKGVudHJ5ID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkuZGF0ZSA+PSBmcm9tRGF0ZSAmJiBlbnRyeS5kYXRlIDw9IHRvRGF0ZTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBzb3J0ZWRBcmNoaXZlID0gWy4uLmZpbHRlcmVkQXJjaGl2ZV0uc29ydCgoYSwgYikgPT4gYi5kYXRlLmxvY2FsZUNvbXBhcmUoYS5kYXRlKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHRvZGF5c1dhcm5pbmdzID0gc29ydGVkQXJjaGl2ZS5maWx0ZXIoZW50cnkgPT4gZW50cnkuZGF0ZSA9PT0gdG9kYXlTdHIpOw0KICAgICAgICAgICAgY29uc3Qgb3RoZXJXYXJuaW5ncyA9IHNvcnRlZEFyY2hpdmUuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmRhdGUgIT09IHRvZGF5U3RyKTsNCg0KICAgICAgICAgICAgbGV0IGNvbnRlbnRIdG1sID0gJyc7DQoNCiAgICAgICAgICAgIGlmICh0b2RheXNXYXJuaW5ncy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgY29udGVudEh0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3JkZXItMiBib3JkZXItcmVkLTUwMCByb3VuZGVkLWxnIG1iLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LXJlZC04MDAgYmctcmVkLTEwMCBwLTMgcm91bmRlZC10LW1kIj5Bdmlzb3MgcGFyYSBIb3kgKCR7bmV3IERhdGUodG9kYXlTdHIgKyAnVDAwOjAwOjAwJykudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHsgZGF5OiAnMi1kaWdpdCcsIG1vbnRoOiAnbG9uZycgfSl9KTwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICAke3RvZGF5c1dhcm5pbmdzLm1hcChlbnRyeSA9PiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IGJvcmRlci10IGJvcmRlci1yZWQtMjAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1yZWQtNzAwIGZvbnQtc2VtaWJvbGQiPlBlcnNvbmFzIHF1ZSBmYWx0YW4gcG9yIHJlZ2lzdHJhcjo8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIGxpc3QtaW5zaWRlIG10LTIgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIHNwYWNlLXktMSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2VudHJ5Lm1pc3NpbmcubWFwKHAgPT4gYDxsaT4ke2VzY2FwZUh0bWwocC5Ob21icmUpfSAoJHtlc2NhcGVIdG1sKHAuQ8OzZGlnbyl9KTwvbGk+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG90aGVyV2FybmluZ3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGNvbnRlbnRIdG1sICs9IG90aGVyV2FybmluZ3MubWFwKGVudHJ5ID0+IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC00IHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JheS04MDAiPiR7bmV3IERhdGUoZW50cnkuZGF0ZSArICdUMDA6MDA6MDAnKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywgeyB3ZWVrZGF5OiAnbG9uZycsIHllYXI6ICdudW1lcmljJywgbW9udGg6ICdsb25nJywgZGF5OiAnbnVtZXJpYycgfSl9PC9oND4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtcmVkLTcwMCBmb250LXNlbWlib2xkIG10LTEiPlBlcnNvbmFzIHF1ZSBmYWx0YXJvbiBwb3IgcmVnaXN0cmFyOjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIGxpc3QtaW5zaWRlIG10LTIgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIHNwYWNlLXktMSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtlbnRyeS5taXNzaW5nLm1hcChwID0+IGA8bGk+JHtlc2NhcGVIdG1sKHAuTm9tYnJlKX0gKCR7ZXNjYXBlSHRtbChwLkPDs2RpZ28pfSk8L2xpPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYCkuam9pbignJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChjb250ZW50SHRtbCA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICBkb20ud2FybmluZ3NBcmNoaXZlQ29udGVudC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9InRleHQtY2VudGVyIHRleHQtZ3JheS01MDAiPk5vIGhheSBhdmlzb3MgZW4gZWwgcmFuZ28gZGUgZmVjaGFzIHNlbGVjY2lvbmFkby48L3A+JzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZG9tLndhcm5pbmdzQXJjaGl2ZUNvbnRlbnQuaW5uZXJIVE1MID0gY29udGVudEh0bWw7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3Qgb3BlbkV4Y2x1ZGVkRGF5c01vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgZXhjbHVkZWREYXlzQ3VycmVudFllYXIgPSBuZXcgRGF0ZShkb20ud2FybmluZ3NBcmNoaXZlVG8udmFsdWUgfHwgZ2V0VG9kYXlEYXRlU3RyaW5nKCkpLmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICByZW5kZXJFeGNsdWRlZERheXNDYWxlbmRhcigpOw0KICAgICAgICAgICAgZG9tLmV4Y2x1ZGVkRGF5c01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgcmVuZGVyRXhjbHVkZWREYXlzQ2FsZW5kYXIgPSAoKSA9PiB7DQogICAgICAgICAgICBkb20uY3VycmVudFllYXJTcGFuLnRleHRDb250ZW50ID0gZXhjbHVkZWREYXlzQ3VycmVudFllYXI7DQogICAgICAgICAgICBjb25zdCBjYWxlbmRhckNvbnRhaW5lciA9IGRvbS5leGNsdWRlZERheXNDYWxlbmRhcjsNCiAgICAgICAgICAgIGNhbGVuZGFyQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOw0KDQogICAgICAgICAgICBjb25zdCBtb250aE5hbWVzID0gWyJFbmVybyIsICJGZWJyZXJvIiwgIk1hcnpvIiwgIkFicmlsIiwgIk1heW8iLCAiSnVuaW8iLCAiSnVsaW8iLCAiQWdvc3RvIiwgIlNlcHRpZW1icmUiLCAiT2N0dWJyZSIsICJOb3ZpZW1icmUiLCAiRGljaWVtYnJlIl07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciAobGV0IG1vbnRoID0gMDsgbW9udGggPCAxMjsgbW9udGgrKykgew0KICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgIG1vbnRoV3JhcHBlci5jbGFzc05hbWUgPSAnYmctd2hpdGUgcC0zIHJvdW5kZWQtbGcgc2hhZG93LXNtJzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBsZXQgbW9udGhIdG1sID0gYDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtY2VudGVyIHRleHQtYmx1ZS04MDAgbWItMiI+JHttb250aE5hbWVzW21vbnRoXX08L2g0PmA7DQogICAgICAgICAgICAgICAgbW9udGhIdG1sICs9ICc8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy03IGdhcC0xIHRleHQtY2VudGVyIHRleHQteHMiPic7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3QgZGF5c0luTW9udGggPSBuZXcgRGF0ZShleGNsdWRlZERheXNDdXJyZW50WWVhciwgbW9udGggKyAxLCAwKS5nZXREYXRlKCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9yIChsZXQgZGF5ID0gMTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZXhjbHVkZWREYXlzQ3VycmVudFllYXIsIG1vbnRoLCBkYXkpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZVRvWU1EKGRhdGUpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0V4Y2x1ZGVkID0gc3RhdGUuZXhjbHVkZWREYXlzW2RhdGVTdHJdOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgbW9udGhIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImRheS10b2dnbGUtYnRuIGgtNyB3LTcgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzICR7aXNFeGNsdWRlZCA/ICdiZy1yZWQtNTAwIHRleHQtd2hpdGUgZm9udC1ib2xkJyA6ICdob3ZlcjpiZy1ncmF5LTIwMCd9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGF0ZT0iJHtkYXRlU3RyfSINCiAgICAgICAgICAgICAgICAgICAgICAgID4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RheX0NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBtb250aEh0bWwgKz0gJzwvZGl2Pic7DQogICAgICAgICAgICAgICAgbW9udGhXcmFwcGVyLmlubmVySFRNTCA9IG1vbnRoSHRtbDsNCiAgICAgICAgICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aFdyYXBwZXIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjYWxlbmRhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZGF5LXRvZ2dsZS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7DQogICAgICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZS5jdXJyZW50VGFyZ2V0Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gYnV0dG9uLmRhdGFzZXQuZGF0ZTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZXhjbHVkZWREYXlzW2RhdGVTdHJdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGUuZXhjbHVkZWREYXlzW2RhdGVTdHJdOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXJlZC01MDAnLCAndGV4dC13aGl0ZScsICdmb250LWJvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdob3ZlcjpiZy1ncmF5LTIwMCcpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuZXhjbHVkZWREYXlzW2RhdGVTdHJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiZy1yZWQtNTAwJywgJ3RleHQtd2hpdGUnLCAnZm9udC1ib2xkJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXI6YmctZ3JheS0yMDAnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBtYXJrRGlydHkoKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IG9wZW5QZXJzb25EYXRhTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICByZW5kZXJQZXJzb25EYXRhTGlzdCgpOw0KICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFEZXRhaWxzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTUwMCI+PHA+U2VsZWNjaW9uZSB1bmEgcGVyc29uYSBkZSBsYSBsaXN0YSBwYXJhIHZlciBzdXMgZGF0b3MuPC9wPjwvZGl2PmA7DQogICAgICAgICAgICBkb20ucGVyc29uRGF0YU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgcmVuZGVyUGVyc29uRGF0YUxpc3QgPSAoc2VhcmNoVGVybSA9ICcnKSA9PiB7DQogICAgICAgICAgICBjb25zdCBsb3dlclNlYXJjaFRlcm0gPSBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICBjb25zdCBwZW9wbGUgPSBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YQ0KICAgICAgICAgICAgICAgIC5maWx0ZXIocCA9PiBwLk5vbWJyZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyU2VhcmNoVGVybSkgfHwgcC5Dw7NkaWdvLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJTZWFyY2hUZXJtKSkNCiAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5Ob21icmUubG9jYWxlQ29tcGFyZShiLk5vbWJyZSkpOw0KDQogICAgICAgICAgICBpZiAocGVvcGxlLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGRvbS5wZXJzb25EYXRhTGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9InRleHQteHMgdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTUwMCBwLTIiPk5vIGhheSBjb2luY2lkZW5jaWFzLjwvcD4nOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFMaXN0LmlubmVySFRNTCA9IHBlb3BsZS5tYXAocGVyc29uID0+IGANCiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ3LWZ1bGwgdGV4dC1sZWZ0IHAtMiByb3VuZGVkLW1kIGhvdmVyOmJnLWluZGlnby0xMDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby0zMDAgcGVyc29uLWRhdGEtaXRlbS1idG4iIGRhdGEtY29kZT0iJHtlc2NhcGVIdG1sKHBlcnNvbi5Dw7NkaWdvKX0iPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LXNtIHRleHQtZ3JheS04MDAiPiR7ZXNjYXBlSHRtbChwZXJzb24uTm9tYnJlKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJibG9jayB0ZXh0LXhzIHRleHQtZ3JheS02MDAiPiR7ZXNjYXBlSHRtbChwZXJzb24uQ8OzZGlnbyl9PC9zcGFuPg0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgYCkuam9pbignJyk7DQoNCiAgICAgICAgICAgIGRvbS5wZXJzb25EYXRhTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcucGVyc29uLWRhdGEtaXRlbS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7DQogICAgICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvZGU7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkb20ucGVyc29uRGF0YUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnBlcnNvbi1kYXRhLWl0ZW0tYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnYmctaW5kaWdvLTIwMCcpKTsNCiAgICAgICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLWluZGlnby0yMDAnKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHJlbmRlclBlcnNvbkRldGFpbHMoY29kZSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHJlbmRlclBlcnNvbkRldGFpbHMgPSAocGVyc29uQ29kZSkgPT4gew0KICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFEZXRhaWxzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTUwMCI+PHA+Q2FsY3VsYW5kbyBkYXRvcy4uLjwvcD48L2Rpdj5gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gY2FsY3VsYXRlUGVyc29uRGF0YShwZXJzb25Db2RlKTsNCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gc3RhdGUuY29kZVRvTmFtZU1hcFtwZXJzb25Db2RlXSB8fCAnRGVzY29ub2NpZG8nOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYWJzZW50aXNtb0h0bWwgPSBPYmplY3QuZW50cmllcyhkYXRhLmFic2VudGlzbW8pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHB5LTEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtZ3JheS02MDAiPiR7ZXNjYXBlSHRtbChrZXkpfTo8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHt2YWx1ZX0gZMOtYShzKTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYCkuam9pbignJyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBvdHNEYXRhID0gZGF0YS5vdHNXaXRoSG91cnM7DQogICAgICAgICAgICAgICAgY29uc3Qgb3RzSHRtbCA9IE9iamVjdC5rZXlzKG90c0RhdGEpLmxlbmd0aCA+IDANCiAgICAgICAgICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhvdHNEYXRhKS5zb3J0KChhLCBiKSA9PiBhWzBdLmxvY2FsZUNvbXBhcmUoYlswXSkpLm1hcCgoW290LCBob3Vyc10pID0+IGANCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBweS0xIHB4LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0ZXh0LXNtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1tb25vIj4ke2VzY2FwZUh0bWwob3QpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtODAwIj4keyhob3Vycy5ITiArIGhvdXJzLkhFKS50b0ZpeGVkKDIpfSBoPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC14cyB0ZXh0LWdyYXktNTAwIG1sLTIiPihITjogJHtob3Vycy5ITi50b0ZpeGVkKDIpfSwgSEU6ICR7aG91cnMuSEUudG9GaXhlZCgyKX0pPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIGApLmpvaW4oJycpDQogICAgICAgICAgICAgICAgICAgIDogJzxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgaXRhbGljIHAtMiI+U2luIE9UcyByZWdpc3RyYWRhcy48L3A+JzsNCg0KICAgICAgICAgICAgICAgIGxldCB2YWNhY2lvbmVzSHRtbCA9IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktMSI+PHNwYW4gY2xhc3M9InRleHQtZ3JheS02MDAiPkTDrWFzIGdlbmVyYWRvcy9hc2lnbmFkb3M6PC9zcGFuPjxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2RhdGEudmFjYWNpb25lcy5nZW5lcmFkb3N9PC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBweS0xIj48c3BhbiBjbGFzcz0idGV4dC1ncmF5LTYwMCI+RMOtYXMgZGlzZnJ1dGFkb3MgKEwtVik6PC9zcGFuPjxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2RhdGEudmFjYWNpb25lcy5kaXNmcnV0YWRvc308L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHB5LTEgZm9udC1ib2xkICR7ZGF0YS52YWNhY2lvbmVzLmJhbGFuY2UgPj0gMCA/ICd0ZXh0LWdyZWVuLTcwMCcgOiAndGV4dC1yZWQtNzAwJ30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+QmFsYW5jZTo8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2RhdGEudmFjYWNpb25lcy5iYWxhbmNlfSBkw61hKHMpPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQteHMgdGV4dC1jZW50ZXIgaXRhbGljIG10LTIgcC0yIHJvdW5kZWQtbWQgJHtkYXRhLnZhY2FjaW9uZXMuYmFsYW5jZSA+PSAwID8gJ2JnLWdyZWVuLTUwIHRleHQtZ3JlZW4tODAwJyA6ICdiZy1yZWQtNTAgdGV4dC1yZWQtODAwJ30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLnZhY2FjaW9uZXMubWVuc2FqZX0NCiAgICAgICAgICAgICAgICAgICAgPC9wPg0KICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzSHRtbCA9IGANCiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby04MDAgbWItMSI+JHtlc2NhcGVIdG1sKG5hbWUpfTwvaDQ+DQogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbWItNCI+UHJpbWVyIHJlZ2lzdHJvOiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtkYXRhLmZlY2hhSW5pY2lvIHx8ICdOL0EnfTwvc3Bhbj48L3A+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gSG9yYXMgLS0+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSBwLTQgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JheS04MDAgbWItMiI+UmVzdW1lbiBkZSBIb3JhczwvaDU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMiBnYXAteC00IGdhcC15LTEgdGV4dC1zbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWdyYXktNjAwIj5Ib3JhcyBOb3JtYWxlcyAoSE4pOjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQgdGV4dC1yaWdodCI+JHtkYXRhLmhvcmFzLm5vcm1hbGVzLnRvRml4ZWQoMil9IGg8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWdyYXktNjAwIj5Qcm9tZWRpbyBkaWFyaW8gSE46PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LXJpZ2h0Ij4ke2RhdGEuaG9yYXMucHJvbWVkaW9Ob3JtYWxlcy50b0ZpeGVkKDIpfSBoL2TDrWE8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWdyYXktNjAwIj5Ib3JhcyBFeHRyYXMgKEhFKTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtcmlnaHQiPiR7ZGF0YS5ob3Jhcy5leHRyYXMudG9GaXhlZCgyKX0gaDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtZ3JheS02MDAiPlByb21lZGlvIGRpYXJpbyBIRTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtcmlnaHQiPiR7ZGF0YS5ob3Jhcy5wcm9tZWRpb0V4dHJhcy50b0ZpeGVkKDIpfSBoL2TDrWE8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBBYnNlbnRpc21vIC0tPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC00IHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LWdyYXktODAwIG1iLTIiPlJlc3VtZW4gZGUgQWJzZW50aXNtbzwvaDU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1zbSI+JHthYnNlbnRpc21vSHRtbH08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFZhY2FjaW9uZXMgLS0+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSBwLTQgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JheS04MDAgbWItMiI+Q8OhbGN1bG8gZGUgVmFjYWNpb25lczwvaDU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc20iPiR7dmFjYWNpb25lc0h0bWx9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBPVHMgLS0+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSBwLTQgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JheS04MDAgbWItMiI+SG9yYXMgcG9yIE9UPC9oNT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTEiPiR7b3RzSHRtbH08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgIGRvbS5wZXJzb25EYXRhRGV0YWlscy5pbm5lckhUTUwgPSBkZXRhaWxzSHRtbDsNCiAgICAgICAgICAgIH0sIDEwKTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGNhbGN1bGF0ZVZhY2F0aW9uQmFsYW5jZSA9IChwZXJzb25Db2RlLCBhc09mRGF0ZVN0cikgPT4gew0KICAgICAgICAgICAgY29uc3QgcGVyc29uID0gc3RhdGUudGFibGVzWydQZXJzb25hcyddLmRhdGEuZmluZChwID0+IHAuQ8OzZGlnbyA9PT0gcGVyc29uQ29kZSk7DQogICAgICAgICAgICBpZiAoIXBlcnNvbikgew0KICAgICAgICAgICAgICAgIHJldHVybiB7IGJhbGFuY2U6IG51bGwsIGdlbmVyYWRvczogMCwgZGlzZnJ1dGFkb3M6IDAsIG1lbnNhamU6ICdQZXJzb25hIG5vIGVuY29udHJhZGEuJywgdGlwb0NvbnRyYXRvOiAnTi9BJyB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB7IHRpcG9Db250cmF0bywgYWp1c3RlVmFjYWNpb25lcyB9ID0gcGVyc29uOw0KICAgICAgICAgICAgY29uc3QgYXNPZkRhdGUgPSBuZXcgRGF0ZShhc09mRGF0ZVN0ciArICdUMTI6MDA6MDAnKTsNCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gYXNPZkRhdGUuZ2V0RnVsbFllYXIoKTsNCg0KICAgICAgICAgICAgbGV0IGdlbmVyYWRvcyA9IDA7DQogICAgICAgICAgICBsZXQgbWVuc2FqZSA9ICcnOw0KICAgICAgICAgICAgY29uc3QgaGFzQWp1c3RlID0gYWp1c3RlVmFjYWNpb25lcyAhPT0gbnVsbCAmJiBhanVzdGVWYWNhY2lvbmVzICE9PSB1bmRlZmluZWQgJiYgIWlzTmFOKHBhcnNlSW50KGFqdXN0ZVZhY2FjaW9uZXMsIDEwKSk7DQoNCiAgICAgICAgICAgIGlmIChoYXNBanVzdGUpIHsNCiAgICAgICAgICAgICAgICBnZW5lcmFkb3MgPSBOdW1iZXIoYWp1c3RlVmFjYWNpb25lcyk7DQogICAgICAgICAgICAgICAgbWVuc2FqZSA9IGBBanVzdGUgbWFudWFsIGFwbGljYWRvLiBTYWxkbyBjYWxjdWxhZG8gYSAke2FzT2ZEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnKX0uYDsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGlwb0NvbnRyYXRvID09PSAnZmlqbycpIHsNCiAgICAgICAgICAgICAgICBnZW5lcmFkb3MgPSAyNDsNCiAgICAgICAgICAgICAgICBtZW5zYWplID0gYFBlcnNvbmFsIEZpam8gKDI0IGTDrWFzL2HDsW8pLiBTYWxkbyBjYWxjdWxhZG8gYSAke2FzT2ZEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnKX0uYDsNCiAgICAgICAgICAgIH0gZWxzZSB7IC8vIHRlbXBvcmFsDQogICAgICAgICAgICAgICAgY29uc3QgYWxsUGVyc29uUmVjb3JkcyA9IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhLmZpbHRlcihyID0+IHIuQ8OzZGlnbyA9PT0gcGVyc29uQ29kZSk7DQogICAgICAgICAgICAgICAgY29uc3QgaW5oZXJpdGVkU3RhcnREYXRlID0gc3RhdGUucGVyc29uRGF0YVN1bW1hcnlbcGVyc29uQ29kZV0/LmZlY2hhSW5pY2lvOw0KDQogICAgICAgICAgICAgICAgbGV0IGZpcnN0UmVjb3JkRGF0ZVN0ciA9IGluaGVyaXRlZFN0YXJ0RGF0ZTsNCiAgICAgICAgICAgICAgICBhbGxQZXJzb25SZWNvcmRzLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyLkZFQ0hBICYmICghZmlyc3RSZWNvcmREYXRlU3RyIHx8IHIuRkVDSEEgPCBmaXJzdFJlY29yZERhdGVTdHIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFJlY29yZERhdGVTdHIgPSByLkZFQ0hBOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGZpcnN0UmVjb3JkRGF0ZVN0cikgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJlY29yZERhdGUgPSBuZXcgRGF0ZShmaXJzdFJlY29yZERhdGVTdHIgKyAnVDEyOjAwOjAwJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdFJlY29yZERhdGUuZ2V0RnVsbFllYXIoKSA8IGN1cnJlbnRZZWFyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFkb3MgPSAoYXNPZkRhdGUuZ2V0TW9udGgoKSArIDEpICogMjsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaXJzdFJlY29yZERhdGUuZ2V0RnVsbFllYXIoKSA9PT0gY3VycmVudFllYXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoc1Bhc3NlZCA9IGFzT2ZEYXRlLmdldE1vbnRoKCkgLSBmaXJzdFJlY29yZERhdGUuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFkb3MgPSBNYXRoLm1heCgwLCBtb250aHNQYXNzZWQpICogMjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBtZW5zYWplID0gYFBlcnNvbmFsIFRlbXBvcmFsICgyIGTDrWFzL21lcykuIFNhbGRvIGNhbGN1bGFkbyBhICR7YXNPZkRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycpfS5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBhbGxWYWNhdGlvblJlY29yZHMgPSBzdGF0ZS50YWJsZXNbJ0RhdG9zJ10uZGF0YS5maWx0ZXIociA9PiANCiAgICAgICAgICAgICAgICByLkPDs2RpZ28gPT09IHBlcnNvbkNvZGUgJiYNCiAgICAgICAgICAgICAgICByLkFCU0VOVElTTU8gPT09ICdWQUNBQ0lPTkVTJyAmJg0KICAgICAgICAgICAgICAgIHIuRkVDSEEuc3RhcnRzV2l0aChTdHJpbmcoY3VycmVudFllYXIpKSAmJg0KICAgICAgICAgICAgICAgIHIuRkVDSEEgPD0gYXNPZkRhdGVTdHINCiAgICAgICAgICAgICk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRlZFZhY2F0aW9ucyA9IHN0YXRlLnBlcnNvbkRhdGFTdW1tYXJ5W3BlcnNvbkNvZGVdPy52YWNhdGlvbkRhdGEgfHwgW107DQogICAgICAgICAgICBjb25zdCBpbmhlcml0ZWRWYWNhdGlvblJlY29yZHNJbkN1cnJlbnRZZWFyID0gaW5oZXJpdGVkVmFjYXRpb25zLmZpbHRlcihyID0+IA0KICAgICAgICAgICAgICAgIHIuRkVDSEEuc3RhcnRzV2l0aChTdHJpbmcoY3VycmVudFllYXIpKSAmJg0KICAgICAgICAgICAgICAgIHIuRkVDSEEgPD0gYXNPZkRhdGVTdHINCiAgICAgICAgICAgICk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGxldCBjb21iaW5lZFZhY2F0aW9uUmVjb3JkcyA9IFsuLi5hbGxWYWNhdGlvblJlY29yZHMsIC4uLmluaGVyaXRlZFZhY2F0aW9uUmVjb3Jkc0luQ3VycmVudFllYXJdOw0KDQogICAgICAgICAgICBpZiAoaGFzQWp1c3RlICYmIHN0YXRlLmFqdXN0ZVZhY2FjaW9uZXNGZWNoYUluaWNpbykgew0KICAgICAgICAgICAgICAgIGNvbWJpbmVkVmFjYXRpb25SZWNvcmRzID0gY29tYmluZWRWYWNhdGlvblJlY29yZHMuZmlsdGVyKHIgPT4gci5GRUNIQSA+PSBzdGF0ZS5hanVzdGVWYWNhY2lvbmVzRmVjaGFJbmljaW8pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhSW5pY2lvRm9ybWF0dGVkID0gbmV3IERhdGUoc3RhdGUuYWp1c3RlVmFjYWNpb25lc0ZlY2hhSW5pY2lvICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnKTsNCiAgICAgICAgICAgICAgICBtZW5zYWplICs9IGAgU2UgcmVzdGFuIGTDrWFzIGEgcGFydGlyIGRlbCAke2ZlY2hhSW5pY2lvRm9ybWF0dGVkfS5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB1bmlxdWVWYWNhdGlvbkRhdGVzID0gWy4uLm5ldyBTZXQoY29tYmluZWRWYWNhdGlvblJlY29yZHMubWFwKHIgPT4gci5GRUNIQSkpXTsNCg0KICAgICAgICAgICAgY29uc3QgZGlzZnJ1dGFkb3MgPSB1bmlxdWVWYWNhdGlvbkRhdGVzLmZpbHRlcihkYXRlU3RyID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZXhjbHVkZWREYXlzW2RhdGVTdHJdKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIgKyAnVDEyOjAwOjAwJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGF5T2ZXZWVrID49IDEgJiYgZGF5T2ZXZWVrIDw9IDU7IC8vIE1vbmRheSB0byBGcmlkYXkNCiAgICAgICAgICAgIH0pLmxlbmd0aDsNCg0KICAgICAgICAgICAgY29uc3QgYmFsYW5jZSA9IGdlbmVyYWRvcyAtIGRpc2ZydXRhZG9zOw0KDQogICAgICAgICAgICByZXR1cm4geyBiYWxhbmNlLCBnZW5lcmFkb3MsIGRpc2ZydXRhZG9zLCBtZW5zYWplLCB0aXBvQ29udHJhdG8gfTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBjYWxjdWxhdGVQZXJzb25EYXRhID0gKHBlcnNvbkNvZGUpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRlZFN1bW1hcnkgPSBzdGF0ZS5wZXJzb25EYXRhU3VtbWFyeVtwZXJzb25Db2RlXSB8fCB7DQogICAgICAgICAgICAgICAgaG9yYXM6IHsgbm9ybWFsZXM6IDAsIGV4dHJhczogMCwgZGlhc0NvbkhvcmFzTm9ybWFsZXM6IDAsIGRpYXNDb25Ib3Jhc0V4dHJhczogMCB9LA0KICAgICAgICAgICAgICAgIGFic2VudGlzbW86IHt9LCBvdHM6IHt9LCBmZWNoYUluaWNpbzogbnVsbCwgdmFjYXRpb25EYXRhOiBbXQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgY29uc3QgcGVyc29uRGF0YSA9IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhLmZpbHRlcihyb3cgPT4gcm93WydDw7NkaWdvJ10gPT09IHBlcnNvbkNvZGUpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAocGVyc29uRGF0YS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLnBlcnNvbkRhdGFTdW1tYXJ5W3BlcnNvbkNvZGVdKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgZmVjaGFJbmljaW86ICdTaW4gcmVnaXN0cm9zJywgaG9yYXM6IHsgbm9ybWFsZXM6IDAsIGV4dHJhczogMCwgcHJvbWVkaW9Ob3JtYWxlczogMCwgcHJvbWVkaW9FeHRyYXM6IDAgfSwNCiAgICAgICAgICAgICAgICAgICAgb3RzV2l0aEhvdXJzOiB7fSwgYWJzZW50aXNtbzoge30sIHZhY2FjaW9uZXM6IHsgZ2VuZXJhZG9zOiAwLCBkaXNmcnV0YWRvczogMCwgYmFsYW5jZTogMCwgbWVuc2FqZTogJ1NpbiBkYXRvcyBwYXJhIGNhbGN1bGFyLicgfQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGxldCB0b3RhbEhOID0gaW5oZXJpdGVkU3VtbWFyeS5ob3Jhcy5ub3JtYWxlczsNCiAgICAgICAgICAgIGxldCB0b3RhbEhFID0gaW5oZXJpdGVkU3VtbWFyeS5ob3Jhcy5leHRyYXM7DQogICAgICAgICAgICBsZXQgZGlhc0NvbkhOID0gaW5oZXJpdGVkU3VtbWFyeS5ob3Jhcy5kaWFzQ29uSG9yYXNOb3JtYWxlczsNCiAgICAgICAgICAgIGxldCBkaWFzQ29uSEUgPSBpbmhlcml0ZWRTdW1tYXJ5LmhvcmFzLmRpYXNDb25Ib3Jhc0V4dHJhczsNCiAgICAgICAgICAgIGNvbnN0IG90cyA9IGluaGVyaXRlZFN1bW1hcnkub3RzID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpbmhlcml0ZWRTdW1tYXJ5Lm90cykpIDoge307DQogICAgICAgICAgICBjb25zdCBhYnNlbnRpc21vID0geyAuLi5pbmhlcml0ZWRTdW1tYXJ5LmFic2VudGlzbW8gfTsNCiAgICAgICAgICAgIGxldCBmZWNoYUluaWNpbyA9IGluaGVyaXRlZFN1bW1hcnkuZmVjaGFJbmljaW87DQoNCiAgICAgICAgICAgIHBlcnNvbkRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGhuID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhOIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGhlID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhFIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpOw0KDQogICAgICAgICAgICAgICAgaWYgKCFpc05hTihobikgJiYgaG4gPiAwKSB7IHRvdGFsSE4gKz0gaG47IGRpYXNDb25ITisrOyB9DQogICAgICAgICAgICAgICAgaWYgKCFpc05hTihoZSkgJiYgaGUgPiAwKSB7IHRvdGFsSEUgKz0gaGU7IGRpYXNDb25IRSsrOyB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHJvdy5PVCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIW90c1tyb3cuT1RdKSBvdHNbcm93Lk9UXSA9IHsgSE46IDAsIEhFOiAwIH07DQogICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oaG4pKSBvdHNbcm93Lk9UXS5ITiArPSBobjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihoZSkpIG90c1tyb3cuT1RdLkhFICs9IGhlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChyb3cuQUJTRU5USVNNTykgew0KICAgICAgICAgICAgICAgICAgICBhYnNlbnRpc21vW3Jvdy5BQlNFTlRJU01PXSA9IChhYnNlbnRpc21vW3Jvdy5BQlNFTlRJU01PXSB8fCAwKSArIDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChyb3cuRkVDSEEgJiYgKCFmZWNoYUluaWNpbyB8fCByb3cuRkVDSEEgPCBmZWNoYUluaWNpbykpIHsNCiAgICAgICAgICAgICAgICAgICAgZmVjaGFJbmljaW8gPSByb3cuRkVDSEE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5U3RyID0gZ2V0VG9kYXlEYXRlU3RyaW5nKCk7DQogICAgICAgICAgICBjb25zdCB2YWNhdGlvblJlc3VsdCA9IGNhbGN1bGF0ZVZhY2F0aW9uQmFsYW5jZShwZXJzb25Db2RlLCB0b2RheVN0cik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChhYnNlbnRpc21vLmhhc093blByb3BlcnR5KCdWQUNBQ0lPTkVTJykpIHsNCiAgICAgICAgICAgICAgICAgY29uc3QgYWxsVmFjYXRpb25SZWNvcmRzID0gWy4uLihpbmhlcml0ZWRTdW1tYXJ5LnZhY2F0aW9uRGF0YSB8fCBbXSksIC4uLnBlcnNvbkRhdGEuZmlsdGVyKHIgPT4gci5BQlNFTlRJU01PID09PSAnVkFDQUNJT05FUycpXTsNCiAgICAgICAgICAgICAgICBhYnNlbnRpc21vWydWQUNBQ0lPTkVTJ10gPSB2YWNhdGlvblJlc3VsdC5kaXNmcnV0YWRvczsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBmZWNoYUluaWNpbzogZmVjaGFJbmljaW8gPyBuZXcgRGF0ZShmZWNoYUluaWNpbyArICdUMDA6MDA6MDAnKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJykgOiAnTi9BJywNCiAgICAgICAgICAgICAgICBob3Jhczogew0KICAgICAgICAgICAgICAgICAgICBub3JtYWxlczogdG90YWxITiwgZXh0cmFzOiB0b3RhbEhFLA0KICAgICAgICAgICAgICAgICAgICBwcm9tZWRpb05vcm1hbGVzOiBkaWFzQ29uSE4gPiAwID8gdG90YWxITiAvIGRpYXNDb25ITiA6IDAsDQogICAgICAgICAgICAgICAgICAgIHByb21lZGlvRXh0cmFzOiBkaWFzQ29uSEUgPiAwID8gdG90YWxIRSAvIGRpYXNDb25IRSA6IDAsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvdHNXaXRoSG91cnM6IG90cywNCiAgICAgICAgICAgICAgICBhYnNlbnRpc21vLA0KICAgICAgICAgICAgICAgIHZhY2FjaW9uZXM6IHZhY2F0aW9uUmVzdWx0DQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgZ2VuZXJhdGVGdWxsUGVyc29uRGF0YVN1bW1hcnkgPSAoZGF0YVNvdXJjZSA9IG51bGwpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFUb1Byb2Nlc3MgPSBkYXRhU291cmNlIHx8IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhOw0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IHt9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5mb3JFYWNoKHBlcnNvbiA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgcGVyc29uQ29kZSA9IHBlcnNvblsnQ8OzZGlnbyddOw0KICAgICAgICAgICAgICAgIHN1bW1hcnlbcGVyc29uQ29kZV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGhvcmFzOiB7IG5vcm1hbGVzOiAwLCBleHRyYXM6IDAsIGRpYXNDb25Ib3Jhc05vcm1hbGVzOiAwLCBkaWFzQ29uSG9yYXNFeHRyYXM6IDAgfSwNCiAgICAgICAgICAgICAgICAgICAgYWJzZW50aXNtbzoge30sIG90czoge30sIGZlY2hhSW5pY2lvOiBudWxsLCB2YWNhdGlvbkRhdGE6IFtdDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBkYXRhVG9Qcm9jZXNzLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25Db2RlID0gcm93WydDw7NkaWdvJ107DQogICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5W3BlcnNvbkNvZGVdKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5UGVyc29uID0gc3VtbWFyeVtwZXJzb25Db2RlXTsNCiAgICAgICAgICAgICAgICBjb25zdCBobiA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBoZSA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5IRSB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCg0KICAgICAgICAgICAgICAgIGlmICghaXNOYU4oaG4pICYmIGhuID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5UGVyc29uLmhvcmFzLm5vcm1hbGVzICs9IGhuOw0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5UGVyc29uLmhvcmFzLmRpYXNDb25Ib3Jhc05vcm1hbGVzKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghaXNOYU4oaGUpICYmIGhlID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5UGVyc29uLmhvcmFzLmV4dHJhcyArPSBoZTsNCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeVBlcnNvbi5ob3Jhcy5kaWFzQ29uSG9yYXNFeHRyYXMrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHJvdy5PVCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXN1bW1hcnlQZXJzb24ub3RzW3Jvdy5PVF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnlQZXJzb24ub3RzW3Jvdy5PVF0gPSB7IEhOOiAwLCBIRTogMCB9Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmKCFpc05hTihobikpIHN1bW1hcnlQZXJzb24ub3RzW3Jvdy5PVF0uSE4gKz0gaG47DQogICAgICAgICAgICAgICAgICAgIGlmKCFpc05hTihoZSkpIHN1bW1hcnlQZXJzb24ub3RzW3Jvdy5PVF0uSEUgKz0gaGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChyb3cuQUJTRU5USVNNTykgew0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5UGVyc29uLmFic2VudGlzbW9bcm93LkFCU0VOVElTTU9dID0gKHN1bW1hcnlQZXJzb24uYWJzZW50aXNtb1tyb3cuQUJTRU5USVNNT10gfHwgMCkgKyAxOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChyb3cuRkVDSEEgJiYgKCFzdW1tYXJ5UGVyc29uLmZlY2hhSW5pY2lvIHx8IHJvdy5GRUNIQSA8IHN1bW1hcnlQZXJzb24uZmVjaGFJbmljaW8pKSB7DQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnlQZXJzb24uZmVjaGFJbmljaW8gPSByb3cuRkVDSEE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChyb3cuQUJTRU5USVNNTyA9PT0gJ1ZBQ0FDSU9ORVMnKSB7DQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnlQZXJzb24udmFjYXRpb25EYXRhLnB1c2goeyBGRUNIQTogcm93LkZFQ0hBIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZXR1cm4gc3VtbWFyeTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVFZGl0UGVyc29uID0gKGluZGV4KSA9PiB7DQogICAgICAgICAgICBjb25zdCBwZXJzb24gPSBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YVtpbmRleF07DQogICAgICAgICAgICBpZiAoIXBlcnNvbikgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCBvbGRDb2RlID0gcGVyc29uLkPDs2RpZ287DQogICAgICAgICAgICBjb25zdCBvbGROYW1lID0gcGVyc29uLk5vbWJyZTsNCg0KICAgICAgICAgICAgbGV0IG5ld0NvZGUgPSBwcm9tcHQoYEludHJvZHVjZSBlbCBudWV2byBDw5NESUdPIHBhcmEgIiR7b2xkTmFtZX0iIChhY3R1YWw6ICR7b2xkQ29kZX0pOmAsIG9sZENvZGUpOw0KICAgICAgICAgICAgaWYgKG5ld0NvZGUgPT09IG51bGwpIHJldHVybjsNCiAgICAgICAgICAgIG5ld0NvZGUgPSBuZXdDb2RlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmICghbmV3Q29kZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFbCBjw7NkaWdvIG5vIHB1ZWRlIGVzdGFyIHZhY8Otby4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChuZXdDb2RlICE9PSBvbGRDb2RlICYmIHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhLnNvbWUoKHAsIGkpID0+IGkgIT0gaW5kZXggJiYgcC5Dw7NkaWdvID09PSBuZXdDb2RlKSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KGBFcnJvcjogRWwgY8OzZGlnbyAiJHtuZXdDb2RlfSIgeWEgZXhpc3RlLmApOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGV0IG5ld05hbWUgPSBwcm9tcHQoYEludHJvZHVjZSBlbCBudWV2byBOT01CUkUgcGFyYSAiJHtuZXdDb2RlfSIgKGFjdHVhbDogJHtvbGROYW1lfSk6YCwgb2xkTmFtZSk7DQogICAgICAgICAgICBpZiAobmV3TmFtZSA9PT0gbnVsbCkgcmV0dXJuOw0KICAgICAgICAgICAgbmV3TmFtZSA9IG5ld05hbWUudHJpbSgpOw0KICAgICAgICAgICAgaWYgKCFuZXdOYW1lKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVsIG5vbWJyZSBubyBwdWVkZSBlc3RhciB2YWPDrW8uIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAobmV3TmFtZS50b0xvd2VyQ2FzZSgpICE9PSBvbGROYW1lLnRvTG93ZXJDYXNlKCkgJiYgc3RhdGUudGFibGVzWydQZXJzb25hcyddLmRhdGEuc29tZSgocCwgaSkgPT4gaSAhPSBpbmRleCAmJiBwLk5vbWJyZS50b0xvd2VyQ2FzZSgpID09PSBuZXdOYW1lLnRvTG93ZXJDYXNlKCkpKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoYEVycm9yOiBFbCBub21icmUgIiR7bmV3TmFtZX0iIHlhIGV4aXN0ZS5gKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGNvZGVDaGFuZ2VkID0gb2xkQ29kZSAhPT0gbmV3Q29kZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWVDaGFuZ2VkID0gb2xkTmFtZSAhPT0gbmV3TmFtZTsNCg0KICAgICAgICAgICAgaWYgKCFjb2RlQ2hhbmdlZCAmJiAhbmFtZUNoYW5nZWQpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gc2UgZGV0ZWN0YXJvbiBjYW1iaW9zLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uTWVzc2FnZSA9IGBTZSB2YW4gYSBhcGxpY2FyIGxvcyBzaWd1aWVudGVzIGNhbWJpb3M6XG5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjb2RlQ2hhbmdlZCA/IGBDw7NkaWdvOiAke29sZENvZGV9IC0+ICR7bmV3Q29kZX1cbmAgOiBgQ8OzZGlnbzogJHtvbGRDb2RlfSAoc2luIGNhbWJpb3MpXG5gKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5hbWVDaGFuZ2VkID8gYE5vbWJyZTogJHtvbGROYW1lfSAtPiAke25ld05hbWV9XG5gIDogYE5vbWJyZTogJHtvbGROYW1lfSAoc2luIGNhbWJpb3MpXG5gKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuwqFJTVBPUlRBTlRFISBFc3RvcyBjYW1iaW9zIHNlIGFwbGljYXLDoW4gYSBUT0RPUyBsb3MgcmVnaXN0cm9zIGRlIGRhdG9zIGV4aXN0ZW50ZXMgeSBhIGxhIGNvbmZpZ3VyYWNpw7NuIGRlIGF2aXNvcy5cblxuwr9Db25maXJtYXI/YDsNCg0KICAgICAgICAgICAgaWYgKCFjb25maXJtKGNvbmZpcm1hdGlvbk1lc3NhZ2UpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwZXJzb24uQ8OzZGlnbyA9IG5ld0NvZGU7DQogICAgICAgICAgICBwZXJzb24uTm9tYnJlID0gbmV3TmFtZTsNCg0KICAgICAgICAgICAgc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyb3cuQ8OzZGlnbyA9PT0gb2xkQ29kZSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY29kZUNoYW5nZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5Dw7NkaWdvID0gbmV3Q29kZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZUNoYW5nZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5Ob21icmUgPSBuZXdOYW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjb2RlQ2hhbmdlZCkgew0KICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0YXRlLm1hbmRhdG9yeVJlZ2lzdHJhdGlvbnMpLmZvckVhY2goZGF0ZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmRhdG9yeUNvZGVzID0gc3RhdGUubWFuZGF0b3J5UmVnaXN0cmF0aW9uc1tkYXRlXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBtYW5kYXRvcnlDb2Rlcy5pbmRleE9mKG9sZENvZGUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5Q29kZXNbaW5kZXhdID0gbmV3Q29kZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBtYXJrRGlydHkoKTsNCiAgICAgICAgICAgIGJ1aWxkQ29kZU5hbWVNYXBzKCk7DQogICAgICAgICAgICByZW5kZXJNb2RpZnlNYXN0ZXJzTW9kYWwoKTsNCiAgICAgICAgICAgIGFsZXJ0KCJDYW1iaW9zIGFwbGljYWRvcyB5IHByb3BhZ2Fkb3MgYSB0b2RvcyBsb3MgcmVnaXN0cm9zLiIpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZUdsb2JhbE1vdXNlZG93biA9IChlKSA9PiB7DQogICAgICAgICAgICBpZiAoYWN0aXZlU2VhcmNoRHJvcGRvd24gJiYgDQogICAgICAgICAgICAgICAgIWFjdGl2ZVNlYXJjaERyb3Bkb3duLmlucHV0LmNvbnRhaW5zKGUudGFyZ2V0KSAmJiANCiAgICAgICAgICAgICAgICAhYWN0aXZlU2VhcmNoRHJvcGRvd24uZWxlbWVudC5jb250YWlucyhlLnRhcmdldCkpIHsNCiAgICAgICAgICAgICAgICBjbG9zZUFjdGl2ZVNlYXJjaERyb3Bkb3duKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgY2xvc2VBY3RpdmVTZWFyY2hEcm9wZG93biA9ICgpID0+IHsNCiAgICAgICAgICAgIGlmIChhY3RpdmVTZWFyY2hEcm9wZG93bikgew0KICAgICAgICAgICAgICAgIGlmIChhY3RpdmVTZWFyY2hEcm9wZG93bi5lbGVtZW50ICYmIGFjdGl2ZVNlYXJjaERyb3Bkb3duLmVsZW1lbnQucGFyZW50RWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWFyY2hEcm9wZG93bi5lbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoYWN0aXZlU2VhcmNoRHJvcGRvd24uZWxlbWVudCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUdsb2JhbE1vdXNlZG93biwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgYWN0aXZlU2VhcmNoRHJvcGRvd24gPSBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBjbG9zZVNlYXJjaE1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgICAgIGNsb3NlQWN0aXZlU2VhcmNoRHJvcGRvd24oKTsgDQogICAgICAgICAgICAgICAgY2xvc2VNb2RhbChkb20uc2VhcmNoTW9kYWwpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgZG9tLmNhbmNlbFNlYXJjaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlU2VhcmNoTW9kYWwpOw0KICAgICAgICAgICAgZG9tLmFwcGx5U2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGhhbmRsZUFwcGx5U2VhcmNoKCk7DQogICAgICAgICAgICAgICAgY2xvc2VTZWFyY2hNb2RhbCgpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGRvbS5tb2RpZnlNYXN0ZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vZGlmeU1hc3RlcnNNb2RhbCk7DQogICAgICAgICAgICBkb20uY2xvc2VNb2RpZnlNYXN0ZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2xvc2VNb2RhbChkb20ubW9kaWZ5TWFzdGVyc01vZGFsKSk7DQogICAgICAgICAgICBkb20uYWRkUGVyc29uYUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29kaWdvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcnNvbmEtY29kaWdvJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJzb25hLW5vbWJyZScpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0aXBvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcnNvbmEtdGlwby1jb250cmF0bycpLnZhbHVlOw0KICAgICAgICAgICAgICAgIGlmIChjb2RpZ28gJiYgbm9tYnJlKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5zb21lKHAgPT4gcC5Dw7NkaWdvID09PSBjb2RpZ28pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgRWwgY8OzZGlnbyAiJHtjb2RpZ299IiB5YSBleGlzdGUuYCk7IHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUudGFibGVzWydQZXJzb25hcyddLmRhdGEuc29tZShwID0+IHAuTm9tYnJlLnRvTG93ZXJDYXNlKCkgPT09IG5vbWJyZS50b0xvd2VyQ2FzZSgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEVsIG5vbWJyZSAiJHtub21icmV9IiB5YSBleGlzdGUuYCk7IHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5wdXNoKHsgJ0PDs2RpZ28nOiBjb2RpZ28sICdOb21icmUnOiBub21icmUsICd0aXBvQ29udHJhdG8nOiB0aXBvLCAnYWp1c3RlVmFjYWNpb25lcyc6IG51bGwgfSk7DQogICAgICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOyBidWlsZENvZGVOYW1lTWFwcygpOyByZW5kZXJNb2RpZnlNYXN0ZXJzTW9kYWwoKTsgZS50YXJnZXQucmVzZXQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICBkb20uYWRkT3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ290LWNvZGlnbycpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBpZiAob3QpIHsNCiAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS50YWJsZXNbJ09UcyddLmRhdGEuc29tZShvID0+IG8uT1QgPT09IG90KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYExhIE9UICIke290fSIgeWEgZXhpc3RlLmApOyByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFibGVzWydPVHMnXS5kYXRhLnB1c2goeyAnT1QnOiBvdCB9KTsNCiAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7IHJlbmRlck1vZGlmeU1hc3RlcnNNb2RhbCgpOyBlLnRhcmdldC5yZXNldCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uc2VhcmNoUGVyc29uYUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsKTsNCiAgICAgICAgICAgIGRvbS5zZWFyY2hPdElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsKTsNCg0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGV0YWlscycpLmZvckVhY2goZGV0YWlsID0+IHsNCiAgICAgICAgICAgICAgICBkZXRhaWwuYWRkRXZlbnRMaXN0ZW5lcigndG9nZ2xlJywgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJvdyA9IGRldGFpbC5xdWVyeVNlbGVjdG9yKCcuZGV0YWlscy1hcnJvdycpOw0KICAgICAgICAgICAgICAgICAgICBpZihhcnJvdykgYXJyb3cuY2xhc3NMaXN0LnRvZ2dsZSgncm90YXRlLTE4MCcsIGRldGFpbC5vcGVuKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uc2F2ZUNoYW5nZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVTYXZlQ2hhbmdlcyk7DQogICAgICAgICAgICBkb20uY3JlYXRlUGFydGl0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ3JlYXRlUGFydGl0aW9uKTsNCiAgICAgICAgICAgIGRvbS5pbXBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkb20uaW1wb3J0RmlsZUlucHV0LmNsaWNrKCkpOw0KICAgICAgICAgICAgZG9tLmltcG9ydEZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVJbXBvcnQpOw0KICAgICAgICAgICAgZG9tLmNhbmNlbEVkaXRSb3dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKGRvbS5lZGl0Um93TW9kYWwpKTsNCiAgICAgICAgICAgIGRvbS5zYXZlUm93QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2F2ZVJvdyk7DQogICAgICAgICAgICBkb20uYWRkU2VhcmNoUnVsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGFkZFNlYXJjaFJ1bGVUb0RPTSgpKTsNCiAgICAgICAgICAgIGRvbS5kb3dubG9hZEZpbHRlcmVkUGRmQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlRXhwb3J0VGFibGUoJ3BkZicpKTsNCiAgICAgICAgICAgIGRvbS5kb3dubG9hZEZpbHRlcmVkWGxzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlRXhwb3J0VGFibGUoJ3hscycpKTsNCiAgICAgICAgICAgIGRvbS5jYW5jZWxNYW5kYXRvcnlSZWdzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2xvc2VNb2RhbChkb20ubWFuZGF0b3J5UmVnc01vZGFsKSk7DQogICAgICAgICAgICBkb20uc2F2ZU1hbmRhdG9yeVJlZ3NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlTWFuZGF0b3J5UmVncyk7DQogICAgICAgICAgICBkb20ubWFuZGF0b3J5RGF0ZVBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJNYW5kYXRvcnlQZW9wbGVMaXN0KTsNCiAgICAgICAgICAgIGRvbS5kYWlseVdhcm5pbmdCYW5uZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93TWlzc2luZ1Blb3BsZUFsZXJ0KTsNCiAgICAgICAgICAgIGRvbS5jbG9zZVdhcm5pbmdzQXJjaGl2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLndhcm5pbmdzQXJjaGl2ZU1vZGFsKSk7DQogICAgICAgICAgICBkb20ud2FybmluZ3NBcmNoaXZlRnJvbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJGaWx0ZXJlZFdhcm5pbmdzKTsNCiAgICAgICAgICAgIGRvbS53YXJuaW5nc0FyY2hpdmVUby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJGaWx0ZXJlZFdhcm5pbmdzKTsNCiAgICAgICAgICAgIGRvbS5vcGVuRXhjbHVkZWREYXlzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkV4Y2x1ZGVkRGF5c01vZGFsKTsNCiAgICAgICAgICAgIGRvbS5jbG9zZUV4Y2x1ZGVkRGF5c01vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoZG9tLmV4Y2x1ZGVkRGF5c01vZGFsKTsNCiAgICAgICAgICAgICAgICBjaGVja0RhaWx5V2FybmluZ3MoKTsNCiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXJlZFdhcm5pbmdzKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGRvbS5wcmV2WWVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICBleGNsdWRlZERheXNDdXJyZW50WWVhci0tOw0KICAgICAgICAgICAgICAgIHJlbmRlckV4Y2x1ZGVkRGF5c0NhbGVuZGFyKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGRvbS5uZXh0WWVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICBleGNsdWRlZERheXNDdXJyZW50WWVhcisrOw0KICAgICAgICAgICAgICAgIHJlbmRlckV4Y2x1ZGVkRGF5c0NhbGVuZGFyKCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9tLnNlYXJjaE1hbmRhdG9yeVBlcnNvbi5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gZG9tLm1hbmRhdG9yeVBlb3BsZUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnBlcnNvbi1sYWJlbCcpOw0KICAgICAgICAgICAgICAgIGxhYmVscy5mb3JFYWNoKGxhYmVsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxhYmVsLmRhdGFzZXQubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGxhYmVsLmRhdGFzZXQuY29kZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNYXRjaCA9IG5hbWUuaW5jbHVkZXMoc2VhcmNoVGVybSkgfHwgY29kZS5pbmNsdWRlcyhzZWFyY2hUZXJtKTsNCiAgICAgICAgICAgICAgICAgICAgbGFiZWwuc3R5bGUuZGlzcGxheSA9IGlzTWF0Y2ggPyAnZmxleCcgOiAnbm9uZSc7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUGVyc29uRGF0YU1vZGFsKTsNCiAgICAgICAgICAgIGRvbS5jbG9zZVBlcnNvbkRhdGFNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLnBlcnNvbkRhdGFNb2RhbCkpOw0KICAgICAgICAgICAgZG9tLnNlYXJjaFBlcnNvbkRhdGFJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiByZW5kZXJQZXJzb25EYXRhTGlzdChlLnRhcmdldC52YWx1ZSkpOw0KDQogICAgICAgICAgICAvLyBORVcgR0VNSU5JIExJU1RFTkVSUw0KICAgICAgICAgICAgZG9tLm9wZW5JQUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5JQU1vZGFsKTsNCg0KICAgICAgICAgICAgZG9tLm9wZW5HbG9iYWxRdWVzdGlvbnNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuR2xvYmFsUXVlc3Rpb25zTW9kYWwpOw0KICAgICAgICAgICAgZG9tLmNsb3NlR2xvYmFsTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkb20uZ2xvYmFsUXVlc3Rpb25zTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7DQogICAgICAgICAgICBkb20uc2VuZEdsb2JhbFF1ZXJ5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsbEdsb2JhbElBQVBJKTsNCiAgICAgICAgICAgIGRvbS5nbG9iYWxRdWVyeUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHsgaWYoZS5rZXkgPT09ICdFbnRlcicpIGNhbGxHbG9iYWxJQUFQSSgpOyB9KTsNCiAgICAgICAgICAgIGRvbS5jbG9zZUlBTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkb20uZ2VtaW5pTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7DQogICAgICAgICAgICBkb20uc2F2ZUFwaUtleUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVJQUFwaUtleSk7DQogICAgICAgICAgICBkb20uZ2VtaW5pSW1hZ2VVcGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlSW1hZ2VVcGxvYWQpOw0KICAgICAgICAgICAgZG9tLnJlbW92ZUltYWdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlSW1hZ2UpOw0KICAgICAgICAgICAgZG9tLnByb2Nlc3NJQUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbGxJQUFQSSk7DQogICAgICAgICAgICBkb20uY2xlYXJJQVByZXZpZXdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGdlbWluaVN0YWdpbmdEYXRhID0gW107IHJlbmRlcklBUHJldmlld1RhYmxlKCk7IH0pOw0KICAgICAgICAgICAgZG9tLmNvbmZpcm1JQUltcG9ydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmZpcm1JQUltcG9ydCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoZSkgPT4geyBpZiAoc3RhdGUuaXNEaXJ0eSkgeyBlLnByZXZlbnREZWZhdWx0KCk7IGUucmV0dXJuVmFsdWUgPSAnJzsgfSB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYnVpbGRDb2RlTmFtZU1hcHMoKTsNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGlzRHVwbGljYXRlID0gKG5ld1JlY29yZCwgaWdub3JlSW5kZXggPSAtMSkgPT4gew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhOw0KICAgICAgICAgICAgY29uc3QgY29sdW1uc1RvQ29tcGFyZSA9IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5jb2x1bW5zOw0KDQogICAgICAgICAgICByZXR1cm4gZGF0YS5zb21lKChleGlzdGluZ1JlY29yZCwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHBhcnNlSW50KGlnbm9yZUluZGV4KSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW5zVG9Db21wYXJlLmV2ZXJ5KGNvbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbDEgPSBleGlzdGluZ1JlY29yZFtjb2xdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwyID0gbmV3UmVjb3JkW2NvbF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsMSkudHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09IFN0cmluZyh2YWwyKS50cmltKCkudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZUNsZWFyRmlsdGVyID0gKCkgPT4geyBzdGF0ZS5hY3RpdmVGaWx0ZXJzID0gW107IHJlbmRlcigpOyB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgYXBwbHlGaWx0ZXJzID0gKGRhdGEpID0+IHsNCiAgICAgICAgICAgIGxldCBkYXRhV2l0aEluZGV4ID0gZGF0YS5tYXAoKHJvdywgb3JpZ2luYWxJbmRleCkgPT4gKHsuLi5yb3csIG9yaWdpbmFsSW5kZXh9KSk7DQoNCiAgICAgICAgICAgIGlmIChzdGF0ZS5hY3RpdmVGaWx0ZXJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBkYXRhV2l0aEluZGV4ID0gZGF0YVdpdGhJbmRleC5maWx0ZXIocm93ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmFjdGl2ZUZpbHRlcnMuZXZlcnkoZmlsdGVyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IHJvd1tmaWx0ZXIuY29sdW1uXSB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gZmlsdGVyLnZhbHVlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmNvbHVtbiA9PT0gJ0ZFQ0hBJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2VsbFZhbHVlIHx8ICFmaWx0ZXJWYWx1ZSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZmlsdGVyLm9wZXJhdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VxdWFscyc6IHJldHVybiBjZWxsVmFsdWUgPT09IGZpbHRlclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsdCc6IHJldHVybiBjZWxsVmFsdWUgPCBmaWx0ZXJWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ3QnOiByZXR1cm4gY2VsbFZhbHVlID4gZmlsdGVyVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG93ZXJDZWxsVmFsdWUgPSBTdHJpbmcoY2VsbFZhbHVlKS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG93ZXJGaWx0ZXJWYWx1ZSA9IFN0cmluZyhmaWx0ZXJWYWx1ZSkudG9Mb3dlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmaWx0ZXIub3BlcmF0b3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb250YWlucyc6IHJldHVybiBsb3dlckNlbGxWYWx1ZS5pbmNsdWRlcyhsb3dlckZpbHRlclZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdub3RfY29udGFpbnMnOiByZXR1cm4gIWxvd2VyQ2VsbFZhbHVlLmluY2x1ZGVzKGxvd2VyRmlsdGVyVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VxdWFscyc6IHJldHVybiBsb3dlckNlbGxWYWx1ZSA9PT0gbG93ZXJGaWx0ZXJWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdub3RfZXF1YWxzJzogcmV0dXJuIGxvd2VyQ2VsbFZhbHVlICE9PSBsb3dlckZpbHRlclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c193aXRoJzogcmV0dXJuIGxvd2VyQ2VsbFZhbHVlLnN0YXJ0c1dpdGgobG93ZXJGaWx0ZXJWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kc193aXRoJzogcmV0dXJuIGxvd2VyQ2VsbFZhbHVlLmVuZHNXaXRoKGxvd2VyRmlsdGVyVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2d0Jzogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsTnVtID0gcGFyc2VGbG9hdChjZWxsVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJOdW0gPSBwYXJzZUZsb2F0KGZpbHRlclZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpc05hTihjZWxsTnVtKSAmJiAhaXNOYU4oZmlsdGVyTnVtKSAmJiBjZWxsTnVtID4gZmlsdGVyTnVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsdCc6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbE51bSA9IHBhcnNlRmxvYXQoY2VsbFZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyTnVtID0gcGFyc2VGbG9hdChmaWx0ZXJWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXNOYU4oY2VsbE51bSkgJiYgIWlzTmFOKGZpbHRlck51bSkgJiYgY2VsbE51bSA8IGZpbHRlck51bTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkYXRhV2l0aEluZGV4LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRlQSA9IGEuRkVDSEEgfHwgJyc7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZUIgPSBiLkZFQ0hBIHx8ICcnOw0KICAgICAgICAgICAgICAgIGlmIChkYXRlQSA8IGRhdGVCKSByZXR1cm4gLTE7DQogICAgICAgICAgICAgICAgaWYgKGRhdGVBID4gZGF0ZUIpIHJldHVybiAxOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVBID0gYS5Ob21icmUgfHwgJyc7DQogICAgICAgICAgICAgICAgY29uc3QgbmFtZUIgPSBiLk5vbWJyZSB8fCAnJzsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZUEubG9jYWxlQ29tcGFyZShuYW1lQiwgJ2VzJywgeyBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiBkYXRhV2l0aEluZGV4Ow0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGFkZFNlYXJjaFJ1bGVUb0RPTSA9IChydWxlID0geyBjb2x1bW46ICcnLCBvcGVyYXRvcjogJ2VxdWFscycsIHZhbHVlOiAnJyB9KSA9PiB7DQogICAgICAgICAgICBjb25zdCBydWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzW3N0YXRlLmFjdGl2ZVRhYmxlXTsNCiAgICAgICAgICAgIHJ1bGVFbC5jbGFzc05hbWUgPSAnc2VhcmNoLXJ1bGUgZ3JpZCBncmlkLWNvbHMtMTIgZ2FwLTIgaXRlbXMtY2VudGVyIG1iLTMnOw0KDQogICAgICAgICAgICBjb25zdCBzb3J0ZWRDb2x1bW5zID0gWy4uLnRhYmxlLmNvbHVtbnNdLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7DQogICAgICAgICAgICBjb25zdCBjb2x1bW5PcHRpb25zID0gc29ydGVkQ29sdW1ucy5tYXAoYyA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtlc2NhcGVIdG1sKGMpfSIgJHtjID09PSBydWxlLmNvbHVtbiA/ICdzZWxlY3RlZCcgOiAnJ30+JHtlc2NhcGVIdG1sKGMpfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KDQogICAgICAgICAgICBydWxlRWwuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zcGFuLTQiPg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPSJydWxlLWNvbHVtbiB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHAtMiB0ZXh0LXNtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gQ29sdW1uYSAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgJHtjb2x1bW5PcHRpb25zfQ0KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydWxlLWlucHV0cy1jb250YWluZXIgY29sLXNwYW4tNyBncmlkIGdyaWQtY29scy0xIGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgPCEtLSBMb3MgaW5wdXRzIGRpbsOhbWljb3Mgc2UgZ2VuZXJhcsOhbiBhcXXDrSAtLT4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wtc3Bhbi0xIGZsZXgganVzdGlmeS1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJyZW1vdmUtcnVsZS1idG4gdGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCBmb250LWJvbGQgdGV4dC0yeGwiPiZ0aW1lczs8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICBkb20uc2VhcmNoUnVsZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocnVsZUVsKTsNCg0KICAgICAgICAgICAgY29uc3QgY29sU2VsZWN0ID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLWNvbHVtbicpOw0KICAgICAgICAgICAgY29uc3QgaW5wdXRzQ29udGFpbmVyID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLWlucHV0cy1jb250YWluZXInKTsNCg0KICAgICAgICAgICAgY29uc3QgdXBkYXRlVmFsdWVJbnB1dHMgPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY29sdW1uTmFtZSA9IGNvbFNlbGVjdC52YWx1ZTsNCiAgICAgICAgICAgICAgICBpbnB1dHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7IA0KDQogICAgICAgICAgICAgICAgaWYgKCFjb2x1bW5OYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIGlucHV0c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnPHAgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTUwMCBwLTIiPlNlbGVjY2lvbmUgdW5hIGNvbHVtbmEuPC9wPic7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoY29sdW1uTmFtZSA9PT0gJ0ZFQ0hBJykgew0KICAgICAgICAgICAgICAgICAgICBpbnB1dHNDb250YWluZXIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMyBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz0icnVsZS1vcGVyYXRvciBjb2wtc3Bhbi0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgcC0yIHRleHQtc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJlcXVhbHMiICR7cnVsZS5vcGVyYXRvciA9PT0gJ2VxdWFscycgPyAnc2VsZWN0ZWQnIDogJyd9PmVzIGlndWFsIGE8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibHQiICR7cnVsZS5vcGVyYXRvciA9PT0gJ2x0JyA/ICdzZWxlY3RlZCcgOiAnJ30+ZXMgYW50ZXJpb3IgYTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJndCIgJHtydWxlLm9wZXJhdG9yID09PSAnZ3QnID8gJ3NlbGVjdGVkJyA6ICcnfT5lcyBwb3N0ZXJpb3IgYTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBjbGFzcz0icnVsZS12YWx1ZSBjb2wtc3Bhbi0yIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgcC0yIHRleHQtc20iIHZhbHVlPSIke2VzY2FwZUh0bWwocnVsZS52YWx1ZSl9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgDQoNCn0gZWxzZSBpZiAoY29sdW1uTmFtZSA9PT0gJ05vbWJyZScgfHwgY29sdW1uTmFtZSA9PT0gJ0PDs2RpZ28nKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IG5ldyBTZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGFibGUuZGF0YS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSByb3dbY29sdW1uTmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9PSBudWxsICYmIHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKHZhbCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRWYWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcykuc29ydCgoYSwgYikgPT4gU3RyaW5nKGEpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGIpLCB1bmRlZmluZWQsIHtudW1lcmljOiB0cnVlfSkpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaW5wdXRzQ29udGFpbmVyLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic2VhcmNoIiBjbGFzcz0icnVsZS12YWx1ZSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHAtMiB0ZXh0LXNtIiBwbGFjZWhvbGRlcj0iQnVzY2FyIG8gZXNjcmliaXIgdmFsb3IuLi4iIHZhbHVlPSIke2VzY2FwZUh0bWwocnVsZS52YWx1ZSl9IiBhdXRvY29tcGxldGU9Im9mZiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dCA9IGlucHV0c0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucnVsZS12YWx1ZScpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gRnVuY2nDs24gZW5jYXBzdWxhZGEgcGFyYSBhYnJpciBlbCBkZXNwbGVnYWJsZQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVuRHJvcGRvd24gPSAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYOiBEZXRlbmVyIHByb3BhZ2FjacOzbiBwYXJhIGFzZWd1cmFyIGFpc2xhbWllbnRvIGRlbCBldmVudG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDT1JSRUNDScOTTiAxOiBTaSB5YSBlc3TDoSBhYmllcnRvIGVzdGUgbWlzbW8gaW5wdXQsIG5vIGhhY2VyIG5hZGEgKGV2aXRhIGVsICJmbGFzaGVvIiB5IHJlaW5pY2lvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVNlYXJjaERyb3Bkb3duICYmIGFjdGl2ZVNlYXJjaERyb3Bkb3duLmlucHV0ID09PSB0ZXh0SW5wdXQpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VBY3RpdmVTZWFyY2hEcm9wZG93bigpOyANCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5jbGFzc05hbWUgPSAiYXV0b2NvbXBsZXRlLWl0ZW1zIG1heC1oLTQ4IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENPUlJFQ0NJw5NOIDI6IFotSW5kZXggbXV5IGFsdG8gcGFyYSBhc2VndXJhciBxdWUgc2UgdmUgZW5jaW1hIGRlIHRvZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb250YWluZXIuc3R5bGUuekluZGV4ID0gJzk5OTknOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvcHRpb25zQ29udGFpbmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VhcmNoRHJvcGRvd24gPSB7IGVsZW1lbnQ6IG9wdGlvbnNDb250YWluZXIsIGlucHV0OiB0ZXh0SW5wdXQgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ09SUkVDQ0nDk04gMyAoQ1LDjVRJQ0EpOiBVc2FyIHNldFRpbWVvdXQgcGFyYSBhZ3JlZ2FyIGVsIGxpc3RlbmVyIGdsb2JhbC4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdG8gbXVldmUgbGEgYWRpY2nDs24gZGVsIGxpc3RlbmVyIGFsIGZpbmFsIGRlIGxhIHBpbGEgZGUgZWplY3VjacOzbiwNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdhcmFudGl6YW5kbyBxdWUgZWwgY2xpYyBhY3R1YWwgTk8gZGlzcGFyZSBpbm1lZGlhdGFtZW50ZSBlbCBjaWVycmUgZGVsIG1lbsO6Lg0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlR2xvYmFsTW91c2Vkb3duLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3B1bGF0ZUFuZEZpbHRlck9wdGlvbnMgPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VndXJpZGFkOiBzaSBlbCBjb250ZW5lZG9yIHlhIG5vIGV4aXN0ZSwgcGFyYXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmJvZHkuY29udGFpbnMob3B0aW9uc0NvbnRhaW5lcikpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB0ZXh0SW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFZhbHVlcyA9IHNvcnRlZFZhbHVlcy5maWx0ZXIodmFsID0+IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFsdWVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJhdXRvY29tcGxldGUtaXRlbSB0ZXh0LWdyYXktNTAwIGl0YWxpYyI+Tm8gaGF5IGNvaW5jaWRlbmNpYXM8L2Rpdj4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkVmFsdWVzLmZvckVhY2godmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbC5jbGFzc05hbWUgPSAnYXV0b2NvbXBsZXRlLWl0ZW0nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaEluZGV4ID0gU3RyaW5nKHZhbCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFRlcm0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0ubGVuZ3RoID4gMCAmJiBtYXRjaEluZGV4ID4gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbC5pbm5lckhUTUwgPSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXNjYXBlSHRtbChTdHJpbmcodmFsKS5zdWJzdHJpbmcoMCwgbWF0Y2hJbmRleCkpfWAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPHN0cm9uZz4ke2VzY2FwZUh0bWwoU3RyaW5nKHZhbCkuc3Vic3RyaW5nKG1hdGNoSW5kZXgsIG1hdGNoSW5kZXggKyBzZWFyY2hUZXJtLmxlbmd0aCkpfTwvc3Ryb25nPmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtlc2NhcGVIdG1sKFN0cmluZyh2YWwpLnN1YnN0cmluZyhtYXRjaEluZGV4ICsgc2VhcmNoVGVybS5sZW5ndGgpKX1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbC50ZXh0Q29udGVudCA9IHZhbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIEV2aXRhciBxdWUgZWwgaW5wdXQgcGllcmRhIGZvY28gYW50ZXMgZGUgdGllbXBvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gRXZpdGFyIHByb3BhZ2FjacOzbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9IHZhbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUFjdGl2ZVNlYXJjaERyb3Bkb3duKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGFyYXIgZXZlbnRvIGNoYW5nZSBtYW51YWwgc2kgZnVlcmEgbmVjZXNhcmlvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRJbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChvcHRpb25FbCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENPUlJFQ0NJw5NOIDQ6IFVzYXIgJ29uaW5wdXQnIGRpcmVjdG8gZXZpdGEgYWN1bXVsYWNpw7NuIGRlIGxpc3RlbmVycyBtw7psdGlwbGVzDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0SW5wdXQub25pbnB1dCA9IHBvcHVsYXRlQW5kRmlsdGVyT3B0aW9uczsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVBbmRGaWx0ZXJPcHRpb25zKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0UmVjdCA9IHRleHRJbnB1dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOw0KICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5zdHlsZS50b3AgPSBgJHtpbnB1dFJlY3QuYm90dG9tICsgMn1weGA7DQogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtpbnB1dFJlY3QubGVmdH1weGA7DQogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7aW5wdXRSZWN0LndpZHRofXB4YDsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIENPUlJFQ0NJw5NOIDU6IExpc3RlbmVycyBiw6FzaWNvcyBwYXJhIGFicmlyDQogICAgICAgICAgICAgICAgICAgIHRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIG9wZW5Ecm9wZG93bik7DQogICAgICAgICAgICAgICAgICAgIHRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Ecm9wZG93bik7DQoNCg0KDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gbmV3IFNldCgpOw0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5kYXRhLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHJvd1tjb2x1bW5OYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IG51bGwgJiYgdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5hZGQodmFsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFZhbHVlcyA9IEFycmF5LmZyb20odmFsdWVzKS5zb3J0KChhLCBiKSA9PiBTdHJpbmcoYSkubG9jYWxlQ29tcGFyZShTdHJpbmcoYiksIHVuZGVmaW5lZCwge251bWVyaWM6IHRydWV9KSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlT3B0aW9ucyA9IHNvcnRlZFZhbHVlcy5tYXAodmFsID0+IGA8b3B0aW9uIHZhbHVlPSIke2VzY2FwZUh0bWwodmFsKX0iICR7dmFsID09IHJ1bGUudmFsdWUgPyAnc2VsZWN0ZWQnIDogJyd9PiR7ZXNjYXBlSHRtbCh2YWwpfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KDQogICAgICAgICAgICAgICAgICAgIGlucHV0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPSJydWxlLXZhbHVlIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgcC0yIHRleHQtc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWNjaW9uYXIgVmFsb3IgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3ZhbHVlT3B0aW9uc30NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgcnVsZSA9IHsgY29sdW1uOiBjb2xTZWxlY3QudmFsdWUsIG9wZXJhdG9yOiAnZXF1YWxzJywgdmFsdWU6ICcnIH07DQogICAgICAgICAgICAgICAgdXBkYXRlVmFsdWVJbnB1dHMoKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBydWxlRWwucXVlcnlTZWxlY3RvcignLnJlbW92ZS1ydWxlLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGNsb3NlQWN0aXZlU2VhcmNoRHJvcGRvd24oKTsNCiAgICAgICAgICAgICAgICBydWxlRWwucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgaWYgKGRvbS5zZWFyY2hSdWxlc0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWRkU2VhcmNoUnVsZVRvRE9NKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHVwZGF0ZVZhbHVlSW5wdXRzKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgZ2VuZXJhdGVGb3JtSW5wdXQgPSAoY29sLCB2YWx1ZSwgcmVsYXRpb25zKSA9PiB7IGNvbnN0IGNvbW1vbkNsYXNzZXMgPSAibXQtMSBibG9jayB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIjsgY29uc3QgbGFiZWwgPSBgPGxhYmVsIGZvcj0iZm9ybS1yb3ctJHtjb2x9IiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj4ke2NvbH08L2xhYmVsPmA7IGlmIChjb2wgPT09ICdJTVBST0RVQ1RJVk8nKSB7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gdmFsdWUgPT09ICdTSSc7DQogICAgICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXQtNCBwLTMgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXJlZC04MDAiPsK/SG9yYXMgSW1wcm9kdWN0aXZhcz88L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQteHMgdGV4dC1yZWQtNjAwIj5NYXJxdWUgZXN0YSBjYXNpbGxhIHNpIGVsIHRyYWJham8gbm8gZXMgcHJvZHVjdGl2by48L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZvcm0tcm93LSR7Y29sfSIgZGF0YS1jb2w9IiR7Y29sfSIgdmFsdWU9IlNJIiAke2lzQ2hlY2tlZCA/ICdjaGVja2VkJyA6ICcnfSBjbGFzcz0iaC02IHctNiByb3VuZGVkIGJvcmRlci1ncmF5LTMwMCB0ZXh0LXJlZC02MDAgZm9jdXM6cmluZy1yZWQtNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjb2wgPT09ICdGRUNIQScpIHsgcmV0dXJuIGAke2xhYmVsfTxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZm9ybS1yb3ctJHtjb2x9IiBkYXRhLWNvbD0iJHtjb2x9IiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHZhbHVlKX0iIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9Ij5gOyB9IGlmIChjb2wgPT09ICdPVCcpIHsgY29uc3Qgb3RPcHRpb25zID0gc3RhdGUudGFibGVzWydPVHMnXS5kYXRhLm1hcChvdCA9PiB7IGNvbnN0IG90VmFsdWUgPSBlc2NhcGVIdG1sKG90Lk9UIHx8ICcnKTsgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPSIke290VmFsdWV9IiAke290VmFsdWUgPT0gdmFsdWUgPyAnc2VsZWN0ZWQnIDogJyd9PiR7b3RWYWx1ZX08L29wdGlvbj5gIH0pLmpvaW4oJycpOyByZXR1cm4gYCR7bGFiZWx9PHNlbGVjdCBpZD0iZm9ybS1yb3ctJHtjb2x9IiBkYXRhLWNvbD0iJHtjb2x9IiBjbGFzcz0iJHtjb21tb25DbGFzc2VzfSI+PG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY2Npb25hciBPVCAtLTwvb3B0aW9uPiR7b3RPcHRpb25zfTwvc2VsZWN0PmA7IH0gaWYgKFBSRURFRklORURfT1BUSU9OU1tjb2xdIHx8IGNvbCA9PT0gJ0lNUFJPRFVDVElWTycpIHsgbGV0IG9wdGlvbnNIVE1MID0gUFJFREVGSU5FRF9PUFRJT05TW2NvbF0ubWFwKG9wdCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtvcHR9IiAke29wdCA9PSB2YWx1ZSA/ICdzZWxlY3RlZCcgOiAnJ30+JHtvcHR9PC9vcHRpb24+YCkuam9pbignJyk7IGlmIChjb2wgPT09ICdBQlNFTlRJU01PJyB8fCBjb2wgPT09ICdUVVJOTycpIHsgb3B0aW9uc0hUTUwgPSBgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY2Npb25hciAtLTwvb3B0aW9uPmAgKyBvcHRpb25zSFRNTDsgfSBlbHNlIGlmIChjb2wgPT09ICdDQU1CSU8gSk9STkFEQScgfHwgY29sID09PSAnUExVUyBQQVJBREEnKSB7IG9wdGlvbnNIVE1MID0gYDxvcHRpb24gdmFsdWU9IiI+PC9vcHRpb24+YCArIG9wdGlvbnNIVE1MOyB9IHJldHVybiBgJHtsYWJlbH08c2VsZWN0IGlkPSJmb3JtLXJvdy0ke2NvbH0iIGRhdGEtY29sPSIke2NvbH0iIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9Ij4ke29wdGlvbnNIVE1MfTwvc2VsZWN0PmA7IH0gaWYgKGNvbCA9PT0gJ0PDs2RpZ28nIHx8IGNvbCA9PT0gJ05vbWJyZScpIHsgcmV0dXJuIGA8ZGl2IGNsYXNzPSJhdXRvY29tcGxldGUtY29udGFpbmVyIj4gJHtsYWJlbH0gPGlucHV0IHR5cGU9InRleHQiIGlkPSJmb3JtLXJvdy0ke2NvbH0iIGRhdGEtY29sPSIke2NvbH0iIHZhbHVlPSIke2VzY2FwZUh0bWwodmFsdWUpfSIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iIGF1dG9jb21wbGV0ZT0ib2ZmIj4gPC9kaXY+YDsgfSByZXR1cm4gYCR7bGFiZWx9PGlucHV0IHR5cGU9InRleHQiIGlkPSJmb3JtLXJvdy0ke2NvbH0iIGRhdGEtY29sPSIke2NvbH0iIHZhbHVlPSIke2VzY2FwZUh0bWwodmFsdWUpfSIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iPmA7IH07DQogICAgICAgIGNvbnN0IGluaXRBdXRvY29tcGxldGUgPSAoZm9ybUVsZW1lbnQpID0+IHsgY29uc3QgYXR0YWNoQXV0b2NvbXBsZXRlID0gKGlucHV0LCBzb3VyY2VNYXAsIHRhcmdldEZpZWxkKSA9PiB7IGxldCBjdXJyZW50Rm9jdXM7IGNvbnN0IHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2VNYXApOyBjb25zdCBjbG9zZUFsbExpc3RzID0gKGVsbW50KSA9PiB7IGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYXV0b2NvbXBsZXRlLWl0ZW1zIik7IGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsgaWYgKGVsbW50ICE9IGl0ZW1zW2ldICYmIGVsbW50ICE9IGlucHV0KSB7IGl0ZW1zW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbXNbaV0pOyB9IH0gfTsgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCBmdW5jdGlvbihlKSB7IGxldCBhLCBiLCBpLCB2YWwgPSB0aGlzLnZhbHVlOyBjbG9zZUFsbExpc3RzKCk7IGlmICghdmFsKSB7IHJldHVybiBmYWxzZTsgfSBjdXJyZW50Rm9jdXMgPSAtMTsgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkRJViIpOyBhLnNldEF0dHJpYnV0ZSgiaWQiLCB0aGlzLmlkICsgImF1dG9jb21wbGV0ZS1saXN0Iik7IGEuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJhdXRvY29tcGxldGUtaXRlbXMiKTsgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGEpOyBjb25zdCBpbnB1dFJlY3QgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyBjb25zdCBzcGFjZUJlbG93ID0gd2luZG93LmlubmVySGVpZ2h0IC0gaW5wdXRSZWN0LmJvdHRvbTsgYS5zdHlsZS5tYXhIZWlnaHQgPSAoc3BhY2VCZWxvdyAtIDE2KSArICdweCc7IGNvbnN0IGZpbHRlcmVkS2V5cyA9IHNvdXJjZUtleXMuZmlsdGVyKGtleSA9PiBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh2YWwudG9Mb3dlckNhc2UoKSkpOyBmaWx0ZXJlZEtleXMuc2xpY2UoMCwgMTApLmZvckVhY2goa2V5ID0+IHsgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkRJViIpOyBiLmNsYXNzTmFtZSA9ICJhdXRvY29tcGxldGUtaXRlbSI7IGNvbnN0IG1hdGNoSW5kZXggPSBrZXkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbC50b0xvd2VyQ2FzZSgpKTsgYi5pbm5lckhUTUwgPSBrZXkuc3Vic3RyKDAsIG1hdGNoSW5kZXgpICsgIjxzdHJvbmc+IiArIGtleS5zdWJzdHIobWF0Y2hJbmRleCwgdmFsLmxlbmd0aCkgKyAiPC9zdHJvbmc+IiArIGtleS5zdWJzdHIobWF0Y2hJbmRleCArIHZhbC5sZW5ndGgpOyBiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oZSkgeyBpbnB1dC52YWx1ZSA9IGtleTsgY29uc3Qgb3RoZXJWYWx1ZSA9IHNvdXJjZU1hcFtrZXldOyBjb25zdCB0YXJnZXRJbnB1dCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbD0iJHt0YXJnZXRGaWVsZH0iXWApOyBpZih0YXJnZXRJbnB1dCkgdGFyZ2V0SW5wdXQudmFsdWUgPSBvdGhlclZhbHVlOyBjbG9zZUFsbExpc3RzKCk7IH0pOyBhLmFwcGVuZENoaWxkKGIpOyB9KTsgfSk7IGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBmdW5jdGlvbihlKSB7IGxldCB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCArICJhdXRvY29tcGxldGUtbGlzdCIpOyBpZiAoeCkgeCA9IHguZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYXV0b2NvbXBsZXRlLWl0ZW0iKTsgaWYgKCF4KSByZXR1cm47IGlmIChlLmtleUNvZGUgPT0gNDApIHsgY3VycmVudEZvY3VzKys7IGFkZEFjdGl2ZSh4KTsgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMzgpIHsgY3VycmVudEZvY3VzLS07IGFkZEFjdGl2ZSh4KTsgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gMTMpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBpZiAoY3VycmVudEZvY3VzID4gLTEpIHsgaWYgKHgpIHhbY3VycmVudEZvY3VzXS5jbGljaygpOyB9IH0gfSk7IGNvbnN0IGFkZEFjdGl2ZSA9ICh4KSA9PiB7IGlmICgheCkgcmV0dXJuIGZhbHNlOyByZW1vdmVBY3RpdmUoeCk7IGlmIChjdXJyZW50Rm9jdXMgPj0geC5sZW5ndGgpIGN1cnJlbnRGb2N1cyA9IDA7IGlmIChjdXJyZW50Rm9jdXMgPCAwKSBjdXJyZW50Rm9jdXMgPSAoeC5sZW5ndGggLSAxKTsgeFtjdXJyZW50Rm9jdXNdLmNsYXNzTGlzdC5hZGQoImF1dG9jb21wbGV0ZS1hY3RpdmUiKTsgfTsgY29uc3QgcmVtb3ZlQWN0aXZlID0gKHgpID0+IHsgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7IHhbaV0uY2xhc3NMaXN0LnJlbW92ZSgiYXV0b2NvbXBsZXRlLWFjdGl2ZSIpOyB9IH07IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKGUpID0+IGNsb3NlQWxsTGlzdHMoZS50YXJnZXQpKTsgfTsgY29uc3QgY29kaWdvSW5wdXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb2w9IkPDs2RpZ28iXScpOyBjb25zdCBub21icmVJbnB1dCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbD0iTm9tYnJlIl0nKTsgaWYgKGNvZGlnb0lucHV0KSBhdHRhY2hBdXRvY29tcGxldGUoY29kaWdvSW5wdXQsIHN0YXRlLmNvZGVUb05hbWVNYXAsICdOb21icmUnKTsgaWYgKG5vbWJyZUlucHV0KSBhdHRhY2hBdXRvY29tcGxldGUobm9tYnJlSW5wdXQsIHN0YXRlLm5hbWVUb0NvZGVNYXAsICdDw7NkaWdvJyk7IH07DQoNCiAgICAgICAgcmV0dXJuIHsgaW5pdCwgdXBkYXRlSUFSb3csIGRlbGV0ZUlBUm93IH07DQogICAgfSkoKTsNCg0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBBcHAuaW5pdCk7DQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQo8L2h0bWw+"},"4":{"p":"ute","c":"PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5Db250cm9sIExhYm9yYWwgVVRFIEFjdHVhbGl6YWRvIChDb3JyZWdpZG8pPC90aXRsZT4NCiAgICA8bGluayByZWw9Imljb24iIGhyZWY9Imh0dHBzOi8vaS5wb3N0aW1nLmNjL0JQczJQMFNIL0xPR08tVVRFLnBuZyIgdHlwZT0iaW1hZ2UvcG5nIj4NCiAgICA8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIGhyZWY9Imh0dHBzOi8vaS5wb3N0aW1nLmNjL0JQczJQMFNIL0xPR08tVVRFLnBuZyI+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLzIuNS4xL2pzcGRmLnVtZC5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qc3BkZi1hdXRvdGFibGUvMy44LjIvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPg0KICAgIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4+DQogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDQwMDs1MDA7NjAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+DQogICAgPHN0eWxlPg0KICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7IH0NCiAgICAgICAgLm1vZGFsLWVudGVyIHsgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlLW91dDsgfQ0KICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7DQogICAgICAgICAgICBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTsgfQ0KICAgICAgICAgICAgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9DQogICAgICAgIH0NCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiA4cHg7IGhlaWdodDogOHB4OyB9DQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgeyBiYWNrZ3JvdW5kOiAjZjFmMWYxOyBib3JkZXItcmFkaXVzOiAxMHB4OyB9DQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgeyBiYWNrZ3JvdW5kOiAjYThhOGE4OyBib3JkZXItcmFkaXVzOiAxMHB4OyB9DQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjODg4OyB9DQogICAgICAgIHN1bW1hcnk6Oi13ZWJraXQtZGV0YWlscy1tYXJrZXIgeyBkaXNwbGF5OiBub25lOyB9DQogICAgICAgIHN1bW1hcnkgeyBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7IH0NCiAgICAgICAgLyogRWwgYmFubmVyIGRlIGF2aXNvcyBzZSBoYSBlbGltaW5hZG8gKi8NCiAgICAgICAgLnN1bW1hcnktbGV2ZWwtMSB7IHBhZGRpbmctbGVmdDogMC41cmVtOyB9DQogICAgICAgIC5zdW1tYXJ5LWxldmVsLTIgeyBwYWRkaW5nLWxlZnQ6IDEuNXJlbTsgfQ0KICAgICAgICAuc3VtbWFyeS1sZXZlbC0zIHsgcGFkZGluZy1sZWZ0OiAyLjVyZW07IH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHkgY2xhc3M9ImJnLWdyYXktMTAwIHRleHQtZ3JheS04MDAiPg0KDQogICAgPGRpdiBpZD0iYXBwIiBjbGFzcz0iZmxleCBoLXNjcmVlbiI+DQogICAgICAgIDxhc2lkZSBjbGFzcz0idy02NCBiZy13aGl0ZS84MCBiYWNrZHJvcC1ibHVyLXNtIGJvcmRlci1yIGJvcmRlci1ncmF5LTIwMC81MCBwLTYgZmxleCBmbGV4LWNvbCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1jZW50ZXIgbWItNCI+DQogICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vaS5wb3N0aW1nLmNjL3FxNndZSldiL0xPR08tVVRFLnBuZyIgYWx0PSJMb2dvIFVURSIgY2xhc3M9ImgtMjYgdy1hdXRvIj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtOTAwIG1iLTYiPkNvbnRyb2wgbGFib3JhbCBVVEU8L2gxPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8ZGl2IGlkPSJxdWljay1hY3Rpb25zIiBjbGFzcz0iYm9yZGVyLXQgcHQtNCBtdC00IHNwYWNlLXktMiI+DQogICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LWdyYXktODAwIG1iLTIiPkFjY2lvbmVzPC9oMj4NCiAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ibW9kaWZ5LW1hc3RlcnMtYnRuIiBjbGFzcz0idy1mdWxsIGJnLXNreS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHRleHQtc20gcHktMiBweC0zIHJvdW5kZWQtbGcgaG92ZXI6Ymctc2t5LTcwMCB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LWNlbnRlciI+TW9kaWZpY2FyIFBlcnNvbmFzPC9idXR0b24+DQogICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InBlcnNvbi1kYXRhLWJ0biIgY2xhc3M9InctZnVsbCBiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXNtIHB5LTIgcHgtMyByb3VuZGVkLWxnIGhvdmVyOmJnLWluZGlnby03MDAgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1jZW50ZXIgbXQtMiBoaWRkZW4iPkRhdG9zIHBvciBQZXJzb25hPC9idXR0b24+DQogICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Imdsb2JhbC1zdW1tYXJ5LWJ0biIgY2xhc3M9InctZnVsbCBiZy1wdXJwbGUtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXNtIHB5LTIgcHgtMyByb3VuZGVkLWxnIGhvdmVyOmJnLXB1cnBsZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1jZW50ZXIgbXQtMiBoaWRkZW4iPlZlciBSZXN1bWVuIEdsb2JhbDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LWF1dG8gYm9yZGVyLXQgcHQtNCBzcGFjZS15LTIiPg0KICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJjcmVhdGUtcGFydGl0aW9uLWJ0biIgY2xhc3M9InctZnVsbCBiZy10ZWFsLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctdGVhbC03MDAgdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIHRleHQtY2VudGVyIGhpZGRlbiI+DQogICAgICAgICAgICAgICAgICAgIEhhY2VyIHVuYSBQYXJ0aWNpw7NuDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImltcG9ydC1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2xhdGUtNzAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS04MDAgdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIHRleHQtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgSW1wb3J0YXIgZGVzZGUgQXJjaGl2bw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNhdmUtY2hhbmdlcy1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2xhdGUtNzAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS04MDAgdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIHRleHQtY2VudGVyIGhpZGRlbiI+DQogICAgICAgICAgICAgICAgICAgIEd1YXJkYXIgQ2FtYmlvcw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW1wb3J0LWZpbGUtaW5wdXQiIGNsYXNzPSJoaWRkZW4iIGFjY2VwdD0iLmpzb24iPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIA0KICAgICAgICAgICAgICAgICA8IS0tIEJvdMOzbiBkZSBJQSBJbnllY3RhZG8gLS0+DQogICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImNvbnN1bHRhcy1haS1idG4iIGNsYXNzPSJ3LWZ1bGwgYmctc2xhdGUtODAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXNtIHB5LTIgcHgtMyByb3VuZGVkLWxnIGhvdmVyOmJnLXNsYXRlLTkwMCB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LWNlbnRlciBtdC0yIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05LjY2MyAxN2g0LjY3M00xMiAzdjFtNi4zNjQgMS42MzZsLS43MDcuNzA3TTIxIDEyaC0xTTQgMTJIM20zLjM0My01LjY1N2wtLjcwNy0uNzA3bTIuODI4IDkuOWE1IDUgMCAxMTcuMDcyIDBsLS41NDguNTQ3QTMuMzc0IDMuMzc0IDAgMDAxNCAxOC40NjlWMTlhMiAyIDAgMTEtNCAwdi0uNTMxYzAtLjg5NS0uMzU2LTEuNzU0LS45ODgtMi4zODZsLS41NDgtLjU0N3oiPjwvcGF0aD48L3N2Zz4NCiAgICAgICAgICAgICAgICAgICAgQ29uc3VsdGFzIGNvbiBJQQ0KICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgPC9hc2lkZT4NCg0KICAgICAgICA8bWFpbiBpZD0ibWFpbi1jb250ZW50IiBjbGFzcz0iZmxleC1ncm93IHAtOCBmbGV4IGZsZXgtY29sIGJnLWdyYXktNTAvNTAiPg0KICAgICAgICAgICAgPCEtLSBFbCBiYW5uZXIgZGUgYXZpc29zIGRpYXJpb3Mgc2UgaGEgZWxpbWluYWRvIC0tPg0KICAgICAgICAgICAgPGRpdiBpZD0idGFibGUtYXJlYSIgY2xhc3M9ImgtZnVsbCBmbGV4IGZsZXgtY29sIj48L2Rpdj4NCiAgICAgICAgPC9tYWluPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0iZ2xvYmFsLXN1bW1hcnktbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctNnhsIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzkwdmhdIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi02IGZsZXgtc2hyaW5rLTAgZmxleC13cmFwIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1wdXJwbGUtOTAwIj5SZXN1bWVuIEdsb2JhbCBwb3IgQmxvcXVlczwvaDM+DQogICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGZsZXgtd3JhcCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzdW1tYXJ5LXBlcmlvZC1maWx0ZXIiIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbXItMiI+UGVyaW9kbzo8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ic3VtbWFyeS1wZXJpb2QtZmlsdGVyIiBjbGFzcz0iYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiBmb2N1czpyaW5nLXB1cnBsZS01MDAgZm9jdXM6Ym9yZGVyLXB1cnBsZS01MDAiPjwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzdW1tYXJ5LWNvbXBhbnktZmlsdGVyIiBjbGFzcz0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1yLTIiPkVtcHJlc2E6PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InN1bW1hcnktY29tcGFueS1maWx0ZXIiIGNsYXNzPSJib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gcC0yIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVE9EQVMiPlRPREFTPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVVRFIj5VVEU8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNQVNBIj5NQVNBPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTU9OQ09CUkEiPk1PTkNPQlJBPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaC04IGJvcmRlci1sIGJvcmRlci1ncmF5LTMwMCBteC0yIj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzdW1tYXJ5LXN0YXJ0LWRhdGUiIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkRlc2RlOjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InN1bW1hcnktc3RhcnQtZGF0ZSIgY2xhc3M9ImJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTEuNSBmb2N1czpyaW5nLXB1cnBsZS01MDAgZm9jdXM6Ym9yZGVyLXB1cnBsZS01MDAiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InN1bW1hcnktZW5kLWRhdGUiIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkhhc3RhOjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InN1bW1hcnktZW5kLWRhdGUiIGNsYXNzPSJib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gcC0xLjUgZm9jdXM6cmluZy1wdXJwbGUtNTAwIGZvY3VzOmJvcmRlci1wdXJwbGUtNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImNsZWFyLXN1bW1hcnktZGF0ZXMtYnRuIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTcwMCBwLTIgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQiPkxpbXBpYXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9Imdsb2JhbC1zdW1tYXJ5LWNvbnRlbnQiIGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHByLTIgc3BhY2UteS0yIj48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgaXRlbXMtY2VudGVyIG10LTggc3BhY2UteC00IGZsZXgtc2hyaW5rLTAiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iZG93bmxvYWQtc3VtbWFyeS14bHMtYnRuIiBjbGFzcz0iYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmVlbi03MDAiPkRlc2NhcmdhciBYTFM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNsb3NlLWdsb2JhbC1zdW1tYXJ5LW1vZGFsIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5DZXJyYXI8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICANCiAgICA8ZGl2IGlkPSJwZXJzb24tZGF0YS1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy02eGwgbW9kYWwtZW50ZXIgZmxleCBmbGV4LWNvbCBtYXgtaC1bOTB2aF0iPg0KICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWluZGlnby05MDAgZmxleC1zaHJpbmstMCI+RGF0b3MgQ29uc29saWRhZG9zIHBvciBQZXJzb25hPC9oMz4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyBmbGV4IGdhcC02IG92ZXJmbG93LWhpZGRlbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzMgZmxleCBmbGV4LWNvbCBib3JkZXItciBwci00Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InNlYXJjaCIgaWQ9InNlYXJjaC1wZXJzb24tZGF0YSIgcGxhY2Vob2xkZXI9IkJ1c2NhciBwZXJzb25hLi4uIiBjbGFzcz0idy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBtYi00IHAtMiBmb2N1czpyaW5nLWluZGlnby01MDAgZm9jdXM6Ym9yZGVyLWluZGlnby01MDAiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwZXJzb24tZGF0YS1saXN0IiBjbGFzcz0iZmxleC1ncm93IG92ZXJmbG93LXktYXV0byBzcGFjZS15LTEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0icGVyc29uLWRhdGEtZGV0YWlscyIgY2xhc3M9InctMi8zIGZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gcC0yIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtZ3JheS01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHA+U2VsZWNjaW9uZSB1bmEgcGVyc29uYSBkZSBsYSBsaXN0YSBwYXJhIHZlciBzdXMgZGF0b3MuPC9wPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTQgbXQtOCBmbGV4LXNocmluay0wIj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNsb3NlLXBlcnNvbi1kYXRhLW1vZGFsIiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIj5DZXJyYXI8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDwhLS0gRWwgbW9kYWwgbWFuZGF0b3J5LXJlZ3MtbW9kYWwgc2UgaGEgZWxpbWluYWRvIC0tPg0KDQogICAgPCEtLSBFbCBtb2RhbCB3YXJuaW5ncy1hcmNoaXZlLW1vZGFsIHNlIGhhIGVsaW1pbmFkbyAtLT4NCiAgICANCiAgICA8IS0tIEVsIG1vZGFsIGV4Y2x1ZGVkLWRheXMtbW9kYWwgc2UgaGEgZWxpbWluYWRvIC0tPg0KDQogICAgPGRpdiBpZD0ibW9kaWZ5LW1hc3RlcnMtbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctNXhsIG1vZGFsLWVudGVyIGZsZXggZmxleC1jb2wgbWF4LWgtWzkwdmhdIj4NCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC1ibHVlLTkwMCBmbGV4LXNocmluay0wIj5Nb2RpZmljYXIgUGVyc29uYXM8L2gzPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00IGZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gcHItMiI+DQogICAgICAgICAgICAgICAgPGRldGFpbHMgaWQ9ImRldGFpbHMtcGVyc29uYXMiIGNsYXNzPSJiZy1ncmF5LTUwIHJvdW5kZWQtbGcgYm9yZGVyIiBvcGVuPg0KICAgICAgICAgICAgICAgICAgICA8c3VtbWFyeSBjbGFzcz0icC00IGZvbnQtc2VtaWJvbGQgdGV4dC1sZyB0ZXh0LXNreS04MDAgY3Vyc29yLXBvaW50ZXIgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlBlcnNvbmFzPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy01IGgtNSB0cmFuc2l0aW9uLXRyYW5zZm9ybSB0cmFuc2Zvcm0gcm90YXRlLTE4MCBkZXRhaWxzLWFycm93IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTkgOWwtNyA3LTctNyIgLz48L3N2Zz4NCiAgICAgICAgICAgICAgICAgICAgPC9zdW1tYXJ5Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gaWQ9ImFkZC1wZXJzb25hLWZvcm0iIGNsYXNzPSJtYi00IHAtNCBib3JkZXIgcm91bmRlZC1sZyBiZy13aGl0ZSBzcGFjZS15LTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTMgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPk5vbWJyZSBDb21wbGV0bzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InBlcnNvbmEtbm9tYnJlIiByZXF1aXJlZCBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIiBwbGFjZWhvbGRlcj0iTm9tYnJlIEFwZWxsaWRvIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+UHVlc3RvPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGVyc29uYS1wdWVzdG8iIHJlcXVpcmVkIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiIHBsYWNlaG9sZGVyPSJQdWVzdG8gZGUgdHJhYmFqbyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkVtcHJlc2E8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icGVyc29uYS1lbXByZXNhIiByZXF1aXJlZCBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJVVEUiPlVURTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik1BU0EiPk1BU0E8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNT05DT0JSQSI+TU9OQ09CUkE8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0zIGdhcC00IGJvcmRlci10IHB0LTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPklEPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGVyc29uYS1pZCIgcmVxdWlyZWQgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCIgcGxhY2Vob2xkZXI9IklEIGRlIGxhIHBlcnNvbmEiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgbXQtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0icGVyc29uYS1zaW4taWQiIGNsYXNzPSJoLTQgdy00IHJvdW5kZWQgYm9yZGVyLWdyYXktMzAwIHRleHQtYmx1ZS02MDAgZm9jdXM6cmluZy1ibHVlLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icGVyc29uYS1zaW4taWQiIGNsYXNzPSJtbC0yIHRleHQtc20gdGV4dC1ncmF5LTYwMCI+U2luIElEPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5QcmVjaW8gSG9yYSBOb3JtYWwgKOKCrCk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InBlcnNvbmEtcHJlY2lvLWhuIiByZXF1aXJlZCB2YWx1ZT0iMCIgc3RlcD0iMC4wMSIgY2xhc3M9Im10LTEgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPlByZWNpbyBIb3JhIEV4dHJhICjigqwpPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJwZXJzb25hLXByZWNpby1oZSIgcmVxdWlyZWQgdmFsdWU9IjAiIHN0ZXA9IjAuMDEiIGNsYXNzPSJtdC0xIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9InctZnVsbCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAiPkHDsWFkaXIgUGVyc29uYTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InNlYXJjaCIgaWQ9InNlYXJjaC1wZXJzb25hIiBjbGFzcz0idy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBtYi00IiBwbGFjZWhvbGRlcj0iQnVzY2FyIHBvciBJRCwgbm9tYnJlLCBwdWVzdG8gbyBlbXByZXNhLi4uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBlcnNvbmFzLWxpc3QtY29udGFpbmVyIiBjbGFzcz0ibWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIGJvcmRlci10IHB0LTIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2RldGFpbHM+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTggZmxleC1zaHJpbmstMCI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjbG9zZS1tb2RpZnktbWFzdGVycyIgY2xhc3M9ImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTMwMCB0cmFuc2l0aW9uLWNvbG9ycyI+Q2VycmFyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJlZGl0LXJvdy1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LTUwIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC04IHctZnVsbCBtYXgtdy00eGwgbW9kYWwtZW50ZXIiPg0KICAgICAgICAgICAgPGgzIGlkPSJlZGl0LXJvdy1tb2RhbC10aXRsZSIgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi02IHRleHQtYmx1ZS05MDAiPjwvaDM+DQogICAgICAgICAgICA8Zm9ybSBpZD0iZWRpdC1yb3ctZm9ybSIgY2xhc3M9InNwYWNlLXktNCBtYXgtaC1bNzB2aF0gb3ZlcmZsb3cteS1hdXRvIHByLTIiPjwvZm9ybT4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTgiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY2FuY2VsLWVkaXQtcm93IiBjbGFzcz0iYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIj5DZXJyYXIgVmVudGFuYTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0ic2F2ZS1yb3ctYnRuIiBjbGFzcz0iYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24tY29sb3JzIj5BcGxpY2FyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJzZWFyY2gtbW9kYWwiIGNsYXNzPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgaGlkZGVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgei01MCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtOCB3LWZ1bGwgbWF4LXctM3hsIG1vZGFsLWVudGVyIj4NCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC1ibHVlLTkwMCI+QsO6c3F1ZWRhIFBlcnNvbmFsaXphZGEgLyBGaWx0cmFyPC9oMz4NCiAgICAgICAgICAgIDxkaXYgaWQ9InNlYXJjaC1ydWxlcy1jb250YWluZXIiIGNsYXNzPSJzcGFjZS15LTMgbWF4LWgtWzUwdmhdIG92ZXJmbG93LXktYXV0byBwci0yIj48L2Rpdj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImFkZC1zZWFyY2gtcnVsZS1idG4iIGNsYXNzPSJtdC00IHRleHQtc20gYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LXNlbWlib2xkIHB5LTIgcHgtMyByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIj4rIEHDsWFkaXIgQ29uZGljacOzbjwvYnV0dG9uPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG10LTgiPg0KICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iZG93bmxvYWQtZmlsdGVyZWQteGxzLWJ0biIgY2xhc3M9ImJnLWdyZWVuLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JlZW4tNzAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIiBkaXNhYmxlZD5EZXNjYXJnYXIgWExTPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBzcGFjZS14LTQiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImNhbmNlbC1zZWFyY2giIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMiPkNhbmNlbGFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iYXBwbHktc2VhcmNoLWJ0biIgY2xhc3M9ImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyI+QXBsaWNhciBGaWx0cm88L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICANCiAgICA8ZGl2IGlkPSJleHBvcnQtYnktcGVyc29uLW1vZGFsIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIGhpZGRlbiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IHotNTAiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZS85NSBiYWNrZHJvcC1ibHVyLW1kIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTggdy1mdWxsIG1heC13LWxnIG1vZGFsLWVudGVyIj4NCiAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC10ZWFsLTkwMCI+RXhwb3J0YXIgUmVzdW1lbiBwb3IgRmVjaGE8L2gzPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00Ij4NCiAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJleHBvcnQtcGVyc29uLXN0YXJ0LWRhdGUiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkZlY2hhIGRlIEluaWNpbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZXhwb3J0LXBlcnNvbi1zdGFydC1kYXRlIiBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctdGVhbC01MDAgZm9jdXM6Ym9yZGVyLXRlYWwtNTAwIHAtMiI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZXhwb3J0LXBlcnNvbi1lbmQtZGF0ZSIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+RmVjaGEgZGUgRmluPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJleHBvcnQtcGVyc29uLWVuZC1kYXRlIiBjbGFzcz0ibXQtMSB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIGZvY3VzOnJpbmctdGVhbC01MDAgZm9jdXM6Ym9yZGVyLXRlYWwtNTAwIHAtMiI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC00IG10LTgiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iY2FuY2VsLWV4cG9ydC1ieS1wZXJzb24iIGNsYXNzPSJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0zMDAiPkNhbmNlbGFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjb25maXJtLWV4cG9ydC1ieS1wZXJzb24teGxzLWJ0biIgY2xhc3M9ImJnLXRlYWwtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy10ZWFsLTcwMCI+RXhwb3J0YXIgWExTPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KICAgIDxzY3JpcHQ+DQogICAgY29uc3QgQXBwID0gKCgpID0+IHsNCiAgICAgICAgLy8gLS0tIENPTlNUQU5URVMgWSBFU1RBRE8gLS0tDQogICAgICAgIA0KICAgICAgICAvLyAtLS0gTU9ESUZJQ0FDScOTTiBJTklDSU8gKFNPTElDSVRVRCAxMy8xMS8yMDI1KSAtLS0NCiAgICAgICAgLy8gU2UgbXVldmVuICJDYWxpZGFkIiB5ICJTZWd1cmlkYWQiIHBhcmEgcXVlIHNlYW4gc3Vic2VjY2lvbmVzDQogICAgICAgIC8vIHRhbnRvIGRlIEUmSSBjb21vIGRlIE1FQ8OBTklDQS4NCiAgICAgICAgDQogICAgICAgIC8vIDEuIGBNT05UQUpFU2A6DQogICAgICAgIC8vICAgIC0gU2UgZWxpbWluYW4gJ0NBTElEQUQnIHkgJ1NFR1VSSURBRCcgY29tbyBjbGF2ZXMgcHJpbmNpcGFsZXMuDQogICAgICAgIC8vICAgIC0gU2UgYXNlZ3VyYSBxdWUgIkNhbGlkYWQiIHkgIlNlZ3VyaWRhZCIgKGZhbWlsaWFzKSBlc3TDqW4gZW4gJ01PTlRBSkUgTUVDw4FOSUNBLi4uJy4NCiAgICAgICAgLy8gICAgLSAnTU9OVEFKRSBFJkkuLi4nIHlhIGxhcyB0ZW7DrWEuDQogICAgICAgIC8vICAgIC0gKioqIENBTUJJTyAoMTQvMTEvMjAyNSk6IFNlIGhhY2VuIMO6bmljb3MgbG9zIG5vbWJyZXMgZGUgZmFtaWxpYSAqKioNCiAgICAgICAgY29uc3QgTU9OVEFKRVMgPSB7DQogICAgICAgICAgICAnTU9OVEFKRSBFJklfRDU3MjAwMTUnOiBbDQogICAgICAgICAgICAgICAgImJhbmRlamFzIiwgImNhamFzIGRlIGRlcml2YWNpw7NuIiwgInRlbmRpZG8vaW5zdGFsYWNpw7NuIGRlIGNhYmxlcyIsDQogICAgICAgICAgICAgICAgInRlbmRpZG8vaW5zdGFsYWNpw7NuIGRlIGZpYnJhIMOzcHRpY2EiLCAiY29uZXhpb25lcyBhbCBwcm9jZXNvIiwNCiAgICAgICAgICAgICAgICAiY29uZXhpb25lcyBuZXVtw6F0aWNhcyIsICJwcnVlYmFzIiwgImxvZ8Otc3RpY2EiLA0KICAgICAgICAgICAgICAgICJDYWxpZGFkIEUmSSIsICJTZWd1cmlkYWQgRSZJIiAvLyA8LS0gQ0FNQklBRE8gZGUgIkNhbGlkYWQiIGEgIkNhbGlkYWQgRSZJIg0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICdNT05UQUpFIE1FQ8OBTklDQV9ENTcyMDAyNSc6IFsNCiAgICAgICAgICAgICAgICAiZmFicmljYWNpw7NuIHNvcG9ydGVzIiwgImZhYnJpY2FjacOzbiB0dWJlcsOtYXMiLCAibW9udGFqZSB0dWJlcsOtYXMvc29wb3J0ZXMiLA0KICAgICAgICAgICAgICAgICJQUEhIIiwgIm1vbnRhamUgdHJhY2VhZG8gdHViaW5nIiwgIkxvZ8Otc3RpY2EiLCAibW9udGFqZSBFRU1NIiwgIm1vbnRhamUgZXF1aXBvcyIsDQogICAgICAgICAgICAgICAgIkNhbGlkYWQgTUVDIiwgIlNlZ3VyaWRhZCBNRUMiIC8vIDwtLSBDQU1CSUFETyBkZSAiQ2FsaWRhZCIgYSAiQ2FsaWRhZCBNRUMiDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgJ0ZPUk1BQ0nDk04nOiBbJ2Zvcm1hY2nDs24nXSwNCiAgICAgICAgICAgICdTVEFORCBCWSc6IFsnc3RhbmQgYnknXQ0KICAgICAgICAgICAgLy8gU2UgZWxpbWluYW4gJ0NBTElEQUQnIHkgJ1NFR1VSSURBRCcgZGUgYXF1w60NCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAyLiBgVEFSRUFfR1JPVVBTYDoNCiAgICAgICAgLy8gICAgLSBEZWZpbmUgbGFzICpzdWJzZWNjaW9uZXMqIGRpc3BvbmlibGVzLg0KICAgICAgICAvLyAgICAtIFNlIG1hbnRpZW5lbiAnQ2FsaWRhZCcgeSAnU2VndXJpZGFkJyBhcXXDrSwgeWEgcXVlIGRlZmluZW4NCiAgICAgICAgLy8gICAgICBsYXMgc3Vic2VjY2lvbmVzIHF1ZSBhaG9yYSB1c2FyZW1vcyBlbiBkb3Mgc2l0aW9zLg0KICAgICAgICAvLyAgICAtICoqKiBDQU1CSU8gKDE0LzExLzIwMjUpOiBTZSBhY3R1YWxpemFuIGxhcyBmYW1pbGlhcyBxdWUgYWdydXBhbiAqKioNCiAgICAgICAgY29uc3QgVEFSRUFfR1JPVVBTID0gew0KICAgICAgICAgICAgJ0UmSSc6IFsNCiAgICAgICAgICAgICAgICAiYmFuZGVqYXMiLCAiY2FqYXMgZGUgZGVyaXZhY2nDs24iLCAidGVuZGlkby9pbnN0YWxhY2nDs24gZGUgY2FibGVzIiwNCiAgICAgICAgICAgICAgICAidGVuZGlkby9pbnN0YWxhY2nDs24gZGUgZmlicmEgw7NwdGljYSIsICJjb25leGlvbmVzIGFsIHByb2Nlc28iLA0KICAgICAgICAgICAgICAgICJjb25leGlvbmVzIG5ldW3DoXRpY2FzIiwgInBydWViYXMiLCAibG9nw61zdGljYSINCiAgICAgICAgICAgICAgICAvLyAiQ2FsaWRhZCIsICJTZWd1cmlkYWQiIC8vIDwtLSBTZSBxdWl0YW4gZGUgYXF1w60gcGFyYSBxdWUgc2VhbiBpbmRlcGVuZGllbnRlcw0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICdGYWJyaWNhY2nDs24geSBNb250YWplIChUdWIvU29wKSc6IFsNCiAgICAgICAgICAgICAgICAiZmFicmljYWNpw7NuIHNvcG9ydGVzIiwgImZhYnJpY2FjacOzbiB0dWJlcsOtYXMiLCAibW9udGFqZSB0dWJlcsOtYXMvc29wb3J0ZXMiLA0KICAgICAgICAgICAgICAgICJQUEhIIiwgIm1vbnRhamUgdHJhY2VhZG8gdHViaW5nIiwgIkxvZ8Otc3RpY2EiDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgJ01vbnRhamUgRUVNTSc6IFsibW9udGFqZSBFRU1NIl0sDQogICAgICAgICAgICAnTW9udGFqZSBFcXVpcG9zJzogWyJtb250YWplIGVxdWlwb3MiXSwNCiAgICAgICAgICAgICdDYWxpZGFkJzogWydDYWxpZGFkIEUmSScsICdDYWxpZGFkIE1FQyddLCAvLyA8LS0gQ0FNQklBRE8NCiAgICAgICAgICAgICdTZWd1cmlkYWQnOiBbJ1NlZ3VyaWRhZCBFJkknLCAnU2VndXJpZGFkIE1FQyddLCAvLyA8LS0gQ0FNQklBRE8NCiAgICAgICAgICAgICdGb3JtYWNpw7NuJzogWydmb3JtYWNpw7NuJ10sDQogICAgICAgICAgICAnU3RhbmQgQnknOiBbJ3N0YW5kIGJ5J10NCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vIDMuIGBUQVJFQV9DT0RFU2A6DQogICAgICAgIC8vICAgIC0gU2UgbWFudGllbmUgaWd1YWwuIExvcyBjw7NkaWdvcyBwYXJhIGxhcyBzdWJzZWNjaW9uZXMNCiAgICAgICAgLy8gICAgICAnQ2FsaWRhZCcgeSAnU2VndXJpZGFkJyB5YSBleGlzdGVuIHkgZXN0w6FuIGNvcnJlY3Rvcy4NCiAgICAgICAgY29uc3QgVEFSRUFfQ09ERVMgPSB7DQogICAgICAgICAgICAnRSZJJzogJzAzLjAzLjAwMi4wMDEnLA0KICAgICAgICAgICAgJ0ZhYnJpY2FjacOzbiB5IE1vbnRhamUgKFR1Yi9Tb3ApJzogJzAzLjAyLjAwMi4wMDcnLA0KICAgICAgICAgICAgJ01vbnRhamUgRUVNTSc6ICcwMy4wMi4wMDEuMDA3JywNCiAgICAgICAgICAgICdNb250YWplIEVxdWlwb3MnOiAnMDMuMDIuMDAzLjAwNycsDQogICAgICAgICAgICAnQ2FsaWRhZCc6ICdOL0EnLA0KICAgICAgICAgICAgJ1NlZ3VyaWRhZCc6ICdOL0EnLA0KICAgICAgICAgICAgJ0Zvcm1hY2nDs24nOiAnTi9BJywNCiAgICAgICAgICAgICdTdGFuZCBCeSc6ICdOL0EnDQogICAgICAgIH07DQoNCiAgICAgICAgLy8gNC4gYENPTkNFUFRPX1NVQlNFQ0NJT05fT1JERVJgOg0KICAgICAgICAvLyAgICAtIEVzdGEgZXMgbGEgY2xhdmU6IEFzaWduYSBsYXMgc3Vic2VjY2lvbmVzIGEgbG9zIGNvbmNlcHRvcy4NCiAgICAgICAgLy8gICAgLSBTZSBlbGltaW5hbiAnQ0FMSURBRCcgeSAnU0VHVVJJREFEJyBjb21vIGNsYXZlcyBwcmluY2lwYWxlcy4NCiAgICAgICAgLy8gICAgLSBTZSBhw7FhZGVuICdDYWxpZGFkJyB5ICdTZWd1cmlkYWQnIGEgbGFzIGxpc3RhcyBkZQ0KICAgICAgICAvLyAgICAgICdNT05UQUpFIEUmSS4uLicgeSAnTU9OVEFKRSBNRUPDgU5JQ0EuLi4nLg0KICAgICAgICAvLyAgICAtICoqKiBDQU1CSU8gKDE0LzExLzIwMjUpOiBObyBzZSBuZWNlc2l0YSBuaW5nw7puIGNhbWJpbyBhcXXDrS4gKioqDQogICAgICAgIGNvbnN0IENPTkNFUFRPX1NVQlNFQ0NJT05fT1JERVIgPSB7DQogICAgICAgICAgICAnTU9OVEFKRSBFJklfRDU3MjAwMTUnOiBbJ0UmSScsICdDYWxpZGFkJywgJ1NlZ3VyaWRhZCddLCAvLyA8LS0gQcORQURJRE9TDQogICAgICAgICAgICAnTU9OVEFKRSBNRUPDgU5JQ0FfRDU3MjAwMjUnOiBbDQogICAgICAgICAgICAgICAgJ0ZhYnJpY2FjacOzbiB5IE1vbnRhamUgKFR1Yi9Tb3ApJywNCiAgICAgICAgICAgICAgICAnTW9udGFqZSBFRU1NJywNCiAgICAgICAgICAgICAgICAnTW9udGFqZSBFcXVpcG9zJywNCiAgICAgICAgICAgICAgICAnQ2FsaWRhZCcsIC8vIDwtLSBBw5FBRElET1MNCiAgICAgICAgICAgICAgICAnU2VndXJpZGFkJyAvLyA8LS0gQcORQURJRE9TDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgJ0ZPUk1BQ0nDk04nOiBbJ0Zvcm1hY2nDs24nXSwNCiAgICAgICAgICAgICdTVEFORCBCWSc6IFsnU3RhbmQgQnknXQ0KICAgICAgICAgICAgLy8gU2UgZWxpbWluYW4gJ0NBTElEQUQnIHkgJ1NFR1VSSURBRCcgZGUgYXF1w60NCiAgICAgICAgfTsNCiAgICAgICAgLy8gLS0tIE1PRElGSUNBQ0nDk04gRklOIC0tLQ0KDQoNCiAgICAgICAgY29uc3QgT1BDSU9ORVMgPSB7DQogICAgICAgICAgICBUdXJubzogWyctJywgJ0RJQScsICdOT0NIRSddLA0KICAgICAgICAgICAgJ0NhbWJpbyBkZSBqb3JuYWRhJzogWyctJywgJ1NJJ10sDQogICAgICAgICAgICBBYnNlbnRpc21vOiBbJy0nLCAnVkFDQUNJT05FUycsICdDT01QRU5TQVRPUklPJywgJ0JBSkEgTUVESUNBJywgJ0RFRlVOQ0lPTiBGQU1JTElBUicsICdIT1NQSVRBTElaQUNJT04gRkFNSUxJQVInLCAnQ1VSU08nLCAnUkVDT05PQ0lNSUVOVE8gTUVESUNPJywgJ0NJVEEgTUVESUNBJywgJ09UUk9TJ10sDQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUiA9IFsnRkVDSEEnLCAnSUQnLCAnTm9tYnJlJywgJ1B1ZXN0bycsICdFbXByZXNhJywgJ0NvbmNlcHRvJywgJ0ZhbWlsaWEnLCAnSE4nLCAnSEUnLCAnVHVybm8nLCAnQ2FtYmlvIGRlIGpvcm5hZGEnLCAnQWJzZW50aXNtbycsICdJbmNpZGVuY2lhJ107DQogICAgICAgIGNvbnN0IFBFUlNPTkFTX0NPTFVNTlMgPSBbJ0lEJywgJ05vbWJyZScsICdQdWVzdG8nLCAnRW1wcmVzYScsICdQcmVjaW9ITicsICdQcmVjaW9IRScsICdub01vc3RyYXJJZCddOw0KICAgICAgICANCiAgICAgICAgY29uc3QgZ2V0SW5pdGlhbFN0YXRlID0gKCkgPT4gKHsNCiAgICAgICAgICAgIHRhYmxlczogew0KICAgICAgICAgICAgICAgICdQZXJzb25hcyc6IHsgY29sdW1uczogUEVSU09OQVNfQ09MVU1OUywgZGF0YTogW10sIHJlbGF0aW9uczoge30gfSwNCiAgICAgICAgICAgICAgICAnRGF0b3MnOiB7IGNvbHVtbnM6IENBTk9OSUNBTF9FWFBPUlRfT1JERVIsIGRhdGE6IFtdLCByZWxhdGlvbnM6IHt9IH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvLyBtYW5kYXRvcnlSZWdpc3RyYXRpb25zOiB7fSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyB3YXJuaW5nc0FyY2hpdmU6IFtdLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIC8vIGV4Y2x1ZGVkRGF5czoge30sIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgcGVyc29uRGF0YVN1bW1hcnk6IHt9LA0KICAgICAgICAgICAgaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnk6IHt9LA0KICAgICAgICAgICAgDQogICAgICAgICAgICBhY3RpdmVUYWJsZTogJ0RhdG9zJywNCiAgICAgICAgICAgIGlzRGlydHk6IGZhbHNlLA0KICAgICAgICAgICAgZGF0YUxvYWRlZDogZmFsc2UsDQogICAgICAgICAgICBhY3RpdmVGaWx0ZXJzOiBbXSwNCiAgICAgICAgICAgIGlkVG9QZXJzb25NYXA6IHt9LA0KICAgICAgICAgICAgbmFtZVRvSWRNYXA6IHt9LA0KICAgICAgICAgICAgcGVyc29uRmlyc3REYXRlTWFwOiB7fSwNCg0KICAgICAgICAgICAgLy8gLS0tIElOSUNJTzogRXN0YWRvIGRlIFBhZ2luYWNpw7NuIC0tLQ0KICAgICAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDUwLA0KICAgICAgICAgICAgaXNJbml0aWFsTG9hZDogdHJ1ZSwgLy8gUGFyYSBtb3N0cmFyIGxhIMO6bHRpbWEgcMOhZ2luYSBhbCBjYXJnYXINCiAgICAgICAgICAgIHRvdGFsUGFnZXM6IDEsDQogICAgICAgICAgICAvLyAtLS0gRklOOiBFc3RhZG8gZGUgUGFnaW5hY2nDs24gLS0tDQogICAgICAgIH0pOw0KDQogICAgICAgIGxldCBzdGF0ZSA9IGdldEluaXRpYWxTdGF0ZSgpOw0KICAgICAgICAvLyBsZXQgZXhjbHVkZWREYXlzQ3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7IC8vIEVMSU1JTkFETw0KDQogICAgICAgIGNvbnN0IGRvbSA9IHsNCiAgICAgICAgICAgIHRhYmxlQXJlYTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxlLWFyZWEnKSwNCiAgICAgICAgICAgIG1vZGlmeU1hc3RlcnNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RpZnktbWFzdGVycy1idG4nKSwNCiAgICAgICAgICAgIG1vZGlmeU1hc3RlcnNNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGlmeS1tYXN0ZXJzLW1vZGFsJyksDQogICAgICAgICAgICBhZGRQZXJzb25hRm9ybTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1wZXJzb25hLWZvcm0nKSwNCiAgICAgICAgICAgIHBlcnNvbmFzTGlzdENvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcnNvbmFzLWxpc3QtY29udGFpbmVyJyksDQogICAgICAgICAgICBjbG9zZU1vZGlmeU1hc3RlcnNCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1tb2RpZnktbWFzdGVycycpLA0KICAgICAgICAgICAgc2VhcmNoUGVyc29uYUlucHV0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXBlcnNvbmEnKSwNCiAgICAgICAgICAgIGVkaXRSb3dNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcm93LW1vZGFsJyksDQogICAgICAgICAgICBzZWFyY2hNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1tb2RhbCcpLA0KICAgICAgICAgICAgZWRpdFJvd0Zvcm06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXJvdy1mb3JtJyksDQogICAgICAgICAgICBzYXZlUm93QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1yb3ctYnRuJyksDQogICAgICAgICAgICBjYW5jZWxFZGl0Um93QnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLWVkaXQtcm93JyksDQogICAgICAgICAgICBpbXBvcnRCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtYnRuJyksDQogICAgICAgICAgICBzYXZlQ2hhbmdlc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtY2hhbmdlcy1idG4nKSwNCiAgICAgICAgICAgIGNyZWF0ZVBhcnRpdGlvbkJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZS1wYXJ0aXRpb24tYnRuJyksDQogICAgICAgICAgICBpbXBvcnRGaWxlSW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtZmlsZS1pbnB1dCcpLA0KICAgICAgICAgICAgc2VhcmNoUnVsZXNDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcnVsZXMtY29udGFpbmVyJyksDQogICAgICAgICAgICBhZGRTZWFyY2hSdWxlQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXNlYXJjaC1ydWxlLWJ0bicpLA0KICAgICAgICAgICAgY2FuY2VsU2VhcmNoQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLXNlYXJjaCcpLA0KICAgICAgICAgICAgYXBwbHlTZWFyY2hCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBseS1zZWFyY2gtYnRuJyksDQogICAgICAgICAgICBkb3dubG9hZEZpbHRlcmVkWGxzQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtZmlsdGVyZWQteGxzLWJ0bicpLA0KICAgICAgICAgICAgLy8gbWFuZGF0b3J5UmVnc01vZGFsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuZGF0b3J5LXJlZ3MtbW9kYWwnKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyBtYW5kYXRvcnlEYXRlUGlja2VyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuZGF0b3J5LWRhdGUtcGlja2VyJyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgLy8gbWFuZGF0b3J5UGVvcGxlTGlzdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmRhdG9yeS1wZW9wbGUtbGlzdCcpLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIC8vIGNhbmNlbE1hbmRhdG9yeVJlZ3NCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwtbWFuZGF0b3J5LXJlZ3MnKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyBzYXZlTWFuZGF0b3J5UmVnc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtbWFuZGF0b3J5LXJlZ3MnKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyB3YXJuaW5nc0FyY2hpdmVNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdzLWFyY2hpdmUtbW9kYWwnKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyB3YXJuaW5nc0FyY2hpdmVDb250ZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZ3MtYXJjaGl2ZS1jb250ZW50JyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgLy8gY2xvc2VXYXJuaW5nc0FyY2hpdmVCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS13YXJuaW5ncy1hcmNoaXZlJyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgLy8gZGFpbHlXYXJuaW5nQmFubmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFpbHktd2FybmluZy1iYW5uZXInKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyBzZWFyY2hNYW5kYXRvcnlQZXJzb246IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtbWFuZGF0b3J5LXBlcnNvbicpLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIC8vIG1hbmRhdG9yeURhdGVzSGlzdG9yeTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmRhdG9yeS1kYXRlcy1oaXN0b3J5JyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgLy8gb3BlbkV4Y2x1ZGVkRGF5c0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW4tZXhjbHVkZWQtZGF5cy1idG4nKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyBleGNsdWRlZERheXNNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4Y2x1ZGVkLWRheXMtbW9kYWwnKSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAvLyBjbG9zZUV4Y2x1ZGVkRGF5c01vZGFsQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtZXhjbHVkZWQtZGF5cy1tb2RhbCcpLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIC8vIHByZXZZZWFyQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldi15ZWFyLWJ0bicpLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIC8vIGN1cnJlbnRZZWFyU3BhbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQteWVhci1zcGFuJyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgLy8gbmV4dFllYXJCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0LXllYXItYnRuJyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgLy8gZXhjbHVkZWREYXlzQ2FsZW5kYXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGNsdWRlZC1kYXlzLWNhbGVuZGFyJyksIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgcGVyc29uRGF0YUJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcnNvbi1kYXRhLWJ0bicpLA0KICAgICAgICAgICAgcGVyc29uRGF0YU1vZGFsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyc29uLWRhdGEtbW9kYWwnKSwNCiAgICAgICAgICAgIGNsb3NlUGVyc29uRGF0YU1vZGFsQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtcGVyc29uLWRhdGEtbW9kYWwnKSwNCiAgICAgICAgICAgIHNlYXJjaFBlcnNvbkRhdGFJbnB1dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1wZXJzb24tZGF0YScpLA0KICAgICAgICAgICAgcGVyc29uRGF0YUxpc3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJzb24tZGF0YS1saXN0JyksDQogICAgICAgICAgICBwZXJzb25EYXRhRGV0YWlsczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcnNvbi1kYXRhLWRldGFpbHMnKSwNCiAgICAgICAgICAgIGdsb2JhbFN1bW1hcnlCdG46IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtc3VtbWFyeS1idG4nKSwNCiAgICAgICAgICAgIGdsb2JhbFN1bW1hcnlNb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbC1zdW1tYXJ5LW1vZGFsJyksDQogICAgICAgICAgICBjbG9zZUdsb2JhbFN1bW1hcnlNb2RhbEJ0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWdsb2JhbC1zdW1tYXJ5LW1vZGFsJyksDQogICAgICAgICAgICBnbG9iYWxTdW1tYXJ5Q29udGVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbC1zdW1tYXJ5LWNvbnRlbnQnKSwNCiAgICAgICAgICAgIHN1bW1hcnlDb21wYW55RmlsdGVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VtbWFyeS1jb21wYW55LWZpbHRlcicpLA0KICAgICAgICAgICAgc3VtbWFyeVBlcmlvZEZpbHRlcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1bW1hcnktcGVyaW9kLWZpbHRlcicpLA0KICAgICAgICAgICAgc3VtbWFyeVN0YXJ0RGF0ZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1bW1hcnktc3RhcnQtZGF0ZScpLA0KICAgICAgICAgICAgc3VtbWFyeUVuZERhdGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW1tYXJ5LWVuZC1kYXRlJyksDQogICAgICAgICAgICBjbGVhclN1bW1hcnlEYXRlc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyLXN1bW1hcnktZGF0ZXMtYnRuJyksDQogICAgICAgICAgICAvLyBkb3dubG9hZFdhcm5pbmdzUGRmQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtd2FybmluZ3MtcGRmLWJ0bicpLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIGRvd25sb2FkU3VtbWFyeVhsc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLXN1bW1hcnkteGxzLWJ0bicpLA0KICAgICAgICAgICAgZXhwb3J0QnlQZXJzb25Nb2RhbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydC1ieS1wZXJzb24tbW9kYWwnKSwNCiAgICAgICAgICAgIGNhbmNlbEV4cG9ydEJ5UGVyc29uQnRuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLWV4cG9ydC1ieS1wZXJzb24nKSwNCiAgICAgICAgICAgIGNvbmZpcm1FeHBvcnRCeVBlcnNvblhsc0J0bjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm0tZXhwb3J0LWJ5LXBlcnNvbi14bHMtYnRuJyksDQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBtYXJrRGlydHkgPSAoKSA9PiB7IGlmICghc3RhdGUuaXNEaXJ0eSkgeyBzdGF0ZS5pc0RpcnR5ID0gdHJ1ZTsgcmVuZGVyKCk7IH0gfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGJ1aWxkUGVyc29uTWFwcyA9ICgpID0+IHsNCiAgICAgICAgICAgIHN0YXRlLmlkVG9QZXJzb25NYXAgPSB7fTsNCiAgICAgICAgICAgIHN0YXRlLm5hbWVUb0lkTWFwID0ge307DQogICAgICAgICAgICBjb25zdCBwZXJzb25hc1RhYmxlID0gc3RhdGUudGFibGVzWydQZXJzb25hcyddOw0KICAgICAgICAgICAgaWYocGVyc29uYXNUYWJsZSkgew0KICAgICAgICAgICAgICAgIHBlcnNvbmFzVGFibGUuZGF0YS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcm93WydJRCddOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcm93WydOb21icmUnXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkICYmIG5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmlkVG9QZXJzb25NYXBbaWRdID0geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub21icmU6IG5hbWUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1ZXN0bzogcm93WydQdWVzdG8nXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXByZXNhOiByb3dbJ0VtcHJlc2EnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaW9ITjogcGFyc2VGbG9hdChyb3dbJ1ByZWNpb0hOJ10gfHwgMCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lvSEU6IHBhcnNlRmxvYXQocm93WydQcmVjaW9IRSddIHx8IDApLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vTW9zdHJhcklkOiByb3cubm9Nb3N0cmFySWQgfHwgZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5uYW1lVG9JZE1hcFtuYW1lXSA9IGlkOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgY2FsY3VsYXRlRmlyc3RSZWNvcmREYXRlcyA9ICgpID0+IHsNCiAgICAgICAgICAgIHN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcCA9IHt9Ow0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhOw0KICAgICAgICAgICAgZGF0YS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaWQgPSByb3cuSUQ7DQogICAgICAgICAgICAgICAgY29uc3QgZmVjaGEgPSByb3cuRkVDSEE7DQogICAgICAgICAgICAgICAgaWYgKGlkICYmIGZlY2hhKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUucGVyc29uRmlyc3REYXRlTWFwW2lkXSB8fCBmZWNoYSA8IHN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcFtpZF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcFtpZF0gPSBmZWNoYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlciA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGhhc0RhdGEgPSBzdGF0ZS50YWJsZXNbc3RhdGUuYWN0aXZlVGFibGVdPy5kYXRhLmxlbmd0aCA+IDAgfHwgc3RhdGUuZGF0YUxvYWRlZDsNCiAgICAgICAgICAgIGRvbS5pbXBvcnRCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgaGFzRGF0YSk7DQogICAgICAgICAgICBkb20uc2F2ZUNoYW5nZXNCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywgIWhhc0RhdGEpOw0KICAgICAgICAgICAgZG9tLmNyZWF0ZVBhcnRpdGlvbkJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhaGFzRGF0YSk7DQogICAgICAgICAgICBkb20ucGVyc29uRGF0YUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhaGFzRGF0YSk7DQogICAgICAgICAgICBkb20uZ2xvYmFsU3VtbWFyeUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhaGFzRGF0YSk7DQogICAgICAgICAgICAvLyBjaGVja0RhaWx5V2FybmluZ3MoKTsgLy8gRUxJTUlOQURPDQogICAgICAgICAgICByZW5kZXJBY3RpdmVWaWV3KCk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgcmVuZGVyQWN0aXZlVmlldyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzW3N0YXRlLmFjdGl2ZVRhYmxlXTsNCiAgICAgICAgICAgIGlmICghdGFibGUpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGRpcnR5SW5kaWNhdG9yID0gc3RhdGUuaXNEaXJ0eSA/ICc8c3BhbiBjbGFzcz0idGV4dC1yZWQtNTAwIG1sLTIiIHRpdGxlPSJDYW1iaW9zIHNpbiBndWFyZGFyIj48L3NwYW4+JyA6ICcnOw0KICAgICAgICAgICAgY29uc3QgZmlsdGVySW5kaWNhdG9yID0gc3RhdGUuYWN0aXZlRmlsdGVycy5sZW5ndGggPiAwID8gYDxkaXYgY2xhc3M9Im1sLTQgZmxleCBpdGVtcy1jZW50ZXIgdGV4dC1zbSBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIHB4LTMgcHktMSByb3VuZGVkLWZ1bGwiPjxzdmcgY2xhc3M9InctNCBoLTQgbXItMiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjAgMjAiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMgM2ExIDEgMCAwMTEtMWgxMmExIDEgMCAwMTEgMXYzYTEgMSAwIDAxLS4yOTMuNzA3TDEyIDExLjQxNFYxNWExIDEgMCAwMS0uMjkzLjcwN2wtMiAyQTEgMSAwIDAxOCAxN3YtNS41ODZMMy4yOTMgNi43MDdBMSAxIDAgMDEzIDZWM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvc3ZnPkZpbHRybyBhY3Rpdm88YnV0dG9uIGlkPSJjbGVhci1maWx0ZXItYnRuIiBjbGFzcz0ibWwtMiBmb250LWJvbGQgaG92ZXI6dGV4dC1yZWQtNjAwIj4mdGltZXM7PC9idXR0b24+PC9kaXY+YCA6ICcnOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBsZXQgaGVhZGVyQnV0dG9ucyA9IGANCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJhZGQtcm93LWJ0biIgY2xhc3M9ImJnLXNreS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXNreS03MDAiPisgQcOxYWRpciBSZWdpc3RybzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlYXJjaC1idG4iIGNsYXNzPSJiZy1za3ktNTAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1za3ktNjAwIj5CdXNjYXIgLyBGaWx0cmFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iZXhwb3J0LWJ5LXBlcnNvbi1idG4iIGNsYXNzPSJiZy10ZWFsLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctdGVhbC03MDAiPkV4cG9ydGFyIHBvciBGZWNoYTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImV4cG9ydC10YWJsZS14bHMtYnRuIiBjbGFzcz0iYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmVlbi03MDAiPkV4cG9ydGFyIGRhdG9zIGRpYXJpb3M8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8IS0tIEJvdG9uZXMgZGUgUmVnaXN0cm9zIE9ibGlnYXRvcmlvcyB5IEF2aXNvcyBFbGltaW5hZG9zIC0tPg0KICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbGV0IGhlYWRlckh0bWwgPSBgDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1zdGFydCBtYi02IGZsZXgtd3JhcCBnYXAtNCI+DQogICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciI+DQogICAgICAgICAgICAgICAgICAgICAgICAke2ZpbHRlckluZGljYXRvcn0gJHtkaXJ0eUluZGljYXRvcn0NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBmbGV4LXdyYXAganVzdGlmeS1zdGFydCBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAke2hlYWRlckJ1dHRvbnN9DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS50YWJsZUFyZWEuaW5uZXJIVE1MID0gaGVhZGVySHRtbDsNCiAgICAgICAgICAgIGRvbS50YWJsZUFyZWEuaW5uZXJIVE1MICs9IHJlbmRlclBpdm90VGFibGVWaWV3KCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGFkZEFjdGl2ZVZpZXdFdmVudExpc3RlbmVycygpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGNhbGN1bGF0ZVJhbWlmaWVkU3VtbWFyeSA9IChkYXRhU291cmNlKSA9PiB7DQogICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0geyB0b3RhbEhvdXJzOiAwLCBieUJsb2NrOiB7fSB9Ow0KICAgICAgICAgICAgY29uc3QgZmFtaWxpYVRvQmxvY2tNYXAgPSB7fTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gUHJlLWluaXRpYWxpemUgYmxvY2tzIHRvIG1haW50YWluIG9yZGVyIGFuZCBzdHJ1Y3R1cmUNCiAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2tOYW1lIGluIFRBUkVBX0dST1VQUykgew0KICAgICAgICAgICAgICAgIHN1bW1hcnkuYnlCbG9ja1tibG9ja05hbWVdID0geyB0b3RhbEhvdXJzOiAwLCBieUZhbWlsaWE6IHt9IH07DQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBmYW1pbGlhIG9mIFRBUkVBX0dST1VQU1tibG9ja05hbWVdKSB7DQogICAgICAgICAgICAgICAgICAgIGZhbWlsaWFUb0Jsb2NrTWFwW2ZhbWlsaWFdID0gYmxvY2tOYW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZGF0YVNvdXJjZS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJvdy5BYnNlbnRpc21vID09PSAnLScpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSAocGFyc2VGbG9hdChTdHJpbmcocm93LkhOIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpIHx8IDApICsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5IRSB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzID09PSAwKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeS50b3RhbEhvdXJzICs9IGhvdXJzOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB7IEZhbWlsaWEgfSA9IHJvdzsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBmYW1pbGlhVG9CbG9ja01hcFtGYW1pbGlhXTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2sgJiYgc3VtbWFyeS5ieUJsb2NrW2Jsb2NrXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeS5ieUJsb2NrW2Jsb2NrXS50b3RhbEhvdXJzICs9IGhvdXJzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5LmJ5QmxvY2tbYmxvY2tdLmJ5RmFtaWxpYVtGYW1pbGlhXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnkuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhW0ZhbWlsaWFdID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnkuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhW0ZhbWlsaWFdICs9IGhvdXJzOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gc3VtbWFyeTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBkZWVwTWVyZ2VTdW1tYXJpZXMgPSAodGFyZ2V0LCBzb3VyY2UpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGFyZ2V0KSk7DQogICAgICAgICAgICBvdXRwdXQudG90YWxIb3VycyA9ICh0YXJnZXQudG90YWxIb3VycyB8fCAwKSArIChzb3VyY2UudG90YWxIb3VycyB8fCAwKTsNCg0KICAgICAgICAgICAgaWYgKCFvdXRwdXQuYnlCbG9jaykgb3V0cHV0LmJ5QmxvY2sgPSB7fTsNCg0KICAgICAgICAgICAgZm9yIChjb25zdCBibG9jayBpbiBzb3VyY2UuYnlCbG9jaykgew0KICAgICAgICAgICAgICAgIGlmICghb3V0cHV0LmJ5QmxvY2tbYmxvY2tdKSB7DQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5ieUJsb2NrW2Jsb2NrXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc291cmNlLmJ5QmxvY2tbYmxvY2tdKSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmJ5QmxvY2tbYmxvY2tdLnRvdGFsSG91cnMgPSAob3V0cHV0LmJ5QmxvY2tbYmxvY2tdLnRvdGFsSG91cnMgfHwgMCkgKyBzb3VyY2UuYnlCbG9ja1tibG9ja10udG90YWxIb3VyczsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdXRwdXQuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhKSBvdXRwdXQuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhID0ge307DQogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmFtaWxpYSBpbiBzb3VyY2UuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhW2ZhbWlsaWFdID0gKG91dHB1dC5ieUJsb2NrW2Jsb2NrXS5ieUZhbWlsaWFbZmFtaWxpYV0gfHwgMCkgKyBzb3VyY2UuYnlCbG9ja1tibG9ja10uYnlGYW1pbGlhW2ZhbWlsaWFdOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG91dHB1dDsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBnZXRDb21iaW5lZEdsb2JhbFN1bW1hcnkgPSAoY29tcGFueSA9ICdUT0RBUycsIHBlcmlvZCA9ICd0b3RhbCcsIHN0YXJ0RGF0ZSA9IG51bGwsIGVuZERhdGUgPSBudWxsKSA9PiB7DQogICAgICAgICAgICBsZXQgZGF0YVRvU3VtbWFyaXplID0gc3RhdGUudGFibGVzLkRhdG9zLmRhdGE7DQoNCiAgICAgICAgICAgIC8vIEFwcGx5IGRhdGUgZmlsdGVyIHRvIHRoZSBjdXJyZW50IHBhcnRpdGlvbidzIGRhdGENCiAgICAgICAgICAgIGlmIChzdGFydERhdGUgJiYgZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGRhdGFUb1N1bW1hcml6ZSA9IGRhdGFUb1N1bW1hcml6ZS5maWx0ZXIocm93ID0+IHJvdy5GRUNIQSA+PSBzdGFydERhdGUgJiYgcm93LkZFQ0hBIDw9IGVuZERhdGUpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydERhdGUpIHsNCiAgICAgICAgICAgICAgICBkYXRhVG9TdW1tYXJpemUgPSBkYXRhVG9TdW1tYXJpemUuZmlsdGVyKHJvdyA9PiByb3cuRkVDSEEgPj0gc3RhcnREYXRlKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGRhdGFUb1N1bW1hcml6ZSA9IGRhdGFUb1N1bW1hcml6ZS5maWx0ZXIocm93ID0+IHJvdy5GRUNIQSA8PSBlbmREYXRlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQXBwbHkgY29tcGFueSBmaWx0ZXINCiAgICAgICAgICAgIGlmIChjb21wYW55ICE9PSAnVE9EQVMnKSB7DQogICAgICAgICAgICAgICAgZGF0YVRvU3VtbWFyaXplID0gZGF0YVRvU3VtbWFyaXplLmZpbHRlcihyb3cgPT4gc3RhdGUuaWRUb1BlcnNvbk1hcFtyb3cuSURdPy5lbXByZXNhID09PSBjb21wYW55KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHN1bW1hcnkgZnJvbSB0aGUgKG5vdyBmaWx0ZXJlZCkgY3VycmVudCBkYXRhDQogICAgICAgICAgICBjb25zdCBjdXJyZW50U3VtbWFyeSA9IGNhbGN1bGF0ZVJhbWlmaWVkU3VtbWFyeShkYXRhVG9TdW1tYXJpemUpOw0KDQogICAgICAgICAgICAvLyBEZWNpZGUgd2hldGhlciB0byBtZXJnZSB3aXRoIGhpc3RvcmljYWwgZGF0YSBiYXNlZCBvbiB0aGUgJ3BlcmlvZCcgZHJvcGRvd24NCiAgICAgICAgICAgIGlmIChwZXJpb2QgPT09ICdjdXJyZW50JyB8fCAhc3RhdGUuaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnkgfHwgT2JqZWN0LmtleXMoc3RhdGUuaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnkpLmxlbmd0aCA9PT0gMCB8fCAhc3RhdGUuaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnlbY29tcGFueV0pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFN1bW1hcnk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICd0b3RhbCcgcGVyaW9kOiBtZXJnZSBmaWx0ZXJlZCBjdXJyZW50IHN1bW1hcnkgd2l0aCB0aGUgdW5maWx0ZXJlZCBoaXN0b3JpY2FsIG9uZQ0KICAgICAgICAgICAgY29uc3QgaGlzdG9yaWNhbFN1bW1hcnkgPSBzdGF0ZS5oaXN0b3JpY2FsR2xvYmFsU3VtbWFyeVtjb21wYW55XTsNCiAgICAgICAgICAgIHJldHVybiBkZWVwTWVyZ2VTdW1tYXJpZXMoaGlzdG9yaWNhbFN1bW1hcnksIGN1cnJlbnRTdW1tYXJ5KTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHJlbmRlckdsb2JhbFN1bW1hcnlNb2RhbCA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ29tcGFueSA9IGRvbS5zdW1tYXJ5Q29tcGFueUZpbHRlci52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUGVyaW9kID0gZG9tLnN1bW1hcnlQZXJpb2RGaWx0ZXIudmFsdWU7DQogICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBkb20uc3VtbWFyeVN0YXJ0RGF0ZS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBkb20uc3VtbWFyeUVuZERhdGUudmFsdWU7DQoNCiAgICAgICAgICAgIGlmIChzdGFydERhdGUgJiYgZW5kRGF0ZSAmJiBzdGFydERhdGUgPiBlbmREYXRlKSB7DQogICAgICAgICAgICAgICAgZG9tLmdsb2JhbFN1bW1hcnlDb250ZW50LmlubmVySFRNTCA9IGA8cCBjbGFzcz0idGV4dC1jZW50ZXIgdGV4dC1yZWQtNTAwIGZvbnQtc2VtaWJvbGQiPkVycm9yOiBMYSBmZWNoYSAnRGVzZGUnIG5vIHB1ZWRlIHNlciBwb3N0ZXJpb3IgYSBsYSBmZWNoYSAnSGFzdGEnLjwvcD5gOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyeURhdGEgPSBnZXRDb21iaW5lZEdsb2JhbFN1bW1hcnkoc2VsZWN0ZWRDb21wYW55LCBzZWxlY3RlZFBlcmlvZCwgc3RhcnREYXRlLCBlbmREYXRlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFzdW1tYXJ5RGF0YSB8fCBzdW1tYXJ5RGF0YS50b3RhbEhvdXJzID09PSAwKSB7DQogICAgICAgICAgICAgICAgIGRvbS5nbG9iYWxTdW1tYXJ5Q29udGVudC5pbm5lckhUTUwgPSBgPHAgY2xhc3M9InRleHQtY2VudGVyIHRleHQtZ3JheS01MDAiPk5vIGhheSBob3JhcyByZWdpc3RyYWRhcyBwYXJhIGxhIHNlbGVjY2nDs24gYWN0dWFsLjwvcD5gOw0KICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIE1PRElGSUNBVElPTjogSW5jbHVkZSBhbGwgYmxvY2tzIGFuZCBkZWZpbmUgYSBtb3JlIGNvbXBhY3QgbGF5b3V0DQogICAgICAgICAgICAvLyBTZSBhw7FhZGVuIENhbGlkYWQgeSBTZWd1cmlkYWQgYWwgb3JkZW4NCiAgICAgICAgICAgIGNvbnN0IGJsb2NrT3JkZXIgPSBbDQogICAgICAgICAgICAgICAgJ0UmSScsIA0KICAgICAgICAgICAgICAgICdGYWJyaWNhY2nDs24geSBNb250YWplIChUdWIvU29wKScsIA0KICAgICAgICAgICAgICAgICdNb250YWplIEVFTU0nLCANCiAgICAgICAgICAgICAgICAnTW9udGFqZSBFcXVpcG9zJywNCiAgICAgICAgICAgICAgICAnQ2FsaWRhZCcsDQogICAgICAgICAgICAgICAgJ1NlZ3VyaWRhZCcsDQogICAgICAgICAgICAgICAgJ1N0YW5kIEJ5JywNCiAgICAgICAgICAgICAgICAnRm9ybWFjacOzbicNCiAgICAgICAgICAgIF07DQogICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZU1hcCA9IHsNCiAgICAgICAgICAgICAgICAnRSZJJzogJ0UmSScsDQogICAgICAgICAgICAgICAgJ0ZhYnJpY2FjacOzbiB5IE1vbnRhamUgKFR1Yi9Tb3ApJzogJ0ZhYnJpY2FjacOzbiB5IG1vbnRhamUnLA0KICAgICAgICAgICAgICAgICdNb250YWplIEVFTU0nOiAnTW9udGFqZXMgRUVNTScsDQogICAgICAgICAgICAgICAgJ01vbnRhamUgRXF1aXBvcyc6ICdNb250YWplIGVxdWlwb3MnLA0KICAgICAgICAgICAgICAgICdDYWxpZGFkJzogJ0NhbGlkYWQnLCAvLyA8LS0gQcORQURJRE8NCiAgICAgICAgICAgICAgICAnU2VndXJpZGFkJzogJ1NlZ3VyaWRhZCcsIC8vIDwtLSBBw5FBRElETw0KICAgICAgICAgICAgICAgICdTdGFuZCBCeSc6ICdTdGFuZCBCeScsDQogICAgICAgICAgICAgICAgJ0Zvcm1hY2nDs24nOiAnRm9ybWFjacOzbicNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGRhdGVGaWx0ZXJUZXh0ID0gKHN0YXJ0RGF0ZSB8fCBlbmREYXRlKSA/IGA8c3BhbiBjbGFzcz0idGV4dC1iYXNlIGZvbnQtbWVkaXVtIHRleHQtZ3JheS02MDAiPihGaWx0cmFkbyBwb3IgZmVjaGEpPC9zcGFuPmAgOiAnJzsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gSGVhZGVyIGZvciB0aGUgc3VtbWFyeSB0YWJsZQ0KICAgICAgICAgICAgbGV0IHRhYmxlSHRtbCA9IGANCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYmctZ3JheS0xMDAgcm91bmRlZC1sZyBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNCI+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlRvdGFsIEhvcmFzICgke3NlbGVjdGVkQ29tcGFueX0pPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRlRmlsdGVyVGV4dH0NCiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtcHVycGxlLTcwMCI+JHtzdW1tYXJ5RGF0YS50b3RhbEhvdXJzLnRvRml4ZWQoMil9IGg8L3NwYW4+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtWzFmcl9hdXRvX2F1dG9dIGdhcC14LTQgcHgtMiBweS0yIGJvcmRlci1iLTIgYm9yZGVyLWdyYXktMzAwIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtZ3JheS02MDAgdXBwZXJjYXNlIHRleHQtc20iPkJsb3F1ZSAvIEZhbWlsaWE8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtZ3JheS02MDAgdXBwZXJjYXNlIHRleHQtc20gdGV4dC1yaWdodCI+SG9yYXM8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtZ3JheS02MDAgdXBwZXJjYXNlIHRleHQtc20gdGV4dC1yaWdodCI+JSBkZWwgVG90YWw8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTEgbXQtMiI+DQogICAgICAgICAgICBgOw0KDQogICAgICAgICAgICAvLyBUYWJsZSByb3dzDQogICAgICAgICAgICBibG9ja09yZGVyLmZvckVhY2goYmxvY2tLZXkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrRGF0YSA9IHN1bW1hcnlEYXRhLmJ5QmxvY2tbYmxvY2tLZXldOw0KICAgICAgICAgICAgICAgIGlmICghYmxvY2tEYXRhIHx8IGJsb2NrRGF0YS50b3RhbEhvdXJzIDw9IDApIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBzdW1tYXJ5RGF0YS50b3RhbEhvdXJzID4gMCA/IChibG9ja0RhdGEudG90YWxIb3VycyAvIHN1bW1hcnlEYXRhLnRvdGFsSG91cnMpICogMTAwIDogMDsNCiAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lTWFwW2Jsb2NrS2V5XSB8fCBibG9ja0tleTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gVEFSRUFfQ09ERVNbYmxvY2tLZXldOw0KDQogICAgICAgICAgICAgICAgLy8gQmxvY2sgcm93DQogICAgICAgICAgICAgICAgdGFibGVIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTIgcm91bmRlZC1tZCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy1bMWZyX2F1dG9fYXV0b10gZ2FwLXgtNCBpdGVtcy1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtbWQgdGV4dC1ibHVlLTgwMCI+JHtlc2NhcGVIdG1sKGRpc3BsYXlOYW1lKX08L2g0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgZm9udC1tb25vIj4ke2NvZGV9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtNzAwIHRleHQtbWQgdGV4dC1yaWdodCI+JHtibG9ja0RhdGEudG90YWxIb3Vycy50b0ZpeGVkKDIpfSBoPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtZ3JlZW4tNjAwIHRleHQtbWQgdGV4dC1yaWdodCI+JHtwZXJjZW50YWdlLnRvRml4ZWQoMil9JTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICAvLyBGYW1pbHkgcm93cyBmb3IgdGhpcyBibG9jaw0KICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzSHRtbCA9IE9iamVjdC5lbnRyaWVzKGJsb2NrRGF0YS5ieUZhbWlsaWEpDQogICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhWzBdLmxvY2FsZUNvbXBhcmUoYlswXSkpDQogICAgICAgICAgICAgICAgICAgIC5tYXAoKFtmYW1pbGlhLCBob3Vyc10pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3VycyA8PSAwKSByZXR1cm4gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtWzFmcl9hdXRvX2F1dG9dIGdhcC14LTQgcHktMSBweC0yIGhvdmVyOmJnLWdyYXktMTAwIHJvdW5kZWQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwbC00IHRleHQtc20gdGV4dC1ncmF5LTcwMCI+JHtlc2NhcGVIdG1sKGZhbWlsaWEpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LXNtIHRleHQtZ3JheS04MDAgdGV4dC1yaWdodCI+JHtob3Vycy50b0ZpeGVkKDIpfSBoPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpOw0KDQogICAgICAgICAgICAgICAgaWYgKGZhbWlsaWFzSHRtbCkgew0KICAgICAgICAgICAgICAgICAgICB0YWJsZUh0bWwgKz0gYDxkaXYgY2xhc3M9ImJvcmRlci1sLTIgYm9yZGVyLWJsdWUtMjAwIG1sLTIgcGwtMiI+JHtmYW1pbGlhc0h0bWx9PC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgdGFibGVIdG1sICs9IGA8L2Rpdj5gOyAvLyBDbG9zZSBzcGFjZS15LTENCg0KICAgICAgICAgICAgZG9tLmdsb2JhbFN1bW1hcnlDb250ZW50LmlubmVySFRNTCA9IHRhYmxlSHRtbDsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGhhbmRsZUV4cG9ydEdsb2JhbFN1bW1hcnkgPSAoZm9ybWF0KSA9PiB7DQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvbXBhbnkgPSBkb20uc3VtbWFyeUNvbXBhbnlGaWx0ZXIudmFsdWU7DQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZFBlcmlvZCA9IGRvbS5zdW1tYXJ5UGVyaW9kRmlsdGVyLnZhbHVlOw0KICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gZG9tLnN1bW1hcnlTdGFydERhdGUudmFsdWU7DQogICAgICAgICAgICBjb25zdCBlbmREYXRlID0gZG9tLnN1bW1hcnlFbmREYXRlLnZhbHVlOw0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyeURhdGEgPSBnZXRDb21iaW5lZEdsb2JhbFN1bW1hcnkoc2VsZWN0ZWRDb21wYW55LCBzZWxlY3RlZFBlcmlvZCwgc3RhcnREYXRlLCBlbmREYXRlKTsNCg0KICAgICAgICAgICAgaWYgKCFzdW1tYXJ5RGF0YSB8fCBzdW1tYXJ5RGF0YS50b3RhbEhvdXJzID09PSAwKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIGhheSBkYXRvcyBlbiBlbCByZXN1bWVuIHBhcmEgZXhwb3J0YXIuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBwZXJpb2RUZXh0ID0gZG9tLnN1bW1hcnlQZXJpb2RGaWx0ZXIub3B0aW9uc1tkb20uc3VtbWFyeVBlcmlvZEZpbHRlci5zZWxlY3RlZEluZGV4XS50ZXh0Ow0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgcmVzdW1lbl9nbG9iYWxfJHtzZWxlY3RlZENvbXBhbnl9XyR7cGVyaW9kVGV4dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xzL2csICdfJyl9Lnhsc3hgOw0KDQogICAgICAgICAgICBpZiAoZm9ybWF0ID09PSAneGxzJykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBbDQogICAgICAgICAgICAgICAgICAgIFsiUmVzdW1lbiBHbG9iYWwgcG9yIEJsb3F1ZXMiXSwNCiAgICAgICAgICAgICAgICAgICAgWyJFbXByZXNhIiwgc2VsZWN0ZWRDb21wYW55XSwNCiAgICAgICAgICAgICAgICAgICAgWyJQZXJpb2RvIiwgcGVyaW9kVGV4dF0sDQogICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnREYXRlIHx8IGVuZERhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFsiRmVjaGFzIiwgYCR7c3RhcnREYXRlIHx8ICdJbmljaW8nfSBhICR7ZW5kRGF0ZSB8fCAnRmluJ31gXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRhdGEucHVzaChbIlRvdGFsIEhvcmFzIiwgc3VtbWFyeURhdGEudG90YWxIb3Vycy50b0ZpeGVkKDIpXSk7DQogICAgICAgICAgICAgICAgZGF0YS5wdXNoKFtdKTsgLy8gU3BhY2VyDQogICAgICAgICAgICAgICAgZGF0YS5wdXNoKFsnQmxvcXVlJywgJ0PDs2RpZ28gVGFyZWEnLCAnRmFtaWxpYScsICdIb3JhcyddKTsNCg0KICAgICAgICAgICAgICAgIC8vIFNlIGHDsWFkZW4gQ2FsaWRhZCB5IFNlZ3VyaWRhZCBhbCBvcmRlbiBkZSBleHBvcnRhY2nDs24NCiAgICAgICAgICAgICAgICBjb25zdCBibG9ja09yZGVyID0gWw0KICAgICAgICAgICAgICAgICAgICAnRSZJJywgDQogICAgICAgICAgICAgICAgICAgICdGYWJyaWNhY2nDs24geSBNb250YWplIChUdWIvU29wKScsIA0KICAgICAgICAgICAgICAgICAgICAnTW9udGFqZSBFRU1NJywgDQogICAgICAgICAgICAgICAgICAgICdNb250YWplIEVxdWlwb3MnLA0KICAgICAgICAgICAgICAgICAgICAnQ2FsaWRhZCcsDQogICAgICAgICAgICAgICAgICAgICdTZWd1cmlkYWQnLA0KICAgICAgICAgICAgICAgICAgICAnU3RhbmQgQnknLA0KICAgICAgICAgICAgICAgICAgICAnRm9ybWFjacOzbicNCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgYmxvY2tPcmRlci5mb3JFYWNoKGJsb2NrS2V5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tEYXRhID0gc3VtbWFyeURhdGEuYnlCbG9ja1tibG9ja0tleV07DQogICAgICAgICAgICAgICAgICAgIGlmIChibG9ja0RhdGEgJiYgYmxvY2tEYXRhLnRvdGFsSG91cnMgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRGYW1pbGlhcyA9IE9iamVjdC5rZXlzKGJsb2NrRGF0YS5ieUZhbWlsaWEpLnNvcnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZEZhbWlsaWFzLmZvckVhY2goZmFtaWxpYU5hbWUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IGJsb2NrRGF0YS5ieUZhbWlsaWFbZmFtaWxpYU5hbWVdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnMgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChbDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0tleSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBUkVBX0NPREVTW2Jsb2NrS2V5XSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChob3Vycy50b0ZpeGVkKDIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5hb2FfdG9fc2hlZXQoZGF0YSk7DQogICAgICAgICAgICAgICAgd3NbJyFjb2xzJ10gPSBbe3djaDogMzB9LCB7d2NoOiAyMH0sIHt3Y2g6IDMwfSwge3djaDogMTB9XTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsNCiAgICAgICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCB3cywgIlJlc3VtZW4gR2xvYmFsIik7DQogICAgICAgICAgICAgICAgWExTWC53cml0ZUZpbGUod2IsIGZpbGVOYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW5kZXJQaXZvdFRhYmxlVmlldyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gc3RhdGUudGFibGVzLkRhdG9zOw0KICAgICAgICAgICAgY29uc3QgZmxhdERhdGEgPSBhcHBseUZpbHRlcnModGFibGUuZGF0YSk7DQoNCiAgICAgICAgICAgIGlmIChmbGF0RGF0YS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9ImZsZXgtZ3JvdyBiZy13aGl0ZS84MCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQtbGcgc2hhZG93IG92ZXJmbG93LWhpZGRlbiBwLTggdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTUwMCI+Tm8gaGF5IHJlZ2lzdHJvcyBwYXJhIG1vc3RyYXIuIFB1ZWRlIGHDsWFkaXIgdW5vIGNvbiBlbCBib3TDs24gIisgQcOxYWRpciBSZWdpc3RybyIuPC9kaXY+YDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgZmFtaWxpYVRvU3Vic2VjY2lvbk1hcCA9IHt9Ow0KICAgICAgICAgICAgZm9yIChjb25zdCBncm91cE5hbWUgaW4gVEFSRUFfR1JPVVBTKSB7DQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBmYW1pbGlhIG9mIFRBUkVBX0dST1VQU1tncm91cE5hbWVdKSB7DQogICAgICAgICAgICAgICAgICAgIGZhbWlsaWFUb1N1YnNlY2Npb25NYXBbZmFtaWxpYV0gPSBncm91cE5hbWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBwaXZvdGVkRGF0YSA9IHt9Ow0KICAgICAgICAgICAgZmxhdERhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke3Jvdy5JRH18JHtyb3cuRkVDSEF9YDsNCiAgICAgICAgICAgICAgICBpZiAoIXBpdm90ZWREYXRhW2tleV0pIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyc29uSW5mbyA9IHN0YXRlLmlkVG9QZXJzb25NYXBbcm93LklEXSB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgcGl2b3RlZERhdGFba2V5XSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIElEOiByb3cuSUQsIE5vbWJyZTogcm93Lk5vbWJyZSwgUHVlc3RvOiByb3cuUHVlc3RvLCBGRUNIQTogcm93LkZFQ0hBLA0KICAgICAgICAgICAgICAgICAgICAgICAgRW1wcmVzYTogcGVyc29uSW5mby5lbXByZXNhIHx8ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgVHVybm86IHJvd1snVHVybm8nXSB8fCAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdDYW1iaW8gZGUgam9ybmFkYSc6IHJvd1snQ2FtYmlvIGRlIGpvcm5hZGEnXSB8fCAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgIEFic2VudGlzbW86IHJvd1snQWJzZW50aXNtbyddIHx8ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgSW5jaWRlbmNpYTogcm93WydJbmNpZGVuY2lhJ10gfHwgJycsDQogICAgICAgICAgICAgICAgICAgICAgICBub01vc3RyYXJJZDogcGVyc29uSW5mby5ub01vc3RyYXJJZCB8fCBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzOiB7fQ0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBpc0Fic2VudCA9IHJvdy5BYnNlbnRpc21vICYmIHJvdy5BYnNlbnRpc21vICE9PSAnLSc7DQogICAgICAgICAgICAgICAgaWYoaXNBYnNlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgcGl2b3RlZERhdGFba2V5XS5pc0Fic2VudCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHBpdm90ZWREYXRhW2tleV0uYWJzZW50UmVhc29uID0gcm93LkFic2VudGlzbW87DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCFwaXZvdGVkRGF0YVtrZXldLmhvdXJzW3Jvdy5GYW1pbGlhXSkgew0KICAgICAgICAgICAgICAgICAgICBwaXZvdGVkRGF0YVtrZXldLmhvdXJzW3Jvdy5GYW1pbGlhXSA9IHsgSE46IDAsIEhFOiAwIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBpdm90ZWREYXRhW2tleV0uaG91cnNbcm93LkZhbWlsaWFdLkhOICs9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCiAgICAgICAgICAgICAgICBwaXZvdGVkRGF0YVtrZXldLmhvdXJzW3Jvdy5GYW1pbGlhXS5IRSArPSBwYXJzZUZsb2F0KFN0cmluZyhyb3cuSEUgfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgcGl2b3RlZEFycmF5ID0gT2JqZWN0LnZhbHVlcyhwaXZvdGVkRGF0YSkuc29ydCgoYSxiKSA9PiBhLkZFQ0hBLmxvY2FsZUNvbXBhcmUoYi5GRUNIQSkgfHwgYS5Ob21icmUubG9jYWxlQ29tcGFyZShiLk5vbWJyZSkpOw0KDQogICAgICAgICAgICAvLyAtLS0gSU5JQ0lPOiBMw7NnaWNhIGRlIFBhZ2luYWNpw7NuIC0tLQ0KICAgICAgICAgICAgY29uc3QgdG90YWxJdGVtcyA9IHBpdm90ZWRBcnJheS5sZW5ndGg7DQogICAgICAgICAgICBzdGF0ZS50b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBzdGF0ZS5pdGVtc1BlclBhZ2UpOw0KICAgICAgICAgICAgaWYgKHN0YXRlLnRvdGFsUGFnZXMgPT09IDApIHN0YXRlLnRvdGFsUGFnZXMgPSAxOyAvLyBTaWVtcHJlIGhheSBhbCBtZW5vcyAxIHDDoWdpbmEsIGF1bnF1ZSBlc3TDqSB2YWPDrWENCg0KICAgICAgICAgICAgaWYgKHN0YXRlLmlzSW5pdGlhbExvYWQgJiYgdG90YWxJdGVtcyA+IDApIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50UGFnZSA9IHN0YXRlLnRvdGFsUGFnZXM7DQogICAgICAgICAgICAgICAgc3RhdGUuaXNJbml0aWFsTG9hZCA9IGZhbHNlOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA+IHN0YXRlLnRvdGFsUGFnZXMpIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50UGFnZSA9IHN0YXRlLnRvdGFsUGFnZXM7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRQYWdlID09PSAwICYmIHN0YXRlLnRvdGFsUGFnZXMgPiAwKSB7DQogICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudFBhZ2UgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAodG90YWxJdGVtcyA9PT0gMCkgc3RhdGUuY3VycmVudFBhZ2UgPSAxOw0KDQogICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gKHN0YXRlLmN1cnJlbnRQYWdlIC0gMSkgKiBzdGF0ZS5pdGVtc1BlclBhZ2U7DQogICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IHN0YXRlLmN1cnJlbnRQYWdlICogc3RhdGUuaXRlbXNQZXJQYWdlOw0KICAgICAgICAgICAgY29uc3QgcGFnaW5hdGVkSXRlbXMgPSB0b3RhbEl0ZW1zID4gMCA/IHBpdm90ZWRBcnJheS5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCkgOiBbXTsNCiAgICAgICAgICAgIC8vIC0tLSBGSU46IEzDs2dpY2EgZGUgUGFnaW5hY2nDs24gLS0tDQoNCiAgICAgICAgICAgIGNvbnN0IGhlYWRlckNlbGxTdHlsZSA9ICJweC0yIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBib3JkZXIiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBMYSBsaXN0YSBkZSBmYW1pbGlhcyBhaG9yYSBpbmNsdXllIENhbGlkYWQgeSBTZWd1cmlkYWQsIG9idGVuaWRhIGRlIE1PTlRBSkVTDQogICAgICAgICAgICAvLyBFc3RhIGxpc3RhIGFob3JhIHNlIGJhc2EgZW4gbGEgbnVldmEgZXN0cnVjdHVyYSBkZSBNT05UQUpFUw0KICAgICAgICAgICAgY29uc3QgYWxsRmFtaWxpYXMgPSBPYmplY3QudmFsdWVzKE1PTlRBSkVTKS5mbGF0KCk7DQogICAgICAgICAgICAvLyBFbGltaW5hciBkdXBsaWNhZG9zIHNpICJDYWxpZGFkIiB5ICJTZWd1cmlkYWQiIGVzdMOhbiBlbiBFJkkgeSB0YW1iacOpbiBjb21vIGNvbmNlcHRvIHByb3Bpbw0KICAgICAgICAgICAgY29uc3QgdW5pcXVlRmFtaWxpYXMgPSBbLi4ubmV3IFNldChhbGxGYW1pbGlhcyldOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCB0b3RhbE1vbnRhamVzQ29scyA9IHVuaXF1ZUZhbWlsaWFzLmxlbmd0aCAqIDI7IC8vIEhOIHkgSEUgcGFyYSBjYWRhIGZhbWlsaWENCg0KICAgICAgICAgICAgbGV0IGhlYWRlckh0bWwgPSBgPHRoZWFkIGNsYXNzPSJiZy1ncmF5LTUwLzkwIGJhY2tkcm9wLWJsdXItc20gc3RpY2t5IHRvcC0wIHotMTAiPmA7DQogICAgICAgICAgICBoZWFkZXJIdG1sICs9IGA8dHI+DQogICAgICAgICAgICAgICAgPHRoIHJvd3NwYW49IjUiIGNsYXNzPSIke2hlYWRlckNlbGxTdHlsZX0gYm9yZGVyLWItNCBib3JkZXItZ3JheS01MDAgYm9yZGVyLXItMiBib3JkZXItZ3JheS00MDAiPkZFQ0hBPC90aD4NCiAgICAgICAgICAgICAgICA8dGggcm93c3Bhbj0iNSIgY2xhc3M9IiR7aGVhZGVyQ2VsbFN0eWxlfSBib3JkZXItYi00IGJvcmRlci1ncmF5LTUwMCI+SUQ8L3RoPg0KICAgICAgICAgICAgICAgIDx0aCByb3dzcGFuPSI1IiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTQgYm9yZGVyLWdyYXktNTAwIj5Ob21icmU8L3RoPg0KICAgICAgICAgICAgICAgIDx0aCByb3dzcGFuPSI1IiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTQgYm9yZGVyLWdyYXktNTAwIj5QdWVzdG88L3RoPg0KICAgICAgICAgICAgICAgIDx0aCByb3dzcGFuPSI1IiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTQgYm9yZGVyLWdyYXktNTAwIGJvcmRlci1yLTIgYm9yZGVyLWdyYXktNDAwIj5FbXByZXNhPC90aD4NCiAgICAgICAgICAgICAgICA8dGggY29sc3Bhbj0iJHt0b3RhbE1vbnRhamVzQ29sc30iIGNsYXNzPSIke2hlYWRlckNlbGxTdHlsZX0gYm9yZGVyLWItMiBib3JkZXItZ3JheS00MDAiPkFDVElWSURBREVTPC90aD4NCiAgICAgICAgICAgICAgICA8dGggcm93c3Bhbj0iNSIgY2xhc3M9IiR7aGVhZGVyQ2VsbFN0eWxlfSBib3JkZXItYi00IGJvcmRlci1ncmF5LTUwMCBib3JkZXItbC0yIGJvcmRlci1ncmF5LTQwMCI+VHVybm88L3RoPg0KICAgICAgICAgICAgICAgIDx0aCByb3dzcGFuPSI1IiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTQgYm9yZGVyLWdyYXktNTAwIj5DLiBKb3JuYWRhPC90aD4NCiAgICAgICAgICAgICAgICA8dGggcm93c3Bhbj0iNSIgY2xhc3M9IiR7aGVhZGVyQ2VsbFN0eWxlfSBib3JkZXItYi00IGJvcmRlci1ncmF5LTUwMCI+QWJzZW50aXNtbzwvdGg+DQogICAgICAgICAgICAgICAgPHRoIHJvd3NwYW49IjUiIGNsYXNzPSIke2hlYWRlckNlbGxTdHlsZX0gYm9yZGVyLWItNCBib3JkZXItZ3JheS01MDAiPkluY2lkZW5jaWE8L3RoPg0KICAgICAgICAgICAgICAgIDx0aCByb3dzcGFuPSI1IiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTQgYm9yZGVyLWdyYXktNTAwIGJvcmRlci1sLTIgYm9yZGVyLWdyYXktNDAwIj5BY2Npb25lczwvdGg+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGhlYWRlckh0bWwgKz0gYDx0cj5gOw0KICAgICAgICAgICAgLy8gSXRlcmFyIHNvYnJlIE1PTlRBSkVTIChxdWUgYWhvcmEgaW5jbHV5ZSBDQUxJREFEIHkgU0VHVVJJREFEIGNvbW8gY2xhdmVzKQ0KICAgICAgICAgICAgZm9yIChjb25zdCBjb25jZXB0b05hbWUgaW4gTU9OVEFKRVMpIHsNCiAgICAgICAgICAgICAgICAvLyBFbCBjb2xzcGFuIHNlIGJhc2EgZW4gbGFzIGZhbWlsaWFzIMO6bmljYXMgZGUgZXN0ZSBjb25jZXB0bw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbmNlcHRvRmFtaWxpYXMgPSBbLi4ubmV3IFNldChNT05UQUpFU1tjb25jZXB0b05hbWVdKV07DQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCArPSBgPHRoIGNvbHNwYW49IiR7Y29uY2VwdG9GYW1pbGlhcy5sZW5ndGggKiAyfSIgY2xhc3M9IiR7aGVhZGVyQ2VsbFN0eWxlfSBib3JkZXItYi0yIGJvcmRlci1ncmF5LTQwMCI+JHtjb25jZXB0b05hbWV9PC90aD5gOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaGVhZGVySHRtbCArPSBgPC90cj5gOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBoZWFkZXJIdG1sICs9IGA8dHI+YDsNCiAgICAgICAgICAgIGZvciAoY29uc3QgY29uY2VwdG9OYW1lIGluIE1PTlRBSkVTKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgc3Vic2VjY2lvbmVzID0ge307DQogICAgICAgICAgICAgICAgLy8gVXNhciBsYXMgZmFtaWxpYXMgw7puaWNhcyBwYXJhIGVzdGUgY29uY2VwdG8NCiAgICAgICAgICAgICAgICBjb25zdCBjb25jZXB0b0ZhbWlsaWFzID0gWy4uLm5ldyBTZXQoTU9OVEFKRVNbY29uY2VwdG9OYW1lXSldOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIE1hcGVhciBmYW1pbGlhcyBhIHN1YnNlY2Npb25lcyAqY29ycmVjdGFtZW50ZSoNCiAgICAgICAgICAgICAgICAvLyBVc2FyIGVsIG9yZGVuIGRlZmluaWRvIGVuIENPTkNFUFRPX1NVQlNFQ0NJT05fT1JERVINCiAgICAgICAgICAgICAgICBjb25zdCBvcmRlcmVkU3Vic2VjY2lvbmVzID0gQ09OQ0VQVE9fU1VCU0VDQ0lPTl9PUkRFUltjb25jZXB0b05hbWVdIHx8IFtdOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIG9yZGVyZWRTdWJzZWNjaW9uZXMuZm9yRWFjaChzdWJOYW1lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNJblN1YiA9IFRBUkVBX0dST1VQU1tzdWJOYW1lXSB8fCBbXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNUb1Nob3cgPSBmYW1pbGlhc0luU3ViLmZpbHRlcihmID0+IGNvbmNlcHRvRmFtaWxpYXMuaW5jbHVkZXMoZikpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZmFtaWxpYXNUb1Nob3cubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2VjY2lvbmVzW3N1Yk5hbWVdID0gZmFtaWxpYXNUb1Nob3cubGVuZ3RoICogMjsgLy8gSE4geSBIRQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBBw7FhZGlyIGZhbWlsaWFzIHF1ZSBubyBlc3TDqW4gZW4gbmluZ3VuYSBzdWJzZWNjacOzbiBkZWZpbmlkYSAoc2kgbGFzIGh1YmllcmEpDQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNNYXBlYWRhcyA9IG9yZGVyZWRTdWJzZWNjaW9uZXMuZmxhdE1hcChzdWJOYW1lID0+IFRBUkVBX0dST1VQU1tzdWJOYW1lXSB8fCBbXSk7DQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNTaW5TdWJzZWNjaW9uID0gY29uY2VwdG9GYW1pbGlhcy5maWx0ZXIoZiA9PiAhZmFtaWxpYXNNYXBlYWRhcy5pbmNsdWRlcyhmKSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGZhbWlsaWFzU2luU3Vic2VjY2lvbi5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHN1YnNlY2Npb25lc1snT3Ryb3MnXSA9IGZhbWlsaWFzU2luU3Vic2VjY2lvbi5sZW5ndGggKiAyOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFN1YnNlY2Npb25PcmRlciA9IFsuLi5vcmRlcmVkU3Vic2VjY2lvbmVzLCAnT3Ryb3MnXTsNCg0KICAgICAgICAgICAgICAgIGZpbmFsU3Vic2VjY2lvbk9yZGVyLmZvckVhY2goc3ViTmFtZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzdWJzZWNjaW9uZXNbc3ViTmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJIdG1sICs9IGA8dGggY29sc3Bhbj0iJHtzdWJzZWNjaW9uZXNbc3ViTmFtZV19IiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTIgYm9yZGVyLWdyYXktNDAwIj4ke3N1Yk5hbWV9PC90aD5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoZWFkZXJIdG1sICs9IGA8L3RyPmA7DQoNCiAgICAgICAgICAgIGhlYWRlckh0bWwgKz0gYDx0cj5gOw0KICAgICAgICAgICAgLy8gQnVjbGUgYW5pZGFkbyBwYXJhIEZhbWlsaWFzIChOaXZlbCA0KQ0KICAgICAgICAgICAgZm9yIChjb25zdCBjb25jZXB0b05hbWUgaW4gTU9OVEFKRVMpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb25jZXB0b0ZhbWlsaWFzID0gWy4uLm5ldyBTZXQoTU9OVEFKRVNbY29uY2VwdG9OYW1lXSldOw0KICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyZWRTdWJzZWNjaW9uZXMgPSBDT05DRVBUT19TVUJTRUNDSU9OX09SREVSW2NvbmNlcHRvTmFtZV0gfHwgW107DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gUHJpbWVybywgbGFzIGZhbWlsaWFzIGRlIGxhcyBzdWJzZWNjaW9uZXMgb3JkZW5hZGFzDQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNPcmRlbmFkYXMgPSBbXTsNCiAgICAgICAgICAgICAgICBvcmRlcmVkU3Vic2VjY2lvbmVzLmZvckVhY2goc3ViTmFtZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzSW5TdWIgPSBUQVJFQV9HUk9VUFNbc3ViTmFtZV0gfHwgW107DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzVG9TaG93ID0gZmFtaWxpYXNJblN1Yi5maWx0ZXIoZiA9PiBjb25jZXB0b0ZhbWlsaWFzLmluY2x1ZGVzKGYpICYmICFmYW1pbGlhc09yZGVuYWRhcy5pbmNsdWRlcyhmKSk7DQogICAgICAgICAgICAgICAgICAgIGZhbWlsaWFzT3JkZW5hZGFzLnB1c2goLi4uZmFtaWxpYXNUb1Nob3cpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gU2VndW5kbywgbGFzIGZhbWlsaWFzIHJlc3RhbnRlcyBxdWUgbm8gZXN0YWJhbiBlbiBsYXMgc3Vic2VjY2lvbmVzDQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNSZXN0YW50ZXMgPSBjb25jZXB0b0ZhbWlsaWFzLmZpbHRlcihmID0+ICFmYW1pbGlhc09yZGVuYWRhcy5pbmNsdWRlcyhmKSk7DQogICAgICAgICAgICAgICAgZmFtaWxpYXNPcmRlbmFkYXMucHVzaCguLi5mYW1pbGlhc1Jlc3RhbnRlcyk7DQoNCiAgICAgICAgICAgICAgICAvLyBSZW5kZXJpemFyIGxhcyBmYW1pbGlhcyBlbiBlbCBvcmRlbiBjYWxjdWxhZG8NCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhbWlsaWFOYW1lIG9mIGZhbWlsaWFzT3JkZW5hZGFzKSB7DQogICAgICAgICAgICAgICAgICAgIGhlYWRlckh0bWwgKz0gYDx0aCBjb2xzcGFuPSIyIiBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTIgYm9yZGVyLWdyYXktNDAwIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTYwMCBub3JtYWwtY2FzZSI+JHtlc2NhcGVIdG1sKGZhbWlsaWFOYW1lKX08L3RoPmA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaGVhZGVySHRtbCArPSBgPC90cj5gOw0KDQogICAgICAgICAgICBoZWFkZXJIdG1sICs9IGA8dHI+YDsNCiAgICAgICAgICAgIC8vIEJ1Y2xlIGFuaWRhZG8gcGFyYSBITi9IRSAoTml2ZWwgNSkNCiAgICAgICAgICAgIGZvciAoY29uc3QgY29uY2VwdG9OYW1lIGluIE1PTlRBSkVTKSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG9GYW1pbGlhcyA9IFsuLi5uZXcgU2V0KE1PTlRBSkVTW2NvbmNlcHRvTmFtZV0pXTsNCiAgICAgICAgICAgICAgICBjb25zdCBvcmRlcmVkU3Vic2VjY2lvbmVzID0gQ09OQ0VQVE9fU1VCU0VDQ0lPTl9PUkRFUltjb25jZXB0b05hbWVdIHx8IFtdOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIE1pc21vIG9yZGVuIHF1ZSBlbiBlbCBOaXZlbCA0DQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNPcmRlbmFkYXMgPSBbXTsNCiAgICAgICAgICAgICAgICBvcmRlcmVkU3Vic2VjY2lvbmVzLmZvckVhY2goc3ViTmFtZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzSW5TdWIgPSBUQVJFQV9HUk9VUFNbc3ViTmFtZV0gfHwgW107DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzVG9TaG93ID0gZmFtaWxpYXNJblN1Yi5maWx0ZXIoZiA9PiBjb25jZXB0b0ZhbWlsaWFzLmluY2x1ZGVzKGYpICYmICFmYW1pbGlhc09yZGVuYWRhcy5pbmNsdWRlcyhmKSk7DQogICAgICAgICAgICAgICAgICAgIGZhbWlsaWFzT3JkZW5hZGFzLnB1c2goLi4uZmFtaWxpYXNUb1Nob3cpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzUmVzdGFudGVzID0gY29uY2VwdG9GYW1pbGlhcy5maWx0ZXIoZiA9PiAhZmFtaWxpYXNPcmRlbmFkYXMuaW5jbHVkZXMoZikpOw0KICAgICAgICAgICAgICAgIGZhbWlsaWFzT3JkZW5hZGFzLnB1c2goLi4uZmFtaWxpYXNSZXN0YW50ZXMpOw0KDQogICAgICAgICAgICAgICAgLy8gUmVuZGVyaXphciBITi9IRSBlbiBlc2Ugb3JkZW4NCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhbWlsaWFOYW1lIG9mIGZhbWlsaWFzT3JkZW5hZGFzKSB7DQogICAgICAgICAgICAgICAgICAgIGhlYWRlckh0bWwgKz0gYDx0aCBjbGFzcz0iJHtoZWFkZXJDZWxsU3R5bGV9IGJvcmRlci1iLTQgYm9yZGVyLWdyYXktNTAwIj5ITjwvdGg+PHRoIGNsYXNzPSIke2hlYWRlckNlbGxTdHlsZX0gYm9yZGVyLWItNCBib3JkZXItZ3JheS01MDAiPkhFPC90aD5gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhlYWRlckh0bWwgKz0gYDwvdHI+PC90aGVhZD5gOw0KDQoNCiAgICAgICAgICAgIGxldCBib2R5SHRtbCA9IGA8dGJvZHkgY2xhc3M9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMC81MCI+YDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gVXNhciBwYWdpbmF0ZWRJdGVtcyBlbiBsdWdhciBkZSBwaXZvdGVkQXJyYXkNCiAgICAgICAgICAgIHBhZ2luYXRlZEl0ZW1zLmZvckVhY2gocGl2b3RlZFJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaXNBYnNlbnRSb3cgPSBwaXZvdGVkUm93LmlzQWJzZW50Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGFic2VudENsYXNzID0gaXNBYnNlbnRSb3cgPyAnYmcteWVsbG93LTEwMC81MCcgOiAnJzsNCiAgICAgICAgICAgICAgICBjb25zdCBpZENlbGxDb250ZW50ID0gcGl2b3RlZFJvdy5ub01vc3RyYXJJZCA/ICcnIDogZXNjYXBlSHRtbChwaXZvdGVkUm93LklEKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRyIGNsYXNzPSIke2Fic2VudENsYXNzfSI+YDsNCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRkIGNsYXNzPSJweC0yIHB5LTIgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIGJvcmRlciI+JHtlc2NhcGVIdG1sKGZvcm1hdERhdGVUb0RNWShwaXZvdGVkUm93LkZFQ0hBKSl9PC90ZD5gOw0KICAgICAgICAgICAgICAgIGJvZHlIdG1sICs9IGA8dGQgY2xhc3M9InB4LTIgcHktMiB3aGl0ZXNwYWNlLW5vd3JhcCB0ZXh0LXNtIHRleHQtZ3JheS03MDAgYm9yZGVyIj4ke2lkQ2VsbENvbnRlbnR9PC90ZD5gOw0KICAgICAgICAgICAgICAgIGJvZHlIdG1sICs9IGA8dGQgY2xhc3M9InB4LTIgcHktMiB3aGl0ZXNwYWNlLW5vd3JhcCB0ZXh0LXNtIHRleHQtZ3JheS03MDAgYm9yZGVyIj4ke2VzY2FwZUh0bWwocGl2b3RlZFJvdy5Ob21icmUpfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRkIGNsYXNzPSJweC0yIHB5LTIgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIGJvcmRlciI+JHtlc2NhcGVIdG1sKHBpdm90ZWRSb3cuUHVlc3RvKX08L3RkPmA7DQogICAgICAgICAgICAgICAgYm9keUh0bWwgKz0gYDx0ZCBjbGFzcz0icHgtMiBweS0yIHdoaXRlc3BhY2Utbm93cmFwIHRleHQtc20gdGV4dC1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLXItMiBib3JkZXItZ3JheS00MDAiPiR7ZXNjYXBlSHRtbChwaXZvdGVkUm93LkVtcHJlc2EpfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZihpc0Fic2VudFJvdykgew0KICAgICAgICAgICAgICAgICAgICAgYm9keUh0bWwgKz0gYDx0ZCBjb2xzcGFuPSIke3RvdGFsTW9udGFqZXNDb2xzfSIgY2xhc3M9InB4LTIgcHktMiB0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtZ3JheS03MDAgYm9yZGVyIGZvbnQtc2VtaWJvbGQiPiR7ZXNjYXBlSHRtbChwaXZvdGVkUm93LmFic2VudFJlYXNvbil9PC90ZD5gOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEl0ZXJhciBlbiBlbCBtaXNtbyBvcmRlbiBxdWUgbGFzIGNhYmVjZXJhcyAodXNhbmRvIGxhIG51ZXZhIGVzdHJ1Y3R1cmEgZGUgTU9OVEFKRVMpDQogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29uY2VwdG9OYW1lIGluIE1PTlRBSkVTKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25jZXB0b0ZhbWlsaWFzID0gWy4uLm5ldyBTZXQoTU9OVEFKRVNbY29uY2VwdG9OYW1lXSldOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JkZXJlZFN1YnNlY2Npb25lcyA9IENPTkNFUFRPX1NVQlNFQ0NJT05fT1JERVJbY29uY2VwdG9OYW1lXSB8fCBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWlzbW8gb3JkZW4gcXVlIGVuIGVsIE5pdmVsIDQgeSA1DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhc09yZGVuYWRhcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJlZFN1YnNlY2Npb25lcy5mb3JFYWNoKHN1Yk5hbWUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzSW5TdWIgPSBUQVJFQV9HUk9VUFNbc3ViTmFtZV0gfHwgW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNUb1Nob3cgPSBmYW1pbGlhc0luU3ViLmZpbHRlcihmID0+IGNvbmNlcHRvRmFtaWxpYXMuaW5jbHVkZXMoZikgJiYgIWZhbWlsaWFzT3JkZW5hZGFzLmluY2x1ZGVzKGYpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhc09yZGVuYWRhcy5wdXNoKC4uLmZhbWlsaWFzVG9TaG93KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNSZXN0YW50ZXMgPSBjb25jZXB0b0ZhbWlsaWFzLmZpbHRlcihmID0+ICFmYW1pbGlhc09yZGVuYWRhcy5pbmNsdWRlcyhmKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhc09yZGVuYWRhcy5wdXNoKC4uLmZhbWlsaWFzUmVzdGFudGVzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyaXphciBkYXRvcyBkZSBITi9IRSBlbiBlc2Ugb3JkZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmFtaWxpYU5hbWUgb2YgZmFtaWxpYXNPcmRlbmFkYXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IHBpdm90ZWRSb3cuaG91cnNbZmFtaWxpYU5hbWVdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlIdG1sICs9IGA8dGQgY2xhc3M9InB4LTIgcHktMiB0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtZ3JheS03MDAgYm9yZGVyIj4ke2hvdXJzICYmIGhvdXJzLkhOID8gaG91cnMuSE4gOiAnJ308L3RkPmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keUh0bWwgKz0gYDx0ZCBjbGFzcz0icHgtMiBweS0yIHRleHQtY2VudGVyIHRleHQtc20gdGV4dC1ncmF5LTcwMCBib3JkZXIiPiR7aG91cnMgJiYgaG91cnMuSEUgPyBob3Vycy5IRSA6ICcnfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRkIGNsYXNzPSJweC0yIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIGJvcmRlciBib3JkZXItbC0yIGJvcmRlci1ncmF5LTQwMCI+JHtlc2NhcGVIdG1sKHBpdm90ZWRSb3cuVHVybm8pfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRkIGNsYXNzPSJweC0yIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIGJvcmRlciI+JHtlc2NhcGVIdG1sKHBpdm90ZWRSb3dbJ0NhbWJpbyBkZSBqb3JuYWRhJ10pfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRkIGNsYXNzPSJweC0yIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIGJvcmRlciI+JHtlc2NhcGVIdG1sKHBpdm90ZWRSb3cuQWJzZW50aXNtbyl9PC90ZD5gOw0KICAgICAgICAgICAgICAgIGJvZHlIdG1sICs9IGA8dGQgY2xhc3M9InB4LTIgcHktMiB0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtZ3JheS03MDAgYm9yZGVyIj4ke2VzY2FwZUh0bWwocGl2b3RlZFJvdy5JbmNpZGVuY2lhKX08L3RkPmA7DQoNCiAgICAgICAgICAgICAgICBib2R5SHRtbCArPSBgPHRkIGNsYXNzPSJweC0yIHB5LTIgd2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LW1lZGl1bSBib3JkZXIgYm9yZGVyLWwtMiBib3JkZXItZ3JheS00MDAgc3BhY2UteC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZWRpdC1ncm91cGVkLXJvdy1idG4gdGV4dC1ibHVlLTYwMCBob3Zlcjp0ZXh0LWJsdWUtOTAwIiBkYXRhLWlkPSIke3Bpdm90ZWRSb3cuSUR9IiBkYXRhLWZlY2hhPSIke3Bpdm90ZWRSb3cuRkVDSEF9Ij5FZGl0YXI8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGVsZXRlLWdyb3VwZWQtcm93LWJ0biB0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtOTAwIiBkYXRhLWlkPSIke3Bpdm90ZWRSb3cuSUR9IiBkYXRhLWZlY2hhPSIke3Bpdm90ZWRSb3cuRkVDSEF9Ij5FbGltaW5hcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPmA7DQogICAgICAgICAgICAgICAgYm9keUh0bWwgKz0gYDwvdHI+YDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgYm9keUh0bWwgKz0gYDwvdGJvZHk+YDsNCg0KICAgICAgICAgICAgY29uc3QgdGFibGVIdG1sID0gYDxkaXYgaWQ9InRhYmxlLXNjcm9sbC1jb250YWluZXIiIGNsYXNzPSJvdmVyZmxvdy1hdXRvIGgtZnVsbCI+PHRhYmxlIGNsYXNzPSJtaW4tdy1mdWxsIGJvcmRlci1jb2xsYXBzZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj4ke2hlYWRlckh0bWx9JHtib2R5SHRtbH08L3RhYmxlPjwvZGl2PmA7DQoNCiAgICAgICAgICAgIGxldCBwYWdpbmF0aW9uSHRtbCA9ICcnOw0KICAgICAgICAgICAgaWYgKHN0YXRlLnRvdGFsUGFnZXMgPiAxKSB7DQogICAgICAgICAgICAgICAgY29uc3QgYnRuQ2xhc3NlcyA9ICJweC00IHB5LTIgdGV4dC1zbSBmb250LXNlbWlib2xkIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiOw0KICAgICAgICAgICAgICAgIHBhZ2luYXRpb25IdG1sID0gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LXNocmluay0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtdC1hdXRvIHAtMyBiZy1ncmF5LTUwLzkwIGJvcmRlci10IGJvcmRlci1ncmF5LTIwMC81MCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQw6FnaW5hICR7c3RhdGUuY3VycmVudFBhZ2V9IGRlICR7c3RhdGUudG90YWxQYWdlc30NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXgtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icHJldi1wYWdlLWJ0biIgY2xhc3M9ImJnLXdoaXRlIHRleHQtZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBob3ZlcjpiZy1ncmF5LTEwMCAke2J0bkNsYXNzZXN9IiAke3N0YXRlLmN1cnJlbnRQYWdlID09PSAxID8gJ2Rpc2FibGVkJyA6ICcnfT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW50ZXJpb3INCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJuZXh0LXBhZ2UtYnRuIiBjbGFzcz0iYmctd2hpdGUgdGV4dC1ncmF5LTgwMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIGhvdmVyOmJnLWdyYXktMTAwICR7YnRuQ2xhc3Nlc30iICR7c3RhdGUuY3VycmVudFBhZ2UgPT09IHN0YXRlLnRvdGFsUGFnZXMgPyAnZGlzYWJsZWQnIDogJyd9Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaWd1aWVudGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDYW1iaWFkbyBwYXJhIHF1ZSBlbCBjb250ZW5lZG9yIGRlIHNjcm9sbCBvY3VwZSBlbCBlc3BhY2lvIHkgbGEgcGFnaW5hY2nDs24gcXVlZGUgYWJham8NCiAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0iZmxleC1ncm93IGJnLXdoaXRlLzgwIGJhY2tkcm9wLWJsdXItc20gcm91bmRlZC1sZyBzaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIGZsZXggZmxleC1jb2wiPg0KICAgICAgICAgICAgICAgICAgICAgICAgJHt0YWJsZUh0bWx9DQogICAgICAgICAgICAgICAgICAgICAgICAke3BhZ2luYXRpb25IdG1sfQ0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBjb25zdCByZW5kZXJFZGl0Um93TW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBjb21tb25DbGFzc2VzID0gIm10LTEgYmxvY2sgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBmb2N1czpyaW5nLWJsdWUtNTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBwLTIiOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcm93LW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSBgQcOxYWRpciBOdWV2byBSZWdpc3Ryb2A7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07DQogICAgICAgICAgICBjb25zdCBwZW9wbGUgPSBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5zbGljZSgpLnNvcnQoKGEsIGIpID0+IGEuTm9tYnJlLmxvY2FsZUNvbXBhcmUoYi5Ob21icmUpKTsNCiAgICAgICAgICAgIGNvbnN0IHBlb3BsZUxpc3RIdG1sID0gcGVvcGxlLm1hcChwZXJzb24gPT4gYDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIHAtMiByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMjAwLzgwIGN1cnNvci1wb2ludGVyIHBlcnNvbi1zZWxlY3Rpb24tbGFiZWwiIGRhdGEtbmFtZT0iJHtlc2NhcGVIdG1sKHBlcnNvbi5Ob21icmUudG9Mb3dlckNhc2UoKSl9IiBkYXRhLWlkPSIke2VzY2FwZUh0bWwocGVyc29uLklELnRvTG93ZXJDYXNlKCkpfSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJHtlc2NhcGVIdG1sKHBlcnNvbi5JRCl9IiBjbGFzcz0icGVyc29uLWNoZWNrYm94IGgtNCB3LTQgcm91bmRlZCBib3JkZXItZ3JheS0zMDAgdGV4dC1ibHVlLTYwMCBmb2N1czpyaW5nLWJsdWUtNTAwIj48ZGl2PjxzcGFuPiR7ZXNjYXBlSHRtbChwZXJzb24uTm9tYnJlKX0gPHNwYW4gY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+KCR7ZXNjYXBlSHRtbChwZXJzb24uSUQpfSk8L3NwYW4+PC9zcGFuPjxkaXYgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+JHtlc2NhcGVIdG1sKHBlcnNvbi5QdWVzdG8pfTwvZGl2PjwvZGl2PjwvbGFiZWw+YCkuam9pbignJyk7DQoNCiAgICAgICAgICAgIGxldCBmb3JtSHRtbCA9IGANCiAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+VGlwbyBkZSBSZWdpc3RybzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImZvcm0tcmVjb3JkLXR5cGUiIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9IG1iLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iam9ybmFkYSI+Sm9ybmFkYSBMYWJvcmFsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJhYnNlbnRpc21vIj5BYnNlbnRpc21vPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZvcm0tY29udGVudC1hcmVhIj48L2Rpdj4NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICBkb20uZWRpdFJvd0Zvcm0uaW5uZXJIVE1MID0gZm9ybUh0bWw7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHJlY29yZFR5cGVTZWxlY3QgPSBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvcignI2Zvcm0tcmVjb3JkLXR5cGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLWNvbnRlbnQtYXJlYScpOw0KDQogICAgICAgICAgICBjb25zdCByZW5kZXJGb3JtQ29udGVudCA9ICh0eXBlKSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IGlubmVySHRtbCA9IGA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC14LTYgZ2FwLXktNCI+YDsNCiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIEl6cXVpZXJkYSAoY29tw7puKQ0KICAgICAgICAgICAgICAgIGlubmVySHRtbCArPSBgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZm9ybS1yb3ctRkVDSEEiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkZlY2hhIEluaWNpbzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJmb3JtLXJvdy1GRUNIQSIgdmFsdWU9IiR7dG9kYXl9IiBjbGFzcz0iJHtjb21tb25DbGFzc2VzfSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im11bHRpLWRheS1yYW5nZSIgY2xhc3M9IiR7dHlwZSA9PT0gJ2Fic2VudGlzbW8nID8gJycgOiAnaGlkZGVuJ30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImZvcm0tcm93LUZFQ0hBLWZpbiIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+RmVjaGEgRmluPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImZvcm0tcm93LUZFQ0hBLWZpbiIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC00IHB0LTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCBtYi0yIj5TZWxlY2Npb25hciBQZXJzb25hczwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSBtYi0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic2VhcmNoIiBpZD0ic2VhcmNoLWFkZC1wZXJzb24iIHBsYWNlaG9sZGVyPSJCdXNjYXIgcGVyc29uYS4uLiIgY2xhc3M9InctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gcC0yIHBsLTggZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFic29sdXRlIGluc2V0LXktMCBsZWZ0LTAgcGwtMiBmbGV4IGl0ZW1zLWNlbnRlciBwb2ludGVyLWV2ZW50cy1ub25lIj48c3ZnIGNsYXNzPSJoLTUgdy01IHRleHQtZ3JheS00MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDIwIDIwIiBmaWxsPSJjdXJyZW50Q29sb3IiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTggNGE0IDQgMCAxMDAgOCA0IDQgMCAwMDAtOHpNMiA4YTYgNiAwIDExMTAuODkgMy40NzZsNC44MTcgNC44MTdhMSAxIDAgMDEtMS40MTQgMS40MTRsLTQuODE2LTQuODE2QTYgNiAwIDAxMiA4eiIgY2xpcC1ydWxlPSJldmVub2RkIiAvPjwvc3ZnPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJhZGQtcGVvcGxlLWxpc3QiIGNsYXNzPSJtYXgtaC02MCBvdmVyZmxvdy15LWF1dG8gYm9yZGVyIHJvdW5kZWQtbGcgcC0yIGJnLWdyYXktNTAvNTAgc3BhY2UteS0xIj4ke3Blb3BsZUxpc3RIdG1sfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIENvbHVtbmEgRGVyZWNoYSAodmFyaWFibGUpDQogICAgICAgICAgICAgICAgaW5uZXJIdG1sICs9IGA8ZGl2PjxkaXYgY2xhc3M9InNwYWNlLXktNCI+YDsNCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2pvcm5hZGEnKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEVsIHNlbGVjdCBkZSBDb25jZXB0byBzZSByZWxsZW5hIGRpbsOhbWljYW1lbnRlIGNvbiBsYSBudWV2YSBlc3RydWN0dXJhIGRlIE1PTlRBSkVTDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmNlcHRvT3B0aW9ucyA9IE9iamVjdC5rZXlzKE1PTlRBSkVTKS5tYXAoYyA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtjfSI+JHtjfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgICAgICAgICAgICAgICAgICBpbm5lckh0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJmb3JtLXJvdy1Db25jZXB0byIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+Q29uY2VwdG88L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImZvcm0tcm93LUNvbmNlcHRvIiBkYXRhLWNvbD0iQ29uY2VwdG8iIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9Ij48b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjY2lvbmFyIC0tPC9vcHRpb24+JHtjb25jZXB0b09wdGlvbnN9PC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZm9ybS1yb3ctRmFtaWxpYSIgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+RmFtaWxpYTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZm9ybS1yb3ctRmFtaWxpYSIgZGF0YS1jb2w9IkZhbWlsaWEiIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9IiBkaXNhYmxlZD48b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjY2lvbmFyIC0tPC9vcHRpb24+PC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InB0LTQgYm9yZGVyLXQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImZvcm0tcm93LUhOIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj5Ib3JhcyBhIEHDsWFkaXI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJmb3JtLXJvdy1ITiIgZGF0YS1jb2w9IkhOIiB2YWx1ZT0iOCIgc3RlcD0iMC41IiBtaW49IjAiIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icHQtNCBib3JkZXItdCBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+VHVybm88L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGRhdGEtY29sPSJUdXJubyIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPUENJT05FU1snVHVybm8nXS5tYXAodiA9PiBgPG9wdGlvbiB2YWx1ZT0iJHt2fSI+JHt2fTwvb3B0aW9uPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+Q2FtYmlvIGRlIGpvcm5hZGE8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGRhdGEtY29sPSJDYW1iaW8gZGUgam9ybmFkYSIgY2xhc3M9IiR7Y29tbW9uQ2xhc3Nlc30iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPUENJT05FU1snQ2FtYmlvIGRlIGpvcm5hZGEnXS5tYXAodiA9PiBgPG9wdGlvbiB2YWx1ZT0iJHt2fSI+JHt2fTwvb3B0aW9uPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtZDpjb2wtc3Bhbi0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkluY2lkZW5jaWE8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS1jb2w9IkluY2lkZW5jaWEiIGNsYXNzPSIke2NvbW1vbkNsYXNzZXN9IiBwbGFjZWhvbGRlcj0iRGVzY3JpYmlyIGluY2lkZW5jaWEuLi4iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBhYnNlbnRpc21vDQogICAgICAgICAgICAgICAgICAgIGlubmVySHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImZvcm0tcm93LUFic2VudGlzbW8iIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPk1vdGl2byBkZSBBYnNlbnRpc21vPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGRhdGEtY29sPSJBYnNlbnRpc21vIiBjbGFzcz0iJHtjb21tb25DbGFzc2VzfSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7T1BDSU9ORVNbJ0Fic2VudGlzbW8nXS5maWx0ZXIodiA9PiB2ICE9PSAnLScpLm1hcCh2ID0+IGA8b3B0aW9uIHZhbHVlPSIke3Z9Ij4ke3Z9PC9vcHRpb24+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBiZy1ibHVlLTUwIHRleHQtYmx1ZS04MDAgcm91bmRlZC1sZyB0ZXh0LXNtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY2Npb25lIHVuIHJhbmdvIGRlIGZlY2hhcy4gU2UgY3JlYXLDoSB1biByZWdpc3RybyBkZSBhdXNlbmNpYSBwYXJhIGNhZGEgZMOtYSBlbiBlbCBpbnRlcnZhbG8gc2VsZWNjaW9uYWRvLg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlubmVySHRtbCArPSBgPC9kaXY+PC9kaXY+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYS5pbm5lckhUTUwgPSBpbm5lckh0bWw7DQoNCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2pvcm5hZGEnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmNlcHRvU2VsZWN0ID0gY29udGVudEFyZWEucXVlcnlTZWxlY3RvcignI2Zvcm0tcm93LUNvbmNlcHRvJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbmNlcHRvU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhU2VsZWN0ID0gY29udGVudEFyZWEucXVlcnlTZWxlY3RvcignI2Zvcm0tcm93LUZhbWlsaWEnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ29uY2VwdG8gPSBlLnRhcmdldC52YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFTZWxlY3QuaW5uZXJIVE1MID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb25jZXB0byAmJiBNT05UQUpFU1tzZWxlY3RlZENvbmNlcHRvXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFTZWxlY3QuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjY2lvbmFyIC0tPC9vcHRpb24+JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbCBzZWxlY3QgZGUgRmFtaWxpYSBzZSByZWxsZW5hIGNvbiBsYXMgZmFtaWxpYXMgZGVsIGNvbmNlcHRvICh5YSBtb2RpZmljYWRhcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNT05UQUpFU1tzZWxlY3RlZENvbmNlcHRvXS5mb3JFYWNoKGZhbWlsaWEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhU2VsZWN0LmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT0iJHtmYW1pbGlhfSI+JHtmYW1pbGlhfTwvb3B0aW9uPmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFTZWxlY3QuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWNjaW9uYXIgLS08L29wdGlvbj4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29udGVudEFyZWEucXVlcnlTZWxlY3RvcignI3NlYXJjaC1hZGQtcGVyc29uJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gZS50YXJnZXQudmFsdWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudEFyZWEucXVlcnlTZWxlY3RvckFsbCgnLnBlcnNvbi1zZWxlY3Rpb24tbGFiZWwnKS5mb3JFYWNoKGxhYmVsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsYWJlbC5kYXRhc2V0Lm5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGxhYmVsLmRhdGFzZXQuaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5kaXNwbGF5ID0gKG5hbWUuaW5jbHVkZXMoc2VhcmNoVGVybSkgfHwgaWQuaW5jbHVkZXMoc2VhcmNoVGVybSkpID8gJ2ZsZXgnIDogJ25vbmUnOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHJlY29yZFR5cGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHJlbmRlckZvcm1Db250ZW50KGUudGFyZ2V0LnZhbHVlKSk7DQogICAgICAgICAgICByZW5kZXJGb3JtQ29udGVudCgnam9ybmFkYScpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uc2F2ZVJvd0J0bi5kYXRhc2V0Lm1vZGUgPSAnYWRkTmV3JzsNCiAgICAgICAgICAgIGRvbS5lZGl0Um93TW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHJlbmRlclNlYXJjaE1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgZG9tLnNlYXJjaFJ1bGVzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOw0KICAgICAgICAgICAgc3RhdGUuYWN0aXZlRmlsdGVycy5mb3JFYWNoKHJ1bGUgPT4gYWRkU2VhcmNoUnVsZVRvRE9NKHJ1bGUpKTsNCiAgICAgICAgICAgIGlmIChzdGF0ZS5hY3RpdmVGaWx0ZXJzLmxlbmd0aCA9PT0gMCkgYWRkU2VhcmNoUnVsZVRvRE9NKCk7DQogICAgICAgICAgICBjb25zdCBoYXNGaWx0ZXJzID0gc3RhdGUuYWN0aXZlRmlsdGVycy5sZW5ndGggPiAwOw0KICAgICAgICAgICAgZG9tLmRvd25sb2FkRmlsdGVyZWRYbHNCdG4uZGlzYWJsZWQgPSAhaGFzRmlsdGVyczsNCiAgICAgICAgICAgIGRvbS5zZWFyY2hNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgYWRkU2VhcmNoUnVsZVRvRE9NID0gKHJ1bGUgPSB7Y29sdW1uOiAnJywgb3BlcmF0b3I6ICdjb250YWlucycsIHZhbHVlOiAnJ30pID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJ1bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgcnVsZUVsLmNsYXNzTmFtZSA9ICdzZWFyY2gtcnVsZSBncmlkIGdyaWQtY29scy0xMiBnYXAtMiBpdGVtcy1jZW50ZXInOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCB1cGRhdGVSdWxlSW5wdXRzID0gKCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ29sdW1uID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLWNvbHVtbicpPy52YWx1ZSB8fCBydWxlLmNvbHVtbjsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW5PcHRpb25zID0gQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUi5tYXAoYyA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtjfSIgJHtjID09PSBzZWxlY3RlZENvbHVtbiA/ICdzZWxlY3RlZCcgOiAnJ30+JHtjfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGxldCBpbnB1dHNIdG1sID0gYDxzZWxlY3QgY2xhc3M9InJ1bGUtY29sdW1uIGNvbC1zcGFuLTQgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIiPiR7Y29sdW1uT3B0aW9uc308L3NlbGVjdD5gOw0KDQogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ29sdW1uID09PSAnRkVDSEEnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0VmFsID0gdHlwZW9mIHJ1bGUudmFsdWUgPT09ICdvYmplY3QnID8gcnVsZS52YWx1ZS5zdGFydCB8fCAnJyA6ICcnOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRWYWwgPSB0eXBlb2YgcnVsZS52YWx1ZSA9PT0gJ29iamVjdCcgPyBydWxlLnZhbHVlLmVuZCB8fCAnJyA6ICcnOw0KICAgICAgICAgICAgICAgICAgICBpbnB1dHNIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9InJ1bGUtb3BlcmF0b3IgY29sLXNwYW4tMiB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiI+PG9wdGlvbiB2YWx1ZT0iYmV0d2VlbiI+ZW50cmU8L29wdGlvbj48L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBjbGFzcz0icnVsZS12YWx1ZS1zdGFydCBjb2wtc3Bhbi0yIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gcC0yIiB2YWx1ZT0iJHtzdGFydFZhbH0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNvbC1zcGFuLTEgdGV4dC1jZW50ZXIiPnk8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgY2xhc3M9InJ1bGUtdmFsdWUtZW5kIGNvbC1zcGFuLTIgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIiIHZhbHVlPSIke2VuZFZhbH0iPg0KICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yT3B0aW9ucyA9IFt7dmFsOiAnY29udGFpbnMnLCB0ZXh0OiAnQ29udGllbmUnfSwge3ZhbDogJ25vdF9jb250YWlucycsIHRleHQ6ICdObyBjb250aWVuZSd9LHt2YWw6ICdlcXVhbHMnLCB0ZXh0OiAnRXMgaWd1YWwgYSd9LCB7dmFsOiAnbm90X2VxdWFscycsIHRleHQ6ICdObyBlcyBpZ3VhbCBhJ30se3ZhbDogJ3N0YXJ0c193aXRoJywgdGV4dDogJ0VtcGllemEgcG9yJ30sIHt2YWw6ICdlbmRzX3dpdGgnLCB0ZXh0OiAnVGVybWluYSBwb3InfSx7dmFsOiAnZ3QnLCB0ZXh0OiAnPiAobnVtKSd9LCB7dmFsOiAnbHQnLCB0ZXh0OiAnPCAobnVtKSd9XS5tYXAob3AgPT4gYDxvcHRpb24gdmFsdWU9IiR7b3AudmFsfSIgJHtvcC52YWwgPT09IHJ1bGUub3BlcmF0b3IgPyAnc2VsZWN0ZWQnIDogJyd9PiR7b3AudGV4dH08L29wdGlvbj5gKS5qb2luKCcnKTsNCiAgICAgICAgICAgICAgICAgICAgaW5wdXRzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPSJydWxlLW9wZXJhdG9yIGNvbC1zcGFuLTMgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIiPiR7b3BlcmF0b3JPcHRpb25zfTwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJydWxlLXZhbHVlIGNvbC1zcGFuLTQgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIiIHZhbHVlPSIke2VzY2FwZUh0bWwocnVsZS52YWx1ZSB8fCAnJyl9Ij4NCiAgICAgICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaW5wdXRzSHRtbCArPSBgPGJ1dHRvbiBjbGFzcz0icmVtb3ZlLXJ1bGUtYnRuIGNvbC1zcGFuLTEgdGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCBmb250LWJvbGQgdGV4dC14bCI+JnRpbWVzOzwvYnV0dG9uPmA7DQogICAgICAgICAgICAgICAgcnVsZUVsLmlubmVySFRNTCA9IGlucHV0c0h0bWw7DQoNCiAgICAgICAgICAgICAgICBydWxlRWwucXVlcnlTZWxlY3RvcignLnJlbW92ZS1ydWxlLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcnVsZUVsLnJlbW92ZSgpKTsNCiAgICAgICAgICAgICAgICBydWxlRWwucXVlcnlTZWxlY3RvcignLnJ1bGUtY29sdW1uJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlUnVsZUlucHV0cyk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICB1cGRhdGVSdWxlSW5wdXRzKCk7DQogICAgICAgICAgICBkb20uc2VhcmNoUnVsZXNDb250YWluZXIuYXBwZW5kQ2hpbGQocnVsZUVsKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVBcHBseVNlYXJjaCA9ICgpID0+IHsNCiAgICAgICAgICAgIHN0YXRlLmFjdGl2ZUZpbHRlcnMgPSBbXTsNCiAgICAgICAgICAgIGRvbS5zZWFyY2hSdWxlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLXJ1bGUnKS5mb3JFYWNoKHJ1bGVFbCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY29sdW1uID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLWNvbHVtbicpLnZhbHVlOw0KICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLW9wZXJhdG9yJykudmFsdWU7DQoNCiAgICAgICAgICAgICAgICBpZiAoY29sdW1uID09PSAnRkVDSEEnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcnVsZUVsLnF1ZXJ5U2VsZWN0b3IoJy5ydWxlLXZhbHVlLXN0YXJ0JykudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IHJ1bGVFbC5xdWVyeVNlbGVjdG9yKCcucnVsZS12YWx1ZS1lbmQnKS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICYmIGVuZCAmJiBzdGFydCA+IGVuZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkxhIGZlY2hhIGRlIGluaWNpbyBubyBwdWVkZSBzZXIgcG9zdGVyaW9yIGEgbGEgZmVjaGEgZGUgZmluLiIpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0IHx8IGVuZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlRmlsdGVycy5wdXNoKHsgY29sdW1uLCBvcGVyYXRvcjogJ2JldHdlZW4nLCB2YWx1ZTogeyBzdGFydDogc3RhcnQgfHwgJycsIGVuZDogZW5kIHx8ICcnIH0gfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJ1bGVFbC5xdWVyeVNlbGVjdG9yKCcucnVsZS12YWx1ZScpLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBpZihjb2x1bW4gJiYgdmFsdWUpIHN0YXRlLmFjdGl2ZUZpbHRlcnMucHVzaCh7IGNvbHVtbiwgb3BlcmF0b3IsIHZhbHVlIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgc3RhdGUuaXNJbml0aWFsTG9hZCA9IHRydWU7IC8vIEZvcnphciByZWPDoWxjdWxvIGRlIHDDoWdpbmEgYSBsYSDDumx0aW1hDQogICAgICAgICAgICBjbG9zZU1vZGFsKGRvbS5zZWFyY2hNb2RhbCk7IHJlbmRlcigpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGFwcGx5RmlsdGVycyA9IChkYXRhKSA9PiB7DQogICAgICAgICAgICBsZXQgZGF0YVdpdGhJbmRleCA9IGRhdGEubWFwKChyb3csIG9yaWdpbmFsSW5kZXgpID0+ICh7Li4ucm93LCBvcmlnaW5hbEluZGV4fSkpOw0KICAgICAgICAgICAgaWYgKHN0YXRlLmFjdGl2ZUZpbHRlcnMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGRhdGFXaXRoSW5kZXggPSBkYXRhV2l0aEluZGV4LmZpbHRlcihyb3cgPT4gc3RhdGUuYWN0aXZlRmlsdGVycy5ldmVyeShmaWx0ZXIgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBTdHJpbmcocm93W2ZpbHRlci5jb2x1bW5dIHx8ICcnKS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJWYWx1ZSA9IFN0cmluZyhmaWx0ZXIudmFsdWUpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxOdW0gPSBwYXJzZUZsb2F0KGNlbGxWYWx1ZS5yZXBsYWNlKCcsJywgJy4nKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlck51bSA9IHBhcnNlRmxvYXQoZmlsdGVyVmFsdWUucmVwbGFjZSgnLCcsICcuJykpOw0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZpbHRlci5vcGVyYXRvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGFpbnMnOiByZXR1cm4gY2VsbFZhbHVlLmluY2x1ZGVzKGZpbHRlclZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vdF9jb250YWlucyc6IHJldHVybiAhY2VsbFZhbHVlLmluY2x1ZGVzKGZpbHRlclZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VxdWFscyc6IHJldHVybiBjZWxsVmFsdWUgPT09IGZpbHRlclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm90X2VxdWFscyc6IHJldHVybiBjZWxsVmFsdWUgIT09IGZpbHRlclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RhcnRzX3dpdGgnOiByZXR1cm4gY2VsbFZhbHVlLnN0YXJ0c1dpdGgoZmlsdGVyVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kc193aXRoJzogcmV0dXJuIGNlbGxWYWx1ZS5lbmRzV2l0aChmaWx0ZXJWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdndCc6IHJldHVybiAhaXNOYU4oY2VsbE51bSkgJiYgIWlzTmFOKGZpbHRlck51bSkgJiYgY2VsbE51bSA+IGZpbHRlck51bTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2x0JzogcmV0dXJuICFpc05hTihjZWxsTnVtKSAmJiAhaXNOYU4oZmlsdGVyTnVtKSAmJiBjZWxsTnVtIDwgZmlsdGVyTnVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmV0d2Vlbic6IC8vIFBhcmEgZmVjaGFzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSBmaWx0ZXIudmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHJvdy5GRUNIQTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGUpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FmdGVyU3RhcnQgPSBzdGFydCA/IGRhdGUgPj0gc3RhcnQgOiB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQmVmb3JlRW5kID0gZW5kID8gZGF0ZSA8PSBlbmQgOiB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0FmdGVyU3RhcnQgJiYgaXNCZWZvcmVFbmQ7DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBkYXRhV2l0aEluZGV4LnNvcnQoKGEsIGIpID0+IGEuRkVDSEEubG9jYWxlQ29tcGFyZShiLkZFQ0hBKSB8fCBhLk5vbWJyZS5sb2NhbGVDb21wYXJlKGIuTm9tYnJlLCAnZXMnLCB7IHNlbnNpdGl2aXR5OiAnYmFzZScgfSkpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcGVyc29uYVNlYXJjaFRlcm0gPSBkb20uc2VhcmNoUGVyc29uYUlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFBlcnNvbmFzID0gc3RhdGUudGFibGVzWydQZXJzb25hcyddLmRhdGEubWFwKChwLCBpbmRleCkgPT4gKHsgLi4ucCwgb3JpZ2luYWxJbmRleDogaW5kZXggfSkpDQogICAgICAgICAgICAgICAgLmZpbHRlcihwID0+IA0KICAgICAgICAgICAgICAgICAgICBwLk5vbWJyZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBlcnNvbmFTZWFyY2hUZXJtKSB8fCANCiAgICAgICAgICAgICAgICAgICAgcC5JRC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBlcnNvbmFTZWFyY2hUZXJtKSB8fA0KICAgICAgICAgICAgICAgICAgICAocC5QdWVzdG8gJiYgcC5QdWVzdG8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwZXJzb25hU2VhcmNoVGVybSkpIHx8DQogICAgICAgICAgICAgICAgICAgIChwLkVtcHJlc2EgJiYgcC5FbXByZXNhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGVyc29uYVNlYXJjaFRlcm0pKQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5wZXJzb25hc0xpc3RDb250YWluZXIuaW5uZXJIVE1MID0gZmlsdGVyZWRQZXJzb25hcy5sZW5ndGggPiAwID8gZmlsdGVyZWRQZXJzb25hcy5tYXAocCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaWRDZWxsQ29udGVudCA9IHAubm9Nb3N0cmFySWQgPyAnJyA6IGVzY2FwZUh0bWwocC5JRCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xMiBnYXAtMiBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMiBib3JkZXItYiB0ZXh0LXNtIGhvdmVyOmJnLWdyYXktMTAwIj4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtbW9ubyB0ZXh0LXhzIGNvbC1zcGFuLTIiPiR7aWRDZWxsQ29udGVudH08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmbGV4LWdyb3cgcHgtMiBjb2wtc3Bhbi0zIj4ke2VzY2FwZUh0bWwocC5Ob21icmUpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZsZXgtZ3JvdyBweC0yIGNvbC1zcGFuLTIgdGV4dC1ncmF5LTYwMCI+JHtlc2NhcGVIdG1sKHAuUHVlc3RvKX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmbGV4LWdyb3cgcHgtMiBjb2wtc3Bhbi0yIHRleHQtZ3JheS02MDAgZm9udC1zZW1pYm9sZCI+JHtlc2NhcGVIdG1sKHAuRW1wcmVzYSl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wtc3Bhbi0zIHRleHQtcmlnaHQgc3BhY2UteC0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImVkaXQtcGVyc29uYS1idG4gdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNzAwIGZvbnQtc2VtaWJvbGQiIGRhdGEtaW5kZXg9IiR7cC5vcmlnaW5hbEluZGV4fSI+RWRpdGFyPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZWxldGUtcGVyc29uYS1idG4gdGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCBmb250LWJvbGQiIGRhdGEtaW5kZXg9IiR7cC5vcmlnaW5hbEluZGV4fSI+JnRpbWVzOzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIGB9KS5qb2luKCcnKSA6ICc8cCBjbGFzcz0idGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIHAtNCI+Tm8gaGF5IGNvaW5jaWRlbmNpYXMuPC9wPic7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxldGUtcGVyc29uYS1idG4nKS5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZS50YXJnZXQuZGF0YXNldC5pbmRleDsNCiAgICAgICAgICAgICAgICBpZiAoY29uZmlybShgwr9TZWd1cm8gcXVlIHF1aWVyZXMgZWxpbWluYXIgYSAke3N0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhW2luZGV4XS5Ob21icmV9P2ApKSB7DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOyBidWlsZFBlcnNvbk1hcHMoKTsgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkpOw0KDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC1wZXJzb25hLWJ0bicpLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5kYXRhc2V0LmluZGV4Ow0KICAgICAgICAgICAgICAgIHBvcHVsYXRlUGVyc29uRm9ybUZvckVkaXQoaW5kZXgpOw0KICAgICAgICAgICAgfSkpOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IG9wZW5Nb2RpZnlNYXN0ZXJzTW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBkb20uc2VhcmNoUGVyc29uYUlucHV0LnZhbHVlID0gJyc7DQogICAgICAgICAgICByZW5kZXJNb2RpZnlNYXN0ZXJzTW9kYWwoKTsNCiAgICAgICAgICAgIGRvbS5tb2RpZnlNYXN0ZXJzTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBoYW5kbGVBZGROZXdSZWNvcmRzID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcmVjb3JkVHlwZSA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjZm9ybS1yZWNvcmQtdHlwZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgY29tbW9uRGF0YSA9IHt9Ow0KICAgICAgICAgICAgZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbF0nKS5mb3JFYWNoKGlucHV0ID0+IHsNCiAgICAgICAgICAgICAgICBjb21tb25EYXRhW2lucHV0LmRhdGFzZXQuY29sXSA9IGlucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZFBlb3BsZUlkcyA9IEFycmF5LmZyb20oZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wZXJzb24tY2hlY2tib3g6Y2hlY2tlZCcpKS5tYXAoY2IgPT4gY2IudmFsdWUpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkUGVvcGxlSWRzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJQb3IgZmF2b3IsIHNlbGVjY2lvbmUgYWwgbWVub3MgdW5hIHBlcnNvbmEuIik7IHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlU3RyID0gZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLXJvdy1GRUNIQScpLnZhbHVlOw0KICAgICAgICAgICAgbGV0IGVuZERhdGVTdHIgPSBzdGFydERhdGVTdHI7DQogICAgICAgICAgICBpZiAocmVjb3JkVHlwZSA9PT0gJ2Fic2VudGlzbW8nKSB7DQogICAgICAgICAgICAgICAgIGVuZERhdGVTdHIgPSBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvcignI2Zvcm0tcm93LUZFQ0hBLWZpbicpPy52YWx1ZSB8fCBzdGFydERhdGVTdHI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghc3RhcnREYXRlU3RyIHx8ICFlbmREYXRlU3RyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBvciBmYXZvciwgc2VsZWNjaW9uZSB1bmEgZmVjaGEgZGUgaW5pY2lvICh5IGZpbiBzaSBlcyB1biByYW5nbykuIik7IHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlU3RyICsgJ1QwMDowMDowMCcpOw0KICAgICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKGVuZERhdGVTdHIgKyAnVDAwOjAwOjAwJyk7DQogICAgICAgICAgICBpZiAoc3RhcnREYXRlID4gZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJMYSAnRmVjaGEgRmluJyBubyBwdWVkZSBzZXIgYW50ZXJpb3IgYSBsYSAnRmVjaGEgSW5pY2lvJy4iKTsgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBsZXQgcmVjb3Jkc0FkZGVkID0gMDsNCiAgICAgICAgICAgIGZvciAoY29uc3QgcGVyc29uSWQgb2Ygc2VsZWN0ZWRQZW9wbGVJZHMpIHsNCiAgICAgICAgICAgICAgICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUpOw0KICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBlbmREYXRlKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IHsgLi4uY29tbW9uRGF0YSB9Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3dEYXRlID0gZm9ybWF0RGF0ZVRvWU1EKGN1cnJlbnREYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgbmV3Um93WydGRUNIQSddID0gbmV3Um93RGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgbmV3Um93WydJRCddID0gcGVyc29uSWQ7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25JbmZvID0gc3RhdGUuaWRUb1BlcnNvbk1hcFtwZXJzb25JZF07DQogICAgICAgICAgICAgICAgICAgIG5ld1Jvdy5Ob21icmUgPSBwZXJzb25JbmZvID8gcGVyc29uSW5mby5ub21icmUgOiAnRGVzY29ub2NpZG8nOw0KICAgICAgICAgICAgICAgICAgICBuZXdSb3cuUHVlc3RvID0gcGVyc29uSW5mbyA/IHBlcnNvbkluZm8ucHVlc3RvIDogJ0Rlc2Nvbm9jaWRvJzsNCiAgICAgICAgICAgICAgICAgICAgbmV3Um93LkVtcHJlc2EgPSBwZXJzb25JbmZvID8gcGVyc29uSW5mby5lbXByZXNhIDogJ0Rlc2Nvbm9jaWRvJzsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcFtwZXJzb25JZF0gfHwgbmV3Um93RGF0ZSA8IHN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcFtwZXJzb25JZF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcFtwZXJzb25JZF0gPSBuZXdSb3dEYXRlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY29yZFR5cGUgPT09ICdqb3JuYWRhJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdSb3cuQ29uY2VwdG8gfHwgIW5ld1Jvdy5GYW1pbGlhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlBhcmEgJ0pvcm5hZGEgTGFib3JhbCcsIGRlYmUgc2VsZWNjaW9uYXIgQ29uY2VwdG8geSBGYW1pbGlhLiIpOyByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3cuQWJzZW50aXNtbyA9ICctJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhvdXJzVG9BZGQgPSBwYXJzZUZsb2F0KFN0cmluZyhuZXdSb3cuSE4gfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzQWxyZWFkeVdvcmtlZFRvZGF5ID0gc3RhdGUudGFibGVzLkRhdG9zLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHJvdyA9PiByb3cuSUQgPT09IHBlcnNvbklkICYmIHJvdy5GRUNIQSA9PT0gbmV3Um93LkZFQ0hBICYmIHJvdy5BYnNlbnRpc21vID09PSAnLScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIHJvdykgPT4gdG90YWwgKyBwYXJzZUZsb2F0KFN0cmluZyhyb3cuSE4gfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSkgKyBwYXJzZUZsb2F0KFN0cmluZyhyb3cuSEUgfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSksIDApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdOb3JtYWxIb3VycyA9IE1hdGgubWF4KDAsIDggLSB0b3RhbEhvdXJzQWxyZWFkeVdvcmtlZFRvZGF5KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvdy5ITiA9IE1hdGgubWluKGhvdXJzVG9BZGQsIHJlbWFpbmluZ05vcm1hbEhvdXJzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvdy5IRSA9IGhvdXJzVG9BZGQgLSBuZXdSb3cuSE47DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ld1Jvdy5ITiA+IDAgfHwgbmV3Um93LkhFID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhLnB1c2gobmV3Um93KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzQWRkZWQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYWJzZW50aXNtbw0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um93LkNvbmNlcHRvID0gbmV3Um93LkFic2VudGlzbW87DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3cuRmFtaWxpYSA9IGAoZGVsICR7Zm9ybWF0RGF0ZVRvRE1ZKHN0YXJ0RGF0ZVN0cil9IGFsICR7Zm9ybWF0RGF0ZVRvRE1ZKGVuZERhdGVTdHIpfSlgOw0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um93LkhOID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvdy5IRSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3cuVHVybm8gPSAnLSc7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3dbJ0NhbWJpbyBkZSBqb3JuYWRhJ10gPSAnLSc7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSb3cuSW5jaWRlbmNpYSA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFibGVzLkRhdG9zLmRhdGEucHVzaChuZXdSb3cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc0FkZGVkKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY3VycmVudERhdGUuc2V0RGF0ZShjdXJyZW50RGF0ZS5nZXREYXRlKCkgKyAxKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChyZWNvcmRzQWRkZWQgPiAwKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoYE9wZXJhY2nDs24gY29tcGxldGFkYTogJHtyZWNvcmRzQWRkZWR9IHJlZ2lzdHJvcyBhw7FhZGlkb3MuYCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBzZSBhw7FhZGnDsyBuaW5nw7puIHJlZ2lzdHJvIG51ZXZvIChvIGxhcyBob3JhcyBpbnRyb2R1Y2lkYXMgZXJhbiBjZXJvKS4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc3RhdGUuZGF0YUxvYWRlZCA9IHRydWU7DQogICAgICAgICAgICBtYXJrRGlydHkoKTsNCiAgICAgICAgICAgIGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucGVyc29uLWNoZWNrYm94OmNoZWNrZWQnKS5mb3JFYWNoKGNiID0+IGNiLmNoZWNrZWQgPSBmYWxzZSk7DQogICAgICAgICAgICBzdGF0ZS5pc0luaXRpYWxMb2FkID0gdHJ1ZTsgLy8gSXIgYSBsYSDDumx0aW1hIHDDoWdpbmEgcGFyYSB2ZXIgbG9zIG51ZXZvcyByZWdpc3Ryb3MNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgaGFuZGxlVXBkYXRlRGF5ID0gKGlkLCBmZWNoYSkgPT4gew0KICAgICAgICAgICAgY29uc3QgZGF5UmVjb3JkcyA9IHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhLmZpbHRlcihyID0+IHIuSUQgPT09IGlkICYmIHIuRkVDSEEgPT09IGZlY2hhKTsNCiAgICAgICAgICAgIGlmIChkYXlSZWNvcmRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgaXNBYnNlbnREYXkgPSBkYXlSZWNvcmRzWzBdLkFic2VudGlzbW8gJiYgZGF5UmVjb3Jkc1swXS5BYnNlbnRpc21vICE9PSAnLSc7DQoNCiAgICAgICAgICAgIGlmKGlzQWJzZW50RGF5KSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIHNlIHB1ZWRlIGVkaXRhciB1biBkw61hIGRlIGFic2VudGlzbW8uIFBvciBmYXZvciwgZWxpbcOtbmVsbyB5IGNyw6llbG8gZGUgbnVldm8gc2kgZXMgbmVjZXNhcmlvLiIpOw0KICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoZG9tLmVkaXRSb3dNb2RhbCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBjb21tb25EYXRhID0ge307DQogICAgICAgICAgICBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmRheS1jb21tb24taW5wdXQnKS5mb3JFYWNoKGlucHV0ID0+IHsNCiAgICAgICAgICAgICAgICBjb21tb25EYXRhW2lucHV0LmRhdGFzZXQuY29sXSA9IGlucHV0LnZhbHVlOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gW107DQogICAgICAgICAgICBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmRheS1lbnRyeS1yb3cnKS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG8gPSByb3cuZGF0YXNldC5jb25jZXB0bzsNCiAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhID0gcm93LmRhdGFzZXQuZmFtaWxpYTsNCiAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IHBhcnNlRmxvYXQocm93LnF1ZXJ5U2VsZWN0b3IoJy5kYXktZW50cnktaG91cnMnKS52YWx1ZSkgfHwgMDsNCiAgICAgICAgICAgICAgICBpZiAoaG91cnMgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRhc2tzLnB1c2goeyBjb25jZXB0bywgZmFtaWxpYSwgaG91cnMgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhID0gc3RhdGUudGFibGVzLkRhdG9zLmRhdGEuZmlsdGVyKHJvdyA9PiAhKHJvdy5JRCA9PT0gaWQgJiYgcm93LkZFQ0hBID09PSBmZWNoYSkpOw0KDQogICAgICAgICAgICBsZXQgY3VtdWxhdGl2ZUhvdXJzVG9kYXkgPSAwOw0KICAgICAgICAgICAgY29uc3QgcGVyc29uSW5mbyA9IHN0YXRlLmlkVG9QZXJzb25NYXBbaWRdIHx8IHsgbm9tYnJlOiAnRGVzY29ub2NpZG8nLCBwdWVzdG86ICdEZXNjb25vY2lkbycsIGVtcHJlc2E6ICdEZXNjb25vY2lkbycgfTsNCg0KICAgICAgICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBob3Vyc1RvQWRkID0gdGFzay5ob3VyczsNCiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdOb3JtYWwgPSBNYXRoLm1heCgwLCA4IC0gY3VtdWxhdGl2ZUhvdXJzVG9kYXkpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGhuID0gTWF0aC5taW4oaG91cnNUb0FkZCwgcmVtYWluaW5nTm9ybWFsKTsNCiAgICAgICAgICAgICAgICBjb25zdCBoZSA9IGhvdXJzVG9BZGQgLSBobjsNCiAgICAgICAgICAgICAgICBjdW11bGF0aXZlSG91cnNUb2RheSArPSBob3Vyc1RvQWRkOw0KDQogICAgICAgICAgICAgICAgaWYgKGhuID4gMCB8fCBoZSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JlY29yZCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEZFQ0hBOiBmZWNoYSwNCiAgICAgICAgICAgICAgICAgICAgICAgIElEOiBpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIE5vbWJyZTogcGVyc29uSW5mby5ub21icmUsDQogICAgICAgICAgICAgICAgICAgICAgICBQdWVzdG86IHBlcnNvbkluZm8ucHVlc3RvLA0KICAgICAgICAgICAgICAgICAgICAgICAgRW1wcmVzYTogcGVyc29uSW5mby5lbXByZXNhLA0KICAgICAgICAgICAgICAgICAgICAgICAgQ29uY2VwdG86IHRhc2suY29uY2VwdG8sDQogICAgICAgICAgICAgICAgICAgICAgICBGYW1pbGlhOiB0YXNrLmZhbWlsaWEsDQogICAgICAgICAgICAgICAgICAgICAgICBITjogcGFyc2VGbG9hdChobi50b0ZpeGVkKDIpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIEhFOiBwYXJzZUZsb2F0KGhlLnRvRml4ZWQoMikpLA0KICAgICAgICAgICAgICAgICAgICAgICAgVHVybm86IGNvbW1vbkRhdGEuVHVybm8sDQogICAgICAgICAgICAgICAgICAgICAgICAnQ2FtYmlvIGRlIGpvcm5hZGEnOiBjb21tb25EYXRhWydDYW1iaW8gZGUgam9ybmFkYSddLA0KICAgICAgICAgICAgICAgICAgICAgICAgQWJzZW50aXNtbzogJy0nLA0KICAgICAgICAgICAgICAgICAgICAgICAgSW5jaWRlbmNpYTogY29tbW9uRGF0YS5JbmNpZGVuY2lhDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhLnB1c2gobmV3UmVjb3JkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhLmZpbHRlcihyb3cgPT4gcm93LklEID09PSBpZCk7DQogICAgICAgICAgICBpZihyZW1haW5pbmdSZWNvcmRzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGUucGVyc29uRmlyc3REYXRlTWFwW2lkXTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUucGVyc29uRmlyc3REYXRlTWFwW2lkXSA9PT0gZmVjaGEgJiYgIXJlbWFpbmluZ1JlY29yZHMuc29tZShyID0+IHIuRkVDSEEgPT09IGZlY2hhKSkgew0KICAgICAgICAgICAgICAgICBjYWxjdWxhdGVGaXJzdFJlY29yZERhdGVzKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIG1hcmtEaXJ0eSgpOw0KICAgICAgICAgICAgY2xvc2VNb2RhbChkb20uZWRpdFJvd01vZGFsKTsNCiAgICAgICAgICAgIHN0YXRlLmlzSW5pdGlhbExvYWQgPSB0cnVlOyAvLyBSZWNhbGN1bGFyIHDDoWdpbmENCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgYWxlcnQoJ0TDrWEgYWN0dWFsaXphZG8gY29ycmVjdGFtZW50ZS4nKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZW5kZXJFZGl0RGF5TW9kYWwgPSAoaWQsIGZlY2hhKSA9PiB7DQogICAgICAgICAgICBjb25zdCBwZXJzb24gPSBzdGF0ZS5pZFRvUGVyc29uTWFwW2lkXSB8fCB7IG5vbWJyZTogJ0Rlc2Nvbm9jaWRvJyB9Ow0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcm93LW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSBgRWRpdGFyIETDrWEgcGFyYSAke3BlcnNvbi5ub21icmV9ICgke2Zvcm1hdERhdGVUb0RNWShmZWNoYSl9KWA7DQoNCiAgICAgICAgICAgIGNvbnN0IGRheVJlY29yZHMgPSBzdGF0ZS50YWJsZXMuRGF0b3MuZGF0YS5maWx0ZXIociA9PiByLklEID09PSBpZCAmJiByLkZFQ0hBID09PSBmZWNoYSk7DQoNCiAgICAgICAgICAgIGlmIChkYXlSZWNvcmRzLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiTm8gc2UgZW5jb250cmFyb24gcmVnaXN0cm9zIHBhcmEgZWRpdGFyLiIpOyByZXR1cm47IH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgZmlyc3RSZWNvcmQgPSBkYXlSZWNvcmRzWzBdOw0KICAgICAgICAgICAgY29uc3QgaXNBYnNlbnREYXkgPSBmaXJzdFJlY29yZC5BYnNlbnRpc21vICYmIGZpcnN0UmVjb3JkLkFic2VudGlzbW8gIT09ICctJzsNCg0KICAgICAgICAgICAgbGV0IGZvcm1IdG1sID0gJyc7DQoNCiAgICAgICAgICAgIGlmIChpc0Fic2VudERheSkgew0KICAgICAgICAgICAgICAgIGZvcm1IdG1sID0gYDxkaXYgY2xhc3M9InAtNCBiZy15ZWxsb3ctMTAwIHJvdW5kZWQtbGcgdGV4dC1jZW50ZXIiPg0KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LWxnIj4ke2ZpcnN0UmVjb3JkLkFic2VudGlzbW99PC9wPg0KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1ncmF5LTYwMCI+JHtmaXJzdFJlY29yZC5GYW1pbGlhIHx8ICcnfTwvcD4NCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTQgdGV4dC1zbSI+UGFyYSBtb2RpZmljYXIgdW4gcGVyaW9kbyBkZSBhYnNlbnRpc21vLCBwb3IgZmF2b3IsIGVsaW1pbmUgZXN0ZSBkw61hIHkgY3JlZSBlbCBudWV2byBpbnRlcnZhbG8uPC9wPg0KICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgZG9tLnNhdmVSb3dCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZG9tLnNhdmVSb3dCdG4uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snOw0KICAgICAgICAgICAgICAgIGxldCBjb21tb25GaWVsZHNIdG1sID0gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYm9yZGVyIHJvdW5kZWQtbGcgYmctZ3JheS01MCBtYi00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWItMyI+RGF0b3MgZGVsIETDrWE8L2g0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPlR1cm5vPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBkYXRhLWNvbD0iVHVybm8iIGNsYXNzPSJkYXktY29tbW9uLWlucHV0IG10LTEgYmxvY2sgdy1mdWxsIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPUENJT05FU1snVHVybm8nXS5tYXAodiA9PiBgPG9wdGlvbiB2YWx1ZT0iJHt2fSIgJHtmaXJzdFJlY29yZFsnVHVybm8nXSA9PT0gdiA/ICdzZWxlY3RlZCcgOiAnJ30+JHt2fTwvb3B0aW9uPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+Q2FtYmlvIGRlIGpvcm5hZGE8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGRhdGEtY29sPSJDYW1iaW8gZGUgam9ybmFkYSIgY2xhc3M9ImRheS1jb21tb24taW5wdXQgbXQtMSBibG9jayB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke09QQ0lPTkVTWydDYW1iaW8gZGUgam9ybmFkYSddLm1hcCh2ID0+IGA8b3B0aW9uIHZhbHVlPSIke3Z9IiAke2ZpcnN0UmVjb3JkWydDYW1iaW8gZGUgam9ybmFkYSddID09PSB2ID8gJ3NlbGVjdGVkJyA6ICcnfT4ke3Z9PC9vcHRpb24+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1kOmNvbC1zcGFuLTIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+SW5jaWRlbmNpYTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWNvbD0iSW5jaWRlbmNpYSIgY2xhc3M9ImRheS1jb21tb24taW5wdXQgbXQtMSBibG9jayB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiIgdmFsdWU9IiR7ZXNjYXBlSHRtbChmaXJzdFJlY29yZFsnSW5jaWRlbmNpYSddIHx8ICcnKX0iIHBsYWNlaG9sZGVyPSJEZXNjcmliaXIgaW5jaWRlbmNpYS4uLiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIGxldCBlbnRyaWVzSHRtbCA9IGRheVJlY29yZHMubWFwKHJlYyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSBwYXJzZUZsb2F0KHJlYy5ITiB8fCAwKSArIHBhcnNlRmxvYXQocmVjLkhFIHx8IDApOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC0zIGJvcmRlciByb3VuZGVkLWxnIGdyaWQgZ3JpZC1jb2xzLTEyIGdhcC0yIGl0ZW1zLWNlbnRlciBkYXktZW50cnktcm93IiBkYXRhLWNvbmNlcHRvPSIke3JlYy5Db25jZXB0b30iIGRhdGEtZmFtaWxpYT0iJHtyZWMuRmFtaWxpYX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zcGFuLTQgdGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS03MDAiPiR7cmVjLkNvbmNlcHRvfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zcGFuLTUgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIj4ke3JlYy5GYW1pbGlhfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zcGFuLTIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iJHt0b3RhbEhvdXJzLnRvRml4ZWQoMil9IiBzdGVwPSIwLjUiIG1pbj0iMCIgY2xhc3M9InctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcC0xIHRleHQtc20gZGF5LWVudHJ5LWhvdXJzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wtc3Bhbi0xIHRleHQtcmlnaHQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InRleHQtcmVkLTUwMCBob3Zlcjp0ZXh0LXJlZC03MDAgZm9udC1ib2xkIHRleHQteGwgcmVtb3ZlLWRheS1lbnRyeS1idG4iPiZ0aW1lczs8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG9PcHRpb25zID0gT2JqZWN0LmtleXMoTU9OVEFKRVMpLm1hcChjID0+IGA8b3B0aW9uIHZhbHVlPSIke2N9Ij4ke2N9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgICAgICAgICAgICBmb3JtSHRtbCA9IGANCiAgICAgICAgICAgICAgICAgICAgJHtjb21tb25GaWVsZHNIdG1sfQ0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJlZGl0LWRheS1lbnRyaWVzIiBjbGFzcz0ic3BhY2UteS0yIG1iLTQiPiR7ZW50cmllc0h0bWx9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItdCBib3JkZXItZGFzaGVkIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWItMyI+QcOxYWRpciBOdWV2YSBUYXJlYTwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+Q29uY2VwdG88L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJhZGQtZGF5LWVudHJ5LWNvbmNlcHRvIiBjbGFzcz0ibXQtMSBibG9jayB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjY2lvbmFyIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NvbmNlcHRvT3B0aW9uc30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkZhbWlsaWE8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJhZGQtZGF5LWVudHJ5LWZhbWlsaWEiIGNsYXNzPSJtdC0xIGJsb2NrIHctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBzaGFkb3ctc20gcC0yIiBkaXNhYmxlZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWNjaW9uYXIgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPkhvcmFzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImFkZC1kYXktZW50cnktaG91cnMiIHN0ZXA9IjAuNSIgbWluPSIwIiBjbGFzcz0ibXQtMSBibG9jayB3LWZ1bGwgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LXNtIHAtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtcmlnaHQgbXQtMyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJhZGQtZGF5LWVudHJ5LWJ0biIgY2xhc3M9ImJnLWdyZWVuLTUwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMSBweC0zIHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JlZW4tNjAwIHRleHQtc20iPisgQcOxYWRpcjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5lZGl0Um93Rm9ybS5pbm5lckhUTUwgPSBmb3JtSHRtbDsNCg0KICAgICAgICAgICAgaWYgKCFpc0Fic2VudERheSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbmNlcHRvU2VsZWN0ID0gZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNhZGQtZGF5LWVudHJ5LWNvbmNlcHRvJyk7DQogICAgICAgICAgICAgICAgY29uY2VwdG9TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFTZWxlY3QgPSBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvcignI2FkZC1kYXktZW50cnktZmFtaWxpYScpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvbmNlcHRvID0gZS50YXJnZXQudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGZhbWlsaWFTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWNjaW9uYXIgLS08L29wdGlvbj4nOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb25jZXB0byAmJiBNT05UQUpFU1tzZWxlY3RlZENvbmNlcHRvXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWxpYVNlbGVjdC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgTU9OVEFKRVNbc2VsZWN0ZWRDb25jZXB0b10uZm9yRWFjaChmID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhU2VsZWN0LmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT0iJHtmfSI+JHtmfTwvb3B0aW9uPmA7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFTZWxlY3QuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBkb20uZWRpdFJvd0Zvcm0ucXVlcnlTZWxlY3RvcignI2FkZC1kYXktZW50cnktYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25jZXB0byA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjYWRkLWRheS1lbnRyeS1jb25jZXB0bycpLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYSA9IGRvbS5lZGl0Um93Rm9ybS5xdWVyeVNlbGVjdG9yKCcjYWRkLWRheS1lbnRyeS1mYW1pbGlhJykudmFsdWU7DQogICAgICAgICAgICAgICAgICAgICBjb25zdCBob3Vyc0lucHV0ID0gZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNhZGQtZGF5LWVudHJ5LWhvdXJzJyk7DQogICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IHBhcnNlRmxvYXQoaG91cnNJbnB1dC52YWx1ZSk7DQoNCiAgICAgICAgICAgICAgICAgICAgIGlmIChjb25jZXB0byAmJiBmYW1pbGlhICYmIGhvdXJzID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RW50cnlIdG1sID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtMyBib3JkZXIgcm91bmRlZC1sZyBncmlkIGdyaWQtY29scy0xMiBnYXAtMiBpdGVtcy1jZW50ZXIgZGF5LWVudHJ5LXJvdyBpcy1uZXciIGRhdGEtY29uY2VwdG89IiR7Y29uY2VwdG99IiBkYXRhLWZhbWlsaWE9IiR7ZmFtaWxpYX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wtc3Bhbi00IHRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNzAwIj4ke2NvbmNlcHRvfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wtc3Bhbi01IHRleHQtc20gdGV4dC1ncmF5LTYwMCI+JHtmYW1pbGlhfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wtc3Bhbi0yIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIke2hvdXJzLnRvRml4ZWQoMil9IiBzdGVwPSIwLjUiIG1pbj0iMCIgY2xhc3M9InctZnVsbCBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gcC0xIHRleHQtc20gZGF5LWVudHJ5LWhvdXJzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zcGFuLTEgdGV4dC1yaWdodCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InRleHQtcmVkLTUwMCBob3Zlcjp0ZXh0LXJlZC03MDAgZm9udC1ib2xkIHRleHQteGwgcmVtb3ZlLWRheS1lbnRyeS1idG4iPiZ0aW1lczs8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9tLmVkaXRSb3dGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNlZGl0LWRheS1lbnRyaWVzJykuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBuZXdFbnRyeUh0bWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uY2VwdG9TZWxlY3QudmFsdWUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzSW5wdXQudmFsdWUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmNlcHRvU2VsZWN0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnKSk7DQogICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1BvciBmYXZvciwgY29tcGxldGUgdG9kb3MgbG9zIGNhbXBvcyBwYXJhIGHDsWFkaXIgdW5hIG51ZXZhIHRhcmVhLicpOw0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgZG9tLmVkaXRSb3dGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3JlbW92ZS1kYXktZW50cnktYnRuJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5kYXktZW50cnktcm93JykucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9tLnNhdmVSb3dCdG4uZGF0YXNldC5tb2RlID0gJ3VwZGF0ZURheSc7DQogICAgICAgICAgICBkb20uc2F2ZVJvd0J0bi5kYXRhc2V0LmlkID0gaWQ7DQogICAgICAgICAgICBkb20uc2F2ZVJvd0J0bi5kYXRhc2V0LmZlY2hhID0gZmVjaGE7DQogICAgICAgICAgICBkb20uZWRpdFJvd01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgICAgIH07DQoNCg0KICAgICAgICBjb25zdCBhZGRBY3RpdmVWaWV3RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0LWJ5LXBlcnNvbi1idG4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgZG9tLmV4cG9ydEJ5UGVyc29uTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmRhdG9yeS1yZWdzLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5NYW5kYXRvcnlSZWdzTW9kYWwpOyAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5ncy1hcmNoaXZlLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5XYXJuaW5nc0FyY2hpdmVNb2RhbCk7IC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1idG4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW5kZXJTZWFyY2hNb2RhbCk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXItZmlsdGVyLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsZWFyRmlsdGVyKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnQtdGFibGUteGxzLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGhhbmRsZUV4cG9ydFRhYmxlKCd4bHMnKSk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXJvdy1idG4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZW5kZXJFZGl0Um93TW9kYWwoKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC1ncm91cGVkLXJvdy1idG4nKS5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsNCiAgICAgICAgICAgICAgICByZW5kZXJFZGl0RGF5TW9kYWwoZS50YXJnZXQuZGF0YXNldC5pZCwgZS50YXJnZXQuZGF0YXNldC5mZWNoYSk7DQogICAgICAgICAgICAgfSkpOw0KICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxldGUtZ3JvdXBlZC1yb3ctYnRuJykuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC5kYXRhc2V0LmlkOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhID0gZS50YXJnZXQuZGF0YXNldC5mZWNoYTsNCiAgICAgICAgICAgICAgICBpZiAoY29uZmlybShgwr9FbGltaW5hciB0b2RvcyBsb3MgcmVnaXN0cm9zIHBhcmEgbGEgSUQgJHtpZH0gZW4gbGEgZmVjaGEgJHtmb3JtYXREYXRlVG9ETVkoZmVjaGEpfT9gKSkgew0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS50YWJsZXMuRGF0b3MuZGF0YSA9IHN0YXRlLnRhYmxlcy5EYXRvcy5kYXRhLmZpbHRlcihyb3cgPT4gIShyb3cuSUQgPT09IGlkICYmIHJvdy5GRUNIQSA9PT0gZmVjaGEpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnBlcnNvbkZpcnN0RGF0ZU1hcFtpZF0gPT09IGZlY2hhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVGaXJzdFJlY29yZERhdGVzKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzSW5pdGlhbExvYWQgPSB0cnVlOyAvLyBSZWNhbGN1bGFyIHDDoWdpbmENCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIH0pKTsNCiAgICAgICAgICAgICANCiAgICAgICAgICAgIC8vIC0tLSBJTklDSU86IExpc3RlbmVycyBkZSBQYWdpbmFjacOzbiAtLS0NCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2LXBhZ2UtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudFBhZ2UtLTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNJbml0aWFsTG9hZCA9IGZhbHNlOyAvLyBNYXJjYXIgcXVlIGxhIG5hdmVnYWNpw7NuIGZ1ZSBtYW51YWwNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV4dC1wYWdlLWJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPCBzdGF0ZS50b3RhbFBhZ2VzKSB7DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRQYWdlKys7DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzSW5pdGlhbExvYWQgPSBmYWxzZTsgLy8gTWFyY2FyIHF1ZSBsYSBuYXZlZ2FjacOzbiBmdWUgbWFudWFsDQogICAgICAgICAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8gLS0tIEZJTjogTGlzdGVuZXJzIGRlIFBhZ2luYWNpw7NuIC0tLQ0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgaGFuZGxlU2F2ZUNoYW5nZXMgPSAoKSA9PiB7DQogICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSBwcm9tcHQoIlBvciBmYXZvciwgaW50cm9kdWNlIHVuIG5vbWJyZSBwYXJhIGVsIGFyY2hpdm8gZGUgZ3VhcmRhZG86IiwgImRhdG9zX2NvbnRyb2xfbGFib3JhbF91dGUuanNvbiIpOw0KICAgICAgICAgICAgaWYgKGZpbGVOYW1lID09PSBudWxsKSByZXR1cm47DQogICAgICAgICAgICBpZiAoIWZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5qc29uJykpIGZpbGVOYW1lICs9ICcuanNvbic7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGV4cG9ydFN0YXRlID0geyANCiAgICAgICAgICAgICAgICB0YWJsZXM6IHN0YXRlLnRhYmxlcywNCiAgICAgICAgICAgICAgICAvLyBtYW5kYXRvcnlSZWdpc3RyYXRpb25zOiBzdGF0ZS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgICAgICAvLyB3YXJuaW5nc0FyY2hpdmU6IHN0YXRlLndhcm5pbmdzQXJjaGl2ZSwgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgLy8gZXhjbHVkZWREYXlzOiBzdGF0ZS5leGNsdWRlZERheXMsIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgICAgIHBlcnNvbkRhdGFTdW1tYXJ5OiBzdGF0ZS5wZXJzb25EYXRhU3VtbWFyeSwNCiAgICAgICAgICAgICAgICBoaXN0b3JpY2FsR2xvYmFsU3VtbWFyeTogc3RhdGUuaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnkNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBjb25zdCBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoZXhwb3J0U3RhdGUsIG51bGwsIDIpOw0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhU3RyXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7DQogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gdXJsOyBhLmRvd25sb2FkID0gZmlsZU5hbWU7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOyBhLmNsaWNrKCk7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7DQogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7DQogICAgICAgICAgICBzdGF0ZS5pc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICByZW5kZXIoKTsNCiAgICAgICAgICAgIGFsZXJ0KGBDYW1iaW9zIGd1YXJkYWRvcyBlbiAnJHtmaWxlTmFtZX0nLmApOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGRvd25sb2FkSnNvbkZpbGUgPSAoZGF0YU9iamVjdCwgZGVmYXVsdEZpbGVOYW1lKSA9PiB7DQogICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSBwcm9tcHQoYEludHJvZHVjZSB1biBub21icmUgcGFyYSBlbCBhcmNoaXZvOmAsIGRlZmF1bHRGaWxlTmFtZSk7DQogICAgICAgICAgICBpZiAoZmlsZU5hbWUgPT09IG51bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgaWYgKCFmaWxlTmFtZS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcuanNvbicpKSBmaWxlTmFtZSArPSAnLmpzb24nOw0KDQogICAgICAgICAgICBjb25zdCBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoZGF0YU9iamVjdCwgbnVsbCwgMik7DQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFTdHJdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgYS5ocmVmID0gdXJsOw0KICAgICAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgICAgIGEuY2xpY2soKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7DQogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7DQogICAgICAgICAgICByZXR1cm4gZmlsZU5hbWU7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBoYW5kbGVDcmVhdGVQYXJ0aXRpb24gPSAoKSA9PiB7DQogICAgICAgICAgICBpZiAoIXN0YXRlLmRhdGFMb2FkZWQpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gaGF5IGRhdG9zIGNhcmdhZG9zIHBhcmEgY3JlYXIgdW5hIHBhcnRpY2nDs24uIik7IHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgMSk7DQogICAgICAgICAgICBjb25zdCBkZWZhdWx0U3RhcnREYXRlID0gZm9ybWF0RGF0ZVRvWU1EKGZpcnN0RGF5T2ZNb250aCk7DQoNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZUlucHV0ID0gcHJvbXB0KCJJbnRyb2R1Y2UgbGEgZmVjaGEgZGUgY29ydGUgKGxvcyBkYXRvcyBERVNERSBlc3RlIGTDrWEgc2UgZ3VhcmRhcsOhbiBlbiBlbCBudWV2byBhcmNoaXZvKToiLCBkZWZhdWx0U3RhcnREYXRlKTsNCg0KICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZUlucHV0ID09PSBudWxsKSByZXR1cm47DQogICAgICAgICAgICBpZiAoIS9eXGR7NH0tXGR7Mn0tXGR7Mn0kLy50ZXN0KHN0YXJ0RGF0ZUlucHV0KSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJGb3JtYXRvIGRlIGZlY2hhIGludsOhbGlkby4gUG9yIGZhdm9yLCB1c2EgZWwgZm9ybWF0byBZWVlZLU1NLURELiIpOyByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZUlucHV0ICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycgfSk7DQogICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb24gPSBjb25maXJtKGBTZSBjcmVhcsOhbiBET1MgYXJjaGl2b3MgdXNhbmRvIGVsICR7Zm9ybWF0dGVkU3RhcnREYXRlfSBjb21vIGZlY2hhIGRlIGNvcnRlLlxuXG5gICsNCiAgICAgICAgICAgICAgICAiMS4gQVJDSElWTyBOVUVWTzogQ29udGVuZHLDoSBkYXRvcyBERVNERSBlbCAiICsgZm9ybWF0dGVkU3RhcnREYXRlICsgIiBlbiBhZGVsYW50ZSwgeSBoZXJlZGFyw6EgbG9zIHJlc8O6bWVuZXMgaGlzdMOzcmljb3MuXG4iICsNCiAgICAgICAgICAgICAgICAiMi4gQVJDSElWTyBBTlRJR1VPOiBDb250ZW5kcsOhIGRhdG9zIEFOVEVSSU9SRVMgYWwgIiArIGZvcm1hdHRlZFN0YXJ0RGF0ZSArICIuXG5cbsK/RGVzZWEgY29udGludWFyPyIpOw0KDQogICAgICAgICAgICBpZiAoIWNvbmZpcm1hdGlvbikgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCBvbGREYXRhID0gc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGEuZmlsdGVyKHJvdyA9PiByb3cuRkVDSEEgJiYgcm93LkZFQ0hBIDwgc3RhcnREYXRlSW5wdXQpOw0KICAgICAgICAgICAgY29uc3QgbmV3RGF0YSA9IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhLmZpbHRlcihyb3cgPT4gcm93LkZFQ0hBICYmIHJvdy5GRUNIQSA+PSBzdGFydERhdGVJbnB1dCk7DQoNCiAgICAgICAgICAgIGNvbnN0IGhpc3RvcmljYWxTdW1tYXJ5Rm9yUGVvcGxlID0gZ2VuZXJhdGVGdWxsUGVyc29uRGF0YVN1bW1hcnkob2xkRGF0YSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGhpc3RvcmljYWxHbG9iYWxTdW1tYXJ5ID0gew0KICAgICAgICAgICAgICAgICdUT0RBUyc6IGNhbGN1bGF0ZVJhbWlmaWVkU3VtbWFyeShvbGREYXRhLmZpbHRlcihyb3cgPT4gc3RhdGUuaWRUb1BlcnNvbk1hcFtyb3cuSURdKSksDQogICAgICAgICAgICAgICAgJ1VURSc6IGNhbGN1bGF0ZVJhbWlmaWVkU3VtbWFyeShvbGREYXRhLmZpbHRlcihyb3cgPT4gc3RhdGUuaWRUb1BlcnNvbk1hcFtyb3cuSURdPy5lbXByZXNhID09PSAnVVRFJykpLA0KICAgICAgICAgICAgICAgICdNQVNBJzogY2FsY3VsYXRlUmFtaWZpZWRTdW1tYXJ5KG9sZERhdGEuZmlsdGVyKHJvdyA9PiBzdGF0ZS5pZFRvUGVyc29uTWFwW3Jvdy5JRF0/LmVtcHJlc2EgPT09ICdNQVNBJykpLA0KICAgICAgICAgICAgICAgICdNT05DT0JSQSc6IGNhbGN1bGF0ZVJhbWlmaWVkU3VtbWFyeShvbGREYXRhLmZpbHRlcihyb3cgPT4gc3RhdGUuaWRUb1BlcnNvbk1hcFtyb3cuSURdPy5lbXByZXNhID09PSAnTU9OQ09CUkEnKSkNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRpdGlvblN0YXRlID0gew0KICAgICAgICAgICAgICAgIHRhYmxlczogeyAnUGVyc29uYXMnOiBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10sICdEYXRvcyc6IHsgLi4uc3RhdGUudGFibGVzWydEYXRvcyddLCBkYXRhOiBuZXdEYXRhIH0gfSwNCiAgICAgICAgICAgICAgICAvLyBtYW5kYXRvcnlSZWdpc3RyYXRpb25zOiBzdGF0ZS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgICAgICAvLyB3YXJuaW5nc0FyY2hpdmU6IFtdLCAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgICAgICAvLyBleGNsdWRlZERheXM6IHN0YXRlLmV4Y2x1ZGVkRGF5cywgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgcGVyc29uRGF0YVN1bW1hcnk6IGhpc3RvcmljYWxTdW1tYXJ5Rm9yUGVvcGxlLA0KICAgICAgICAgICAgICAgIGhpc3RvcmljYWxHbG9iYWxTdW1tYXJ5OiBoaXN0b3JpY2FsR2xvYmFsU3VtbWFyeQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgbmV3RmlsZU5hbWVEZWZhdWx0ID0gYHBhcnRpY2lvbl91dGVfZGVzZGVfJHtzdGFydERhdGVJbnB1dH0uanNvbmA7DQogICAgICAgICAgICBjb25zdCBuZXdGaWxlTmFtZSA9IGRvd25sb2FkSnNvbkZpbGUobmV3UGFydGl0aW9uU3RhdGUsIG5ld0ZpbGVOYW1lRGVmYXVsdCk7DQogICAgICAgICAgICBpZiAobmV3RmlsZU5hbWUpIGFsZXJ0KGBOdWV2byBhcmNoaXZvIGRlIHBhcnRpY2nDs24gZ3VhcmRhZG8gY29tbyAnJHtuZXdGaWxlTmFtZX0nLmApOw0KICAgICAgICAgICAgZWxzZSB7IGFsZXJ0KCJDcmVhY2nDs24gZGVsIG51ZXZvIGFyY2hpdm8gZGUgcGFydGljacOzbiBjYW5jZWxhZGEuIik7IHJldHVybjsgfQ0KDQogICAgICAgICAgICBpZiAob2xkRGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkT2xkRGF0YSA9IFsuLi5vbGREYXRhXS5zb3J0KChhLCBiKSA9PiBhLkZFQ0hBLmxvY2FsZUNvbXBhcmUoYi5GRUNIQSkpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG9sZGVzdERhdGUgPSBzb3J0ZWRPbGREYXRhWzBdLkZFQ0hBOw0KICAgICAgICAgICAgICAgIGNvbnN0IG5ld2VzdE9sZERhdGUgPSBzb3J0ZWRPbGREYXRhW3NvcnRlZE9sZERhdGEubGVuZ3RoIC0gMV0uRkVDSEE7DQogICAgICAgICAgICAgICAgY29uc3Qgb2xkUGFydGl0aW9uU3RhdGUgPSB7DQogICAgICAgICAgICAgICAgICAgIHRhYmxlczogeyAnUGVyc29uYXMnOiBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10sICdEYXRvcyc6IHsgLi4uc3RhdGUudGFibGVzWydEYXRvcyddLCBkYXRhOiBvbGREYXRhIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gbWFuZGF0b3J5UmVnaXN0cmF0aW9uczogc3RhdGUubWFuZGF0b3J5UmVnaXN0cmF0aW9ucywgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgICAgIC8vIHdhcm5pbmdzQXJjaGl2ZTogW10sIC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgICAgICAgICAvLyBleGNsdWRlZERheXM6IHN0YXRlLmV4Y2x1ZGVkRGF5cywgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgICAgIHBlcnNvbkRhdGFTdW1tYXJ5OiB7fSwNCiAgICAgICAgICAgICAgICAgICAgaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnk6IHt9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICBjb25zdCBvbGRGaWxlTmFtZURlZmF1bHQgPSBgcGFydGljaW9uX3V0ZV9hbnRpZ3VhXyR7b2xkZXN0RGF0ZX1fYV8ke25ld2VzdE9sZERhdGV9Lmpzb25gOw0KICAgICAgICAgICAgICAgIGNvbnN0IG9sZEZpbGVOYW1lID0gZG93bmxvYWRKc29uRmlsZShvbGRQYXJ0aXRpb25TdGF0ZSwgb2xkRmlsZU5hbWVEZWZhdWx0KTsNCiAgICAgICAgICAgICAgICBpZiAob2xkRmlsZU5hbWUpIGFsZXJ0KGBBcmNoaXZvIGFudGlndW8gZGUgcGFydGljacOzbiBndWFyZGFkbyBjb21vICcke29sZEZpbGVOYW1lfScuYCk7DQogICAgICAgICAgICAgICAgZWxzZSBhbGVydCgiQ3JlYWNpw7NuIGRlbCBhcmNoaXZvIGFudGlndW8gZGUgcGFydGljacOzbiBjYW5jZWxhZGEuIik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBzZSBlbmNvbnRyYXJvbiBkYXRvcyBhbnRlcmlvcmVzIGEgbGEgZmVjaGEgZGUgY29ydGUuIE5vIHNlIGhhIGNyZWFkbyB1biBhcmNoaXZvIGFudGlndW8uIik7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgaGFuZGxlSW1wb3J0ID0gKGV2ZW50KSA9PiB7DQogICAgICAgICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOw0KICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47DQogICAgICAgICAgICBpZiAoc3RhdGUuaXNEaXJ0eSAmJiAhY29uZmlybSgnwr9JbXBvcnRhciBhcmNoaXZvPyBMb3MgY2FtYmlvcyBubyBndWFyZGFkb3Mgc2UgcGVyZGVyw6FuLicpKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wb3J0ZWREYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGltcG9ydGVkRGF0YS50YWJsZXMgIT09ICdvYmplY3QnIHx8IGltcG9ydGVkRGF0YS50YWJsZXMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignRm9ybWF0byBkZSBhcmNoaXZvIGludsOhbGlkby4nKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuU3RhdGUgPSBnZXRJbml0aWFsU3RhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IC4uLmNsZWFuU3RhdGUsIHRhYmxlczogaW1wb3J0ZWREYXRhLnRhYmxlcyB9Ow0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gc3RhdGUubWFuZGF0b3J5UmVnaXN0cmF0aW9ucyA9IGltcG9ydGVkRGF0YS5tYW5kYXRvcnlSZWdpc3RyYXRpb25zIHx8IHt9OyAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgICAgICAgICAgLy8gc3RhdGUud2FybmluZ3NBcmNoaXZlID0gaW1wb3J0ZWREYXRhLndhcm5pbmdzQXJjaGl2ZSB8fCBbXTsgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgICAgIC8vIHN0YXRlLmV4Y2x1ZGVkRGF5cyA9IGltcG9ydGVkRGF0YS5leGNsdWRlZERheXMgfHwge307IC8vIEVMSU1JTkFETw0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wZXJzb25EYXRhU3VtbWFyeSA9IGltcG9ydGVkRGF0YS5wZXJzb25EYXRhU3VtbWFyeSB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnkgPSBpbXBvcnRlZERhdGEuaGlzdG9yaWNhbEdsb2JhbFN1bW1hcnkgfHwge307DQoNCiAgICAgICAgICAgICAgICAgICAgaWYoIXN0YXRlLnRhYmxlc1snUGVyc29uYXMnXSkgc3RhdGUudGFibGVzWydQZXJzb25hcyddID0geyBjb2x1bW5zOiBQRVJTT05BU19DT0xVTU5TLCBkYXRhOiBbXSwgcmVsYXRpb25zOiB7fSB9Ow0KICAgICAgICAgICAgICAgICAgICBpZighc3RhdGUudGFibGVzWydEYXRvcyddKSB7DQogICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snRGF0b3MnXSA9IHsgY29sdW1uczogQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUiwgZGF0YTogW10sIHJlbGF0aW9uczoge30gfTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uY29sdW1ucyA9IFBFUlNPTkFTX0NPTFVNTlM7DQogICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snRGF0b3MnXS5jb2x1bW5zID0gQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUjsNCg0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kYXRhTG9hZGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0luaXRpYWxMb2FkID0gdHJ1ZTsgLy8gRm9yemFyIGEgbGEgw7psdGltYSBww6FnaW5hIGVuIGxhIGNhcmdhDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBidWlsZFBlcnNvbk1hcHMoKTsNCiAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlRmlyc3RSZWNvcmREYXRlcygpOw0KICAgICAgICAgICAgICAgICAgICByZW5kZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0RhdG9zIGltcG9ydGFkb3MgY29ycmVjdGFtZW50ZS4nKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgeyBhbGVydChgRXJyb3IgYWwgaW1wb3J0YXI6ICR7ZXJyb3IubWVzc2FnZX1gKTsgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOw0KICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgaGFuZGxlRXhwb3J0RGFpbHlQaXZvdFRvWExTID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgZmxhdERhdGEgPSBhcHBseUZpbHRlcnMoc3RhdGUudGFibGVzLkRhdG9zLmRhdGEpOw0KICAgICAgICAgICAgaWYgKGZsYXREYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiTm8gaGF5IGRhdG9zIHBhcmEgZXhwb3J0YXIuIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgZXhwb3J0X2RpYXJpb191dGUueGxzeGA7DQoNCiAgICAgICAgICAgIC8vIDEuIFBpdm90YXIgZGF0b3MgY29tbyBlbiBsYSB2aXN0YSBwcmluY2lwYWwNCiAgICAgICAgICAgIGNvbnN0IHBpdm90ZWREYXRhID0ge307DQogICAgICAgICAgICBmbGF0RGF0YS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7cm93LklEfXwke3Jvdy5GRUNIQX1gOw0KICAgICAgICAgICAgICAgIGlmICghcGl2b3RlZERhdGFba2V5XSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25JbmZvID0gc3RhdGUuaWRUb1BlcnNvbk1hcFtyb3cuSURdIHx8IHt9Ow0KICAgICAgICAgICAgICAgICAgICBwaXZvdGVkRGF0YVtrZXldID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IHJvdy5JRCwgTm9tYnJlOiByb3cuTm9tYnJlLCBQdWVzdG86IHJvdy5QdWVzdG8sIEZFQ0hBOiByb3cuRkVDSEEsDQogICAgICAgICAgICAgICAgICAgICAgICBFbXByZXNhOiBwZXJzb25JbmZvLmVtcHJlc2EgfHwgJycsIFR1cm5vOiByb3dbJ1R1cm5vJ10gfHwgJycsDQogICAgICAgICAgICAgICAgICAgICAgICAnQ2FtYmlvIGRlIGpvcm5hZGEnOiByb3dbJ0NhbWJpbyBkZSBqb3JuYWRhJ10gfHwgJycsIEFic2VudGlzbW86IHJvd1snQWJzZW50aXNtbyddIHx8ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgSW5jaWRlbmNpYTogcm93WydJbmNpZGVuY2lhJ10gfHwgJycsIGhvdXJzOiB7fQ0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocm93LkFic2VudGlzbW8gJiYgcm93LkFic2VudGlzbW8gIT09ICctJykgew0KICAgICAgICAgICAgICAgICAgICBwaXZvdGVkRGF0YVtrZXldLmlzQWJzZW50ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGl2b3RlZERhdGFba2V5XS5hYnNlbnRSZWFzb24gPSByb3cuQWJzZW50aXNtbzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFwaXZvdGVkRGF0YVtrZXldLmhvdXJzW3Jvdy5GYW1pbGlhXSkgew0KICAgICAgICAgICAgICAgICAgICBwaXZvdGVkRGF0YVtrZXldLmhvdXJzW3Jvdy5GYW1pbGlhXSA9IHsgSE46IDAsIEhFOiAwIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBpdm90ZWREYXRhW2tleV0uaG91cnNbcm93LkZhbWlsaWFdLkhOICs9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCiAgICAgICAgICAgICAgICBwaXZvdGVkRGF0YVtrZXldLmhvdXJzW3Jvdy5GYW1pbGlhXS5IRSArPSBwYXJzZUZsb2F0KFN0cmluZyhyb3cuSEUgfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgcGl2b3RlZEFycmF5ID0gT2JqZWN0LnZhbHVlcyhwaXZvdGVkRGF0YSkuc29ydCgoYSxiKSA9PiBhLkZFQ0hBLmxvY2FsZUNvbXBhcmUoYi5GRUNIQSkgfHwgYS5Ob21icmUubG9jYWxlQ29tcGFyZShiLk5vbWJyZSkpOw0KDQogICAgICAgICAgICAvLyAyLiBDb25zdHJ1aXIgY2FiZWNlcmFzIGNvbXBsZWphcyBwYXJhIEV4Y2VsDQogICAgICAgICAgICBjb25zdCBmYW1pbGlhVG9TdWJzZWNjaW9uTWFwID0ge307DQogICAgICAgICAgICBmb3IgKGNvbnN0IGdyb3VwTmFtZSBpbiBUQVJFQV9HUk9VUFMpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhbWlsaWEgb2YgVEFSRUFfR1JPVVBTW2dyb3VwTmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgZmFtaWxpYVRvU3Vic2VjY2lvbk1hcFtmYW1pbGlhXSA9IGdyb3VwTmFtZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHN0YXRpY0NvbHMgPSBbJ0ZFQ0hBJywgJ0lEJywgJ05vbWJyZScsICdQdWVzdG8nLCAnRW1wcmVzYSddOw0KICAgICAgICAgICAgY29uc3QgZmluYWxDb2xzID0gWydUdXJubycsICdDLiBKb3JuYWRhJywgJ0Fic2VudGlzbW8nLCAnSW5jaWRlbmNpYSddOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDb25zdHJ1aXIgZGluw6FtaWNhbWVudGUgbGFzIGNhYmVjZXJhcyBkZSBhY3RpdmlkYWQNCiAgICAgICAgICAgIGxldCBhY3Rpdml0eUNvbHMgPSBbXTsNCiAgICAgICAgICAgIGxldCBoZWFkZXJSb3dzID0gW1suLi5zdGF0aWNDb2xzXV07DQogICAgICAgICAgICBjb25zdCBtZXJnZXMgPSBbXTsNCg0KICAgICAgICAgICAgLy8gRmlsYSAyOiBDb25jZXB0bw0KICAgICAgICAgICAgY29uc3QgaGVhZGVyMiA9IEFycmF5KHN0YXRpY0NvbHMubGVuZ3RoKS5maWxsKG51bGwpOw0KICAgICAgICAgICAgbGV0IGNvbElkeCA9IHN0YXRpY0NvbHMubGVuZ3RoOw0KICAgICAgICAgICAgZm9yIChjb25zdCBjb25jZXB0b05hbWUgaW4gTU9OVEFKRVMpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb25jZXB0b0ZhbWlsaWFzID0gWy4uLm5ldyBTZXQoTU9OVEFKRVNbY29uY2VwdG9OYW1lXSldOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBjb25jZXB0b0ZhbWlsaWFzLmxlbmd0aCAqIDI7DQogICAgICAgICAgICAgICAgaGVhZGVyMi5wdXNoKGNvbmNlcHRvTmFtZSk7DQogICAgICAgICAgICAgICAgZm9yKGxldCBpPTE7IGk8c3BhbjsgaSsrKSBoZWFkZXIyLnB1c2gobnVsbCk7DQogICAgICAgICAgICAgICAgbWVyZ2VzLnB1c2goeyBzOiB7IHI6IDEsIGM6IGNvbElkeCB9LCBlOiB7IHI6IDEsIGM6IGNvbElkeCArIHNwYW4gLSAxIH0gfSk7DQogICAgICAgICAgICAgICAgY29sSWR4ICs9IHNwYW47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoZWFkZXJSb3dzLnB1c2goaGVhZGVyMik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEZpbGEgMzogU3Vic2VjY2nDs24NCiAgICAgICAgICAgIGNvbnN0IGhlYWRlcjMgPSBBcnJheShzdGF0aWNDb2xzLmxlbmd0aCkuZmlsbChudWxsKTsNCiAgICAgICAgICAgIGNvbElkeCA9IHN0YXRpY0NvbHMubGVuZ3RoOw0KICAgICAgICAgICAgZm9yIChjb25zdCBjb25jZXB0b05hbWUgaW4gTU9OVEFKRVMpIHsNCiAgICAgICAgICAgICAgICAgY29uc3Qgc3Vic2VjY2lvbmVzID0ge307DQogICAgICAgICAgICAgICAgIGNvbnN0IGNvbmNlcHRvRmFtaWxpYXMgPSBbLi4ubmV3IFNldChNT05UQUpFU1tjb25jZXB0b05hbWVdKV07DQogICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICBjb25zdCBvcmRlcmVkU3Vic2VjY2lvbmVzID0gQ09OQ0VQVE9fU1VCU0VDQ0lPTl9PUkRFUltjb25jZXB0b05hbWVdIHx8IFtdOw0KICAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhc01hcGVhZGFzID0gbmV3IFNldCgpOw0KICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgb3JkZXJlZFN1YnNlY2Npb25lcy5mb3JFYWNoKHN1Yk5hbWUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhc0luU3ViID0gVEFSRUFfR1JPVVBTW3N1Yk5hbWVdIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhc1RvU2hvdyA9IGZhbWlsaWFzSW5TdWIuZmlsdGVyKGYgPT4gY29uY2VwdG9GYW1pbGlhcy5pbmNsdWRlcyhmKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChmYW1pbGlhc1RvU2hvdy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdWJzZWNjaW9uZXNbc3ViTmFtZV0gPSBmYW1pbGlhc1RvU2hvdy5sZW5ndGggKiAyOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWxpYXNUb1Nob3cuZm9yRWFjaChmID0+IGZhbWlsaWFzTWFwZWFkYXMuYWRkKGYpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzU2luU3Vic2VjY2lvbiA9IGNvbmNlcHRvRmFtaWxpYXMuZmlsdGVyKGYgPT4gIWZhbWlsaWFzTWFwZWFkYXMuaGFzKGYpKTsNCiAgICAgICAgICAgICAgICBpZiAoZmFtaWxpYXNTaW5TdWJzZWNjaW9uLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgc3Vic2VjY2lvbmVzWydPdHJvcyddID0gZmFtaWxpYXNTaW5TdWJzZWNjaW9uLmxlbmd0aCAqIDI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZmluYWxTdWJzZWNjaW9uT3JkZXIgPSBbLi4ub3JkZXJlZFN1YnNlY2Npb25lcywgJ090cm9zJ107DQoNCiAgICAgICAgICAgICAgICAgZmluYWxTdWJzZWNjaW9uT3JkZXIuZm9yRWFjaChzdWJOYW1lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYoc3Vic2VjY2lvbmVzW3N1Yk5hbWVdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuID0gc3Vic2VjY2lvbmVzW3N1Yk5hbWVdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyMy5wdXNoKHN1Yk5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTE7IGk8c3BhbjsgaSsrKSBoZWFkZXIzLnB1c2gobnVsbCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXJnZXMucHVzaCh7IHM6IHsgcjogMiwgYzogY29sSWR4IH0sIGU6IHsgcjogMiwgYzogY29sSWR4ICsgc3BhbiAtIDEgfSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbElkeCArPSBzcGFuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaGVhZGVyUm93cy5wdXNoKGhlYWRlcjMpOw0KDQogICAgICAgICAgICAvLyBGaWxhIDQ6IEZhbWlsaWENCiAgICAgICAgICAgIGNvbnN0IGhlYWRlcjQgPSBBcnJheShzdGF0aWNDb2xzLmxlbmd0aCkuZmlsbChudWxsKTsNCiAgICAgICAgICAgIGNvbElkeCA9IHN0YXRpY0NvbHMubGVuZ3RoOw0KICAgICAgICAgICAgY29uc3QgYWxsQWN0aXZpdHlDb2xzID0gW107IC8vIFBhcmEgbGEgZmlsYSA1DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciAoY29uc3QgY29uY2VwdG9OYW1lIGluIE1PTlRBSkVTKSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG9GYW1pbGlhcyA9IFsuLi5uZXcgU2V0KE1PTlRBSkVTW2NvbmNlcHRvTmFtZV0pXTsNCiAgICAgICAgICAgICAgICBjb25zdCBvcmRlcmVkU3Vic2VjY2lvbmVzID0gQ09OQ0VQVE9fU1VCU0VDQ0lPTl9PUkRFUltjb25jZXB0b05hbWVdIHx8IFtdOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzT3JkZW5hZGFzID0gW107DQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNNYXBlYWRhcyA9IG5ldyBTZXQoKTsNCg0KICAgICAgICAgICAgICAgIG9yZGVyZWRTdWJzZWNjaW9uZXMuZm9yRWFjaChzdWJOYW1lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNJblN1YiA9IFRBUkVBX0dST1VQU1tzdWJOYW1lXSB8fCBbXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNUb1Nob3cgPSBmYW1pbGlhc0luU3ViLmZpbHRlcihmID0+IGNvbmNlcHRvRmFtaWxpYXMuaW5jbHVkZXMoZikpOw0KICAgICAgICAgICAgICAgICAgICBmYW1pbGlhc1RvU2hvdy5mb3JFYWNoKGYgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmYW1pbGlhc01hcGVhZGFzLmhhcyhmKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFzT3JkZW5hZGFzLnB1c2goZik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWxpYXNNYXBlYWRhcy5hZGQoZik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNSZXN0YW50ZXMgPSBjb25jZXB0b0ZhbWlsaWFzLmZpbHRlcihmID0+ICFmYW1pbGlhc01hcGVhZGFzLmhhcyhmKSk7DQogICAgICAgICAgICAgICAgZmFtaWxpYXNPcmRlbmFkYXMucHVzaCguLi5mYW1pbGlhc1Jlc3RhbnRlcyk7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhbWlsaWEgb2YgZmFtaWxpYXNPcmRlbmFkYXMpIHsNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyNC5wdXNoKGZhbWlsaWEsIG51bGwpOw0KICAgICAgICAgICAgICAgICAgICBhbGxBY3Rpdml0eUNvbHMucHVzaChgJHtmYW1pbGlhfSBITmAsIGAke2ZhbWlsaWF9IEhFYCk7DQogICAgICAgICAgICAgICAgICAgIG1lcmdlcy5wdXNoKHsgczogeyByOiAzLCBjOiBjb2xJZHggfSwgZTogeyByOiAzLCBjOiBjb2xJZHggKyAxIH0gfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbElkeCArPSAyOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhlYWRlclJvd3MucHVzaChoZWFkZXI0KTsNCg0KICAgICAgICAgICAgLy8gRmlsYSA1OiBITi9IRQ0KICAgICAgICAgICAgY29uc3QgaGVhZGVyNSA9IFsuLi5zdGF0aWNDb2xzLCAuLi5hbGxBY3Rpdml0eUNvbHMsIC4uLmZpbmFsQ29sc107DQogICAgICAgICAgICBoZWFkZXJSb3dzLnB1c2goaGVhZGVyNSk7DQoNCiAgICAgICAgICAgIC8vIEZpbGEgMTogTml2ZWwgc3VwZXJpb3IgKGRlc3B1w6lzIGRlIHNhYmVyIGVsIHRvdGFsIGRlIGNvbHVtbmFzIGRlIGFjdGl2aWRhZCkNCiAgICAgICAgICAgIGhlYWRlclJvd3NbMF0ucHVzaCgnQUNUSVZJREFERVMnKTsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsQWN0aXZpdHlDb2xzLmxlbmd0aCAtIDE7IGkrKykgaGVhZGVyUm93c1swXS5wdXNoKG51bGwpOw0KICAgICAgICAgICAgaGVhZGVyUm93c1swXS5wdXNoKC4uLmZpbmFsQ29scy5tYXAoKCk9Pm51bGwpKTsgLy8gRXNwYWNpbyBwYXJhIGxhcyBmaW5hbGVzDQogICAgICAgICAgICBtZXJnZXMucHVzaCh7IHM6IHsgcjogMCwgYzogc3RhdGljQ29scy5sZW5ndGggfSwgZTogeyByOiAwLCBjOiBzdGF0aWNDb2xzLmxlbmd0aCArIGFsbEFjdGl2aXR5Q29scy5sZW5ndGggLSAxIH0gfSk7DQoNCiAgICAgICAgICAgIC8vIFVuaXIgY2FiZWNlcmFzIGVzdMOhdGljYXMgdmVydGljYWxtZW50ZQ0KICAgICAgICAgICAgc3RhdGljQ29scy5mb3JFYWNoKChfLCBjKSA9PiBtZXJnZXMucHVzaCh7IHM6IHsgcjogMCwgYyB9LCBlOiB7IHI6IDQsIGMgfSB9KSk7DQogICAgICAgICAgICBmaW5hbENvbHMuZm9yRWFjaCgoXywgYykgPT4gbWVyZ2VzLnB1c2goeyBzOiB7IHI6IDAsIGM6IHN0YXRpY0NvbHMubGVuZ3RoICsgYWxsQWN0aXZpdHlDb2xzLmxlbmd0aCArIGMgfSwgZTogeyByOiA0LCBjOiBzdGF0aWNDb2xzLmxlbmd0aCArIGFsbEFjdGl2aXR5Q29scy5sZW5ndGggKyBjIH0gfSkpOw0KDQoNCiAgICAgICAgICAgIC8vIDMuIENvbnN0cnVpciBmaWxhcyBkZSBkYXRvcw0KICAgICAgICAgICAgY29uc3QgYm9keSA9IHBpdm90ZWRBcnJheS5tYXAocGl2b3RlZFJvdyA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gew0KICAgICAgICAgICAgICAgICAgICBGRUNIQTogZm9ybWF0RGF0ZVRvRE1ZKHBpdm90ZWRSb3cuRkVDSEEpLA0KICAgICAgICAgICAgICAgICAgICBJRDogcGl2b3RlZFJvdy5JRCwNCiAgICAgICAgICAgICAgICAgICAgTm9tYnJlOiBwaXZvdGVkUm93Lk5vbWJyZSwNCiAgICAgICAgICAgICAgICAgICAgUHVlc3RvOiBwaXZvdGVkUm93LlB1ZXN0bywNCiAgICAgICAgICAgICAgICAgICAgRW1wcmVzYTogcGl2b3RlZFJvdy5FbXByZXNhLA0KICAgICAgICAgICAgICAgICAgICBUdXJubzogcGl2b3RlZFJvdy5UdXJubywNCiAgICAgICAgICAgICAgICAgICAgJ0MuIEpvcm5hZGEnOiBwaXZvdGVkUm93WydDYW1iaW8gZGUgam9ybmFkYSddLA0KICAgICAgICAgICAgICAgICAgICBBYnNlbnRpc21vOiBwaXZvdGVkUm93LkFic2VudGlzbW8sDQogICAgICAgICAgICAgICAgICAgIEluY2lkZW5jaWE6IHBpdm90ZWRSb3cuSW5jaWRlbmNpYSwNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgaWYgKCFwaXZvdGVkUm93LmlzQWJzZW50KSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFVzYXIgYWxsQWN0aXZpdHlDb2xzIHBhcmEgcmVsbGVuYXINCiAgICAgICAgICAgICAgICAgICAgYWxsQWN0aXZpdHlDb2xzLmZvckVhY2goY29sTmFtZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gSU5JQ0lPIERFIExBIENPUlJFQ0NJw5NOIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2UgdXNhIGxhc3RJbmRleE9mIHBhcmEgc2VwYXJhciBjb3JyZWN0YW1lbnRlIGZhbWlsaWFzIGNvbiBlc3BhY2lvcw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gKGVqOiAiY2FqYXMgZGUgZGVyaXZhY2nDs24gSE4iIC0+IGZhbWlsaWE6ICJjYWphcyBkZSBkZXJpdmFjacOzbiIsIHRpcG86ICJITiIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0U3BhY2VJbmRleCA9IGNvbE5hbWUubGFzdEluZGV4T2YoJyAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0U3BhY2VJbmRleCA9PT0gLTEpIHJldHVybjsgLy8gU2FsdGFyIHNpIG5vIHRpZW5lIGZvcm1hdG8gZXNwZXJhZG8NCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYSA9IGNvbE5hbWUuc3Vic3RyaW5nKDAsIGxhc3RTcGFjZUluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcG8gPSBjb2xOYW1lLnN1YnN0cmluZyhsYXN0U3BhY2VJbmRleCArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEZJTiBERSBMQSBDT1JSRUNDScOTTiAtLS0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBwaXZvdGVkUm93LmhvdXJzW2ZhbWlsaWFdIHx8IHsgSE46IDAsIEhFOiAwIH07DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aXBvID09PSAnSE4nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2NvbE5hbWVdID0gaG91cnMuSE4gPiAwID8gaG91cnMuSE4gOiAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGlwbyA9PT0gJ0hFJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1tjb2xOYW1lXSA9IGhvdXJzLkhFID4gMCA/IGhvdXJzLkhFIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVyNS5tYXAoY29sID0+IHJvd1tjb2xdIHx8ICcnKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyA0LiBDcmVhciB5IGRlc2NhcmdhciBlbCBhcmNoaXZvIFhMU1gNCiAgICAgICAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5hb2FfdG9fc2hlZXQoWy4uLmhlYWRlclJvd3MsIC4uLmJvZHldKTsNCiAgICAgICAgICAgIHdzWychbWVyZ2VzJ10gPSBtZXJnZXM7DQogICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsNCiAgICAgICAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod2IsIHdzLCAiVmlzdGEgRGlhcmlhIik7DQogICAgICAgICAgICBYTFNYLndyaXRlRmlsZSh3YiwgZmlsZU5hbWUpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgZ2VuZXJhdGVQaXZvdGVkU3VtbWFyeUV4Y2VsID0gKGRhdGFTb3VyY2UsIGZpbGVOYW1lKSA9PiB7DQogICAgICAgICAgICAvLyAxLiBEYXRhIEFnZ3JlZ2F0aW9uDQogICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0ge307DQogICAgICAgICAgICBkYXRhU291cmNlLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocm93LkFic2VudGlzbW8gJiYgcm93LkFic2VudGlzbW8gIT09ICctJykgeyByZXR1cm47IH0NCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gKHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwKSArIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwYXJzZUZsb2F0KFN0cmluZyhyb3cuSEUgfHwgJzAnKS5yZXBsYWNlKCcsJywgJy4nKSkgfHwgMCk7DQoNCiAgICAgICAgICAgICAgICBpZiAodG90YWxIb3VycyA9PT0gMCkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgaWQgPSByb3cuSUQ7DQogICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5W2lkXSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25JbmZvID0gc3RhdGUuaWRUb1BlcnNvbk1hcFtpZF0gfHwgew0KICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiByb3cuTm9tYnJlLCBwdWVzdG86IHJvdy5QdWVzdG8sIGVtcHJlc2E6IHJvdy5FbXByZXNhDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnlbaWRdID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IGlkLCBOb21icmU6IHBlcnNvbkluZm8ubm9tYnJlLCBQdWVzdG86IHBlcnNvbkluZm8ucHVlc3RvLA0KICAgICAgICAgICAgICAgICAgICAgICAgRW1wcmVzYTogcGVyc29uSW5mby5lbXByZXNhLCBob3Vyczoge30NCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYSA9IHJvdy5GYW1pbGlhOw0KICAgICAgICAgICAgICAgIGlmIChmYW1pbGlhKSB7DQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnlbaWRdLmhvdXJzW2ZhbWlsaWFdID0gKHN1bW1hcnlbaWRdLmhvdXJzW2ZhbWlsaWFdIHx8IDApICsgdG90YWxIb3VyczsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUFycmF5ID0gT2JqZWN0LnZhbHVlcyhzdW1tYXJ5KTsNCg0KICAgICAgICAgICAgaWYgKHN1bW1hcnlBcnJheS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gaGF5IGRhdG9zIGxhYm9yYWxlcyAoc2luIGFic2VudGlzbW8pIHBhcmEgZXhwb3J0YXIgZW4gZWwgcGVyw61vZG8gc2VsZWNjaW9uYWRvLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gRXhjZWwgSGVhZGVyIENvbnN0cnVjdGlvbg0KICAgICAgICAgICAgY29uc3QgZmFtaWxpYVRvU3Vic2VjY2lvbk1hcCA9IHt9Ow0KICAgICAgICAgICAgZm9yIChjb25zdCBncm91cE5hbWUgaW4gVEFSRUFfR1JPVVBTKSB7DQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBmYW1pbGlhIG9mIFRBUkVBX0dST1VQU1tncm91cE5hbWVdKSB7DQogICAgICAgICAgICAgICAgICAgIGZhbWlsaWFUb1N1YnNlY2Npb25NYXBbZmFtaWxpYV0gPSBncm91cE5hbWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBzdGF0aWNDb2xzID0gWydJRCcsICdOb21icmUnLCAnUHVlc3RvJywgJ0VtcHJlc2EnXTsNCg0KICAgICAgICAgICAgY29uc3QgeGxzSGVhZGVyMSA9IFsuLi5zdGF0aWNDb2xzXTsgLy8gUHJveWVjdG9zIC8gQ29uY2VwdG9zDQogICAgICAgICAgICBjb25zdCB4bHNIZWFkZXIyID0gWy4uLnN0YXRpY0NvbHNdOyAvLyBCbG9xdWVzIC8gU3Vic2VjY2lvbmVzDQogICAgICAgICAgICBjb25zdCB4bHNIZWFkZXIzID0gWy4uLnN0YXRpY0NvbHNdOyAvLyBGYW1pbGlhcw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBtZXJnZXMgPSBbXTsNCiAgICAgICAgICAgIGxldCBjdXJyZW50Q29sID0gc3RhdGljQ29scy5sZW5ndGg7DQoNCiAgICAgICAgICAgIGZvciAoY29uc3QgY29uY2VwdG9OYW1lIGluIE1PTlRBSkVTKSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG9GYW1pbGlhcyA9IFsuLi5uZXcgU2V0KE1PTlRBSkVTW2NvbmNlcHRvTmFtZV0pXTsNCiAgICAgICAgICAgICAgICBjb25zdCBzcGFuQ29uY2VwdG8gPSBjb25jZXB0b0ZhbWlsaWFzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB4bHNIZWFkZXIxLnB1c2goY29uY2VwdG9OYW1lKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNwYW5Db25jZXB0bzsgaSsrKSB4bHNIZWFkZXIxLnB1c2goJycpOw0KICAgICAgICAgICAgICAgIGlmIChzcGFuQ29uY2VwdG8gPiAxKSB7DQogICAgICAgICAgICAgICAgICAgIG1lcmdlcy5wdXNoKHsgczogeyByOiAwLCBjOiBjdXJyZW50Q29sIH0sIGU6IHsgcjogMCwgYzogY3VycmVudENvbCArIHNwYW5Db25jZXB0byAtIDEgfSB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBIZWFkZXIgMiAoU3Vic2VjY2lvbmVzKQ0KICAgICAgICAgICAgICAgIGNvbnN0IHN1YnNlY2Npb25lcyA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyZWRTdWJzZWNjaW9uZXMgPSBDT05DRVBUT19TVUJTRUNDSU9OX09SREVSW2NvbmNlcHRvTmFtZV0gfHwgW107DQogICAgICAgICAgICAgICAgY29uc3QgZmFtaWxpYXNNYXBlYWRhcyA9IG5ldyBTZXQoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBvcmRlcmVkU3Vic2VjY2lvbmVzLmZvckVhY2goc3ViTmFtZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzSW5TdWIgPSBUQVJFQV9HUk9VUFNbc3ViTmFtZV0gfHwgW107DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzVG9TaG93ID0gZmFtaWxpYXNJblN1Yi5maWx0ZXIoZiA9PiBjb25jZXB0b0ZhbWlsaWFzLmluY2x1ZGVzKGYpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbWlsaWFzVG9TaG93Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNlY2Npb25lc1tzdWJOYW1lXSA9IGZhbWlsaWFzVG9TaG93Lmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFzVG9TaG93LmZvckVhY2goZiA9PiBmYW1pbGlhc01hcGVhZGFzLmFkZChmKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzU2luU3Vic2VjY2lvbiA9IGNvbmNlcHRvRmFtaWxpYXMuZmlsdGVyKGYgPT4gIWZhbWlsaWFzTWFwZWFkYXMuaGFzKGYpKTsNCiAgICAgICAgICAgICAgICBpZiAoZmFtaWxpYXNTaW5TdWJzZWNjaW9uLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgc3Vic2VjY2lvbmVzWydPdHJvcyddID0gZmFtaWxpYXNTaW5TdWJzZWNjaW9uLmxlbmd0aDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFN1YnNlY2Npb25PcmRlciA9IFsuLi5vcmRlcmVkU3Vic2VjY2lvbmVzLCAnT3Ryb3MnXTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhc09yZGVuYWRhc1BhcmFIZWFkZXIzID0gW107DQoNCiAgICAgICAgICAgICAgICBmaW5hbFN1YnNlY2Npb25PcmRlci5mb3JFYWNoKHN1Yk5hbWUgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2VjY2lvbmVzW3N1Yk5hbWVdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuU3Vic2VjY2lvbiA9IHN1YnNlY2Npb25lc1tzdWJOYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHhsc0hlYWRlcjIucHVzaChzdWJOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc3BhblN1YnNlY2Npb247IGkrKykgeGxzSGVhZGVyMi5wdXNoKCcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGFuU3Vic2VjY2lvbiA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZXMucHVzaCh7IHM6IHsgcjogMSwgYzogY3VycmVudENvbCB9LCBlOiB7IHI6IDEsIGM6IGN1cnJlbnRDb2wgKyBzcGFuU3Vic2VjY2lvbiAtIDEgfSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb2xlY3RhciBmYW1pbGlhcyBwYXJhIEhlYWRlciAzIGVuIGVsIG9yZGVuIGNvcnJlY3RvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViTmFtZSA9PT0gJ090cm9zJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlsaWFzT3JkZW5hZGFzUGFyYUhlYWRlcjMucHVzaCguLi5mYW1pbGlhc1NpblN1YnNlY2Npb24pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYW1pbGlhc0luU3ViID0gVEFSRUFfR1JPVVBTW3N1Yk5hbWVdIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFzVG9TaG93ID0gZmFtaWxpYXNJblN1Yi5maWx0ZXIoZiA9PiBjb25jZXB0b0ZhbWlsaWFzLmluY2x1ZGVzKGYpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhc09yZGVuYWRhc1BhcmFIZWFkZXIzLnB1c2goLi4uZmFtaWxpYXNUb1Nob3cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29sICs9IHNwYW5TdWJzZWNjaW9uOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gSGVhZGVyIDMgKEZhbWlsaWFzKQ0KICAgICAgICAgICAgICAgIHhsc0hlYWRlcjMucHVzaCguLi5mYW1pbGlhc09yZGVuYWRhc1BhcmFIZWFkZXIzKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAvLyAzLiBFeGNlbCBCb2R5IENvbnN0cnVjdGlvbg0KICAgICAgICAgICAgY29uc3QgYm9keVJvd3MgPSBzdW1tYXJ5QXJyYXkuc29ydCgoYSxiKSA9PiBhLk5vbWJyZS5sb2NhbGVDb21wYXJlKGIuTm9tYnJlKSkubWFwKHBlcnNvbkRhdGEgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VsUm93ID0gW3BlcnNvbkRhdGEuSUQsIHBlcnNvbkRhdGEuTm9tYnJlLCBwZXJzb25EYXRhLlB1ZXN0bywgcGVyc29uRGF0YS5FbXByZXNhXTsNCiAgICAgICAgICAgICAgICB4bHNIZWFkZXIzLnNsaWNlKHN0YXRpY0NvbHMubGVuZ3RoKS5mb3JFYWNoKGZhbWlsaWEgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IHBlcnNvbkRhdGEuaG91cnNbZmFtaWxpYV07DQogICAgICAgICAgICAgICAgICAgIGV4Y2VsUm93LnB1c2goaG91cnMgPyBwYXJzZUZsb2F0KGhvdXJzLnRvRml4ZWQoMikpIDogJycpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBleGNlbFJvdzsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyA0LiBTaGVldCBDcmVhdGlvbg0KICAgICAgICAgICAgY29uc3QgZmluYWxEYXRhID0gW3hsc0hlYWRlcjEsIHhsc0hlYWRlcjIsIHhsc0hlYWRlcjMsIC4uLmJvZHlSb3dzXTsNCiAgICAgICAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5hb2FfdG9fc2hlZXQoZmluYWxEYXRhKTsNCg0KICAgICAgICAgICAgd3NbJyFtZXJnZXMnXSA9IG1lcmdlczsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc3QgY29sV2lkdGhzID0geGxzSGVhZGVyMy5tYXAoaCA9PiAoeyB3Y2g6IGgubGVuZ3RoICsgMiB9KSk7DQogICAgICAgICAgICB3c1snIWNvbHMnXSA9IGNvbFdpZHRoczsNCg0KICAgICAgICAgICAgY29uc3Qgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7DQogICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCB3cywgIlJlc3VtZW4gSG9yYXMgcG9yIFRyYWJhamFkb3IiKTsNCiAgICAgICAgICAgIFhMU1gud3JpdGVGaWxlKHdiLCBmaWxlTmFtZSk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBoYW5kbGVFeHBvcnRUYWJsZSA9IChmb3JtYXQpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGZsYXREYXRhID0gYXBwbHlGaWx0ZXJzKHN0YXRlLnRhYmxlc1tzdGF0ZS5hY3RpdmVUYWJsZV0uZGF0YSk7DQogICAgICAgICAgICBpZiAoZmxhdERhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJObyBoYXkgZGF0b3MgcGFyYSBleHBvcnRhci4iKTsgcmV0dXJuOyB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChmb3JtYXQgPT09ICd4bHMnKSB7DQogICAgICAgICAgICAgICAgaGFuZGxlRXhwb3J0RGFpbHlQaXZvdFRvWExTKCk7DQogICAgICAgICAgICB9IGVsc2UgeyAvLyBQREYNCiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0TmFtZSA9IGBleHBvcnRfdXRlX2RhdG9zLnBkZmA7DQogICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBwcm9tcHQoYEludHJvZHVjZSB1biBub21icmUgcGFyYSBlbCBhcmNoaXZvIFBERjpgLCBkZWZhdWx0TmFtZSkgfHwgZGVmYXVsdE5hbWU7DQogICAgICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERih7IG9yaWVudGF0aW9uOiAnbGFuZHNjYXBlJyB9KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW5zID0gQ0FOT05JQ0FMX0VYUE9SVF9PUkRFUjsNCiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gZmxhdERhdGEubWFwKHJvdyA9PiBjb2x1bW5zLm1hcChjb2wgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoY29sID09PSAnRkVDSEEnICYmIHJvd1tjb2xdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZVRvRE1ZKHJvd1tjb2xdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93W2NvbF0gfHwgJyc7DQogICAgICAgICAgICAgICAgfSkpOw0KDQogICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDE4KTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChgRXhwb3J0YWNpw7NuIGRlIERhdG9zYCwgMTQsIDIyKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsNCiAgICAgICAgICAgICAgICAgICAgc3RhcnRZOiAzMCwNCiAgICAgICAgICAgICAgICAgICAgaGVhZDogW2NvbHVtbnNdLA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBib2R5LA0KICAgICAgICAgICAgICAgICAgICB0aGVtZTogJ2dyaWQnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzQxLCAxMjgsIDE4NV0gfSwNCiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7IGZvbnRTaXplOiA3LCBjZWxsUGFkZGluZzogMS41IH0sDQogICAgICAgICAgICAgICAgICAgIGRpZERyYXdQYWdlOiBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9ICJQw6FnaW5hICIgKyBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHN0ciwgZGF0YS5zZXR0aW5ncy5tYXJnaW4ubGVmdCwgZG9jLmludGVybmFsLnBhZ2VTaXplLmhlaWdodCAtIDEwKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgZG9jLnNhdmUoZmlsZU5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGNsb3NlTW9kYWwgPSAobW9kYWwpID0+IG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIGNvbnN0IGVzY2FwZUh0bWwgPSAodW5zYWZlKSA9PiB0eXBlb2YgdW5zYWZlID09PSAnc3RyaW5nJyA/IHVuc2FmZS5yZXBsYWNlKC8mL2csICImYW1wOyIpLnJlcGxhY2UoLzwvZywgIiZsdDsiKS5yZXBsYWNlKC8+L2csICImZ3Q7IikucmVwbGFjZSgvIi9nLCAiJnF1b3Q7IikucmVwbGFjZSgvJy9nLCAiJiMwMzk7IikgOiB1bnNhZmU7DQogICAgICAgIA0KICAgICAgICBjb25zdCBmb3JtYXREYXRlVG9ZTUQgPSAoZGF0ZSkgPT4gew0KICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKGRhdGUpOw0KICAgICAgICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDsNCiAgICAgICAgfTsNCiAgICAgICAgY29uc3QgZm9ybWF0RGF0ZVRvRE1ZID0gKGRhdGVTdHIpID0+IHsNCiAgICAgICAgICAgIGlmICghZGF0ZVN0ciB8fCAhL15cZHs0fS1cZHsyfS1cZHsyfSQvLnRlc3QoZGF0ZVN0cikpIHJldHVybiBkYXRlU3RyIHx8ICdOL0EnOw0KICAgICAgICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVN0ci5zcGxpdCgnLScpOw0KICAgICAgICAgICAgcmV0dXJuIGAke2RheX0vJHttb250aH0vJHt5ZWFyfWA7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyBjb25zdCBnZXRUb2RheURhdGVTdHJpbmcgPSAoKSA9PiBmb3JtYXREYXRlVG9ZTUQobmV3IERhdGUoKSk7IC8vIEVMSU1JTkFETyAoTm8gc2UgdXNhKQ0KDQogICAgICAgIC8vIC0tLSBGVU5DSU9ORVMgREVMIFNJU1RFTUEgREUgQVZJU09TIEVMSU1JTkFEQVMgLS0tDQogICAgICAgIC8vIG9wZW5NYW5kYXRvcnlSZWdzTW9kYWwNCiAgICAgICAgLy8gcmVuZGVyTWFuZGF0b3J5SGlzdG9yeUxpc3QNCiAgICAgICAgLy8gdXBkYXRlU2VsZWN0QWxsTWFuZGF0b3J5Q2hlY2tib3hTdGF0ZQ0KICAgICAgICAvLyByZW5kZXJNYW5kYXRvcnlQZW9wbGVMaXN0DQogICAgICAgIC8vIHNhdmVNYW5kYXRvcnlSZWdzDQogICAgICAgIC8vIGNoZWNrRGFpbHlXYXJuaW5ncw0KICAgICAgICAvLyBzaG93TWlzc2luZ1Blb3BsZUFsZXJ0DQogICAgICAgIC8vIG9wZW5XYXJuaW5nc0FyY2hpdmVNb2RhbA0KICAgICAgICAvLyByZW5kZXJGaWx0ZXJlZFdhcm5pbmdzDQogICAgICAgIC8vIG9wZW5FeGNsdWRlZERheXNNb2RhbA0KICAgICAgICAvLyByZW5kZXJFeGNsdWRlZERheXNDYWxlbmRhcg0KICAgICAgICAvLyBoYW5kbGVFeHBvcnRXYXJuaW5nc1BERg0KICAgICAgICAvLyAtLS0gRklOIERFIEZVTkNJT05FUyBFTElNSU5BREFTIC0tLQ0KDQogICAgICAgIGNvbnN0IG9wZW5HbG9iYWxTdW1tYXJ5TW9kYWwgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBwZXJpb2RTZWxlY3QgPSBkb20uc3VtbWFyeVBlcmlvZEZpbHRlcjsNCiAgICAgICAgICAgIHBlcmlvZFNlbGVjdC5pbm5lckhUTUwgPSAnJzsNCiAgICAgICAgICAgIGlmIChzdGF0ZS5oaXN0b3JpY2FsR2xvYmFsU3VtbWFyeSAmJiBPYmplY3Qua2V5cyhzdGF0ZS5oaXN0b3JpY2FsR2xvYmFsU3VtbWFyeSkubGVuZ3RoID4gMCAmJiBzdGF0ZS5oaXN0b3JpY2FsR2xvYmFsU3VtbWFyeS5UT0RBUyAmJiBzdGF0ZS5oaXN0b3JpY2FsR2xvYmFsU3VtbWFyeS5UT0RBUy50b3RhbEhvdXJzID4gMCkgew0KICAgICAgICAgICAgICAgIHBlcmlvZFNlbGVjdC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImN1cnJlbnQiPlBhcnRpY2nDs24gQWN0dWFsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRvdGFsIj5Ub3RhbCBBY3VtdWxhZG88L29wdGlvbj4NCiAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBwZXJpb2RTZWxlY3QuaW5uZXJIVE1MID0gYDxvcHRpb24gdmFsdWU9InRvdGFsIj5Ub3RhbDwvb3B0aW9uPmA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZW5kZXJHbG9iYWxTdW1tYXJ5TW9kYWwoKTsNCiAgICAgICAgICAgIGRvbS5nbG9iYWxTdW1tYXJ5TW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCBvcGVuUGVyc29uRGF0YU1vZGFsID0gKCkgPT4gew0KICAgICAgICAgICAgcmVuZGVyUGVyc29uRGF0YUxpc3QoKTsNCiAgICAgICAgICAgIGRvbS5wZXJzb25EYXRhRGV0YWlscy5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0iaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtZ3JheS01MDAiPjxwPlNlbGVjY2lvbmUgdW5hIHBlcnNvbmEgZGUgbGEgbGlzdGEgcGFyYSB2ZXIgc3VzIGRhdG9zLjwvcD48L2Rpdj5gOw0KICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IHJlbmRlclBlcnNvbkRhdGFMaXN0ID0gKHNlYXJjaFRlcm0gPSAnJykgPT4gew0KICAgICAgICAgICAgY29uc3QgbG93ZXJTZWFyY2hUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgY29uc3QgcGVvcGxlID0gc3RhdGUudGFibGVzWydQZXJzb25hcyddLmRhdGENCiAgICAgICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5Ob21icmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclNlYXJjaFRlcm0pIHx8IHAuSUQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclNlYXJjaFRlcm0pKQ0KICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLk5vbWJyZS5sb2NhbGVDb21wYXJlKGIuTm9tYnJlKSk7DQoNCiAgICAgICAgICAgIGlmIChwZW9wbGUubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFMaXN0LmlubmVySFRNTCA9ICc8cCBjbGFzcz0idGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIHAtMiI+Tm8gaGF5IGNvaW5jaWRlbmNpYXMuPC9wPic7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb20ucGVyc29uRGF0YUxpc3QuaW5uZXJIVE1MID0gcGVvcGxlLm1hcChwZXJzb24gPT4gYA0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InctZnVsbCB0ZXh0LWxlZnQgcC0yIHJvdW5kZWQtbWQgaG92ZXI6YmctaW5kaWdvLTEwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTMwMCBwZXJzb24tZGF0YS1pdGVtLWJ0biIgZGF0YS1pZD0iJHtlc2NhcGVIdG1sKHBlcnNvbi5JRCl9Ij4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQgdGV4dC1zbSB0ZXh0LWdyYXktODAwIj4ke2VzY2FwZUh0bWwocGVyc29uLk5vbWJyZSl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYmxvY2sgdGV4dC14cyB0ZXh0LWdyYXktNjAwIj4ke2VzY2FwZUh0bWwocGVyc29uLklEKX08L3NwYW4+DQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICBgKS5qb2luKCcnKTsNCg0KICAgICAgICAgICAgZG9tLnBlcnNvbkRhdGFMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wZXJzb24tZGF0YS1pdGVtLWJ0bicpLmZvckVhY2goYnRuID0+IHsNCiAgICAgICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlkOw0KICAgICAgICAgICAgICAgICAgICBkb20ucGVyc29uRGF0YUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnBlcnNvbi1kYXRhLWl0ZW0tYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnYmctaW5kaWdvLTIwMCcpKTsNCiAgICAgICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLWluZGlnby0yMDAnKTsNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyUGVyc29uRGV0YWlscyhpZCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHJlbmRlclBlcnNvbkRldGFpbHMgPSAocGVyc29uSWQpID0+IHsNCiAgICAgICAgICAgIGRvbS5wZXJzb25EYXRhRGV0YWlscy5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0iaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtZ3JheS01MDAiPjxwPkNhbGN1bGFuZG8gZGF0b3MuLi48L3A+PC9kaXY+YDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNhbGN1bGF0ZVBlcnNvbkRhdGEocGVyc29uSWQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbkluZm8gPSBzdGF0ZS5pZFRvUGVyc29uTWFwW3BlcnNvbklkXSB8fCB7IG5vbWJyZTogJ0Rlc2Nvbm9jaWRvJyB9Ow0KDQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG9zRGF0YSA9IGRhdGEuY29uY2VwdG9zV2l0aEhvdXJzOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnN0IGZhbWlsaWFUb0NvbmNlcHRvTWFwID0ge307DQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb25jZXB0byBpbiBNT05UQUpFUykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhbWlsaWEgb2YgTU9OVEFKRVNbY29uY2VwdG9dKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmYW1pbGlhVG9Db25jZXB0b01hcFtmYW1pbGlhXSA9IGNvbmNlcHRvOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29uY2VwdG9zSHRtbCA9IE9iamVjdC5rZXlzKGNvbmNlcHRvc0RhdGEpLmxlbmd0aCA+IDANCiAgICAgICAgICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhjb25jZXB0b3NEYXRhKS5zb3J0KChhLCBiKSA9PiBhWzBdLmxvY2FsZUNvbXBhcmUoYlswXSkpLm1hcCgoW2ZhbWlsaWEsIGhvdXJzXSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50Q29uY2VwdG8gPSBmYW1pbGlhVG9Db25jZXB0b01hcFtmYW1pbGlhXSB8fCAnQ2F0ZWdvcsOtYSBEZXNjb25vY2lkYSc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IGAke3BhcmVudENvbmNlcHRvfSAoJHtmYW1pbGlhfSlgOw0KDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTEgcHgtMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRleHQtc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LW1vbm8iPiR7ZXNjYXBlSHRtbChsYWJlbCl9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtYmx1ZS04MDAiPiR7KGhvdXJzLkhOICsgaG91cnMuSEUpLnRvRml4ZWQoMil9IGg8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWwtMiI+KEhOOiAke2hvdXJzLkhOLnRvRml4ZWQoMil9LCBIRTogJHtob3Vycy5IRS50b0ZpeGVkKDIpfSk8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpDQogICAgICAgICAgICAgICAgICAgIDogJzxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgaXRhbGljIHAtMiI+U2luIGNvbmNlcHRvcyByZWdpc3RyYWRvcy48L3A+JzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBsZXQgdmFjYXRpb25CYWxhbmNlSHRtbCA9ICcnOw0KICAgICAgICAgICAgICAgIGlmIChkYXRhLmZlY2hhSW5pY2lvICE9PSAnTi9BJykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS52YWNhY2lvbmVzLmJhbGFuY2UgPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFjYXRpb25CYWxhbmNlSHRtbCA9IGA8cCBjbGFzcz0idGV4dC1ncmVlbi03MDAgZm9udC1zZW1pYm9sZCI+QSBsYSBwZXJzb25hIHNlIGxlIGRlYmVuICR7ZGF0YS52YWNhY2lvbmVzLmJhbGFuY2UudG9GaXhlZCgxKX0gZMOtYShzKSBkZSB2YWNhY2lvbmVzLjwvcD5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFjYXRpb25CYWxhbmNlSHRtbCA9IGA8cCBjbGFzcz0idGV4dC1yZWQtNzAwIGZvbnQtc2VtaWJvbGQiPkxhIHBlcnNvbmEgaGEgdG9tYWRvICR7TWF0aC5hYnMoZGF0YS52YWNhY2lvbmVzLmJhbGFuY2UpLnRvRml4ZWQoMSl9IGTDrWEocykgZGUgdmFjYWNpb25lcyBkZSBtw6FzLjwvcD5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhY2F0aW9uQmFsYW5jZUh0bWwgKz0gYDxwIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMSI+Q8OhbGN1bG86ICR7ZGF0YS52YWNhY2lvbmVzLmVhcm5lZC50b0ZpeGVkKDEpfSBnZW5lcmFkb3MgLSAke2RhdGEudmFjYWNpb25lcy50YWtlbi50b0ZpeGVkKDEpfSB0b21hZG9zLjwvcD5gOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHZhY2F0aW9uQmFsYW5jZUh0bWwgPSBgPHAgY2xhc3M9InRleHQtZ3JheS01MDAgaXRhbGljIj5ObyBzZSBwdWVkZSBjYWxjdWxhciBlbCBiYWxhbmNlIGRlIHZhY2FjaW9uZXMgc2luIHVuIHByaW1lciByZWdpc3Ryby48L3A+YDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBpZiAoZGF0YS52YWNhY2lvbmVzLndhcm5pbmcpIHsgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgLy8gICAgIHZhY2F0aW9uQmFsYW5jZUh0bWwgKz0gYDxkaXYgY2xhc3M9Im10LTIgcC0yIGJnLXllbGxvdy0xMDAgYm9yZGVyLWwtNCBib3JkZXIteWVsbG93LTUwMCB0ZXh0LXllbGxvdy03MDAgdGV4dC1zbSI+PHN0cm9uZz5Bdmlzbzo8L3N0cm9uZz48YnI+JHtkYXRhLnZhY2FjaW9uZXMud2FybmluZy5yZXBsYWNlKC9cbi9nLCAnPGJyPicpfTwvZGl2PmA7DQogICAgICAgICAgICAgICAgLy8gfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgYWJzZW50aXNtb0h0bWwgPSBPYmplY3QuZW50cmllcyhkYXRhLmFic2VudGlzbW8pLmZpbHRlcigoW2tleSwgdmFsdWVdKSA9PiB2YWx1ZSA+IDAgJiYga2V5ICE9PSAnVkFDQUNJT05FUycpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc20gZmxleCBqdXN0aWZ5LWJldHdlZW4gcHktMSI+PHNwYW4+JHtrZXl9PC9zcGFuPjxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke3ZhbHVlfSBkw61hKHMpPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgIGApLmpvaW4oJycpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGFza0dyb3Vwc0h0bWwgPSBgDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTQgcHQtNCBib3JkZXItdCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDYgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LW1kIHRleHQtZ3JheS03MDAgbWItMiI+U3Vic2VjY2nDs246IFJlc3VtZW4gcG9yIEdydXBvPC9oNj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWItMiI+U3VtYSB0b3RhbCBkZSBob3JhcyBub3JtYWxlcyB5IGV4dHJhcyBwYXJhIGxvcyBncnVwb3MgZGUgdGFyZWFzLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktMSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhkYXRhLnRhc2tHcm91cFRvdGFscykubWFwKChbZ3JvdXBOYW1lLCBob3Vyc10pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzLkhOID4gMCB8fCBob3Vycy5IRSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgcHktMSBweC0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdGV4dC1zbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7ZXNjYXBlSHRtbChncm91cE5hbWUpfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtODAwIj4keyhob3Vycy5ITiArIGhvdXJzLkhFKS50b0ZpeGVkKDIpfSBoPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC14cyB0ZXh0LWdyYXktNTAwIG1sLTIiPihITjogJHtob3Vycy5ITi50b0ZpeGVkKDIpfSwgSEU6ICR7aG91cnMuSEUudG9GaXhlZCgyKX0pPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2VzSHRtbCA9IE9iamVjdC5rZXlzKGRhdGEudGFza0dyb3VwUGVyY2VudGFnZXMpLmxlbmd0aCA+IDAgPyBgDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTQgcHQtNCBib3JkZXItdCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDYgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LW1kIHRleHQtZ3JheS03MDAgbWItMiI+UG9yY2VudGFqZSBwb3IgQmxvcXVlPC9oNj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMoZGF0YS50YXNrR3JvdXBQZXJjZW50YWdlcykubWFwKChbZ3JvdXBOYW1lLCBwZXJjXSkgPT4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciBwLTIgYmctZ3JheS01MCByb3VuZGVkLWxnIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTYwMCI+JHtncm91cE5hbWV9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby03MDAiPiR7cGVyYy50b0ZpeGVkKDEpfSU8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYCA6ICcnOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY29zdGVIdG1sID0gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSBwLTQgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgdGV4dC1ncmF5LTgwMCBtYi0yIj5Dw6FsY3VsbyBkZSBDb3N0ZTwvaDU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNtIHNwYWNlLXktMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UHJlY2lvIEhOOiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtkYXRhLmNvc3RlLnByZWNpb0hOLnRvRml4ZWQoMil9IOKCrC9oPC9zcGFuPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5QcmVjaW8gSEU6IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIj4ke2RhdGEuY29zdGUucHJlY2lvSEUudG9GaXhlZCgyKX0g4oKsL2g8L3NwYW4+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJvcmRlci10IHB0LTIgbXQtMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LWdyYXktNjAwIj4oJHtkYXRhLmhvcmFzLm5vcm1hbGVzLnRvRml4ZWQoMil9IEhOICogJHtkYXRhLmNvc3RlLnByZWNpb0hOLnRvRml4ZWQoMil9IOKCrCkgKyAoJHtkYXRhLmhvcmFzLmV4dHJhcy50b0ZpeGVkKDIpfSBIRSAqICR7ZGF0YS5jb3N0ZS5wcmVjaW9IRS50b0ZpeGVkKDIpfSDigqwpPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1pbmRpZ28tNzAwIG10LTEiPlRvdGFsOiAke2RhdGEuY29zdGUudG90YWwudG9GaXhlZCgyKX0g4oKsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzSHRtbCA9IGANCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtaW5kaWdvLTgwMCBtYi0xIj4ke2VzY2FwZUh0bWwocGVyc29uSW5mby5ub21icmUpfTwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1ncmF5LTUwMCBtYi0xIj5FbXByZXNhOiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCI+JHtlc2NhcGVIdG1sKHBlcnNvbkluZm8uZW1wcmVzYSB8fCAnTi9BJyl9PC9zcGFuPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LWdyYXktNTAwIG1iLTQiPlByaW1lciByZWdpc3RybzogPHNwYW4gY2xhc3M9ImZvbnQtc2VtaWJvbGQiPiR7ZGF0YS5mZWNoYUluaWNpbyB8fCAnTi9BJ308L3NwYW4+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBzcGFjZS14LTIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImRvd25sb2FkLXBlcnNvbi1zdW1tYXJ5LXhscyIgZGF0YS1wZXJzb24taWQ9IiR7cGVyc29uSWR9IiBjbGFzcz0iYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmVlbi03MDAiPkRlc2NhcmdhciBYTFM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtNCByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtZ3JheS04MDAgbWItMiI+UmVzdW1lbiBkZSBIb3JhczwvaDU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLXgtNCBnYXAteS0xIHRleHQtc20iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtZ3JheS02MDAiPkhvcmFzIE5vcm1hbGVzIChITik6PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9udC1zZW1pYm9sZCB0ZXh0LXJpZ2h0Ij4ke2RhdGEuaG9yYXMubm9ybWFsZXMudG9GaXhlZCgyKX0gaDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWdyYXktNjAwIj5Ib3JhcyBFeHRyYXMgKEhFKTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtcmlnaHQiPiR7ZGF0YS5ob3Jhcy5leHRyYXMudG9GaXhlZCgyKX0gaDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cGVyY2VudGFnZXNIdG1sfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y29zdGVIdG1sfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtNCByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIgbWQ6Y29sLXNwYW4tMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgdGV4dC1ncmF5LTgwMCBtYi0yIj5SZXN1bWVuIGRlIEFic2VudGlzbW88L2g1Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtZ3JheS03MDAgYm9yZGVyLWIgcGItMiBtYi0yIj5CYWxhbmNlIGRlIFZhY2FjaW9uZXM8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt2YWNhdGlvbkJhbGFuY2VIdG1sfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LXNlbWlib2xkIHRleHQtZ3JheS03MDAgYm9yZGVyLWIgcGItMiBtYi0yIG10LTQiPk90cm9zIEFic2VudGlzbW9zPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7YWJzZW50aXNtb0h0bWwgfHwgJzxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgaXRhbGljIHAtMiI+U2luIG90cm9zIGFic2VudGlzbW9zLjwvcD4nfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtNCByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgdGV4dC1ncmF5LTgwMCBtYi0yIj5Ib3JhcyBwb3IgVGFyZWE8L2g1Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktMSI+JHtjb25jZXB0b3NIdG1sfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGFza0dyb3Vwc0h0bWx9DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgICBkb20ucGVyc29uRGF0YURldGFpbHMuaW5uZXJIVE1MID0gZGV0YWlsc0h0bWw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLXBlcnNvbi1zdW1tYXJ5LXhscycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXhwb3J0UGVyc29uU3VtbWFyeVhMUyhlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wZXJzb25JZCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LCAxMCk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBjb25zdCBjYWxjdWxhdGVQZXJzb25EYXRhID0gKHBlcnNvbklkKSA9PiB7DQogICAgICAgICAgICBjb25zdCBwZXJzb25JbmZvID0gc3RhdGUuaWRUb1BlcnNvbk1hcFtwZXJzb25JZF0gfHwge307DQogICAgICAgICAgICBjb25zdCBpbmhlcml0ZWRTdW1tYXJ5ID0gc3RhdGUucGVyc29uRGF0YVN1bW1hcnlbcGVyc29uSWRdIHx8IHsNCiAgICAgICAgICAgICAgICBob3JhczogeyBub3JtYWxlczogMCwgZXh0cmFzOiAwIH0sDQogICAgICAgICAgICAgICAgY29uY2VwdG9zOiB7fSwgZmVjaGFJbmljaW86IG51bGwsIHZhY2FjaW9uZXM6IHsgdG90YWw6IDAgfSwNCiAgICAgICAgICAgICAgICBhYnNlbnRpc21vOiB7fSwNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IHBlcnNvbkRhdGEgPSBzdGF0ZS50YWJsZXNbJ0RhdG9zJ10uZGF0YS5maWx0ZXIocm93ID0+IHJvd1snSUQnXSA9PT0gcGVyc29uSWQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBsZXQgdG90YWxITiA9IGluaGVyaXRlZFN1bW1hcnkuaG9yYXMubm9ybWFsZXM7DQogICAgICAgICAgICBsZXQgdG90YWxIRSA9IGluaGVyaXRlZFN1bW1hcnkuaG9yYXMuZXh0cmFzOw0KICAgICAgICAgICAgY29uc3QgY29uY2VwdG9zID0gaW5oZXJpdGVkU3VtbWFyeS5jb25jZXB0b3MgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGluaGVyaXRlZFN1bW1hcnkuY29uY2VwdG9zKSkgOiB7fTsNCiAgICAgICAgICAgIGxldCBmZWNoYUluaWNpbyA9IGluaGVyaXRlZFN1bW1hcnkuZmVjaGFJbmljaW87DQoNCiAgICAgICAgICAgIGNvbnN0IGFic2VudGlzbW8gPSBpbmhlcml0ZWRTdW1tYXJ5LmFic2VudGlzbW8gPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGluaGVyaXRlZFN1bW1hcnkuYWJzZW50aXNtbykpIDoge307DQoNCiAgICAgICAgICAgIHBlcnNvbkRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGhuID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhOIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGhlID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhFIHx8ICcwJykucmVwbGFjZSgnLCcsICcuJykpOw0KDQogICAgICAgICAgICAgICAgdG90YWxITiArPSBobjsgdG90YWxIRSArPSBoZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAocm93LkZhbWlsaWEgJiYgcm93LkFic2VudGlzbW8gPT09ICctJykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmNlcHRvc1tyb3cuRmFtaWxpYV0pIGNvbmNlcHRvc1tyb3cuRmFtaWxpYV0gPSB7IEhOOiAwLCBIRTogMCB9Ow0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGhuKSkgY29uY2VwdG9zW3Jvdy5GYW1pbGlhXS5ITiArPSBobjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihoZSkpIGNvbmNlcHRvc1tyb3cuRmFtaWxpYV0uSEUgKz0gaGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChyb3cuQWJzZW50aXNtbyAmJiByb3cuQWJzZW50aXNtbyAhPT0gJy0nKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSByb3cuRkVDSEE7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlDb3VudGVkID0gcGVyc29uRGF0YS5maW5kKHIgPT4gci5GRUNIQSA9PT0gZGF0ZUtleSAmJiByLkFic2VudGlzbW8gPT09IHJvdy5BYnNlbnRpc21vICYmIHIub3JpZ2luYWxJbmRleCA8IHJvdy5vcmlnaW5hbEluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5Q291bnRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICBhYnNlbnRpc21vW3Jvdy5BYnNlbnRpc21vXSA9IChhYnNlbnRpc21vW3Jvdy5BYnNlbnRpc21vXSB8fCAwKSArIDE7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAocm93LkZFQ0hBICYmICghZmVjaGFJbmljaW8gfHwgcm93LkZFQ0hBIDwgZmVjaGFJbmljaW8pKSB7DQogICAgICAgICAgICAgICAgICAgIGZlY2hhSW5pY2lvID0gcm93LkZFQ0hBOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBsZXQgdmFjYXRpb25JbmZvID0geyBiYWxhbmNlOiAwLCBlYXJuZWQ6IDAsIHRha2VuOiAwLCB3YXJuaW5nOiAnJyB9Ow0KICAgICAgICAgICAgaWYgKGZlY2hhSW5pY2lvKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoZmVjaGFJbmljaW8gKyAnVDAwOjAwOjAwJyk7DQogICAgICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGxldCBtb250aHNEaWZmID0gKHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBzdGFydERhdGUuZ2V0RnVsbFllYXIoKSkgKiAxMjsNCiAgICAgICAgICAgICAgICBtb250aHNEaWZmIC09IHN0YXJ0RGF0ZS5nZXRNb250aCgpOw0KICAgICAgICAgICAgICAgIG1vbnRoc0RpZmYgKz0gdG9kYXkuZ2V0TW9udGgoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBlYXJuZWREYXlzID0gKG1vbnRoc0RpZmYgPCAwID8gMCA6IG1vbnRoc0RpZmYgKyAxKSAqIDI7IC8vICsxIHRvIGluY2x1ZGUgdGhlIGN1cnJlbnQgbW9udGgNCiAgICAgICAgICAgICAgICB2YWNhdGlvbkluZm8uZWFybmVkID0gZWFybmVkRGF5czsNCg0KICAgICAgICAgICAgICAgIGxldCB0YWtlbkRheXMgPSAwOw0KICAgICAgICAgICAgICAgIC8vIGxldCB3YXJuaW5ncyA9IFtdOyAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBpbmhlcml0ZWRWYWNhdGlvbnMgPSBpbmhlcml0ZWRTdW1tYXJ5LmFic2VudGlzbW8/LlZBQ0FDSU9ORVMgfHwgMDsNCiAgICAgICAgICAgICAgICB0YWtlbkRheXMgKz0gaW5oZXJpdGVkVmFjYXRpb25zOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBlcmlvZFZhY2F0aW9uRGF0ZXMgPSBuZXcgU2V0KCk7DQogICAgICAgICAgICAgICAgcGVyc29uRGF0YS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3cuQWJzZW50aXNtbyA9PT0gJ1ZBQ0FDSU9ORVMnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGVyaW9kVmFjYXRpb25EYXRlcy5hZGQocm93LkZFQ0hBKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY3VycmVudFBlcmlvZFZhY2F0aW9uRGF0ZXMuZm9yRWFjaChkYXRlU3RyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHN0YXRlLmV4Y2x1ZGVkRGF5c1tkYXRlU3RyXSkgeyAvLyBFTElNSU5BRE8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHdhcm5pbmdzLnB1c2goYFNlIGhhIGlnbm9yYWRvIHVuIGTDrWEgZGUgdmFjYWNpb25lcyBpbXB1dGFkbyBlbiB1biBkw61hIGV4Y2x1aWRvOiAke2Zvcm1hdERhdGVUb0RNWShkYXRlU3RyKX0uYCk7DQogICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vICAgICB0YWtlbkRheXMrKzsNCiAgICAgICAgICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgICAgICAgICB0YWtlbkRheXMrKzsgLy8gTMOzZ2ljYSBzaW1wbGlmaWNhZGENCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHZhY2F0aW9uSW5mby50YWtlbiA9IHRha2VuRGF5czsNCiAgICAgICAgICAgICAgICB2YWNhdGlvbkluZm8uYmFsYW5jZSA9IGVhcm5lZERheXMgLSB0YWtlbkRheXM7DQogICAgICAgICAgICAgICAgLy8gaWYgKHdhcm5pbmdzLmxlbmd0aCA+IDApIHsgLy8gRUxJTUlOQURPDQogICAgICAgICAgICAgICAgLy8gICAgIHZhY2F0aW9uSW5mby53YXJuaW5nID0gd2FybmluZ3Muam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICAvLyB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHRhc2tHcm91cFRvdGFscyA9IHt9Ow0KICAgICAgICAgICAgT2JqZWN0LmtleXMoVEFSRUFfR1JPVVBTKS5mb3JFYWNoKGcgPT4gdGFza0dyb3VwVG90YWxzW2ddID0ge0hOOjAsIEhFOjB9KTsNCg0KICAgICAgICAgICAgZm9yIChjb25zdCBmYW1pbGlhIGluIGNvbmNlcHRvcykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gY29uY2VwdG9zW2ZhbWlsaWFdOw0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZ3JvdXBOYW1lIGluIFRBUkVBX0dST1VQUykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoVEFSRUFfR1JPVVBTW2dyb3VwTmFtZV0uaW5jbHVkZXMoZmFtaWxpYSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tHcm91cFRvdGFsc1tncm91cE5hbWVdLkhOICs9IGhvdXJzLkhOOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGFza0dyb3VwVG90YWxzW2dyb3VwTmFtZV0uSEUgKz0gaG91cnMuSEU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHRhc2tHcm91cFBlcmNlbnRhZ2VzID0ge307DQogICAgICAgICAgICBjb25zdCBwZXJzb25Ub3RhbEhvdXJzID0gdG90YWxITiArIHRvdGFsSEU7DQogICAgICAgICAgICBpZiAocGVyc29uVG90YWxIb3VycyA+IDApIHsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdyb3VwIGluIHRhc2tHcm91cFRvdGFscykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cFRvdGFsID0gdGFza0dyb3VwVG90YWxzW2dyb3VwXS5ITiArIHRhc2tHcm91cFRvdGFsc1tncm91cF0uSEU7DQogICAgICAgICAgICAgICAgICAgIGlmIChncm91cFRvdGFsID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGFza0dyb3VwUGVyY2VudGFnZXNbZ3JvdXBdID0gKGdyb3VwVG90YWwgLyBwZXJzb25Ub3RhbEhvdXJzKSAqIDEwMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgY29zdGUgPSB7DQogICAgICAgICAgICAgICAgcHJlY2lvSE46IHBlcnNvbkluZm8ucHJlY2lvSE4gfHwgMCwNCiAgICAgICAgICAgICAgICBwcmVjaW9IRTogcGVyc29uSW5mby5wcmVjaW9IRSB8fCAwLA0KICAgICAgICAgICAgICAgIHRvdGFsOiAodG90YWxITiAqIChwZXJzb25JbmZvLnByZWNpb0hOIHx8IDApKSArICh0b3RhbEhFICogKHBlcnNvbkluZm8ucHJlY2lvSEUgfHwgMCkpDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIGZlY2hhSW5pY2lvOiBmZWNoYUluaWNpbyA/IG5ldyBEYXRlKGZlY2hhSW5pY2lvICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnKSA6ICdOL0EnLA0KICAgICAgICAgICAgICAgIGhvcmFzOiB7IG5vcm1hbGVzOiB0b3RhbEhOLCBleHRyYXM6IHRvdGFsSEUgfSwNCiAgICAgICAgICAgICAgICBjb25jZXB0b3NXaXRoSG91cnM6IGNvbmNlcHRvcywNCiAgICAgICAgICAgICAgICB2YWNhY2lvbmVzOiB2YWNhdGlvbkluZm8sDQogICAgICAgICAgICAgICAgYWJzZW50aXNtbzogYWJzZW50aXNtbywNCiAgICAgICAgICAgICAgICB0YXNrR3JvdXBUb3RhbHM6IHRhc2tHcm91cFRvdGFscywNCiAgICAgICAgICAgICAgICB0YXNrR3JvdXBQZXJjZW50YWdlczogdGFza0dyb3VwUGVyY2VudGFnZXMsDQogICAgICAgICAgICAgICAgY29zdGU6IGNvc3RlDQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgY29uc3QgZ2VuZXJhdGVGdWxsUGVyc29uRGF0YVN1bW1hcnkgPSAoZGF0YVNvdXJjZSA9IG51bGwpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFUb1Byb2Nlc3MgPSBkYXRhU291cmNlIHx8IHN0YXRlLnRhYmxlc1snRGF0b3MnXS5kYXRhOw0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IHt9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5mb3JFYWNoKHBlcnNvbiA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgcGVyc29uSWQgPSBwZXJzb25bJ0lEJ107DQogICAgICAgICAgICAgICAgc3VtbWFyeVtwZXJzb25JZF0gPSB7DQogICAgICAgICAgICAgICAgICAgIGhvcmFzOiB7IG5vcm1hbGVzOiAwLCBleHRyYXM6IDAgfSwgY29uY2VwdG9zOiB7fSwgZmVjaGFJbmljaW86IG51bGwsDQogICAgICAgICAgICAgICAgICAgIGFic2VudGlzbW86IHt9LA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgY291bnRlZEFic2VuY2VzID0ge307DQoNCiAgICAgICAgICAgIGRhdGFUb1Byb2Nlc3MuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbklkID0gcm93WydJRCddOw0KICAgICAgICAgICAgICAgIGlmICghc3VtbWFyeVtwZXJzb25JZF0pIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlQZXJzb24gPSBzdW1tYXJ5W3BlcnNvbklkXTsNCiAgICAgICAgICAgICAgICBjb25zdCBobiA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBoZSA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5IRSB8fCAnMCcpLnJlcGxhY2UoJywnLCAnLicpKTsNCg0KICAgICAgICAgICAgICAgIHN1bW1hcnlQZXJzb24uaG9yYXMubm9ybWFsZXMgKz0gaG47DQogICAgICAgICAgICAgICAgc3VtbWFyeVBlcnNvbi5ob3Jhcy5leHRyYXMgKz0gaGU7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHJvdy5GYW1pbGlhICYmIHJvdy5BYnNlbnRpc21vID09PSAnLScpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5UGVyc29uLmNvbmNlcHRvc1tyb3cuRmFtaWxpYV0pIHN1bW1hcnlQZXJzb24uY29uY2VwdG9zW3Jvdy5GYW1pbGlhXSA9IHsgSE46IDAsIEhFOiAwIH07DQogICAgICAgICAgICAgICAgICAgIGlmKCFpc05hTihobikpIHN1bW1hcnlQZXJzb24uY29uY2VwdG9zW3Jvdy5GYW1pbGlhXS5ITiArPSBobjsNCiAgICAgICAgICAgICAgICAgICAgaWYoIWlzTmFOKGhlKSkgc3VtbWFyeVBlcnNvbi5jb25jZXB0b3Nbcm93LkZhbWlsaWFdLkhFICs9IGhlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAocm93LkFic2VudGlzbW8gJiYgcm93LkFic2VudGlzbW8gIT09ICctJykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtwZXJzb25JZH0tJHtyb3cuRkVDSEF9LSR7cm93LkFic2VudGlzbW99YDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb3VudGVkQWJzZW5jZXNba2V5XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeVBlcnNvbi5hYnNlbnRpc21vW3Jvdy5BYnNlbnRpc21vXSA9IChzdW1tYXJ5UGVyc29uLmFic2VudGlzbW9bcm93LkFic2VudGlzbW9dIHx8IDApICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZWRBYnNlbmNlc1trZXldID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChyb3cuRkVDSEEgJiYgKCFzdW1tYXJ5UGVyc29uLmZlY2hhSW5pY2lvIHx8IHJvdy5GRUNIQSA8IHN1bW1hcnlQZXJzb24uZmVjaGFJbmljaW8pKSB7DQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnlQZXJzb24uZmVjaGFJbmljaW8gPSByb3cuRkVDSEE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiBzdW1tYXJ5Ow0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGhhbmRsZUV4cG9ydFBlcnNvblN1bW1hcnlYTFMgPSAocGVyc29uSWQpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYWxjdWxhdGVQZXJzb25EYXRhKHBlcnNvbklkKTsNCiAgICAgICAgICAgIGNvbnN0IHBlcnNvbkluZm8gPSBzdGF0ZS5pZFRvUGVyc29uTWFwW3BlcnNvbklkXSB8fCB7IG5vbWJyZTogJ0Rlc2Nvbm9jaWRvJywgcHVlc3RvOiAnRGVzY29ub2NpZG8nLCBlbXByZXNhOiAnTi9BJyB9Ow0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgcmVzdW1lbl8ke3BlcnNvbkluZm8ubm9tYnJlLnJlcGxhY2UoLyAvZywgJ18nKX0ueGxzeGA7DQoNCiAgICAgICAgICAgIGNvbnN0IHdiID0gWExTWC51dGlscy5ib29rX25ldygpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBzdW1tYXJ5RGF0YSA9IFsNCiAgICAgICAgICAgICAgICBbIlJlc3VtZW4gcGFyYToiLCBwZXJzb25JbmZvLm5vbWJyZV0sDQogICAgICAgICAgICAgICAgWyJJRDoiLCBwZXJzb25JZF0sDQogICAgICAgICAgICAgICAgWyJQdWVzdG86IiwgcGVyc29uSW5mby5wdWVzdG9dLA0KICAgICAgICAgICAgICAgIFsiRW1wcmVzYToiLCBwZXJzb25JbmZvLmVtcHJlc2FdLA0KICAgICAgICAgICAgICAgIFsiUHJpbWVyIFJlZ2lzdHJvOiIsIGRhdGEuZmVjaGFJbmljaW9dLA0KICAgICAgICAgICAgICAgIFtdLA0KICAgICAgICAgICAgICAgIFsiQ09OQ0VQVE8iLCAiVkFMT1IiLCAiREVUQUxMRSJdLA0KICAgICAgICAgICAgICAgIFsiSG9yYXMgTm9ybWFsZXMgKEhOKSIsIGRhdGEuaG9yYXMubm9ybWFsZXMudG9GaXhlZCgyKSwgImgiXSwNCiAgICAgICAgICAgICAgICBbIkhvcmFzIEV4dHJhcyAoSEUpIiwgZGF0YS5ob3Jhcy5leHRyYXMudG9GaXhlZCgyKSwgImgiXSwNCiAgICAgICAgICAgICAgICBbXSwNCiAgICAgICAgICAgICAgICBbIkNvc3RlIFRvdGFsIiwgZGF0YS5jb3N0ZS50b3RhbC50b0ZpeGVkKDIpLCAi4oKsIl0sDQogICAgICAgICAgICAgICAgWyJEZXRhbGxlIENvc3RlIiwgYCgke2RhdGEuaG9yYXMubm9ybWFsZXMudG9GaXhlZCgyKX0gKiAke2RhdGEuY29zdGUucHJlY2lvSE4udG9GaXhlZCgyKX3igqwpICsgKCR7ZGF0YS5ob3Jhcy5leHRyYXMudG9GaXhlZCgyKX0gKiAke2RhdGEuY29zdGUucHJlY2lvSEUudG9GaXhlZCgyKX3igqwpYF0sDQogICAgICAgICAgICAgICAgW10sDQogICAgICAgICAgICAgICAgWyJCYWxhbmNlIFZhY2FjaW9uZXMiLCBkYXRhLnZhY2FjaW9uZXMuYmFsYW5jZS50b0ZpeGVkKDEpLCAiZMOtYXMiXSwNCiAgICAgICAgICAgICAgICBbIkRldGFsbGUgVmFjYWNpb25lcyIsIGAke2RhdGEudmFjYWNpb25lcy5lYXJuZWQudG9GaXhlZCgxKX0gZ2VuZXJhZG9zIC0gJHtkYXRhLnZhY2FjaW9uZXMudGFrZW4udG9GaXhlZCgxKX0gdG9tYWRvc2BdLA0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YS5hYnNlbnRpc21vKS5maWx0ZXIoKFtrZXksIHZhbHVlXSkgPT4ga2V5ICE9PSAnVkFDQUNJT05FUycgJiYgdmFsdWUgPiAwKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHsNCiAgICAgICAgICAgICAgICBzdW1tYXJ5RGF0YS5wdXNoKFtgQWJzZW50aXNtbzogJHtrZXl9YCwgdmFsdWUsICJkw61hcyJdKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCB3c19zdW1tYXJ5ID0gWExTWC51dGlscy5hb2FfdG9fc2hlZXQoc3VtbWFyeURhdGEpOw0KICAgICAgICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3Nfc3VtbWFyeSwgIlJlc3VtZW4gR2VuZXJhbCIpOw0KDQogICAgICAgICAgICBjb25zdCB0YXNrRGF0YSA9IFtbIkNvbmNlcHRvIiwgIkZhbWlsaWEvVGFyZWEiLCAiSG9yYXMgTm9ybWFsZXMiLCAiSG9yYXMgRXh0cmFzIiwgIlRvdGFsIEhvcmFzIl1dOw0KICAgICAgICAgICAgY29uc3QgZmFtaWxpYVRvQ29uY2VwdG9NYXAgPSB7fTsNCiAgICAgICAgICAgIGZvciAoY29uc3QgY29uY2VwdG8gaW4gTU9OVEFKRVMpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhbWlsaWEgb2YgTU9OVEFKRVNbY29uY2VwdG9dKSB7IGZhbWlsaWFUb0NvbmNlcHRvTWFwW2ZhbWlsaWFdID0gY29uY2VwdG87IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEuY29uY2VwdG9zV2l0aEhvdXJzKS5zb3J0KChhLGIpID0+IGFbMF0ubG9jYWxlQ29tcGFyZShiWzBdKSkuZm9yRWFjaCgoW2ZhbWlsaWEsIGhvdXJzXSkgPT4gew0KICAgICAgICAgICAgICAgIHRhc2tEYXRhLnB1c2goWw0KICAgICAgICAgICAgICAgICAgICBmYW1pbGlhVG9Db25jZXB0b01hcFtmYW1pbGlhXSB8fCAnTi9BJywNCiAgICAgICAgICAgICAgICAgICAgZmFtaWxpYSwNCiAgICAgICAgICAgICAgICAgICAgaG91cnMuSE4udG9GaXhlZCgyKSwNCiAgICAgICAgICAgICAgICAgICAgaG91cnMuSEUudG9GaXhlZCgyKSwNCiAgICAgICAgICAgICAgICAgICAgKGhvdXJzLkhOICsgaG91cnMuSEUpLnRvRml4ZWQoMikNCiAgICAgICAgICAgICAgICBdKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgY29uc3Qgd3NfdGFza3MgPSBYTFNYLnV0aWxzLmFvYV90b19zaGVldCh0YXNrRGF0YSk7DQogICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCB3c190YXNrcywgIkhvcmFzIHBvciBUYXJlYSIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBzdWJzZWNjaW9uRGF0YSA9IFtbIlN1YnNlY2Npw7NuIiwgIkhvcmFzIE5vcm1hbGVzIiwgIkhvcmFzIEV4dHJhcyIsICJUb3RhbCBIb3JhcyJdXTsNCiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEudGFza0dyb3VwVG90YWxzKS5mb3JFYWNoKChbZ3JvdXAsIGhvdXJzXSkgPT4gew0KICAgICAgICAgICAgICAgICBpZiAoaG91cnMuSE4gPiAwIHx8IGhvdXJzLkhFID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBzdWJzZWNjaW9uRGF0YS5wdXNoKFsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLA0KICAgICAgICAgICAgICAgICAgICAgICAgaG91cnMuSE4udG9GaXhlZCgyKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzLkhFLnRvRml4ZWQoMiksDQogICAgICAgICAgICAgICAgICAgICAgICAoaG91cnMuSE4gKyBob3Vycy5IRSkudG9GaXhlZCgyKQ0KICAgICAgICAgICAgICAgICAgICBdKTsNCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjb25zdCB3c19ncm91cHMgPSBYTFNYLnV0aWxzLmFvYV90b19zaGVldChzdWJzZWNjaW9uRGF0YSk7DQogICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCB3c19ncm91cHMsICJIb3JhcyBwb3IgU3Vic2VjY2nDs24iKTsNCg0KICAgICAgICAgICAgWExTWC53cml0ZUZpbGUod2IsIGZpbGVOYW1lKTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IGhhbmRsZUV4cG9ydEJ5UGVyc29uWExTID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydC1wZXJzb24tc3RhcnQtZGF0ZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnQtcGVyc29uLWVuZC1kYXRlJykudmFsdWU7DQoNCiAgICAgICAgICAgIGlmICghc3RhcnREYXRlIHx8ICFlbmREYXRlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBvciBmYXZvciwgc2VsZWNjaW9uZSB1biBpbnRlcnZhbG8gZGUgZmVjaGFzLiIpOyByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc3RhcnREYXRlID4gZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJMYSBmZWNoYSBkZSBpbmljaW8gbm8gcHVlZGUgc2VyIHBvc3RlcmlvciBhIGxhIGZlY2hhIGRlIGZpbi4iKTsgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBNT0RJRklDQUNJw5NOIDM6IFJlZm9yemFyIGVsIGZpbHRybyBwb3IgZmVjaGFzDQogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSBzdGF0ZS50YWJsZXMuRGF0b3MuZGF0YS5maWx0ZXIocm93ID0+IHJvdy5GRUNIQSAmJiByb3cuRkVDSEEgPj0gc3RhcnREYXRlICYmIHJvdy5GRUNIQSA8PSBlbmREYXRlKTsNCg0KICAgICAgICAgICAgaWYgKGZpbHRlcmVkRGF0YS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gaGF5IGRhdG9zIGVuIGVsIGludGVydmFsbyBzZWxlY2Npb25hZG8gcGFyYSBleHBvcnRhci4iKTsgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGByZXN1bWVuX3Bvcl90cmFiYWphZG9yXyR7c3RhcnREYXRlfV9hXyR7ZW5kRGF0ZX0ueGxzeGA7DQogICAgICAgICAgICBnZW5lcmF0ZVBpdm90ZWRTdW1tYXJ5RXhjZWwoZmlsdGVyZWREYXRhLCBmaWxlTmFtZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNsb3NlTW9kYWwoZG9tLmV4cG9ydEJ5UGVyc29uTW9kYWwpOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgLy8gY29uc3QgaGFuZGxlRXhwb3J0V2FybmluZ3NQREYgPSAoKSA9PiB7IC4uLiB9OyAvLyBFTElNSU5BRE8NCg0KICAgICAgICBjb25zdCBwb3B1bGF0ZVBlcnNvbkZvcm1Gb3JFZGl0ID0gKGluZGV4KSA9PiB7DQogICAgICAgICAgICBjb25zdCBmb3JtID0gZG9tLmFkZFBlcnNvbmFGb3JtOw0KICAgICAgICAgICAgY29uc3QgcGVyc29uID0gc3RhdGUudGFibGVzWydQZXJzb25hcyddLmRhdGFbaW5kZXhdOw0KDQogICAgICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLW5vbWJyZScpLnZhbHVlID0gcGVyc29uLk5vbWJyZTsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtcHVlc3RvJykudmFsdWUgPSBwZXJzb24uUHVlc3RvOw0KICAgICAgICAgICAgZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1lbXByZXNhJykudmFsdWUgPSBwZXJzb24uRW1wcmVzYTsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtaWQnKS52YWx1ZSA9IHBlcnNvbi5JRDsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtcHJlY2lvLWhuJykudmFsdWUgPSBwZXJzb24uUHJlY2lvSE4gfHwgMDsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtcHJlY2lvLWhlJykudmFsdWUgPSBwZXJzb24uUHJlY2lvSEUgfHwgMDsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtc2luLWlkJykuY2hlY2tlZCA9IHBlcnNvbi5ub01vc3RyYXJJZCB8fCBmYWxzZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gLS0tIE1PRElGSUNBQ0nDk04gU09MSUNJVEFEQSAtLS0NCiAgICAgICAgICAgIC8vIFNlIHBlcm1pdGUgZWRpdGFyIHNpZW1wcmUgZWwgSUQgeSBsYSBvcGNpw7NuICJTaW4gSUQiDQogICAgICAgICAgICBjb25zdCBpZElucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1pZCcpOw0KICAgICAgICAgICAgY29uc3Qgc2luSWRDaGVja2JveCA9IGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtc2luLWlkJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNpbklkQ2hlY2tib3guZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIGlkSW5wdXQuZGlzYWJsZWQgPSBzaW5JZENoZWNrYm94LmNoZWNrZWQ7DQogICAgICAgICAgICAvLyAtLS0gRklOIERFIExBIE1PRElGSUNBQ0nDk04gLS0tDQoNCiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdEJ0biA9IGZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9InN1Ym1pdCJdJyk7DQogICAgICAgICAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSAnR3VhcmRhciBDYW1iaW9zJzsNCiAgICAgICAgICAgIHN1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ibHVlLTYwMCcsICdob3ZlcjpiZy1ibHVlLTcwMCcpOw0KICAgICAgICAgICAgc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQoJ2JnLWdyZWVuLTYwMCcsICdob3ZlcjpiZy1ncmVlbi03MDAnKTsNCg0KICAgICAgICAgICAgZm9ybS5kYXRhc2V0LmVkaXRJbmRleCA9IGluZGV4Ow0KDQogICAgICAgICAgICBpZiAoIWZvcm0ucXVlcnlTZWxlY3RvcignI2NhbmNlbC1lZGl0LXBlcnNvbmEtYnRuJykpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsNCiAgICAgICAgICAgICAgICBjYW5jZWxCdG4udHlwZSA9ICdidXR0b24nOw0KICAgICAgICAgICAgICAgIGNhbmNlbEJ0bi5pZCA9ICdjYW5jZWwtZWRpdC1wZXJzb25hLWJ0bic7DQogICAgICAgICAgICAgICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gJ0NhbmNlbGFyIEVkaWNpw7NuJzsNCiAgICAgICAgICAgICAgICBjYW5jZWxCdG4uY2xhc3NOYW1lID0gJ3ctZnVsbCBiZy1ncmF5LTUwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS02MDAgbXQtMic7DQogICAgICAgICAgICAgICAgY2FuY2VsQnRuLm9uY2xpY2sgPSByZXNldFBlcnNvbkZvcm07DQogICAgICAgICAgICAgICAgc3VibWl0QnRuLmFmdGVyKGNhbmNlbEJ0bik7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgcmVzZXRQZXJzb25Gb3JtID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgZm9ybSA9IGRvbS5hZGRQZXJzb25hRm9ybTsNCiAgICAgICAgICAgIGZvcm0ucmVzZXQoKTsNCiAgICAgICAgICAgIGRlbGV0ZSBmb3JtLmRhdGFzZXQuZWRpdEluZGV4Ow0KDQogICAgICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLWlkJykuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtc2luLWlkJykuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtaWQnKS5wbGFjZWhvbGRlciA9ICdJRCBkZSBsYSBwZXJzb25hJzsNCiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtaWQnKS5yZXF1aXJlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdEJ0biA9IGZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9InN1Ym1pdCJdJyk7DQogICAgICAgICAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSAnQcOxYWRpciBQZXJzb25hJzsNCiAgICAgICAgICAgIHN1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmVlbi02MDAnLCAnaG92ZXI6YmctZ3JlZW4tNzAwJyk7DQogICAgICAgICAgICBzdWJtaXRCdG4uY2xhc3NMaXN0LmFkZCgnYmctYmx1ZS02MDAnLCAnaG92ZXI6YmctYmx1ZS03MDAnKTsNCg0KICAgICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLWVkaXQtcGVyc29uYS1idG4nKTsNCiAgICAgICAgICAgIGlmIChjYW5jZWxCdG4pIHsNCiAgICAgICAgICAgICAgICBjYW5jZWxCdG4ucmVtb3ZlKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgaW5pdCA9ICgpID0+IHsNCiAgICAgICAgICAgIGRvbS5tb2RpZnlNYXN0ZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1vZGlmeU1hc3RlcnNNb2RhbCk7DQogICAgICAgICAgICBkb20uY2xvc2VNb2RpZnlNYXN0ZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIHJlc2V0UGVyc29uRm9ybSgpOw0KICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoZG9tLm1vZGlmeU1hc3RlcnNNb2RhbCk7DQogICAgICAgICAgICAgICAgcmVuZGVyKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLmFkZFBlcnNvbmFGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLXNpbi1pZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaWRJbnB1dCA9IGRvbS5hZGRQZXJzb25hRm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1pZCcpOw0KICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkKSB7DQogICAgICAgICAgICAgICAgICAgIGlkSW5wdXQucmVxdWlyZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgaWRJbnB1dC5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGlkSW5wdXQudmFsdWUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgaWRJbnB1dC5wbGFjZWhvbGRlciA9ICdTZSBnZW5lcmFyw6EgYXV0b23DoXRpY2FtZW50ZSc7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWRJbnB1dC5yZXF1aXJlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGlkSW5wdXQuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgaWRJbnB1dC5wbGFjZWhvbGRlciA9ICdJRCBkZSBsYSBwZXJzb25hJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9tLmFkZFBlcnNvbmFGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBlLnRhcmdldDsNCiAgICAgICAgICAgICAgICBjb25zdCBlZGl0SW5kZXggPSBmb3JtLmRhdGFzZXQuZWRpdEluZGV4Ow0KDQogICAgICAgICAgICAgICAgaWYgKGVkaXRJbmRleCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIE1PRElGSUNBQ0nDk04gMjogTMOzZ2ljYSBwYXJhIGFjdHVhbGl6YXIgSUQNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkUGVyc29uRGF0YSA9IHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhW2VkaXRJbmRleF07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZElkID0gb2xkUGVyc29uRGF0YS5JRDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2luSWRDaGVja2VkID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1zaW4taWQnKS5jaGVja2VkOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SWQ7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNpbklkQ2hlY2tlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgc2UgbWFyY2EgIlNpbiBJRCIsIHkgZWwgSUQgYW50ZXJpb3Igbm8gZXJhIGF1dG9nZW5lcmFkbywgc2UgZ2VuZXJhIHVubyBudWV2by4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIHlhIGVyYSBhdXRvZ2VuZXJhZG8sIHNlIG1hbnRpZW5lIHBhcmEgY29uc2lzdGVuY2lhLg0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWQgPSBvbGRQZXJzb25EYXRhLm5vTW9zdHJhcklkID8gb2xkSWQgOiBgU0lOLUlELSR7RGF0ZS5ub3coKX1gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLWlkJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTaSBsYSBvcGNpw7NuICdTaW4gSUQnIG5vIGVzdMOhIG1hcmNhZGEsIGVsIGNhbXBvIElEIG5vIHB1ZWRlIGVzdGFyIHZhY8Otby4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGFyIHF1ZSBlbCBudWV2byBJRCBubyBleGlzdGEgeWEgKHNpIGhhIGNhbWJpYWRvKQ0KICAgICAgICAgICAgICAgICAgICBpZiAobmV3SWQgIT09IG9sZElkICYmIHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhLnNvbWUoKHAsIGkpID0+IHAuSUQgPT09IG5ld0lkICYmIGkgIT0gZWRpdEluZGV4KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEVsIG51ZXZvIElEICIke25ld0lkfSIgeWEgZXhpc3RlIHBhcmEgb3RyYSBwZXJzb25hLiBQb3IgZmF2b3IsIGVsaWphIG90cm8uYCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkUGVyc29uID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IG5ld0lkLA0KICAgICAgICAgICAgICAgICAgICAgICAgTm9tYnJlOiBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLW5vbWJyZScpLnZhbHVlLnRyaW0oKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFB1ZXN0bzogZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1wdWVzdG8nKS52YWx1ZS50cmltKCksDQogICAgICAgICAgICAgICAgICAgICAgICBFbXByZXNhOiBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLWVtcHJlc2EnKS52YWx1ZS50cmltKCksDQogICAgICAgICAgICAgICAgICAgICAgICBQcmVjaW9ITjogZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1wcmVjaW8taG4nKS52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFByZWNpb0hFOiBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLXByZWNpby1oZScpLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgbm9Nb3N0cmFySWQ6IHNpbklkQ2hlY2tlZA0KICAgICAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgICAgIHN0YXRlLnRhYmxlc1snUGVyc29uYXMnXS5kYXRhW2VkaXRJbmRleF0gPSB1cGRhdGVkUGVyc29uOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gU2kgZWwgSUQgaGEgY2FtYmlhZG8sIGFjdHVhbGl6YXIgdG9kb3MgbG9zIHJlZ2lzdHJvcyBkZSBkYXRvcyBhc29jaWFkb3MNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0lkICE9PSBvbGRJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudGFibGVzWydEYXRvcyddLmRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuSUQgPT09IG9sZElkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5JRCA9IG5ld0lkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBzaWVtcHJlIGxvcyBkYXRvcyBkZSBsYSBwZXJzb25hIGVuIGxhIHRhYmxhIGRlIGRhdG9zDQogICAgICAgICAgICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ0RhdG9zJ10uZGF0YS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93LklEID09PSBuZXdJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5Ob21icmUgPSB1cGRhdGVkUGVyc29uLk5vbWJyZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuUHVlc3RvID0gdXBkYXRlZFBlcnNvbi5QdWVzdG87DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LkVtcHJlc2EgPSB1cGRhdGVkUGVyc29uLkVtcHJlc2E7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQoNCiAgICAgICAgICAgICAgICAgICAgbWFya0RpcnR5KCk7DQogICAgICAgICAgICAgICAgICAgIGJ1aWxkUGVyc29uTWFwcygpOw0KICAgICAgICAgICAgICAgICAgICByZXNldFBlcnNvbkZvcm0oKTsNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsKCk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdQZXJzb25hIGFjdHVhbGl6YWRhIGNvcnJlY3RhbWVudGUuJyk7DQoNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzaW5JZCA9IGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtc2luLWlkJykuY2hlY2tlZDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1pZCcpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChzaW5JZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBgU0lOLUlELSR7RGF0ZS5ub3coKX1gOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1ub21icmUnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1ZXN0byA9IGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtcHVlc3RvJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbXByZXNhID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1lbXByZXNhJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVjaW9ITiA9IGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtcHJlY2lvLWhuJykudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZWNpb0hFID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcGVyc29uYS1wcmVjaW8taGUnKS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChpZCAmJiBub21icmUgJiYgcHVlc3RvICYmIGVtcHJlc2EpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5zb21lKHAgPT4gcC5JRCA9PT0gaWQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYExhIElEICIke2lkfSIgeWEgZXhpc3RlLmApOyByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS50YWJsZXNbJ1BlcnNvbmFzJ10uZGF0YS5wdXNoKHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0lEJzogaWQsICdOb21icmUnOiBub21icmUsICdQdWVzdG8nOiBwdWVzdG8sIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFbXByZXNhJzogZW1wcmVzYSwgJ1ByZWNpb0hOJzogcHJlY2lvSE4sICdQcmVjaW9IRSc6IHByZWNpb0hFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdub01vc3RyYXJJZCc6IHNpbklkDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtEaXJ0eSgpOyBidWlsZFBlcnNvbk1hcHMoKTsgcmVuZGVyTW9kaWZ5TWFzdGVyc01vZGFsKCk7IGUudGFyZ2V0LnJlc2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb25hLWlkJykuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtaWQnKS5wbGFjZWhvbGRlciA9ICdJRCBkZSBsYSBwZXJzb25hJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignI3BlcnNvbmEtaWQnKS5yZXF1aXJlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiUG9yIGZhdm9yLCBjb21wbGV0ZSB0b2RvcyBsb3MgY2FtcG9zIHJlcXVlcmlkb3MuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLnNlYXJjaFBlcnNvbmFJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHJlbmRlck1vZGlmeU1hc3RlcnNNb2RhbCk7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RldGFpbHMnKS5mb3JFYWNoKGRldGFpbCA9PiB7DQogICAgICAgICAgICAgICAgZGV0YWlsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvZ2dsZScsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyb3cgPSBkZXRhaWwucXVlcnlTZWxlY3RvcignLmRldGFpbHMtYXJyb3cnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYoYXJyb3cpIGFycm93LmNsYXNzTGlzdC50b2dnbGUoJ3JvdGF0ZS0xODAnLCBkZXRhaWwub3Blbik7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9tLnNhdmVDaGFuZ2VzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2F2ZUNoYW5nZXMpOw0KICAgICAgICAgICAgZG9tLmNyZWF0ZVBhcnRpdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNyZWF0ZVBhcnRpdGlvbik7DQogICAgICAgICAgICBkb20uaW1wb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZG9tLmltcG9ydEZpbGVJbnB1dC5jbGljaygpKTsNCiAgICAgICAgICAgIGRvbS5pbXBvcnRGaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlSW1wb3J0KTsNCg0KICAgICAgICAgICAgZG9tLmNhbmNlbEVkaXRSb3dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKGRvbS5lZGl0Um93TW9kYWwpKTsNCiAgICAgICAgICAgIGRvbS5jYW5jZWxTZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKGRvbS5zZWFyY2hNb2RhbCkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb20uc2F2ZVJvd0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IGUudGFyZ2V0LmRhdGFzZXQubW9kZTsNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3VwZGF0ZURheScpIHsNCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlVXBkYXRlRGF5KGUudGFyZ2V0LmRhdGFzZXQuaWQsIGUudGFyZ2V0LmRhdGFzZXQuZmVjaGEpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGhhbmRsZUFkZE5ld1JlY29yZHMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9tLmFwcGx5U2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQXBwbHlTZWFyY2gpOw0KICAgICAgICAgICAgZG9tLmFkZFNlYXJjaFJ1bGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBhZGRTZWFyY2hSdWxlVG9ET00oKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5kb3dubG9hZEZpbHRlcmVkWGxzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlRXhwb3J0VGFibGUoJ3hscycpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gLS0tIExJU1RFTkVSUyBERUwgU0lTVEVNQSBERSBBVklTT1MgRUxJTUlOQURPUyAtLS0NCiAgICAgICAgICAgIC8vIGRvbS5jYW5jZWxNYW5kYXRvcnlSZWdzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2xvc2VNb2RhbChkb20ubWFuZGF0b3J5UmVnc01vZGFsKSk7DQogICAgICAgICAgICAvLyBkb20uc2F2ZU1hbmRhdG9yeVJlZ3NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlTWFuZGF0b3J5UmVncyk7DQogICAgICAgICAgICAvLyBkb20ubWFuZGF0b3J5RGF0ZVBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJNYW5kYXRvcnlQZW9wbGVMaXN0KTsNCiAgICAgICAgICAgIC8vIGRvbS5kYWlseVdhcm5pbmdCYW5uZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93TWlzc2luZ1Blb3BsZUFsZXJ0KTsNCiAgICAgICAgICAgIC8vIGRvbS5jbG9zZVdhcm5pbmdzQXJjaGl2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLndhcm5pbmdzQXJjaGl2ZU1vZGFsKSk7DQogICAgICAgICAgICAvLyBkb20uZG93bmxvYWRXYXJuaW5nc1BkZkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUV4cG9ydFdhcm5pbmdzUERGKTsNCiAgICAgICAgICAgIC8vIGRvbS5vcGVuRXhjbHVkZWREYXlzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkV4Y2x1ZGVkRGF5c01vZGFsKTsNCiAgICAgICAgICAgIC8vIGRvbS5jbG9zZUV4Y2x1ZGVkRGF5c01vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgLy8gICAgIGNsb3NlTW9kYWwoZG9tLmV4Y2x1ZGVkRGF5c01vZGFsKTsNCiAgICAgICAgICAgIC8vICAgICBjaGVja0RhaWx5V2FybmluZ3MoKTsNCiAgICAgICAgICAgIC8vICAgICByZW5kZXJGaWx0ZXJlZFdhcm5pbmdzKCk7DQogICAgICAgICAgICAvLyB9KTsNCiAgICAgICAgICAgIC8vIGRvbS5wcmV2WWVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIC8vICAgICBleGNsdWRlZERheXNDdXJyZW50WWVhci0tOw0KICAgICAgICAgICAgLy8gICAgIHJlbmRlckV4Y2x1ZGVkRGF5c0NhbGVuZGFyKCk7DQogICAgICAgICAgICAvLyB9KTsNCiAgICAgICAgICAgIC8vIGRvbS5uZXh0WWVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIC8vICAgICBleGNsdWRlZERheXNDdXJyZW50WWVhcisrOw0KICAgICAgICAgICAgLy8gICAgIHJlbmRlckV4Y2x1ZGVkRGF5c0NhbGVuZGFyKCk7DQogICAgICAgICAgICAvLyB9KTsNCiAgICAgICAgICAgIC8vIGRvbS5tYW5kYXRvcnlSZWdzTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsgLi4uIH0pOw0KICAgICAgICAgICAgLy8gZG9tLnNlYXJjaE1hbmRhdG9yeVBlcnNvbi5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7IC4uLiB9KTsNCiAgICAgICAgICAgIC8vIC0tLSBGSU4gREUgTElTVEVORVJTIEVMSU1JTkFET1MgLS0tDQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5wZXJzb25EYXRhQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBlcnNvbkRhdGFNb2RhbCk7DQogICAgICAgICAgICBkb20uY2xvc2VQZXJzb25EYXRhTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKGRvbS5wZXJzb25EYXRhTW9kYWwpKTsNCiAgICAgICAgICAgIGRvbS5zZWFyY2hQZXJzb25EYXRhSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4gcmVuZGVyUGVyc29uRGF0YUxpc3QoZS50YXJnZXQudmFsdWUpKTsNCg0KICAgICAgICAgICAgZG9tLmdsb2JhbFN1bW1hcnlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuR2xvYmFsU3VtbWFyeU1vZGFsKTsNCiAgICAgICAgICAgIGRvbS5jbG9zZUdsb2JhbFN1bW1hcnlNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLmdsb2JhbFN1bW1hcnlNb2RhbCkpOw0KICAgICAgICAgICAgZG9tLnN1bW1hcnlDb21wYW55RmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlbmRlckdsb2JhbFN1bW1hcnlNb2RhbCk7DQogICAgICAgICAgICBkb20uc3VtbWFyeVBlcmlvZEZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJHbG9iYWxTdW1tYXJ5TW9kYWwpOw0KICAgICAgICAgICAgZG9tLnN1bW1hcnlTdGFydERhdGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVuZGVyR2xvYmFsU3VtbWFyeU1vZGFsKTsNCiAgICAgICAgICAgIGRvbS5zdW1tYXJ5RW5kRGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZW5kZXJHbG9iYWxTdW1tYXJ5TW9kYWwpOw0KICAgICAgICAgICAgZG9tLmNsZWFyU3VtbWFyeURhdGVzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGRvbS5zdW1tYXJ5U3RhcnREYXRlLnZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgZG9tLnN1bW1hcnlFbmREYXRlLnZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgcmVuZGVyR2xvYmFsU3VtbWFyeU1vZGFsKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGRvbS5kb3dubG9hZFN1bW1hcnlYbHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBoYW5kbGVFeHBvcnRHbG9iYWxTdW1tYXJ5KCd4bHMnKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvbS5jYW5jZWxFeHBvcnRCeVBlcnNvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwoZG9tLmV4cG9ydEJ5UGVyc29uTW9kYWwpKTsNCiAgICAgICAgICAgIGRvbS5jb25maXJtRXhwb3J0QnlQZXJzb25YbHNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVFeHBvcnRCeVBlcnNvblhMUyk7DQoNCg0KICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIChlKSA9PiB7IGlmIChzdGF0ZS5pc0RpcnR5KSB7IGUucHJldmVudERlZmF1bHQoKTsgZS5yZXR1cm5WYWx1ZSA9ICcnOyB9IH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBidWlsZFBlcnNvbk1hcHMoKTsNCiAgICAgICAgICAgIHJlbmRlcigpOw0KICAgICAgICAgICAgaW5pdEFJU3lzdGVtKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgaGFuZGxlQ2xlYXJGaWx0ZXIgPSAoKSA9PiB7IA0KICAgICAgICAgICAgc3RhdGUuYWN0aXZlRmlsdGVycyA9IFtdOyANCiAgICAgICAgICAgIHN0YXRlLmlzSW5pdGlhbExvYWQgPSB0cnVlOyAvLyBGb3J6YXIgcmVjw6FsY3VsbyBkZSBww6FnaW5hDQogICAgICAgICAgICByZW5kZXIoKTsgDQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgLy8gLS0tIEzDk0dJQ0EgREUgSUEgKE5PTUJSRVMgUEVSTUlUSURPUywgUkVHSVNUUk9TIFBSSVZBRE9TKSAtLS0NCiAgICAgICAgY29uc3QgaW5pdEFJU3lzdGVtID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnN1bHRhcy1haS1idG4nKTsNCiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpLXF1ZXJpZXMtbW9kYWwnKTsNCiAgICAgICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWFpLW1vZGFsJyk7DQogICAgICAgICAgICBjb25zdCBzZW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtYWktYnRuJyk7DQogICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaS1pbnB1dCcpOw0KICAgICAgICAgICAgY29uc3QgY2hhdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaS1jaGF0LWNvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpLWxvYWRpbmcnKTsNCiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9ICJBSXphU3lDRVJrRGVJUDkxZmdhYVZFTkxHZVNUVFV3a2xjZ2RsUk0iOw0KDQogICAgICAgICAgICBpZiAoIWJ0biB8fCAhbW9kYWwpIHJldHVybjsNCg0KICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyB9KTsNCiAgICAgICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9KTsNCg0KICAgICAgICAgICAgY29uc3QgYWRkTWVzc2FnZSA9ICh0ZXh0LCBpc1VzZXIgPSBmYWxzZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSBpc1VzZXIgPyAnYmctc2xhdGUtMjAwIHRleHQtc2xhdGUtODAwIHAtMyByb3VuZGVkLWxnIHRleHQtc20gbWwtOCBzZWxmLWVuZCcgOiAnYmctd2hpdGUgYm9yZGVyIHRleHQtZ3JheS04MDAgcC0zIHJvdW5kZWQtbGcgdGV4dC1zbSBtci04IHNoYWRvdy1zbSBzZWxmLXN0YXJ0JzsNCiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDsNCiAgICAgICAgICAgICAgICBjaGF0LmFwcGVuZENoaWxkKGRpdik7DQogICAgICAgICAgICAgICAgY2hhdC5zY3JvbGxUb3AgPSBjaGF0LnNjcm9sbEhlaWdodDsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IGdldEFnZ3JlZ2F0ZWREYXRhID0gKCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBzdGF0ZS50YWJsZXMuRGF0b3MuZGF0YTsNCiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gew0KICAgICAgICAgICAgICAgICAgICB0b3RhbGVzR2xvYmFsZXM6IHsgaG9yYXM6IDAsIGhuOiAwLCBoZTogMCB9LA0KICAgICAgICAgICAgICAgICAgICBwb3JQZXJzb25hOiB7fSwgLy8gVG90YWxlcyBwb3Igbm9tYnJlDQogICAgICAgICAgICAgICAgICAgIHBvckNvbmNlcHRvOiB7fSwNCiAgICAgICAgICAgICAgICAgICAgcG9yRW1wcmVzYToge30sDQogICAgICAgICAgICAgICAgICAgIGFic2VudGlzbW86IHt9DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBobiA9IHBhcnNlRmxvYXQoU3RyaW5nKHJvdy5ITiB8fCAwKS5yZXBsYWNlKCcsJywgJy4nKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlID0gcGFyc2VGbG9hdChTdHJpbmcocm93LkhFIHx8IDApLnJlcGxhY2UoJywnLCAnLicpKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWwgPSBobiArIGhlOw0KDQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnkudG90YWxlc0dsb2JhbGVzLmhvcmFzICs9IHRvdGFsOw0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LnRvdGFsZXNHbG9iYWxlcy5obiArPSBobjsNCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeS50b3RhbGVzR2xvYmFsZXMuaGUgKz0gaGU7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlID0gcm93Lk5vbWJyZSB8fCAiRGVzY29ub2NpZG8iOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXN1bW1hcnkucG9yUGVyc29uYVtub21icmVdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LnBvclBlcnNvbmFbbm9tYnJlXSA9IHsgdG90YWw6IDAsIGhuOiAwLCBoZTogMCwgZW1wcmVzYTogcm93LkVtcHJlc2EgfTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LnBvclBlcnNvbmFbbm9tYnJlXS50b3RhbCArPSB0b3RhbDsNCiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeS5wb3JQZXJzb25hW25vbWJyZV0uaG4gKz0gaG47DQogICAgICAgICAgICAgICAgICAgIHN1bW1hcnkucG9yUGVyc29uYVtub21icmVdLmhlICs9IGhlOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChyb3cuQ29uY2VwdG8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VtbWFyeS5wb3JDb25jZXB0b1tyb3cuQ29uY2VwdG9dKSBzdW1tYXJ5LnBvckNvbmNlcHRvW3Jvdy5Db25jZXB0b10gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeS5wb3JDb25jZXB0b1tyb3cuQ29uY2VwdG9dICs9IHRvdGFsOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyc29uID0gc3RhdGUuaWRUb1BlcnNvbk1hcFtyb3cuSURdIHx8IHt9Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbXByZXNhID0gcGVyc29uLmVtcHJlc2EgfHwgcm93LkVtcHJlc2EgfHwgJ04vQSc7DQogICAgICAgICAgICAgICAgICAgIGlmICghc3VtbWFyeS5wb3JFbXByZXNhW2VtcHJlc2FdKSBzdW1tYXJ5LnBvckVtcHJlc2FbZW1wcmVzYV0gPSAwOw0KICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LnBvckVtcHJlc2FbZW1wcmVzYV0gKz0gdG90YWw7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5BYnNlbnRpc21vICYmIHJvdy5BYnNlbnRpc21vICE9PSAnLScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnkuYWJzZW50aXNtb1tyb3cuQWJzZW50aXNtb10gPSAoc3VtbWFyeS5hYnNlbnRpc21vW3Jvdy5BYnNlbnRpc21vXSB8fCAwKSArIDE7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdW1tYXJ5KTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBpbnB1dC52YWx1ZS50cmltKCk7DQogICAgICAgICAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgYWRkTWVzc2FnZShxdWVyeSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJzsNCiAgICAgICAgICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU3VtbWFyeSA9IGdldEFnZ3JlZ2F0ZWREYXRhKCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gIkVyZXMgdW4gYW5hbGlzdGEgZXhwZXJ0byBwYXJhIHVuYSBVVEUuIFRpZW5lcyBhY2Nlc28gYSBsb3MgTk9NQlJFUyB5IEhPUkFTIFRPVEFMRVMgQUNVTVVMQURBUy4gTk8gdGllbmVzIGFjY2VzbyBhIGxvcyByZWdpc3Ryb3MgZGlhcmlvcy4gUmVzcG9uZGUgYmFzw6FuZG90ZSBlbiBsb3MgdG90YWxlcy4gRGF0b3MgYWN0dWFsZXM6ICIgKyBkYXRhU3VtbWFyeTsNCg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuNS1mbGFzaC1wcmV2aWV3LTA5LTIwMjU6Z2VuZXJhdGVDb250ZW50P2tleT0ke2FwaUtleX1gLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBbeyBwYXJ0czogW3sgdGV4dDogIkNvbnN1bHRhOiAiICsgcXVlcnkgfV0gfV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHsgcGFydHM6IFt7IHRleHQ6IHN5c3RlbVByb21wdCB9XSB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFpVGV4dCA9IHJlc3VsdC5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQ/LnBhcnRzPy5bMF0/LnRleHQgfHwgIk5vIGhlIHBvZGlkbyBvYnRlbmVyIHVuYSByZXNwdWVzdGEuIjsNCiAgICAgICAgICAgICAgICAgICAgYWRkTWVzc2FnZShhaVRleHQpOw0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKCJFcnJvciBkZSBjb25leGnDs24gY29uIGxhIElBLiIpOw0KICAgICAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHNlbmRCdG4uY2xpY2soKTsgfSk7DQogICAgICAgIH07DQoNCiAgICAgICAgcmV0dXJuIHsgaW5pdCB9Ow0KICAgIH0pKCk7DQoNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgQXBwLmluaXQpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgPCEtLSBNb2RhbCBkZSBDb25zdWx0YXMgSUEgLS0+DQogICAgPGRpdiBpZD0iYWktcXVlcmllcy1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCB6LVsxMDBdIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC02IHctZnVsbCBtYXgtdy0yeGwgZmxleCBmbGV4LWNvbCBtYXgtaC1bODV2aF0iPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTQgYm9yZGVyLWIgcGItNCI+DQogICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+DQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiZy1zbGF0ZS0xMDAgcC0yIHJvdW5kZWQtbGciPvCfpJY8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgIEFzaXN0ZW50ZSBJQSAtIERhdG9zIEFjdW11bGFkb3MNCiAgICAgICAgICAgICAgICA8L2gzPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImNsb3NlLWFpLW1vZGFsIiBjbGFzcz0idGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIHRleHQtMnhsIHRyYW5zaXRpb24tY29sb3JzIj4mdGltZXM7PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPGRpdiBpZD0iYWktY2hhdC1jb250YWluZXIiIGNsYXNzPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIG1iLTQgc3BhY2UteS00IHAtMiBiZy1ncmF5LTUwIHJvdW5kZWQtbGcgbWluLWgtWzMwMHB4XSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCBwLTMgcm91bmRlZC1sZyB0ZXh0LXNtIGJvcmRlciBib3JkZXItYmx1ZS0yMDAiPg0KICAgICAgICAgICAgICAgICAgICBIb2xhLiBUZW5nbyBhY2Nlc28gYSBsb3MgPGI+bm9tYnJlcyBkZWwgcGVyc29uYWw8L2I+IHkgc3VzIDxiPmhvcmFzIHRvdGFsZXMgYWN1bXVsYWRhczwvYj4uIExvcyByZWdpc3Ryb3MgZGlhcmlvcyBkZXRhbGxhZG9zIHBlcm1hbmVjZW4gcHJpdmFkb3MuIMK/UXXDqSBkZXNlYXMgY29uc3VsdGFyPw0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTIiPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYWktaW5wdXQiIGNsYXNzPSJmbGV4LWdyb3cgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHB4LTQgcHktMiBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1zbGF0ZS04MDAgb3V0bGluZS1ub25lIiBwbGFjZWhvbGRlcj0iRWo6IMK/Q3XDoW50YXMgaG9yYXMgbGxldmEgSnVhbiBHYXJjw61hPyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ic2VuZC1haS1idG4iIGNsYXNzPSJiZy1zbGF0ZS04MDAgdGV4dC13aGl0ZSBweC02IHB5LTIgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS05MDAgdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1ib2xkIHNoYWRvdy1tZCI+RW52aWFyPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImFpLWxvYWRpbmciIGNsYXNzPSJoaWRkZW4gdGV4dC1jZW50ZXIgdGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTIgYW5pbWF0ZS1wdWxzZSI+QW5hbGl6YW5kbyBzdW1hdG9yaW9zLi4uPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KPC9ib2R5Pg0KPC9odG1sPg=="}};

        function checkAccess() {
            const passInput = document.getElementById('entry-pass').value;
            const errorMsg = document.getElementById('error-msg');
            
            let found = false;
            for(let key in apps) {
                if(apps[key].p === passInput) {
                    launchApp(apps[key].c);
                    found = true;
                    break;
                }
            }

            if(!found) {
                errorMsg.classList.remove('hidden');
                document.getElementById('entry-pass').value = "";
                document.getElementById('entry-pass').focus();
            }
        }

        function launchApp(base64Content) {
            const decoded = decodeURIComponent(escape(atob(base64Content)));
            const frame = document.getElementById('app-frame');
            const login = document.getElementById('login-screen');
            
            // Ocultar login y mostrar frame
            login.style.display = 'none';
            document.body.className = "m-0 p-0 overflow-hidden";
            frame.style.display = 'block';
            
            // Inyectar contenido en el iframe
            const doc = frame.contentWindow.document;
            doc.open();
            doc.write(decoded);
            doc.close();
        }

        // Permitir pulsar Enter
        document.getElementById('entry-pass').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') checkAccess();
        });
    </script>
</body>
</html>